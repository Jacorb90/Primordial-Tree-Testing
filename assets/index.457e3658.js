import"./vue.03290593.js";import{a2 as y,y as El,u as rl,H as f,b3 as et,ae as H,x as U,aG as Ql,A as Xe,b4 as Qe,ac as a,U as V,aC as wl,av as gt,o as _,a4 as D,r as Mt,a5 as g,aJ as cl,F as ye,c as x,w as z,b9 as Ne,bs as Pe,au as ht,bu as ll,T as Bl,Y as En,ab as v,l as Bn,n as De,bv as Wl,aN as Be,a3 as L,O as ne,K as he,aP as de,M as re,aK as yt,aI as bt,D as Pt,bn as Dn,br as qn,aM as nl,ap as pl,L as Fn,bw as Nt,C as zl,be as An}from"./@vue.f16def16.js";import{i as On}from"./is-plain-object.906d88e8.js";import{c as en}from"./nanoevents.1080beb7.js";import{L as Ct}from"./lz-string.731cedc5.js";import{_ as te,C as Rn}from"./@ivanv.89b9fb6e.js";import{Y as Ln}from"./vue-next-select.b0c1cf10.js";import{D as Vn}from"./vuedraggable.5a5850e9.js";import{p as Gn}from"./vue-textarea-autosize.35804eaf.js";import{s as Un,u as tn}from"./vue-toastification.ce13befc.js";import{v as xn,n as jn}from"./workbox-window.8d14e8b7.js";import"./sortablejs.979fc46a.js";const Hn=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const u of r.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&n(u)}).observe(document,{childList:!0,subtree:!0});function l(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerpolicy&&(r.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?r.credentials="include":s.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(s){if(s.ep)return;s.ep=!0;const r=l(s);fetch(s.href,r)}};Hn();const Wn="modulepreload",Yl={},zn="./",vl=function(t,l){return!l||l.length===0?t():Promise.all(l.map(n=>{if(n=`${zn}${n}`,n in Yl)return;Yl[n]=!0;const s=n.endsWith(".css"),r=s?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${n}"]${r}`))return;const u=document.createElement("link");if(u.rel=s?"stylesheet":Wn,s||(u.as="script",u.crossOrigin=""),u.href=n,document.head.appendChild(u),s)return new Promise((o,c)=>{u.addEventListener("load",o),u.addEventListener("error",()=>c(new Error(`Unable to preload CSS for ${n}`)))})})).then(()=>t())},Yn="Primordia",Zn="primordius",Kn="Jacorb90",Jn="Jacorb's Games",Xn="https://discord.gg/wwQfgPa",Qn="1.3",ei="For the Senses",ti=!0,li=!1,ni=2,ii=!0,si=null,ai="",ri=["main"],oi=3600,ui=1,ci=!0,di="base64";var se={title:Yn,id:Zn,author:Kn,discordName:Jn,discordLink:Xn,versionNumber:Qn,versionTitle:ei,allowGoBack:ti,defaultShowSmall:li,defaultDecimalsShown:ni,useHeader:ii,banner:si,logo:ai,initialTabs:ri,maxTickLength:oi,offlineLimit:ui,enablePausing:ci,exportEncoding:di};const Sl=17,fi=9e15,mi=Math.log10(9e15),pi=1/9e15,vi=308,gi=-324,Zl=5,hi=function(){const e=[];for(let l=gi+1;l<=vi;l++)e.push(Number("1e"+l));const t=323;return function(l){return e[l+t]}}(),Et=[2,Math.E,3,4,5,6,7,8,9,10],yi=[[1,1.0891168053867777,1.1789745164521264,1.2701428397304229,1.3632066654400328,1.4587804913784246,1.557523817412741,1.660158301473385,1.767487542936873,1.8804205225512542,2],[1,1.1121114330934,1.23103892493161,1.35838369631113,1.49605193039935,1.64635423375119,1.81213853570186,1.99697132461829,2.20538955455724,2.44325744833852,Math.E],[1,1.1187738849693603,1.2464963939368214,1.38527004705667,1.5376664685821402,1.7068895236551784,1.897001227148399,2.1132403089001035,2.362480153784171,2.6539010333870774,3],[1,1.1367350847096405,1.2889510672956703,1.4606478703324786,1.6570295196661111,1.8850062585672889,2.1539465047453485,2.476829779693097,2.872061932789197,3.3664204535587183,4],[1,1.1494592900767588,1.319708228183931,1.5166291280087583,1.748171114438024,2.0253263297298045,2.3636668498288547,2.7858359149579424,3.3257226212448145,4.035730287722532,5],[1,1.159225940787673,1.343712473580932,1.5611293155111927,1.8221199554561318,2.14183924486326,2.542468319282638,3.0574682501653316,3.7390572020926873,4.6719550537360774,6],[1,1.1670905356972596,1.3632807444991446,1.5979222279405536,1.8842640123816674,2.2416069644878687,2.69893426559423,3.3012632110403577,4.121250340630164,5.281493033448316,7],[1,1.1736630594087796,1.379783782386201,1.6292821855668218,1.9378971836180754,2.3289975651071977,2.8384347394720835,3.5232708454565906,4.478242031114584,5.868592169644505,8],[1,1.1793017514670474,1.394054150657457,1.65664127441059,1.985170999970283,2.4069682290577457,2.9647310119960752,3.7278665320924946,4.814462547283592,6.436522247411611,9],[1,1.18422737399915,1.4066113788546144,1.680911177655277,2.027492094355525,2.4775152854601967,3.080455730250329,3.918234505962507,5.1332705696484595,6.9878696918072905,10]],bi=[[-1,-.9194161097107025,-.8335625019330468,-.7425599821143978,-.6466611521029437,-.5462617907227869,-.4419033816638769,-.3342645487554494,-.224140440909962,-.11241087890006762,0],[-1,-.90603157029014,-.80786507256596,-.7064666939634,-.60294836853664,-.49849837513117,-.39430303318768,-.29147201034755,-.19097820800866,-.09361896280296,0],[-1,-.9021579584316141,-.8005762598234203,-.6964780623319391,-.5911906810998454,-.486050182576545,-.3823089430815083,-.28106046722897615,-.1831906535795894,-.08935809204418144,0],[-1,-.8917227442365535,-.781258746326964,-.6705130326902455,-.5612813129406509,-.4551067709033134,-.35319256652135966,-.2563741554088552,-.1651412821106526,-.0796919581982668,0],[-1,-.8843387974366064,-.7678744063886243,-.6529563724510552,-.5415870994657841,-.4352842206588936,-.33504449124791424,-.24138853420685147,-.15445285440944467,-.07409659641336663,0],[-1,-.8786709358426346,-.7577735191184886,-.6399546189952064,-.527284921869926,-.4211627631006314,-.3223479611761232,-.23107655627789858,-.1472057700818259,-.07035171210706326,0],[-1,-.8740862815291583,-.7497032990976209,-.6297119746181752,-.5161838335958787,-.41036238255751956,-.31277212146489963,-.2233976621705518,-.1418697367979619,-.06762117662323441,0],[-1,-.8702632331800649,-.7430366914122081,-.6213373075161548,-.5072025698095242,-.40171437727184167,-.30517930701410456,-.21736343968190863,-.137710238299109,-.06550774483471955,0],[-1,-.8670016295947213,-.7373984232432306,-.6143173985094293,-.49973884395492807,-.394584953527678,-.2989649949848695,-.21245647317021688,-.13434688362382652,-.0638072667348083,0],[-1,-.8641642839543857,-.732534623168535,-.6083127477059322,-.4934049257184696,-.3885773075899922,-.29376029055315767,-.2083678561173622,-.13155653399373268,-.062401588652553186,0]],N=function(t){return i.fromValue_noAlloc(t)},W=function(e,t,l){return i.fromComponents(e,t,l)},J=function(t,l,n){return i.fromComponents_noNormalize(t,l,n)},_t=function(t,l){const n=l+1,s=Math.ceil(Math.log10(Math.abs(t))),r=Math.round(t*Math.pow(10,n-s))*Math.pow(10,s-n);return parseFloat(r.toFixed(Math.max(n-s,0)))},Ml=function(e){return Math.sign(e)*Math.log10(Math.abs(e))},wi=function(e){if(!isFinite(e))return e;if(e<-50)return e===Math.trunc(e)?Number.NEGATIVE_INFINITY:0;let t=1;for(;e<10;)t=t*e,++e;e-=1;let l=.9189385332046727;l=l+(e+.5)*Math.log(e),l=l-e;const n=e*e;let s=e;return l=l+1/(12*s),s=s*n,l=l+1/(360*s),s=s*n,l=l+1/(1260*s),s=s*n,l=l+1/(1680*s),s=s*n,l=l+1/(1188*s),s=s*n,l=l+691/(360360*s),s=s*n,l=l+7/(1092*s),s=s*n,l=l+3617/(122400*s),Math.exp(l)/t},ln=.5671432904097838,Kl=function(e,t=1e-10){let l,n;if(!Number.isFinite(e)||e===0)return e;if(e===1)return ln;e<10?l=0:l=Math.log(e)-Math.log(Math.log(e));for(let s=0;s<100;++s){if(n=(e*Math.exp(-l)+l*l)/(l+1),Math.abs(n-l)<t*Math.abs(n))return n;l=n}throw Error(`Iteration failed to converge: ${e.toString()}`)};function Jl(e,t=1e-10){let l,n,s,r;if(!Number.isFinite(e.mag)||e===i.dZero)return e;if(e===i.dOne)return N(ln);i.abs(e),l=i.ln(e);for(let u=0;u<100;++u){if(n=i.exp(-l),s=l.sub(e.mul(n)),r=l.sub(s.div(l.add(1).sub(l.add(2).mul(s).div(i.mul(2,l).add(2))))),i.abs(r.sub(l)).lt(i.abs(r).mul(t)))return r;l=r}throw Error(`Iteration failed to converge: ${e.toString()}`)}const T=class{constructor(e){this.sign=Number.NaN,this.mag=Number.NaN,this.layer=Number.NaN,e instanceof T||e!=null&&typeof e=="object"&&"sign"in e&&"mag"in e&&"layer"in e?this.fromDecimal(e):typeof e=="number"?this.fromNumber(e):typeof e=="string"?this.fromString(e):(this.sign=0,this.layer=0,this.mag=0)}get m(){if(this.sign===0)return 0;if(this.layer===0){const e=Math.floor(Math.log10(this.mag));let t;return this.mag===5e-324?t=5:t=this.mag/hi(e),this.sign*t}else if(this.layer===1){const e=this.mag-Math.floor(this.mag);return this.sign*Math.pow(10,e)}else return this.sign}set m(e){this.layer<=2?this.fromMantissaExponent(e,this.e):(this.sign=Math.sign(e),this.sign===0&&(this.layer,this.exponent))}get e(){return this.sign===0?0:this.layer===0?Math.floor(Math.log10(this.mag)):this.layer===1?Math.floor(this.mag):this.layer===2?Math.floor(Math.sign(this.mag)*Math.pow(10,Math.abs(this.mag))):this.mag*Number.POSITIVE_INFINITY}set e(e){this.fromMantissaExponent(this.m,e)}get s(){return this.sign}set s(e){e===0?(this.sign=0,this.layer=0,this.mag=0):this.sign=e}get mantissa(){return this.m}set mantissa(e){this.m=e}get exponent(){return this.e}set exponent(e){this.e=e}static fromComponents(e,t,l){return new T().fromComponents(e,t,l)}static fromComponents_noNormalize(e,t,l){return new T().fromComponents_noNormalize(e,t,l)}static fromMantissaExponent(e,t){return new T().fromMantissaExponent(e,t)}static fromMantissaExponent_noNormalize(e,t){return new T().fromMantissaExponent_noNormalize(e,t)}static fromDecimal(e){return new T().fromDecimal(e)}static fromNumber(e){return new T().fromNumber(e)}static fromString(e){return new T().fromString(e)}static fromValue(e){return new T().fromValue(e)}static fromValue_noAlloc(e){return e instanceof T?e:new T(e)}static abs(e){return N(e).abs()}static neg(e){return N(e).neg()}static negate(e){return N(e).neg()}static negated(e){return N(e).neg()}static sign(e){return N(e).sign}static sgn(e){return N(e).sign}static round(e){return N(e).round()}static floor(e){return N(e).floor()}static ceil(e){return N(e).ceil()}static trunc(e){return N(e).trunc()}static add(e,t){return N(e).add(t)}static plus(e,t){return N(e).add(t)}static sub(e,t){return N(e).sub(t)}static subtract(e,t){return N(e).sub(t)}static minus(e,t){return N(e).sub(t)}static mul(e,t){return N(e).mul(t)}static multiply(e,t){return N(e).mul(t)}static times(e,t){return N(e).mul(t)}static div(e,t){return N(e).div(t)}static divide(e,t){return N(e).div(t)}static recip(e){return N(e).recip()}static reciprocal(e){return N(e).recip()}static reciprocate(e){return N(e).reciprocate()}static cmp(e,t){return N(e).cmp(t)}static cmpabs(e,t){return N(e).cmpabs(t)}static compare(e,t){return N(e).cmp(t)}static isNaN(e){return e=N(e),isNaN(e.sign)||isNaN(e.layer)||isNaN(e.mag)}static isFinite(e){return e=N(e),isFinite(e.sign)&&isFinite(e.layer)&&isFinite(e.mag)}static eq(e,t){return N(e).eq(t)}static equals(e,t){return N(e).eq(t)}static neq(e,t){return N(e).neq(t)}static notEquals(e,t){return N(e).notEquals(t)}static lt(e,t){return N(e).lt(t)}static lte(e,t){return N(e).lte(t)}static gt(e,t){return N(e).gt(t)}static gte(e,t){return N(e).gte(t)}static max(e,t){return N(e).max(t)}static min(e,t){return N(e).min(t)}static minabs(e,t){return N(e).minabs(t)}static maxabs(e,t){return N(e).maxabs(t)}static clamp(e,t,l){return N(e).clamp(t,l)}static clampMin(e,t){return N(e).clampMin(t)}static clampMax(e,t){return N(e).clampMax(t)}static cmp_tolerance(e,t,l){return N(e).cmp_tolerance(t,l)}static compare_tolerance(e,t,l){return N(e).cmp_tolerance(t,l)}static eq_tolerance(e,t,l){return N(e).eq_tolerance(t,l)}static equals_tolerance(e,t,l){return N(e).eq_tolerance(t,l)}static neq_tolerance(e,t,l){return N(e).neq_tolerance(t,l)}static notEquals_tolerance(e,t,l){return N(e).notEquals_tolerance(t,l)}static lt_tolerance(e,t,l){return N(e).lt_tolerance(t,l)}static lte_tolerance(e,t,l){return N(e).lte_tolerance(t,l)}static gt_tolerance(e,t,l){return N(e).gt_tolerance(t,l)}static gte_tolerance(e,t,l){return N(e).gte_tolerance(t,l)}static pLog10(e){return N(e).pLog10()}static absLog10(e){return N(e).absLog10()}static log10(e){return N(e).log10()}static log(e,t){return N(e).log(t)}static log2(e){return N(e).log2()}static ln(e){return N(e).ln()}static logarithm(e,t){return N(e).logarithm(t)}static pow(e,t){return N(e).pow(t)}static pow10(e){return N(e).pow10()}static root(e,t){return N(e).root(t)}static factorial(e,t){return N(e).factorial()}static gamma(e,t){return N(e).gamma()}static lngamma(e,t){return N(e).lngamma()}static exp(e){return N(e).exp()}static sqr(e){return N(e).sqr()}static sqrt(e){return N(e).sqrt()}static cube(e){return N(e).cube()}static cbrt(e){return N(e).cbrt()}static tetrate(e,t=2,l=J(1,0,1)){return N(e).tetrate(t,l)}static iteratedexp(e,t=2,l=J(1,0,1)){return N(e).iteratedexp(t,l)}static iteratedlog(e,t=10,l=1){return N(e).iteratedlog(t,l)}static layeradd10(e,t){return N(e).layeradd10(t)}static layeradd(e,t,l=10){return N(e).layeradd(t,l)}static slog(e,t=10){return N(e).slog(t)}static lambertw(e){return N(e).lambertw()}static ssqrt(e){return N(e).ssqrt()}static pentate(e,t=2,l=J(1,0,1)){return N(e).pentate(t,l)}static affordGeometricSeries(e,t,l,n){return this.affordGeometricSeries_core(N(e),N(t),N(l),n)}static sumGeometricSeries(e,t,l,n){return this.sumGeometricSeries_core(e,N(t),N(l),n)}static affordArithmeticSeries(e,t,l,n){return this.affordArithmeticSeries_core(N(e),N(t),N(l),N(n))}static sumArithmeticSeries(e,t,l,n){return this.sumArithmeticSeries_core(N(e),N(t),N(l),N(n))}static efficiencyOfPurchase(e,t,l){return this.efficiencyOfPurchase_core(N(e),N(t),N(l))}static randomDecimalForTesting(e){if(Math.random()*20<1)return J(0,0,0);const t=Math.random()>.5?1:-1;if(Math.random()*20<1)return J(t,0,1);const l=Math.floor(Math.random()*(e+1));let n=l===0?Math.random()*616-308:Math.random()*16;Math.random()>.9&&(n=Math.trunc(n));let s=Math.pow(10,n);return Math.random()>.9&&(s=Math.trunc(s)),W(t,l,s)}static affordGeometricSeries_core(e,t,l,n){const s=t.mul(l.pow(n));return T.floor(e.div(s).mul(l.sub(1)).add(1).log10().div(l.log10()))}static sumGeometricSeries_core(e,t,l,n){return t.mul(l.pow(n)).mul(T.sub(1,l.pow(e))).div(T.sub(1,l))}static affordArithmeticSeries_core(e,t,l,n){const r=t.add(n.mul(l)).sub(l.div(2)),u=r.pow(2);return r.neg().add(u.add(l.mul(e).mul(2)).sqrt()).div(l).floor()}static sumArithmeticSeries_core(e,t,l,n){const s=t.add(n.mul(l));return e.div(2).mul(s.mul(2).plus(e.sub(1).mul(l)))}static efficiencyOfPurchase_core(e,t,l){return e.div(t).add(e.div(l))}normalize(){if(this.sign===0||this.mag===0&&this.layer===0)return this.sign=0,this.mag=0,this.layer=0,this;if(this.layer===0&&this.mag<0&&(this.mag=-this.mag,this.sign=-this.sign),this.layer===0&&this.mag<pi)return this.layer+=1,this.mag=Math.log10(this.mag),this;let e=Math.abs(this.mag),t=Math.sign(this.mag);if(e>=fi)return this.layer+=1,this.mag=t*Math.log10(e),this;for(;e<mi&&this.layer>0;)this.layer-=1,this.layer===0?this.mag=Math.pow(10,this.mag):(this.mag=t*Math.pow(10,e),e=Math.abs(this.mag),t=Math.sign(this.mag));return this.layer===0&&(this.mag<0?(this.mag=-this.mag,this.sign=-this.sign):this.mag===0&&(this.sign=0)),this}fromComponents(e,t,l){return this.sign=e,this.layer=t,this.mag=l,this.normalize(),this}fromComponents_noNormalize(e,t,l){return this.sign=e,this.layer=t,this.mag=l,this}fromMantissaExponent(e,t){return this.layer=1,this.sign=Math.sign(e),e=Math.abs(e),this.mag=t+Math.log10(e),this.normalize(),this}fromMantissaExponent_noNormalize(e,t){return this.fromMantissaExponent(e,t),this}fromDecimal(e){return this.sign=e.sign,this.layer=e.layer,this.mag=e.mag,this}fromNumber(e){return this.mag=Math.abs(e),this.sign=Math.sign(e),this.layer=0,this.normalize(),this}fromString(e){e=e.replace(",","");const t=e.split("^^^");if(t.length===2){const m=parseFloat(t[0]),h=parseFloat(t[1]),p=t[1].split(";");let S=1;if(p.length===2&&(S=parseFloat(p[1]),isFinite(S)||(S=1)),isFinite(m)&&isFinite(h)){const C=T.pentate(m,h,S);return this.sign=C.sign,this.layer=C.layer,this.mag=C.mag,this}}const l=e.split("^^");if(l.length===2){const m=parseFloat(l[0]),h=parseFloat(l[1]),p=l[1].split(";");let S=1;if(p.length===2&&(S=parseFloat(p[1]),isFinite(S)||(S=1)),isFinite(m)&&isFinite(h)){const C=T.tetrate(m,h,S);return this.sign=C.sign,this.layer=C.layer,this.mag=C.mag,this}}const n=e.split("^");if(n.length===2){const m=parseFloat(n[0]),h=parseFloat(n[1]);if(isFinite(m)&&isFinite(h)){const p=T.pow(m,h);return this.sign=p.sign,this.layer=p.layer,this.mag=p.mag,this}}e=e.trim().toLowerCase();let s,r,u=e.split("pt");if(u.length===2){s=10,r=parseFloat(u[0]),u[1]=u[1].replace("(",""),u[1]=u[1].replace(")","");let m=parseFloat(u[1]);if(isFinite(m)||(m=1),isFinite(s)&&isFinite(r)){const h=T.tetrate(s,r,m);return this.sign=h.sign,this.layer=h.layer,this.mag=h.mag,this}}if(u=e.split("p"),u.length===2){s=10,r=parseFloat(u[0]),u[1]=u[1].replace("(",""),u[1]=u[1].replace(")","");let m=parseFloat(u[1]);if(isFinite(m)||(m=1),isFinite(s)&&isFinite(r)){const h=T.tetrate(s,r,m);return this.sign=h.sign,this.layer=h.layer,this.mag=h.mag,this}}const o=e.split("e"),c=o.length-1;if(c===0){const m=parseFloat(e);if(isFinite(m))return this.fromNumber(m)}else if(c===1){const m=parseFloat(e);if(isFinite(m)&&m!==0)return this.fromNumber(m)}const d=e.split("e^");if(d.length===2){this.sign=1,d[0].charAt(0)=="-"&&(this.sign=-1);let m="";for(let h=0;h<d[1].length;++h){const p=d[1].charCodeAt(h);if(p>=43&&p<=57||p===101)m+=d[1].charAt(h);else return this.layer=parseFloat(m),this.mag=parseFloat(d[1].substr(h+1)),this.normalize(),this}}if(c<1)return this.sign=0,this.layer=0,this.mag=0,this;const w=parseFloat(o[0]);if(w===0)return this.sign=0,this.layer=0,this.mag=0,this;let b=parseFloat(o[o.length-1]);if(c>=2){const m=parseFloat(o[o.length-2]);isFinite(m)&&(b*=Math.sign(m),b+=Ml(m))}if(!isFinite(w))this.sign=o[0]==="-"?-1:1,this.layer=c,this.mag=b;else if(c===1)this.sign=Math.sign(w),this.layer=1,this.mag=b+Math.log10(Math.abs(w));else if(this.sign=Math.sign(w),this.layer=c,c===2){const m=T.mul(W(1,2,b),N(w));return this.sign=m.sign,this.layer=m.layer,this.mag=m.mag,this}else this.mag=b;return this.normalize(),this}fromValue(e){return e instanceof T||e!=null&&typeof e=="object"&&"sign"in e&&"mag"in e&&"layer"in e?this.fromDecimal(e):typeof e=="number"?this.fromNumber(e):typeof e=="string"?this.fromString(e):(this.sign=0,this.layer=0,this.mag=0,this)}toNumber(){return Number.isFinite(this.layer)?this.layer===0?this.sign*this.mag:this.layer===1?this.sign*Math.pow(10,this.mag):this.mag>0?this.sign>0?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:0:Number.NaN}mantissaWithDecimalPlaces(e){return isNaN(this.m)?Number.NaN:this.m===0?0:_t(this.m,e)}magnitudeWithDecimalPlaces(e){return isNaN(this.mag)?Number.NaN:this.mag===0?0:_t(this.mag,e)}toString(){return isNaN(this.layer)||isNaN(this.sign)||isNaN(this.mag)?"NaN":this.mag===Number.POSITIVE_INFINITY||this.layer===Number.POSITIVE_INFINITY?this.sign===1?"Infinity":"-Infinity":this.layer===0?this.mag<1e21&&this.mag>1e-7||this.mag===0?(this.sign*this.mag).toString():this.m+"e"+this.e:this.layer===1?this.m+"e"+this.e:this.layer<=Zl?(this.sign===-1?"-":"")+"e".repeat(this.layer)+this.mag:(this.sign===-1?"-":"")+"(e^"+this.layer+")"+this.mag}toExponential(e){return this.layer===0?(this.sign*this.mag).toExponential(e):this.toStringWithDecimalPlaces(e)}toFixed(e){return this.layer===0?(this.sign*this.mag).toFixed(e):this.toStringWithDecimalPlaces(e)}toPrecision(e){return this.e<=-7?this.toExponential(e-1):e>this.e?this.toFixed(e-this.exponent-1):this.toExponential(e-1)}valueOf(){return this.toString()}toJSON(){return this.toString()}toStringWithDecimalPlaces(e){return this.layer===0?this.mag<1e21&&this.mag>1e-7||this.mag===0?(this.sign*this.mag).toFixed(e):_t(this.m,e)+"e"+_t(this.e,e):this.layer===1?_t(this.m,e)+"e"+_t(this.e,e):this.layer<=Zl?(this.sign===-1?"-":"")+"e".repeat(this.layer)+_t(this.mag,e):(this.sign===-1?"-":"")+"(e^"+this.layer+")"+_t(this.mag,e)}abs(){return J(this.sign===0?0:1,this.layer,this.mag)}neg(){return J(-this.sign,this.layer,this.mag)}negate(){return this.neg()}negated(){return this.neg()}sgn(){return this.sign}round(){return this.mag<0?T.dZero:this.layer===0?W(this.sign,0,Math.round(this.mag)):this}floor(){return this.mag<0?T.dZero:this.layer===0?W(this.sign,0,Math.floor(this.mag)):this}ceil(){return this.mag<0?T.dZero:this.layer===0?W(this.sign,0,Math.ceil(this.mag)):this}trunc(){return this.mag<0?T.dZero:this.layer===0?W(this.sign,0,Math.trunc(this.mag)):this}add(e){const t=N(e);if(!Number.isFinite(this.layer))return this;if(!Number.isFinite(t.layer)||this.sign===0)return t;if(t.sign===0)return this;if(this.sign===-t.sign&&this.layer===t.layer&&this.mag===t.mag)return J(0,0,0);let l,n;if(this.layer>=2||t.layer>=2)return this.maxabs(t);if(T.cmpabs(this,t)>0?(l=this,n=t):(l=t,n=this),l.layer===0&&n.layer===0)return N(l.sign*l.mag+n.sign*n.mag);const s=l.layer*Math.sign(l.mag),r=n.layer*Math.sign(n.mag);if(s-r>=2)return l;if(s===0&&r===-1){if(Math.abs(n.mag-Math.log10(l.mag))>Sl)return l;{const u=Math.pow(10,Math.log10(l.mag)-n.mag),o=n.sign+l.sign*u;return W(Math.sign(o),1,n.mag+Math.log10(Math.abs(o)))}}if(s===1&&r===0){if(Math.abs(l.mag-Math.log10(n.mag))>Sl)return l;{const u=Math.pow(10,l.mag-Math.log10(n.mag)),o=n.sign+l.sign*u;return W(Math.sign(o),1,Math.log10(n.mag)+Math.log10(Math.abs(o)))}}if(Math.abs(l.mag-n.mag)>Sl)return l;{const u=Math.pow(10,l.mag-n.mag),o=n.sign+l.sign*u;return W(Math.sign(o),1,n.mag+Math.log10(Math.abs(o)))}}plus(e){return this.add(e)}sub(e){return this.add(N(e).neg())}subtract(e){return this.sub(e)}minus(e){return this.sub(e)}mul(e){const t=N(e);if(!Number.isFinite(this.layer))return this;if(!Number.isFinite(t.layer))return t;if(this.sign===0||t.sign===0)return J(0,0,0);if(this.layer===t.layer&&this.mag===-t.mag)return J(this.sign*t.sign,0,1);let l,n;if(this.layer>t.layer||this.layer==t.layer&&Math.abs(this.mag)>Math.abs(t.mag)?(l=this,n=t):(l=t,n=this),l.layer===0&&n.layer===0)return N(l.sign*n.sign*l.mag*n.mag);if(l.layer>=3||l.layer-n.layer>=2)return W(l.sign*n.sign,l.layer,l.mag);if(l.layer===1&&n.layer===0)return W(l.sign*n.sign,1,l.mag+Math.log10(n.mag));if(l.layer===1&&n.layer===1)return W(l.sign*n.sign,1,l.mag+n.mag);if(l.layer===2&&n.layer===1){const s=W(Math.sign(l.mag),l.layer-1,Math.abs(l.mag)).add(W(Math.sign(n.mag),n.layer-1,Math.abs(n.mag)));return W(l.sign*n.sign,s.layer+1,s.sign*s.mag)}if(l.layer===2&&n.layer===2){const s=W(Math.sign(l.mag),l.layer-1,Math.abs(l.mag)).add(W(Math.sign(n.mag),n.layer-1,Math.abs(n.mag)));return W(l.sign*n.sign,s.layer+1,s.sign*s.mag)}throw Error("Bad arguments to mul: "+this+", "+e)}multiply(e){return this.mul(e)}times(e){return this.mul(e)}div(e){const t=N(e);return this.mul(t.recip())}divide(e){return this.div(e)}divideBy(e){return this.div(e)}dividedBy(e){return this.div(e)}recip(){return this.mag===0?T.dNaN:this.layer===0?W(this.sign,0,1/this.mag):W(this.sign,this.layer,-this.mag)}reciprocal(){return this.recip()}reciprocate(){return this.recip()}cmp(e){const t=N(e);return this.sign>t.sign?1:this.sign<t.sign?-1:this.sign*this.cmpabs(e)}cmpabs(e){const t=N(e),l=this.mag>0?this.layer:-this.layer,n=t.mag>0?t.layer:-t.layer;return l>n?1:l<n?-1:this.mag>t.mag?1:this.mag<t.mag?-1:0}compare(e){return this.cmp(e)}isNan(){return isNaN(this.sign)||isNaN(this.layer)||isNaN(this.mag)}isFinite(){return isFinite(this.sign)&&isFinite(this.layer)&&isFinite(this.mag)}eq(e){const t=N(e);return this.sign===t.sign&&this.layer===t.layer&&this.mag===t.mag}equals(e){return this.eq(e)}neq(e){return!this.eq(e)}notEquals(e){return this.neq(e)}lt(e){return this.cmp(e)===-1}lte(e){return!this.gt(e)}gt(e){return this.cmp(e)===1}gte(e){return!this.lt(e)}max(e){const t=N(e);return this.lt(t)?t:this}min(e){const t=N(e);return this.gt(t)?t:this}maxabs(e){const t=N(e);return this.cmpabs(t)<0?t:this}minabs(e){const t=N(e);return this.cmpabs(t)>0?t:this}clamp(e,t){return this.max(e).min(t)}clampMin(e){return this.max(e)}clampMax(e){return this.min(e)}cmp_tolerance(e,t){const l=N(e);return this.eq_tolerance(l,t)?0:this.cmp(l)}compare_tolerance(e,t){return this.cmp_tolerance(e,t)}eq_tolerance(e,t){const l=N(e);if(t==null&&(t=1e-7),this.sign!==l.sign||Math.abs(this.layer-l.layer)>1)return!1;let n=this.mag,s=l.mag;return this.layer>l.layer&&(s=Ml(s)),this.layer<l.layer&&(n=Ml(n)),Math.abs(n-s)<=t*Math.max(Math.abs(n),Math.abs(s))}equals_tolerance(e,t){return this.eq_tolerance(e,t)}neq_tolerance(e,t){return!this.eq_tolerance(e,t)}notEquals_tolerance(e,t){return this.neq_tolerance(e,t)}lt_tolerance(e,t){const l=N(e);return!this.eq_tolerance(l,t)&&this.lt(l)}lte_tolerance(e,t){const l=N(e);return this.eq_tolerance(l,t)||this.lt(l)}gt_tolerance(e,t){const l=N(e);return!this.eq_tolerance(l,t)&&this.gt(l)}gte_tolerance(e,t){const l=N(e);return this.eq_tolerance(l,t)||this.gt(l)}pLog10(){return this.lt(T.dZero)?T.dZero:this.log10()}absLog10(){return this.sign===0?T.dNaN:this.layer>0?W(Math.sign(this.mag),this.layer-1,Math.abs(this.mag)):W(1,0,Math.log10(this.mag))}log10(){return this.sign<=0?T.dNaN:this.layer>0?W(Math.sign(this.mag),this.layer-1,Math.abs(this.mag)):W(this.sign,0,Math.log10(this.mag))}log(e){return e=N(e),this.sign<=0||e.sign<=0||e.sign===1&&e.layer===0&&e.mag===1?T.dNaN:this.layer===0&&e.layer===0?W(this.sign,0,Math.log(this.mag)/Math.log(e.mag)):T.div(this.log10(),e.log10())}log2(){return this.sign<=0?T.dNaN:this.layer===0?W(this.sign,0,Math.log2(this.mag)):this.layer===1?W(Math.sign(this.mag),0,Math.abs(this.mag)*3.321928094887362):this.layer===2?W(Math.sign(this.mag),1,Math.abs(this.mag)+.5213902276543247):W(Math.sign(this.mag),this.layer-1,Math.abs(this.mag))}ln(){return this.sign<=0?T.dNaN:this.layer===0?W(this.sign,0,Math.log(this.mag)):this.layer===1?W(Math.sign(this.mag),0,Math.abs(this.mag)*2.302585092994046):this.layer===2?W(Math.sign(this.mag),1,Math.abs(this.mag)+.36221568869946325):W(Math.sign(this.mag),this.layer-1,Math.abs(this.mag))}logarithm(e){return this.log(e)}pow(e){const t=N(e),l=this,n=t;if(l.sign===0)return n.eq(0)?J(1,0,1):l;if(l.sign===1&&l.layer===0&&l.mag===1)return l;if(n.sign===0)return J(1,0,1);if(n.sign===1&&n.layer===0&&n.mag===1)return l;const s=l.absLog10().mul(n).pow10();return this.sign===-1?Math.abs(n.toNumber()%2)%2===1?s.neg():Math.abs(n.toNumber()%2)%2===0?s:T.dNaN:s}pow10(){if(!Number.isFinite(this.layer)||!Number.isFinite(this.mag))return T.dNaN;let e=this;if(e.layer===0){const t=Math.pow(10,e.sign*e.mag);if(Number.isFinite(t)&&Math.abs(t)>=.1)return W(1,0,t);if(e.sign===0)return T.dOne;e=J(e.sign,e.layer+1,Math.log10(e.mag))}return e.sign>0&&e.mag>=0?W(e.sign,e.layer+1,e.mag):e.sign<0&&e.mag>=0?W(-e.sign,e.layer+1,-e.mag):T.dOne}pow_base(e){return N(e).pow(this)}root(e){const t=N(e);return this.pow(t.recip())}factorial(){return this.mag<0?this.add(1).gamma():this.layer===0?this.add(1).gamma():this.layer===1?T.exp(T.mul(this,T.ln(this).sub(1))):T.exp(this)}gamma(){if(this.mag<0)return this.recip();if(this.layer===0){if(this.lt(J(1,0,24)))return N(wi(this.sign*this.mag));const e=this.mag-1;let t=.9189385332046727;t=t+(e+.5)*Math.log(e),t=t-e;const l=e*e;let n=e,s=12*n,r=1/s,u=t+r;if(u===t||(t=u,n=n*l,s=360*n,r=1/s,u=t-r,u===t))return T.exp(t);t=u,n=n*l,s=1260*n;let o=1/s;return t=t+o,n=n*l,s=1680*n,o=1/s,t=t-o,T.exp(t)}else return this.layer===1?T.exp(T.mul(this,T.ln(this).sub(1))):T.exp(this)}lngamma(){return this.gamma().ln()}exp(){return this.mag<0?T.dOne:this.layer===0&&this.mag<=709.7?N(Math.exp(this.sign*this.mag)):this.layer===0?W(1,1,this.sign*Math.log10(Math.E)*this.mag):this.layer===1?W(1,2,this.sign*(Math.log10(.4342944819032518)+this.mag)):W(1,this.layer+1,this.sign*this.mag)}sqr(){return this.pow(2)}sqrt(){if(this.layer===0)return N(Math.sqrt(this.sign*this.mag));if(this.layer===1)return W(1,2,Math.log10(this.mag)-.3010299956639812);{const e=T.div(J(this.sign,this.layer-1,this.mag),J(1,0,2));return e.layer+=1,e.normalize(),e}}cube(){return this.pow(3)}cbrt(){return this.pow(1/3)}tetrate(e=2,t=J(1,0,1)){if(e===1)return T.pow(this,t);if(e===0)return new T(t);if(this.eq(T.dOne))return T.dOne;if(this.eq(-1))return T.pow(this,t);if(e===Number.POSITIVE_INFINITY){const s=this.toNumber();if(s<=1.444667861009766&&s>=.06598803584531254){if(s>1.444667861009099)return new T(Math.E);const r=T.ln(this).neg();return r.lambertw().div(r)}else return s>1.444667861009766?new T(Number.POSITIVE_INFINITY):T.dNaN}if(this.eq(T.dZero)){let s=Math.abs((e+1)%2);return s>1&&(s=2-s),new T(s)}if(e<0)return T.iteratedlog(t,this,-e);t=N(t);const l=e;e=Math.trunc(e);const n=l-e;if(this.gt(T.dZero)&&this.lte(1.444667861009766)){e=Math.min(1e4,e);for(let s=0;s<e;++s){const r=t;if(t=this.pow(t),r.eq(t))return t}if(n!=0){const s=this.pow(t);return t.mul(1-n).add(s.mul(n))}return t}n!==0&&(t.eq(T.dOne)?this.gt(10)?t=this.pow(n):(t=N(T.tetrate_critical(this.toNumber(),n)),this.lt(2)&&(t=t.sub(1).mul(this.minus(1)).plus(1))):this.eq(10)?t=t.layeradd10(n):t=t.layeradd(n,this));for(let s=0;s<e;++s){if(t=this.pow(t),!isFinite(t.layer)||!isFinite(t.mag))return t.normalize();if(t.layer-this.layer>3)return J(t.sign,t.layer+(e-s-1),t.mag);if(s>1e4)return t}return t}iteratedexp(e=2,t=J(1,0,1)){return this.tetrate(e,t)}iteratedlog(e=10,t=1){if(t<0)return T.tetrate(e,-t,this);e=N(e);let l=N(this);const n=t;t=Math.trunc(t);const s=n-t;if(l.layer-e.layer>3){const r=Math.min(t,l.layer-e.layer-3);t-=r,l.layer-=r}for(let r=0;r<t;++r){if(l=l.log(e),!isFinite(l.layer)||!isFinite(l.mag))return l.normalize();if(r>1e4)return l}return s>0&&s<1&&(e.eq(10)?l=l.layeradd10(-s):l=l.layeradd(-s,e)),l}slog(e=10){if(e=N(e),e.lte(T.dZero)||e.eq(T.dOne))return T.dNaN;if(e.lt(T.dOne))return this.eq(T.dOne)?T.dZero:this.eq(T.dZero)?T.dNegOne:T.dNaN;if(this.mag<0||this.eq(T.dZero))return T.dNegOne;let t=0,l=N(this);if(l.layer-e.layer>3){const n=l.layer-e.layer-3;t+=n,l.layer-=n}for(let n=0;n<100;++n)if(l.lt(T.dZero))l=T.pow(e,l),t-=1;else{if(l.lte(T.dOne))return N(t+T.slog_critical(e.toNumber(),l.toNumber()));t+=1,l=T.log(l,e)}return N(t)}static slog_critical(e,t){return e>10?t-1:T.critical_section(e,t,bi)}static tetrate_critical(e,t){return T.critical_section(e,t,yi)}static critical_section(e,t,l){t*=10,t<0&&(t=0),t>10&&(t=10),e<2&&(e=2),e>10&&(e=10);let n=0,s=0;for(let o=0;o<Et.length;++o)if(Et[o]==e){n=l[o][Math.floor(t)],s=l[o][Math.ceil(t)];break}else if(Et[o]<e&&Et[o+1]>e){const c=(e-Et[o])/(Et[o+1]-Et[o]);n=l[o][Math.floor(t)]*(1-c)+l[o+1][Math.floor(t)]*c,s=l[o][Math.ceil(t)]*(1-c)+l[o+1][Math.ceil(t)]*c;break}const r=t-Math.floor(t);return n*(1-r)+s*r}layeradd10(e){e=T.fromValue_noAlloc(e).toNumber();const t=N(this);if(e>=1){t.mag<0&&t.layer>0?(t.sign=0,t.mag=0,t.layer=0):t.sign===-1&&t.layer==0&&(t.sign=1,t.mag=-t.mag);const l=Math.trunc(e);e-=l,t.layer+=l}if(e<=-1){const l=Math.trunc(e);if(e-=l,t.layer+=l,t.layer<0)for(let n=0;n<100;++n){if(t.layer++,t.mag=Math.log10(t.mag),!isFinite(t.mag))return t.sign===0&&(t.sign=1),t.layer<0&&(t.layer=0),t.normalize();if(t.layer>=0)break}}for(;t.layer<0;)t.layer++,t.mag=Math.log10(t.mag);return t.sign===0&&(t.sign=1,t.mag===0&&t.layer>=1&&(t.layer-=1,t.mag=1)),t.normalize(),e!==0?t.layeradd(e,10):t}layeradd(e,t){const n=this.slog(t).toNumber()+e;return n>=0?T.tetrate(t,n):Number.isFinite(n)?n>=-1?T.log(T.tetrate(t,n+1),t):T.log(T.log(T.tetrate(t,n+2),t),t):T.dNaN}lambertw(){if(this.lt(-.3678794411710499))throw Error("lambertw is unimplemented for results less than -1, sorry!");if(this.mag<0)return N(Kl(this.toNumber()));if(this.layer===0)return N(Kl(this.sign*this.mag));if(this.layer===1)return Jl(this);if(this.layer===2)return Jl(this);if(this.layer>=3)return J(this.sign,this.layer-1,this.mag);throw"Unhandled behavior in lambertw()"}ssqrt(){if(this.sign==1&&this.layer>=3)return J(this.sign,this.layer-1,this.mag);const e=this.ln();return e.div(e.lambertw())}pentate(e=2,t=J(1,0,1)){t=N(t);const l=e;e=Math.trunc(e);const n=l-e;n!==0&&(t.eq(T.dOne)?(++e,t=new T(n)):this.eq(10)?t=t.layeradd10(n):t=t.layeradd(n,this));for(let s=0;s<e;++s){if(t=this.tetrate(t.toNumber()),!isFinite(t.layer)||!isFinite(t.mag))return t.normalize();if(s>10)return t}return t}sin(){return this.mag<0?this:this.layer===0?N(Math.sin(this.sign*this.mag)):J(0,0,0)}cos(){return this.mag<0?T.dOne:this.layer===0?N(Math.cos(this.sign*this.mag)):J(0,0,0)}tan(){return this.mag<0?this:this.layer===0?N(Math.tan(this.sign*this.mag)):J(0,0,0)}asin(){return this.mag<0?this:this.layer===0?N(Math.asin(this.sign*this.mag)):J(Number.NaN,Number.NaN,Number.NaN)}acos(){return this.mag<0?N(Math.acos(this.toNumber())):this.layer===0?N(Math.acos(this.sign*this.mag)):J(Number.NaN,Number.NaN,Number.NaN)}atan(){return this.mag<0?this:this.layer===0?N(Math.atan(this.sign*this.mag)):N(Math.atan(this.sign*(1/0)))}sinh(){return this.exp().sub(this.negate().exp()).div(2)}cosh(){return this.exp().add(this.negate().exp()).div(2)}tanh(){return this.sinh().div(this.cosh())}asinh(){return T.ln(this.add(this.sqr().add(1).sqrt()))}acosh(){return T.ln(this.add(this.sqr().sub(1).sqrt()))}atanh(){return this.abs().gte(1)?J(Number.NaN,Number.NaN,Number.NaN):T.ln(this.add(1).div(N(1).sub(this))).div(2)}ascensionPenalty(e){return e===0?this:this.root(T.pow(10,e))}egg(){return this.add(9)}lessThanOrEqualTo(e){return this.cmp(e)<1}lessThan(e){return this.cmp(e)<0}greaterThanOrEqualTo(e){return this.cmp(e)>-1}greaterThan(e){return this.cmp(e)>0}};let i=T;i.dZero=J(0,0,0);i.dOne=J(1,0,1);i.dNegOne=J(-1,0,1);i.dTwo=J(1,0,2);i.dTen=J(1,0,10);i.dNaN=J(Number.NaN,Number.NaN,Number.NaN);i.dInf=J(1,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY);i.dNegInf=J(-1,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY);i.dNumberMax=W(1,0,Number.MAX_VALUE);i.dNumberMin=W(1,0,Number.MIN_VALUE);const Ni=new i(1);function el(e,t,l=!0){let n=i.log10(e).floor(),s=i.div(e,i.pow(10,n));s.toStringWithDecimalPlaces(t)==="10"&&(s=Ni,n=n.add(1));const r=n.gte(1e9)?Z(n,Math.max(Math.max(t,3),se.defaultDecimalsShown)):n.gte(1e4)?gl(n,0):n.toStringWithDecimalPlaces(0);return l?s.toStringWithDecimalPlaces(t)+"e"+r:"e"+r}function gl(e,t){if(e==null)return"NaN";if(e=new i(e),e.mag<.001)return 0 .toFixed(t);const n=e.toStringWithDecimalPlaces(t).split(".");return n[0]=n[0].replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,"),n.length==1?n[0]:n[0]+"."+n[1]}function nn(e,t){return e==null?"NaN":(e=new i(e),e.mag<1e-4?0 .toFixed(t):(e.mag<.1&&t!==0&&(t=Math.max(Math.max(t,e.log10().negate().ceil().toNumber()),se.defaultDecimalsShown)),e.toStringWithDecimalPlaces(t)))}const _i=new i("eeee1000"),ki=new i("e100000"),Xl=new i("e1000"),sn=new i(1e9),Ci=new i(1e6),Si=new i(1e3);new i(.98);const Mi=new i(.001),Pi=new i(0);function Z(e,t,l){if(t==null&&(t=se.defaultDecimalsShown),l=l!=null?l:se.defaultShowSmall,e=new i(e),isNaN(e.sign)||isNaN(e.layer)||isNaN(e.mag))return"NaN";if(e.sign<0)return"-"+Z(e.neg(),t);if(e.mag===Number.POSITIVE_INFINITY)return"Infinity";if(e.gte(_i)){const n=e.slog();return n.gte(Ci)?"F"+Z(n.floor()):i.pow(10,n.sub(n.floor())).toStringWithDecimalPlaces(3)+"F"+gl(n.floor(),0)}else{if(e.gte(ki))return el(e,0,!1);if(e.gte(Xl))return el(e,0);if(e.gte(sn))return el(e,t);if(e.gte(Si))return gl(e,0);if(e.gte(Mi)||!l)return nn(e,t);if(e.eq(Pi))return 0 .toFixed(t)}return e=an(e),e.lt(Xl)?el(e,t).replace(/([^(?:e|F)]*)$/,"-$1"):Z(e,t)+"\u207B\xB9"}function be(e){return e=new i(e),e.sign<0?"-"+be(e.neg()):e.gte(sn)?Z(e):Z(e,0)}function hl(e){return i.lt(e,0)?"-"+hl(i.neg(e)):i.gt(e,2**51)?Z(i.div(e,31536e3))+"y":(e=new i(e).toNumber(),e<60?Z(e)+"s":e<3600?be(Math.floor(e/60))+"m "+Z(e%60)+"s":e<86400?be(Math.floor(e/3600))+"h "+be(Math.floor(e/60)%60)+"m "+be(e%60)+"s":e<31536e3?be(Math.floor(e/84600)%365)+"d "+be(Math.floor(e/3600)%24)+"h "+be(Math.floor(e/60)%60)+"m":be(Math.floor(e/31536e3))+"y "+be(Math.floor(e/84600)%365)+"d "+be(Math.floor(e/3600)%24)+"h")}function Ii(e,t,l){e=new i(e);let n=e.toStringWithDecimalPlaces(t);return new i(n).gte(l)&&(n=i.sub(l,Math.pow(.1,t)).toStringWithDecimalPlaces(t)),n}function $i(e,t){return Z(e,t,!0)}function an(e){let t=i.log10(e).ceil();const l=i.div(e,i.pow(10,t));return t=t.neg(),e=new i(10).pow(t).times(l),e}var Ti=Object.freeze(Object.defineProperty({__proto__:null,default:i,exponentialFormat:el,commaFormat:gl,regularFormat:nn,format:Z,formatWhole:be,formatTime:hl,toPlaces:Ii,formatSmall:$i,invertOOM:an},Symbol.toStringTag,{value:"Module"}));const{exponentialFormat:Ei,commaFormat:Bi,regularFormat:Di,format:A,formatWhole:ge,formatTime:Nl,toPlaces:qi,formatSmall:Fi,invertOOM:Ai}=Ti;window.Decimal=i;window.exponentialFormat=Ei;window.commaFormat=Bi;window.regularFormat=Di;window.format=A;window.formatWhole=ge;window.formatTime=Nl;window.toPlaces=qi;window.formatSmall=Fi;window.invertOOM=Ai;function rn(e){let t=e.replace(/([A-Z])/g," $1");return t=t.charAt(0).toUpperCase()+t.slice(1),t}function Dt(e){return typeof e=="function"}var X=(e=>(e.Up="Up",e.Down="Down",e.Left="Left",e.Right="Right",e.Default="Up",e))(X||{});const il=Symbol("DoNotCache");function k(e,t){const l=e[t];Dt(l)&&l.length===0&&!l[il]?e[t]=y(l.bind(e)):Dt(l)&&(e[t]=l.bind(e),e[t][il]=!0)}function jt(e){return Dt(e)&&!e[il]&&(e=y(e)),e}const Ee=Symbol("Component"),qe=Symbol("GatherProps");let Oi=0;function xe(e="feature-"){return e+Oi++}var $=(e=>(e[e.Visible=0]="Visible",e[e.Hidden=1]="Hidden",e[e.None=2]="None",e))($||{});function F(e){return e[il]=!0,e}function we(e,t=2){return e?0:t}function ee(e,t,l){e[t]===void 0&&l!=null&&(e[t]=l)}const Bt={variables:{"--foreground":"#dfdfdf","--background":"#0f0f0f","--feature-foreground":"#0f0f0f","--tooltip-background":"rgba(0, 0, 0, 0.75)","--raised-background":"#0f0f0f","--points":"#ffffff","--locked":"#bf8f8f","--highlighted":"#333","--bought":"#77bf5f","--danger":"rgb(220, 53, 69)","--link":"#02f2f2","--outline":"#dfdfdf","--accent1":"#627a82","--accent2":"#658262","--accent3":"#7c6282","--border-radius":"15px","--modal-border":"solid 2px var(--color)","--feature-margin":"0px"},floatingTabs:!0,mergeAdjacent:!0,showPin:!0};var Dl=(e=>(e.Classic="classic",e.Paper="paper",e.Nordic="nordic",e.Aqua="aqua",e))(Dl||{}),Zt={classic:Bt,paper:{...Bt,variables:{...Bt.variables,"--background":"#2a323d","--feature-foreground":"#000","--raised-background":"#333c4a","--locked":"#3a3e45","--bought":"#5C8A58","--outline":"#333c4a","--border-radius":"4px","--modal-border":"","--feature-margin":"5px"},floatingTabs:!1},nordic:{...Bt,variables:{...Bt.variables,"--foreground":"#D8DEE9","--background":"#2E3440","--feature-foreground":"#000","--raised-background":"#3B4252","--points":"#E5E9F0","--locked":"#4c566a","--highlighted":"#434c5e","--bought":"#8FBCBB","--danger":"#D08770","--link":"#88C0D0","--outline":"#3B4252","--accent1":"#B48EAD","--accent2":"#A3BE8C","--accent3":"#EBCB8B","--border-radius":"4px","--modal-border":"solid 2px #3B4252","--feature-margin":"5px"},floatingTabs:!1},aqua:{...Bt,variables:{...Bt.variables,"--foreground":"#bfdfff","--background":"#001f3f","--tooltip-background":"rgba(0, 15, 31, 0.75)","--raised-background":"#001f3f","--points":"#dfefff","--locked":"#c4a7b3","--outline":"#bfdfff"}}};const ke=Symbol("ProxyState"),Ut=Symbol("ProxyPath");function Oe(e,t={}){const l=t;let n=!1;function s(){return n||(Object.assign(l,e(l)),n=!0),l}return new Proxy(l,{get(r,u){return u===ke?s():s()[u]},set(r,u,o){return s()[u]=o,!0},has(r,u){return u===ke?!0:Reflect.has(s(),u)},ownKeys(){return Reflect.ownKeys(s())},getOwnPropertyDescriptor(r,u){return n||(Object.assign(l,e(l)),n=!0),Object.getOwnPropertyDescriptor(r,u)}})}var me=window.state=El({lastTenTicks:[],hasNaN:!1,NaNPath:[]});const on=rl({id:"",devSpeed:null,name:"",tabs:[],time:-1,autosave:!0,offlineProd:!0,offlineTime:null,timePlayed:0,keepGoing:!1,modID:"",modVersion:"",layers:{}});function un(e){return JSON.stringify(e,(t,l)=>f(l))}const cn={get(e,t){var n;if(t===ke||t===Ut)return e[t];const l=e[ke][t];if(t!=="value"&&(On(l)||Array.isArray(l))){if(l!==((n=e[t])==null?void 0:n[ke])){const s=[...e[Ut],t];e[t]=new Proxy({[ke]:l,[Ut]:s},cn)}return e[t]}return l},set(e,t,l,n){if(!me.hasNaN&&(typeof l=="number"&&isNaN(l)||l instanceof i&&(isNaN(l.sign)||isNaN(l.layer)||isNaN(l.mag)))){const s=e[ke][t];if(!(typeof s=="number"&&isNaN(s)||s instanceof i&&(isNaN(s.sign)||isNaN(s.layer)||isNaN(s.mag))))throw on.autosave=!1,me.hasNaN=!0,me.NaNPath=[...e[Ut],t],me.NaNReceiver=n,console.error("Attempted to set NaN value",[...e[Ut],t],e[ke]),"Attempted to set NaN value. See above for details"}return e[ke][t]=l,!0},ownKeys(e){return Reflect.ownKeys(e[ke])},has(e,t){return Reflect.has(e[ke],t)},getOwnPropertyDescriptor(e,t){return Object.getOwnPropertyDescriptor(e[ke],t)}};var R=window.player=new Proxy({[ke]:on,[Ut]:["player"]},cn);const fe=en();let xt=null,tl=null;function yl(){const e=Date.now();let t=(e-R.time)/1e3;R.time=e;const l=t;if(me.lastTenTicks.push(l),me.lastTenTicks.length>10&&(me.lastTenTicks=me.lastTenTicks.slice(1)),!((tl==null?void 0:tl.value)&&!R.keepGoing)&&!me.hasNaN&&(t=Math.max(t,0),R.devSpeed!==0)){if(R.offlineTime!=null){if(i.gt(R.offlineTime,se.offlineLimit*3600)&&(R.offlineTime=se.offlineLimit*3600),i.gt(R.offlineTime,0)&&R.devSpeed!==0){const n=Math.max(R.offlineTime/10,t);R.offlineTime=R.offlineTime-n,t+=n}else R.devSpeed===0&&(R.offlineTime+=t);(!R.offlineProd||i.lt(R.offlineTime,0))&&(R.offlineTime=null)}t=Math.min(t,se.maxTickLength),R.devSpeed!=null&&(t*=R.devSpeed),Number.isFinite(t)||(t=1e308),!i.eq(t,0)&&(R.timePlayed+=t,Number.isFinite(R.timePlayed)||(R.timePlayed=1e308),fe.emit("update",t,l),ce.unthrottled?(requestAnimationFrame(yl),xt!=null&&(clearInterval(xt),xt=null)):xt==null&&(xt=setInterval(yl,50)))}}async function Ri(){tl=(await vl(()=>Promise.resolve().then(function(){return $n}),void 0)).hasWon,et(tl,e=>{e&&fe.emit("gameWon")}),ce.unthrottled?requestAnimationFrame(yl):xt=setInterval(yl,50)}var Li=Object.freeze(Object.defineProperty({__proto__:null,globalBus:fe,startGameLoop:Ri},Symbol.toStringTag,{value:"Module"}));function dn(e={}){return Object.assign({id:`${se.id}-0`,name:"Default Save",tabs:se.initialTabs.slice(),time:Date.now(),autosave:!0,offlineProd:!0,offlineTime:0,timePlayed:0,keepGoing:!1,modID:se.id,modVersion:se.versionNumber,layers:{}},e)}function it(e){const t=Ct.compressToUTF16(un(e!=null?e:R[ke]));return localStorage.setItem((e!=null?e:R[ke]).id,t),t}async function Vi(){Ui();try{let e=localStorage.getItem(ce.active);if(e==null){await qt(Ht());return}if(e[0]!=="{")if(e[0]==="e")e=decodeURIComponent(escape(atob(e)));else if(e[0]==="\u1BE1")e=Ct.decompressFromUTF16(e);else throw"Unable to determine save encoding";const t=JSON.parse(e);if(t.modID!==se.id){await qt(Ht());return}t.id=ce.active,await qt(t)}catch(e){console.error(`Failed to load save. Falling back to new save.
`,e),await qt(Ht())}}function Ht(){const e=ml(),t=dn({id:e});return it(t),ce.saves.push(e),t}function ml(){let e,t=0;do e=`${se.id}-${t++}`;while(localStorage.getItem(e));return e}async function qt(e){console.info("Loading save",e);const{layers:t,removeLayer:l,addLayer:n}=await vl(()=>Promise.resolve().then(function(){return as}),void 0),{fixOldSave:s,fixOldSaveEarly:r,getInitialLayers:u}=await vl(()=>Promise.resolve().then(function(){return $n}),void 0);e.modVersion!==se.versionNumber&&r(e.modVersion,e);for(const o in t){const c=t[o];c&&l(c)}u(e).forEach(o=>n(o,e)),e=dn(e),e.offlineProd&&e.time&&(e.offlineTime==null&&(e.offlineTime=0),e.offlineTime+=(Date.now()-e.time)/1e3),e.time=Date.now(),e.modVersion!==se.versionNumber&&s(e.modVersion,e),Object.assign(R,e),ce.active=R.id}setInterval(()=>{R.autosave&&it()},1e3);window.onbeforeunload=()=>{R.autosave&&it()};window.save=it;const Gi=window.hardReset=async()=>{await qt(Ht())},sl=rl({active:"",saves:[],showTPS:!0,theme:Dl.Nordic,unthrottled:!1});et(sl,e=>{const t=Ct.compressToUTF16(JSON.stringify(e));localStorage.setItem(se.id,t)},{deep:!0});var ce=window.settings=sl;window.hardResetSettings=()=>{const e={active:"",saves:[],showTPS:!0,theme:Dl.Nordic};fe.emit("loadSettings",e),Object.assign(sl,e),Gi()};function Ui(){try{let e=localStorage.getItem(se.id);if(e!=null&&e!==""){if(e[0]!=="{")if(e[0]==="e")e=decodeURIComponent(escape(atob(e)));else if(e[0]==="\u1BE1")e=Ct.decompressFromUTF16(e);else{console.warn("Unable to determine settings encoding",e);return}const t=JSON.parse(e);typeof t=="object"&&Object.assign(sl,t)}fe.emit("loadSettings",sl)}catch{}}const fn=rl([]);function mn(e){fn.push(e)}const xi=rl([]),ji=rl([]);function j(e,t="span"){return typeof e=="function"?H({render:e}):typeof e=="string"?e.length>0?(e=e.trim(),e.charAt(0)!=="<"&&(e=`<${t}>${e}</${t}>`),H({template:e})):H({render:()=>({})}):e}function G(e){if(We(e))return typeof e=="function"?e():j(e);const t=e[Ee];return a(t,e[qe](),null)}function vt(e){if(We(e))return typeof e=="function"?e():typeof e=="string"?a(V,null,[e]):a(e,null,null);const t=e[Ee];return a(t,e[qe](),null)}function We(e){return typeof e=="string"?!0:typeof e=="object"?e==null?!1:"render"in e||"component"in e:typeof e=="function"&&e[il]===!0}function ql(e,t){const l=U(null),n=U(void 0);function s(o){l.value||(l.value=setInterval(u,250)),n.value=o}function r(){l.value&&(clearInterval(l.value),l.value=null)}function u(){t&&t.value?t.value():e&&e.value&&e.value(n.value)}return Ql(r),{start:s,stop:r,handleHolding:u}}function zt(e,t="div"){const l=Xe();return Qe(()=>{l.value=j(ve(e),t)}),l}function Kt(e,t="div"){const l=Xe(null);return Qe(()=>{const n=ve(e);l.value=n==null?null:j(n,t)}),l}function Hi(e){return y(()=>ve(e))}function ve(e){return f(f(e))}function E(...e){return e.includes(Object)||e.push(Object),e}const Wi=H({emits:["updateNodes"],setup(e,{emit:t}){var w;const l=U({}),n=new ResizeObserver(o),s=U(null);wl(()=>{const b=s.value;b!=null&&n.observe(b)});let r=!0,u=U((w=s.value)==null?void 0:w.getBoundingClientRect());function o(){s.value!=null&&r&&(r=!1,gt(()=>{var b;u.value=(b=s.value)==null?void 0:b.getBoundingClientRect(),Object.values(l.value).filter(m=>m).forEach(m=>m.rect=m.element.getBoundingClientRect()),t("updateNodes",l.value),r=!0}))}document.fonts.ready.then(o);const c={attributes:!1,childList:!0,subtree:!1};cl(Fl,(b,m)=>{const h=new MutationObserver(()=>d(b));h.observe(m,c),l.value[b]={element:m,observer:h,rect:m.getBoundingClientRect()},t("updateNodes",l.value),gt(()=>d(b))}),cl(Al,b=>{var m;(m=l.value[b])==null||m.observer.disconnect(),l.value[b]=void 0,t("updateNodes",l.value)}),cl(Ol,l),cl(Rl,u);function d(b){const m=l.value[b];m!=null&&(m.rect=m.element.getBoundingClientRect(),t("updateNodes",l.value))}return(b,m)=>(_(),D(V,null,[Mt(b.$slots,"default",{},void 0,!0),g("div",{ref_key:"resizeListener",ref:s,class:"resize-listener"},null,512)],64))}});var pn=te(Wi,[["__scopeId","data-v-6a08ac80"]]);const zi=["onPointerdown"],Yi={class:"modal-wrapper"},Zi={class:"modal-container"},Ki={class:"modal-header"},Ji=v(" default header "),Xi={class:"modal-body"},Qi=v(" default body "),es={class:"modal-footer"},ts=g("div",{class:"modal-default-flex-grow"},null,-1),Ft=H({props:{modelValue:{type:Boolean}},emits:["update:modelValue"],setup(e,{expose:t,emit:l}){const s=ye(e),r=y(()=>s.modelValue||o.value);function u(){l("update:modelValue",!1)}const o=U(!1),c=U(null),d=y(()=>{var w,b;return(b=(w=c.value)==null?void 0:w.nodes)!=null?b:null});return t({isOpen:r,nodes:d}),(w,b)=>(_(),x(En,{to:"#modal-root"},[a(Bl,{name:"modal",onBeforeEnter:b[0]||(b[0]=m=>o.value=!0),onAfterLeave:b[1]||(b[1]=m=>o.value=!1)},{default:z(()=>[Ne(g("div",ht({class:"modal-mask",onPointerdown:ll(u,["self"])},w.$attrs),[g("div",Yi,[g("div",Zi,[g("div",Ki,[Mt(w.$slots,"header",{shown:f(r)},()=>[Ji])]),g("div",Xi,[a(pn,{ref_key:"contextRef",ref:c},{default:z(()=>[Mt(w.$slots,"body",{shown:f(r)},()=>[Qi])]),_:3},512)]),g("div",es,[Mt(w.$slots,"footer",{shown:f(r)},()=>[g("div",{class:"modal-default-footer"},[ts,g("button",{class:"button modal-default-button",onClick:u}," Close ")])])])])])],16,zi),[[Pe,e.modelValue]])]),_:3})]))}}),Yt=Symbol("PersistentState"),al=Symbol("DefaultValue"),bl=Symbol("StackTrace"),vn=Symbol("Deleted");function ls(){var e;return((e=new Error().stack)==null?void 0:e.split(`
`).slice(3,5).map(t=>t.trim()).join(`
`))||""}function Ue(e){const t=De(e)?e:U(e);return t[Yt]=t,t[al]=De(e)?e.value:e,t[bl]=ls(),t[vn]=!1,st.length===0?console.warn("Creating a persistent ref outside of a layer. This is not officially supported",t,`
Created at:
`+t[bl]):Wt[st[st.length-1]].add(t),t}fe.on("addLayer",(e,t)=>{const l=[],n=(s,r=[])=>{let u=!1;return Object.keys(s).forEach(o=>{const c=s[o];if(c&&typeof c=="object")if(Yt in c){if(u=!0,c[vn]){console.warn("Deleted persistent ref present in returned object. Ignoring...",c,`
Created at:
`+c[bl]);return}Wt[e.id].delete(ke in c?c[ke]:c);const d=r.reduce((b,m)=>(m in b||(b[m]={}),b[m]),t),w=d[o];d[o]=c[Yt],Bn(d)?w!=null?d[o]=w:d[o]=c[al]:w!=null?d[o].value=w:d[o].value=c[al]}else!(c instanceof i)&&!De(c)&&!l.includes(c)&&(typeof c.type=="symbol"&&l.push(c),n(c,[...r,o])&&(Wl(c)&&!Wl(s)?console.warn("Found array that contains persistent values when adding layer. Keep in mind changing the order of elements in the array will mess with existing player saves.",ke in s?s[ke]:s,o):u=!0))}),u};n(e),Wt[e.id].forEach(s=>{console.error(`Created persistent ref in ${e.id} without registering it to the layer! Make sure to include everything persistent in the returned object`,s,`
Created at:
`+s[bl])}),Wt[e.id].clear()});const Fl=Symbol("RegisterNode"),Al=Symbol("UnregisterNode"),Ol=Symbol("Nodes"),Rl=Symbol("Bounds"),Ge=El({});window.layers=Ge;const Wt={},st=[];function je(e,t){return Oe(()=>{const l={},n=l.emitter=en();if(l.on=n.on.bind(n),l.emit=n.emit.bind(n),l.nodes=U({}),l.id=e,st.push(e),Wt[e]=new Set,l.minimized=Ue(!1),Object.assign(l,t.call(l)),st[st.length-1]==null||st[st.length-1]!==e)throw`Adding layers stack in invalid state. This should not happen
Stack: ${st}
Trying to pop ${l.id}`;return st.pop(),k(l,"color"),k(l,"display"),k(l,"name"),ee(l,"name",l.id),k(l,"minWidth"),ee(l,"minWidth",600),k(l,"minimizable"),ee(l,"minimizable",!0),l})}function gn(e,t){if(console.info("Adding layer",e.id),Ge[e.id]){console.error("Attempted to add layer with same ID as existing layer",e.id,Ge[e.id]);return}ee(t,"layers",{}),t.layers[e.id]==null&&(t.layers[e.id]={}),Ge[e.id]=e,fe.emit("addLayer",e,t.layers[e.id])}function ns(e){return Ge[e]}function hn(e){console.info("Removing layer",e.id),fe.emit("removeLayer",e),Ge[e.id]=void 0}function is(e){hn(e),gn(e,R)}function ss(e){const t=U(!1);return{openModal:()=>t.value=!0,modal:F(()=>a(Ft,{modelValue:t.value,"onUpdate:modelValue":l=>t.value=l},{header:()=>a("h2",null,[f(e.name)]),body:f(e.display)}))}}fe.on("update",function(t){Object.values(Ge).forEach(l=>{l==null||l.emit("preUpdate",t)}),Object.values(Ge).forEach(l=>{l==null||l.emit("update",t)}),Object.values(Ge).forEach(l=>{l==null||l.emit("postUpdate",t)})});var as=Object.freeze(Object.defineProperty({__proto__:null,RegisterNodeInjectionKey:Fl,UnregisterNodeInjectionKey:Al,NodesInjectionKey:Ol,BoundsInjectionKey:Rl,layers:Ge,persistentRefs:Wt,addingLayers:st,createLayer:je,addLayer:gn,getLayer:ns,removeLayer:hn,reloadLayer:is,setupLayerModal:ss},Symbol.toStringTag,{value:"Module"}));const rs=H({components:{Context:pn},props:{index:{type:Number,required:!0},tab:{type:Function,required:!0},display:{type:E(Object,String,Function),required:!0},minimized:{type:Object,required:!0},minWidth:{type:E(Number,String),required:!0},name:{type:E(String),required:!0},color:E(String),minimizable:E(Boolean),nodes:{type:Object,required:!0}},setup(e){const{display:t,index:l,minimized:n,minWidth:s,tab:r}=ye(e),u=zt(t),o=y(()=>se.allowGoBack&&l.value>0&&!n.value);function c(){R.tabs.splice(f(e.index),1/0)}gt(()=>w(n.value,f(s.value))),et([n,Hi(s)],([b,m])=>w(b,m));function d(b){e.nodes.value=b}function w(b,m){const h=typeof m=="number"||Number.isNaN(parseInt(m))?m+"px":m,p=r.value();p!=null&&(b?(p.style.flexGrow="0",p.style.flexShrink="0",p.style.width="60px",p.style.minWidth=p.style.flexBasis="",p.style.margin="0"):(p.style.flexGrow="",p.style.flexShrink="",p.style.width="",p.style.minWidth=p.style.flexBasis=h,p.style.margin=""))}return{component:u,showGoBack:o,updateNodes:d,unref:f,goBack:c}}});function os(e,t,l,n,s,r){const u=Be("Context");return _(),D("div",{class:"layer-container",style:re({"--layer-color":e.unref(e.color)})},[e.showGoBack?(_(),D("button",{key:0,class:"goBack",onClick:t[0]||(t[0]=(...o)=>e.goBack&&e.goBack(...o))},"\u2190")):L("",!0),e.minimized.value?(_(),D("button",{key:1,class:"layer-tab minimized",onClick:t[1]||(t[1]=o=>e.minimized.value=!1)},[g("div",null,ne(e.unref(e.name)),1)])):(_(),D("div",{key:2,class:he(["layer-tab",{showGoBack:e.showGoBack}])},[a(u,{onUpdateNodes:e.updateNodes},{default:z(()=>[(_(),x(de(e.component)))]),_:1},8,["onUpdateNodes"])],2)),e.unref(e.minimizable)?(_(),D("button",{key:3,class:"minimize",onClick:t[2]||(t[2]=o=>e.minimized.value=!0)}," \u25BC ")):L("",!0)],4)}var us=te(rs,[["render",os],["__scopeId","data-v-34c9d881"]]);const ut=e=>(yt("data-v-715b11b2"),e=e(),bt(),e),cs=ut(()=>g("h2",null,"Changelog",-1)),ds=ut(()=>g("details",{open:""},[g("summary",null,[v("v1.3 For the Senses - "),g("time",null,"2022-05-17")]),g("ul",null,[g("li",{class:"balancing"},"Balanced up to 5e46 Particles/s"),g("li",{class:"feature"},"Implemented Advancements 33-44"),g("li",{class:"feature"},"Implemented Light and Sound."),g("li",{class:"fix"},"A few minor bugfixes, and updated to Profectus 0.4.1")])],-1)),fs=ut(()=>g("details",null,[g("summary",null,[v("v1.2 Bond Glue - "),g("time",null,"2022-05-09")]),g("ul",null,[g("li",{class:"balancing"},"Balanced up to 1.4e25 Particles/s"),g("li",{class:"feature"},"Implemented Advancements 24-32"),g("li",{class:"feature"},"Implemented Intrabonds"),g("li",{class:"fix"}," Fixed a bug with the Cryo Challenge rewards not being dependent on the right challenge completions (this might slightly slow down your particles/s, but not substantially enough to be a problem) ")])],-1)),ms=ut(()=>g("details",null,[g("summary",null,[v("v1.1.1 Big Loar - "),g("time",null,"2022-05-05")]),g("ul",null,[g("li",{class:"balancing"},"Balanced up to 1e17 Particles/s"),g("li",{class:"feature"},"Implemented Advancements 22-23"),g("li",{class:"feature"},"Added a Lore node because why not :)")])],-1)),ps=ut(()=>g("details",null,[g("summary",null,[v("v1.1 Particle Combinators - "),g("time",null,"2022-05-03")]),g("ul",null,[g("li",{class:"balancing"},"Balanced up to 1e14 Particles/s"),g("li",{class:"feature"},"Implemented Advancements 16-21"),g("li",{class:"feature"},"Implemented Particle Combinators"),g("li",{class:"breaking"}," Updated to Profectus v0.4, which caused saves to glitch out a bit. Here is a list of everything that may have reset for you: Flame Upgrades, Life Buyables, and the Earth Grid (but not its level) ")])],-1)),vs=ut(()=>g("details",null,[g("summary",null,[v("v1.0.2 Tooltip Heaven - "),g("time",null,"2022-04-24")]),g("ul",null,[g("li",{class:"fix"},"Updated to Profectus v0.3.3"),g("li",{class:"fix"},"Added tooltips to layer nodes (thanks to thepaperpilot)"),g("li",{class:"fix"}," Added modifier tooltips to reset buttons (note that it's not in the Aqua layer, it doesn't let you click the reset button when it is, so I had to remove it for the time being while I try to figure that out) "),g("li",{class:"fix"}," Fixed the way that the branched reset propagation works (I really borked that one up lol) ")])],-1)),gs=ut(()=>g("details",null,[g("summary",null,[v("v1.0.1 Refined Edges - "),g("time",null,"2022-04-24")]),g("ul",null,[g("li",{class:"fix"},"Updated to Profectus v0.3.2"),g("li",{class:"fix"}," Added glow color to certain layers (thanks to thepaperpilot) ")])],-1)),hs=ut(()=>g("details",null,[g("summary",null,[v("v1.0 Our Planet - "),g("time",null,"2022-04-23")]),g("ul",null,[g("li",{class:"balancing"},"Balanced up to 3e9 Particles/s"),g("li",{class:"feature"},"Implemented Advancements 11-15"),g("li",{class:"feature"},"Implemented Earth layer")])],-1)),ys=ut(()=>g("details",null,[g("summary",null,[v("v0.3 Windseeker - "),g("time",null,"2022-04-14")]),g("ul",null,[g("li",{class:"balancing"},"Balanced up to 40,500,000 Particles/s"),g("li",{class:"feature"},"Implemented Advancements 7-11"),g("li",{class:"feature"},"Implemented Air layer")])],-1)),bs=ut(()=>g("details",null,[g("summary",null,[v("v0.2 Several Advancements - "),g("time",null,"2022-04-11")]),g("ul",null,[g("li",{class:"balancing"},"Balanced up to 43,000 Particles/s"),g("li",{class:"feature"},"Implemented Advancements 2-6"),g("li",{class:"feature"},"Implemented Cryo layer")])],-1)),ws=ut(()=>g("details",null,[g("summary",null,[v("v0.1 Basic Mechanics - "),g("time",null,"2022-04-08")]),g("ul",null,[g("li",{class:"feature"},"Implemented Flame, Life, & Water layers"),g("li",{class:"feature"},"Implemented Advancement 1"),g("li",{class:"feature"},"Implemented Lightning layer")])],-1)),Ns=H({setup(e,{expose:t}){const l=U(!1);return t({open(){l.value=!0}}),(n,s)=>(_(),x(Ft,{modelValue:l.value,"onUpdate:modelValue":s[0]||(s[0]=r=>l.value=r)},{header:z(()=>[cs]),body:z(()=>[ds,fs,ms,ps,vs,gs,hs,ys,bs,ws]),_:1},8,["modelValue"]))}});var _s=te(Ns,[["__scopeId","data-v-715b11b2"]]),ks=H({props:{element:Object,display:{type:E(Object,String,Function),required:!0},style:E(Object,String,Array),classes:E(Object),direction:E(String),xoffset:E(String),yoffset:E(String),pinned:Object},setup(e){const{element:t,display:l,pinned:n}=ye(e),s=U(!1),r=y(()=>(ve(n)||s.value)&&u.value),u=Kt(l),o=Xe(j(F(()=>{const w=ve(t);return w==null?"":vt(w)})));function c(w){const b=n;w.shiftKey&&b&&(b.value=!b.value,w.stopPropagation(),w.preventDefault())}const d=y(()=>ve(n)&&Zt[ce.theme].showPin);return{Direction:X,isHovered:s,isShown:r,comp:u,elementComp:o,unref:f,togglePinned:c,showPin:d}}});const Cs={key:0,class:"material-icons pinned"};function Ss(e,t,l,n,s,r){return _(),D("div",{class:he(["tooltip-container",{shown:e.isShown}]),onMouseenter:t[0]||(t[0]=u=>e.isHovered=!0),onMouseleave:t[1]||(t[1]=u=>e.isHovered=!1),onClickCapture:t[2]||(t[2]=(...u)=>e.togglePinned&&e.togglePinned(...u))},[Mt(e.$slots,"default",{},void 0,!0),e.elementComp?(_(),x(de(e.elementComp),{key:0})):L("",!0),a(Bl,{name:"fade"},{default:z(()=>{var u;return[e.isShown?(_(),D("div",{key:0,class:he(["tooltip",{top:e.unref(e.direction)===e.Direction.Up,left:e.unref(e.direction)===e.Direction.Left,right:e.unref(e.direction)===e.Direction.Right,bottom:e.unref(e.direction)===e.Direction.Down,...e.unref(e.classes)}]),style:re([{"--xoffset":e.unref(e.xoffset)||"0px","--yoffset":e.unref(e.yoffset)||"0px"},(u=e.unref(e.style))!=null?u:{}])},[e.showPin?(_(),D("span",Cs,"push_pin")):L("",!0),e.comp?(_(),x(de(e.comp),{key:1})):L("",!0)],6)):L("",!0)]}),_:1})],34)}var Ce=te(ks,[["render",Ss],["__scopeId","data-v-6102fa3a"]]);const At=e=>(yt("data-v-7dec2dec"),e=e(),bt(),e),Ms={class:"info-modal-header"},Ps=["src","alt"],Is={class:"info-modal-title"},$s={key:0},Ts={key:0},Es={key:0},Bs=At(()=>g("div",null," Made in Profectus, by thepaperpilot with inspiration from Acameada and Jacorb ",-1)),Ds=At(()=>g("br",null,null,-1)),qs=At(()=>g("br",null,null,-1)),Fs=["href"],As=At(()=>g("span",{class:"material-icons info-modal-discord"},"discord",-1)),Os=At(()=>g("div",null,[g("a",{href:"https://discord.gg/WzejVAx",class:"info-modal-discord-link"},[g("span",{class:"material-icons info-modal-discord"},"discord"),v(" The Paper Pilot Community ")])],-1)),Rs=At(()=>g("div",null,[g("a",{href:"https://discord.gg/F3xveHV",class:"info-modal-discord-link"},[g("span",{class:"material-icons info-modal-discord"},"discord"),v(" The Modding Tree ")])],-1)),Ls=At(()=>g("br",null,null,-1));var Vs=H({props:{changelog:null},setup(e,{expose:t}){const l=e,{title:n,logo:s,author:r,discordName:u,discordLink:o,versionNumber:c,versionTitle:d}=se,w=ye(l),b=U(!1),m=y(()=>Nl(R.timePlayed)),h=y(()=>j(F(()=>a(V,null,[xi.map(G)]))));t({open(){b.value=!0}});function p(){var S;(S=f(w.changelog))==null||S.open()}return(S,C)=>(_(),x(Ft,{modelValue:b.value,"onUpdate:modelValue":C[0]||(C[0]=P=>b.value=P)},{header:z(()=>[g("div",Ms,[f(s)?(_(),D("img",{key:0,class:"info-modal-logo",src:f(s),alt:f(n)},null,8,Ps)):L("",!0),g("div",Is,[g("h2",null,ne(f(n)),1),g("h4",null,[v(" v"+ne(f(c)),1),f(d)?(_(),D("span",$s,": "+ne(f(d)),1)):L("",!0)])])])]),body:z(({shown:P})=>[P?(_(),D("div",Ts,[f(r)?(_(),D("div",Es,"By "+ne(f(r)),1)):L("",!0),Bs,Ds,g("div",{class:"link",onClick:p},"Changelog"),qs,g("div",null,[f(o)?(_(),D("a",{key:0,href:f(o),class:"info-modal-discord-link"},[As,v(" "+ne(f(u)),1)],8,Fs)):L("",!0)]),Os,Rs,Ls,g("div",null,"Time Played: "+ne(f(m)),1),(_(),x(de(f(h))))])):L("",!0)]),_:1},8,["modelValue"]))}});var Gs=te(Vs,[["__scopeId","data-v-7dec2dec"]]);const Us={class:"field"},xs={key:0,class:"field-title"},Ll=H({props:{title:null,modelValue:null,options:null,placeholder:null,closeOnSelect:{type:Boolean}},emits:["update:modelValue"],setup(e,{emit:t}){var u;const l=e,n=Kt(Pt(l,"title"),"span"),s=U((u=l.options.find(o=>o.value===l.modelValue))!=null?u:null);et(Pt(l,"modelValue"),o=>{var c;ve(s)!==o&&(s.value=(c=l.options.find(d=>d.value===o))!=null?c:null)});function r(o){t("update:modelValue",o.value)}return(o,c)=>(_(),D("div",Us,[f(n)?(_(),D("span",xs,[(_(),x(de(f(n))))])):L("",!0),a(f(Ln),{options:e.options,modelValue:s.value,"onUpdate:modelValue":[c[0]||(c[0]=d=>s.value=d),r],min:1,"label-by":"label",placeholder:e.placeholder,"close-on-select":e.closeOnSelect},null,8,["options","modelValue","placeholder","close-on-select"])]))}});const js={class:"field"},Hs=H({props:{title:null,modelValue:{type:Boolean}},emits:["update:modelValue"],setup(e,{emit:t}){const l=e,n=y(()=>j(f(l.title)||"<span></span>","span")),s=y({get(){return!!l.modelValue},set(r){t("update:modelValue",r)}});return(r,u)=>(_(),D("label",js,[Ne(g("input",{type:"checkbox",class:"toggle","onUpdate:modelValue":u[0]||(u[0]=o=>De(s)?s.value=o:null)},null,512),[[Dn,f(s)]]),(_(),x(de(f(n))))]))}});var pt=te(Hs,[["__scopeId","data-v-2b109500"]]);const yn=e=>(yt("data-v-bc13791c"),e=e(),bt(),e),Ws=yn(()=>g("div",{class:"header"},[g("h2",null,"Options")],-1)),zs=yn(()=>g("hr",null,null,-1));var Ys=H({setup(e,{expose:t}){const l=U(!1);t({open(){l.value=!0}});const n=Object.keys(Zt).map(p=>({label:rn(p),value:p})),s=y(()=>j(F(()=>a(V,null,[fn.map(G)])))),{showTPS:r,theme:u,unthrottled:o}=ye(ce),{autosave:c,offlineProd:d}=ye(R),w=y({get(){return R.devSpeed===0},set(p){R.devSpeed=p?0:null}}),b=F(()=>a("span",null,[v("Offline Production"),a(Ce,{display:"Save-specific"},{default:()=>[v("*")]})])),m=F(()=>a("span",null,[v("Autosave"),a(Ce,{display:"Save-specific"},{default:()=>[v("*")]})])),h=F(()=>a("span",null,[v("Pause game"),a(Ce,{display:"Save-specific"},{default:()=>[v("*")]})]));return(p,S)=>(_(),x(Ft,{modelValue:l.value,"onUpdate:modelValue":S[6]||(S[6]=C=>l.value=C)},{header:z(()=>[Ws]),body:z(()=>[a(Ll,{title:"Theme",options:f(n),modelValue:f(u),"onUpdate:modelValue":S[0]||(S[0]=C=>De(u)?u.value=C:null)},null,8,["options","modelValue"]),(_(),x(de(f(s)))),a(pt,{title:"Show TPS",modelValue:f(r),"onUpdate:modelValue":S[1]||(S[1]=C=>De(r)?r.value=C:null)},null,8,["modelValue"]),zs,a(pt,{title:"Unthrottled",modelValue:f(o),"onUpdate:modelValue":S[2]||(S[2]=C=>De(o)?o.value=C:null)},null,8,["modelValue"]),a(pt,{title:f(b),modelValue:f(d),"onUpdate:modelValue":S[3]||(S[3]=C=>De(d)?d.value=C:null)},null,8,["title","modelValue"]),a(pt,{title:f(m),modelValue:f(c),"onUpdate:modelValue":S[4]||(S[4]=C=>De(c)?c.value=C:null)},null,8,["title","modelValue"]),f(se).enablePausing?(_(),x(pt,{key:0,title:f(h),modelValue:f(w),"onUpdate:modelValue":S[5]||(S[5]=C=>De(w)?w.value=C:null)},null,8,["title","modelValue"])):L("",!0)]),_:1},8,["modelValue"]))}});var Zs=te(Ys,[["__scopeId","data-v-bc13791c"]]);const Ks=["onSubmit"],Js={class:"field"},Xs={key:0,class:"field-title"},Qs=["placeholder"],ea=H({props:{title:null,modelValue:null,textArea:{type:Boolean},placeholder:null,maxHeight:null},emits:["update:modelValue","submit"],setup(e,{emit:t}){const n=ye(e),s=y(()=>{var c;return((c=n.title)==null?void 0:c.value)&&j(f(n.title.value),"span")}),r=U(null);wl(()=>{var c;(c=r.value)==null||c.focus()});const u=y({get(){return f(n.modelValue)||""},set(c){t("update:modelValue",c)}});function o(){t("submit")}return(c,d)=>(_(),D("form",{onSubmit:ll(o,["prevent"])},[g("div",Js,[f(s)?(_(),D("span",Xs,[(_(),x(de(f(s))))])):L("",!0),e.textArea?(_(),x(f(Gn),{key:1,modelValue:f(u),"onUpdate:modelValue":d[0]||(d[0]=w=>De(u)?u.value=w:null),placeholder:e.placeholder,maxHeight:e.maxHeight,onBlur:o,ref_key:"field",ref:r},null,8,["modelValue","placeholder","maxHeight"])):Ne((_(),D("input",{key:2,type:"text","onUpdate:modelValue":d[1]||(d[1]=w=>De(u)?u.value=w:null),placeholder:e.placeholder,class:he({fullWidth:!e.title}),onBlur:o,ref_key:"field",ref:r},null,42,Qs)),[[qn,f(u)]])])],40,Ks))}});var bn=te(ea,[["__scopeId","data-v-d74adb0a"]]);const ta={key:0},la=["onClick","disabled"],na={key:0},ia=["onClick"],sa=H({props:{disabled:{type:Boolean},skipConfirm:{type:Boolean},forceOnClick:null,customDisplay:null},emits:["click","confirmingChanged"],setup(e,{emit:t}){const n=ye(e),s=U(!1);et(s,o=>{t("confirmingChanged",o)});function r(){var o,c,d,w;if(f(n.skipConfirm)){t("click"),(c=(o=n==null?void 0:n.forceOnClick)==null?void 0:o.value)==null||c.call(o);return}s.value&&(t("click"),(w=(d=n==null?void 0:n.forceOnClick)==null?void 0:d.value)==null||w.call(d)),s.value=!s.value}function u(){s.value=!1}return(o,c)=>(_(),D("span",{class:he(["container",{confirming:s.value}])},[s.value?(_(),D("span",ta,ne(e.customDisplay?e.customDisplay:"Are you sure?"),1)):L("",!0),g("button",{onClick:ll(r,["stop"]),class:"button danger",disabled:e.disabled},[s.value?(_(),D("span",na,"Yes")):Mt(o.$slots,"default",{key:1},void 0,!0)],8,la),s.value?(_(),D("button",{key:1,class:"button",onClick:ll(u,["stop"])},"No",8,ia)):L("",!0)],2))}});var wn=te(sa,[["__scopeId","data-v-1f8c0899"]]);const aa=["onClick"],ra=H({props:{left:{type:Boolean}},emits:["click"],setup(e,{emit:t}){const l=U(!1),n=U(null);function s(){t("click"),n.value&&clearTimeout(n.value),l.value=!1,gt(()=>{l.value=!0,n.value=setTimeout(()=>l.value=!1,500)})}return(r,u)=>(_(),D("button",{onClick:ll(s,["stop"]),class:he(["feedback",{activated:l.value,left:e.left}])},[Mt(r.$slots,"default",{},void 0,!0)],10,aa))}});var oa=te(ra,[["__scopeId","data-v-01a1b95c"]]);const wt=e=>(yt("data-v-0136bef4"),e=e(),bt(),e),ua=wt(()=>g("div",{class:"handle material-icons"},"drag_handle",-1)),ca={key:0,class:"actions"},da=wt(()=>g("span",{class:"material-icons"},"content_paste",-1)),fa=wt(()=>g("span",{class:"material-icons"},"content_copy",-1)),ma=wt(()=>g("span",{class:"material-icons"},"edit",-1)),pa=wt(()=>g("span",{class:"material-icons",style:{margin:"-2px"}},"delete",-1)),va={key:1,class:"actions"},ga=wt(()=>g("span",{class:"material-icons"},"check",-1)),ha=wt(()=>g("span",{class:"material-icons"},"close",-1)),ya={key:2,class:"details"},ba={class:"save-version"},wa=wt(()=>g("br",null,null,-1)),Na={key:0},_a={key:3,class:"details"},ka={key:4,class:"details error"},Ca=wt(()=>g("br",null,null,-1)),Sa=H({props:{save:null},emits:["export","open","duplicate","delete","editName"],setup(e,{emit:t}){const l=e,{save:n}=ye(l),s=new Intl.DateTimeFormat("en-US",{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}),r=U(!1),u=U(!1),o=U("");et(r,()=>o.value=n.value.name||"");const c=y(()=>n.value&&n.value.id===R.id),d=y(()=>c.value?R.time:n.value&&n.value.time||0);function w(){t("editName",o.value),r.value=!1}return(b,m)=>(_(),D("div",{class:he(["save",{active:f(c)}])},[ua,r.value?(_(),D("div",va,[g("button",{onClick:w,class:"button"},[a(Ce,{display:"Save",direction:f(X).Left,class:"info"},{default:z(()=>[ga]),_:1},8,["direction"])]),g("button",{onClick:m[5]||(m[5]=h=>r.value=!r.value),class:"button"},[a(Ce,{display:"Cancel",direction:f(X).Left,class:"info"},{default:z(()=>[ha]),_:1},8,["direction"])])])):(_(),D("div",ca,[f(n).error==null&&!u.value?(_(),x(oa,{key:0,onClick:m[0]||(m[0]=h=>t("export")),class:"button",left:""},{default:z(()=>[a(Ce,{display:"Export",direction:f(X).Left,class:"info"},{default:z(()=>[da]),_:1},8,["direction"])]),_:1})):L("",!0),f(n).error==null&&!u.value?(_(),D("button",{key:1,onClick:m[1]||(m[1]=h=>t("duplicate")),class:"button"},[a(Ce,{display:"Duplicate",direction:f(X).Left,class:"info"},{default:z(()=>[fa]),_:1},8,["direction"])])):L("",!0),f(n).error==null&&!u.value?(_(),D("button",{key:2,onClick:m[2]||(m[2]=h=>r.value=!r.value),class:"button"},[a(Ce,{display:"Edit Name",direction:f(X).Left,class:"info"},{default:z(()=>[ma]),_:1},8,["direction"])])):L("",!0),a(wn,{disabled:f(c),onClick:m[3]||(m[3]=h=>t("delete")),onConfirmingChanged:m[4]||(m[4]=h=>u.value=h)},{default:z(()=>[a(Ce,{display:"Delete",direction:f(X).Left,class:"info"},{default:z(()=>[pa]),_:1},8,["direction"])]),_:1},8,["disabled"])])),f(n).error==null&&!r.value?(_(),D("div",ya,[g("button",{class:"button open",onClick:m[6]||(m[6]=h=>t("open"))},[g("h3",null,ne(f(n).name),1)]),g("span",ba,"v"+ne(f(n).modVersion),1),wa,f(d)?(_(),D("div",Na,"Last played "+ne(f(s).format(f(d))),1)):L("",!0)])):f(n).error==null&&r.value?(_(),D("div",_a,[a(bn,{modelValue:o.value,"onUpdate:modelValue":m[7]||(m[7]=h=>o.value=h),class:"editname",onSubmit:w},null,8,["modelValue"])])):(_(),D("div",ka,[v(" Error: Failed to load save with id "+ne(f(n).id),1),Ca,v(ne(f(n).error),1)]))],2))}});var Ma=te(Sa,[["__scopeId","data-v-0136bef4"]]);const Vl=e=>(yt("data-v-3b9991aa"),e=e(),bt(),e),Pa=Vl(()=>g("h2",null,"Saves Manager",-1)),Ia={class:"modal-footer"},$a={class:"field"},Ta=Vl(()=>g("span",{class:"field-title"},"Create Save",-1)),Ea={class:"field-buttons"},Ba={class:"footer"},Da=Vl(()=>g("div",{style:{"flex-grow":"1"}},null,-1)),qa=H({setup(e,{expose:t}){const l=U(!1),n=U(null);t({open(){l.value=!0}});const s=U(!1),r=U(""),u=U(null);et(r,I=>{I?gt(()=>{try{if(I[0]!=="{")if(I[0]==="e")I=decodeURIComponent(escape(atob(I)));else if(I[0]==="\u1BE1")I=Ct.decompressFromUTF16(I);else{console.warn("Unable to determine preset encoding",I),s.value=!0;return}const B=JSON.parse(I);if(typeof B!="object"){s.value=!0;return}const q=ml();B.id=q,it(B),r.value="",s.value=!1,ce.saves.push(q)}catch{s.value=!0}}):s.value=!1});let o={},c=U(Object.keys(o).reduce((I,B)=>(I.push({label:B.split("/").slice(-1)[0].slice(0,-4),value:o[B]}),I),[]));const d=El({});function w(I){if(d[I]==null){let B=localStorage.getItem(I);if(B==null)d[I]={error:"Save doesn't exist in localStorage",id:I};else if(B==="dW5kZWZpbmVk")d[I]={error:"Save is undefined",id:I};else try{if(B[0]!=="{")if(B[0]==="e")B=decodeURIComponent(escape(atob(B)));else if(B[0]==="\u1BE1")B=Ct.decompressFromUTF16(B);else return console.warn("Unable to determine preset encoding",B),s.value=!0,d[I]={error:"Unable to determine preset encoding",id:I},d[I];d[I]={...JSON.parse(B),id:I}}catch(q){d[I]={error:q,id:I},console.warn(`SavesManager: Failed to load info about save with id ${I}:
${q}
${B}`)}}return d[I]}et(l,I=>{I&&Object.keys(d).forEach(B=>delete d[B])});const b=y(()=>ce.saves.reduce((I,B)=>(I[B]=w(B),I),{}));function m(I){let B;switch(R.id===I?B=un(R[ke]):B=JSON.stringify(b.value[I]),se.exportEncoding){default:console.warn(`Unknown save encoding: ${se.exportEncoding}. Defaulting to lz`);case"lz":B=Ct.compressToUTF16(B);break;case"base64":B=btoa(unescape(encodeURIComponent(B)));break;case"plain":break}const q=document.createElement("textarea");q.value=B,document.body.appendChild(q),q.select(),q.setSelectionRange(0,99999),document.execCommand("copy"),document.body.removeChild(q)}function h(I){R.id===I&&it();const B={...b.value[I],id:ml()};it(B),ce.saves.push(B.id)}function p(I){ce.saves=ce.saves.filter(B=>B!==I),localStorage.removeItem(I),d[I]=void 0}function S(I){b.value[R.id].time=R.time,it(),d[R.id]=void 0,qt(b.value[I]),d[I]=void 0}function C(I){if(u.value=I,gt(()=>{u.value=null}),I[0]!=="{")if(I[0]==="e")I=decodeURIComponent(escape(atob(I)));else if(I[0]==="\u1BE1")I=Ct.decompressFromUTF16(I);else{console.warn("Unable to determine preset encoding",I);return}const B=JSON.parse(I);B.id=ml(),it(B),ce.saves.push(B.id),S(B.id)}function P(I,B){const q=b.value[I];q&&(q.name=B,R.id===I?(R.name=B,it()):(it(q),d[I]=void 0))}return(I,B)=>(_(),x(Ft,{modelValue:l.value,"onUpdate:modelValue":B[4]||(B[4]=q=>l.value=q),ref_key:"modal",ref:n},{header:z(()=>[Pa]),body:z(({shown:q})=>[q?(_(),x(f(Vn),{key:0,list:f(ce).saves,handle:".handle",itemKey:oe=>oe},{item:z(({element:oe})=>[a(Ma,{save:f(b)[oe],onOpen:Q=>S(oe),onExport:Q=>m(oe),onEditName:Q=>P(oe,Q),onDuplicate:Q=>h(oe),onDelete:Q=>p(oe)},null,8,["save","onOpen","onExport","onEditName","onDuplicate","onDelete"])]),_:1},8,["list","itemKey"])):L("",!0)]),footer:z(()=>[g("div",Ia,[a(bn,{modelValue:r.value,"onUpdate:modelValue":B[0]||(B[0]=q=>r.value=q),title:"Import Save",placeholder:"Paste your save here!",class:he({importingFailed:s.value})},null,8,["modelValue","class"]),g("div",$a,[Ta,g("div",Ea,[g("button",{class:"button",onClick:B[1]||(B[1]=q=>S(f(Ht)().id))},"New Game"),Object.keys(f(c)).length>0?(_(),x(Ll,{key:0,options:f(c),modelValue:u.value,"onUpdate:modelValue":B[2]||(B[2]=q=>C(q)),closeOnSelect:"",placeholder:"Select preset",class:"presets"},null,8,["options","modelValue"])):L("",!0)])]),g("div",Ba,[Da,g("button",{class:"button modal-default-button",onClick:B[3]||(B[3]=q=>l.value=!1)}," Close ")])])]),_:1},8,["modelValue"]))}});var Nn=te(qa,[["__scopeId","data-v-3b9991aa"]]);const ze=e=>(yt("data-v-4a3f8425"),e=e(),bt(),e),Fa=["src","alt"],Aa={key:1,class:"title"},Oa=ze(()=>g("div",{style:{"flex-grow":"1",cursor:"unset"}},null,-1)),Ra={class:"discord"},La={class:"discord-links"},Va={key:0},Ga=["href"],Ua=ze(()=>g("li",null,[g("a",{href:"https://discord.gg/WzejVAx",target:"_blank"},"The Paper Pilot Community")],-1)),xa=ze(()=>g("li",null,[g("a",{href:"https://discord.gg/F3xveHV",target:"_blank"},"The Modding Tree")],-1)),ja={href:"https://forums.moddingtree.com/",target:"_blank"},Ha=ze(()=>g("span",{class:"material-icons"},"forum",-1)),Wa=ze(()=>g("span",{class:"material-icons"},"info",-1)),za=ze(()=>g("span",{class:"material-icons"},"library_books",-1)),Ya=ze(()=>g("span",{class:"material-icons"},"settings",-1)),Za=ze(()=>g("span",{class:"material-icons"},"library_books",-1)),Ka=ze(()=>g("span",{class:"material-icons"},"settings",-1)),Ja=ze(()=>g("span",{class:"material-icons"},"info",-1)),Xa={href:"https://forums.moddingtree.com/",target:"_blank"},Qa=ze(()=>g("span",{class:"material-icons"},"forum",-1)),er={class:"discord"},tr={class:"discord-links"},lr={key:0},nr=["href"],ir=ze(()=>g("li",null,[g("a",{href:"https://discord.gg/WzejVAx",target:"_blank"},"The Paper Pilot Community")],-1)),sr=ze(()=>g("li",null,[g("a",{href:"https://discord.gg/F3xveHV",target:"_blank"},"The Modding Tree")],-1)),ar=H({setup(e){const t=U(null),l=U(null),n=U(null),s=U(null),{useHeader:r,banner:u,title:o,discordName:c,discordLink:d,versionNumber:w}=se;function b(){window.open(d,"mywindow")}return(m,h)=>(_(),D(V,null,[f(r)?(_(),D("div",ht({key:0,class:"nav"},m.$attrs),[f(u)?(_(),D("img",{key:0,src:f(u),class:"banner",alt:f(o)},null,8,Fa)):(_(),D("div",Aa,ne(f(o)),1)),g("div",{onClick:h[0]||(h[0]=p=>{var S;return(S=s.value)==null?void 0:S.open()}),class:"version-container"},[a(Ce,{display:"Changelog",direction:f(X).Down,class:"version"},{default:z(()=>[g("span",null,"v"+ne(f(w)),1)]),_:1},8,["direction"])]),Oa,g("div",Ra,[g("span",{onClick:b,class:"material-icons"},"discord"),g("ul",La,[f(d)?(_(),D("li",Va,[g("a",{href:f(d),target:"_blank"},ne(f(c)),9,Ga)])):L("",!0),Ua,xa])]),g("div",null,[g("a",ja,[a(Ce,{display:"Forums",direction:f(X).Down,yoffset:"5px"},{default:z(()=>[Ha]),_:1},8,["direction"])])]),g("div",{onClick:h[1]||(h[1]=p=>{var S;return(S=t.value)==null?void 0:S.open()})},[a(Ce,{display:"Info",direction:f(X).Down,class:"info"},{default:z(()=>[Wa]),_:1},8,["direction"])]),g("div",{onClick:h[2]||(h[2]=p=>{var S;return(S=l.value)==null?void 0:S.open()})},[a(Ce,{display:"Saves",direction:f(X).Down,xoffset:"-20px"},{default:z(()=>[za]),_:1},8,["direction"])]),g("div",{onClick:h[3]||(h[3]=p=>{var S;return(S=n.value)==null?void 0:S.open()})},[a(Ce,{display:"Options",direction:f(X).Down,xoffset:"-66px"},{default:z(()=>[Ya]),_:1},8,["direction"])])],16)):(_(),D("div",ht({key:1,class:"overlay-nav"},m.$attrs),[g("div",{onClick:h[4]||(h[4]=p=>{var S;return(S=s.value)==null?void 0:S.open()}),class:"version-container"},[a(Ce,{display:"Changelog",direction:f(X).Right,xoffset:"25%",class:"version"},{default:z(()=>[g("span",null,"v"+ne(f(w)),1)]),_:1},8,["direction"])]),g("div",{onClick:h[5]||(h[5]=p=>{var S;return(S=l.value)==null?void 0:S.open()})},[a(Ce,{display:"Saves",direction:f(X).Right},{default:z(()=>[Za]),_:1},8,["direction"])]),g("div",{onClick:h[6]||(h[6]=p=>{var S;return(S=n.value)==null?void 0:S.open()})},[a(Ce,{display:"Options",direction:f(X).Right},{default:z(()=>[Ka]),_:1},8,["direction"])]),g("div",{onClick:h[7]||(h[7]=p=>{var S;return(S=t.value)==null?void 0:S.open()})},[a(Ce,{display:"Info",direction:f(X).Right},{default:z(()=>[Ja]),_:1},8,["direction"])]),g("div",null,[g("a",Xa,[a(Ce,{display:"Forums",direction:f(X).Right,xoffset:"7px"},{default:z(()=>[Qa]),_:1},8,["direction"])])]),g("div",er,[g("span",{onClick:b,class:"material-icons"},"discord"),g("ul",tr,[f(d)?(_(),D("li",lr,[g("a",{href:f(d),target:"_blank"},ne(f(c)),9,nr)])):L("",!0),ir,sr])])],16)),a(Gs,{ref_key:"info",ref:t,changelog:s.value},null,8,["changelog"]),a(Nn,{ref_key:"savesManager",ref:l},null,512),a(Zs,{ref_key:"options",ref:n},null,512),a(_s,{ref_key:"changelog",ref:s},null,512)],64))}});var _n=te(ar,[["__scopeId","data-v-4a3f8425"]]);const rr={class:"inner-tab"},or=H({setup(e){const t=Pt(R,"tabs"),l=y(()=>Object.keys(Ge)),n=se.useHeader;function s(r){const{display:u,minimized:o,minWidth:c,name:d,color:w,minimizable:b,nodes:m}=r;return{display:u,minimized:o,minWidth:c,name:d,color:w,minimizable:b,nodes:m}}return(r,u)=>(_(),D("div",{class:he(["tabs-container",{useHeader:f(n)}])},[(_(!0),D(V,null,nl(f(t),(o,c)=>{var d,w;return _(),D("div",{key:c,class:he(["tab",f((d=f(Ge)[o])==null?void 0:d.classes)]),ref_for:!0,ref:`tab-${c}`,style:re(f((w=f(Ge)[o])==null?void 0:w.style))},[c===0&&!f(n)?(_(),x(_n,{key:0})):L("",!0),g("div",rr,[f(l).includes(o)?(_(),x(us,ht({key:0},s(f(Ge)[o]),{index:c,tab:()=>{var b;return(b=r.$refs[`tab-${c}`])==null?void 0:b[0]}}),null,16,["index","tab"])):(_(),x(de(o),{key:1,index:c},null,8,["index"]))])],6)}),128))],2))}});var ur=te(or,[["__scopeId","data-v-4cb9ce0f"]]);const cr=H({props:{width:{default:"8px"},height:{default:"17px"}},setup(e){return(t,l)=>(_(),D("div",{style:re({width:e.width,height:e.height})},null,4))}});function _l(e){return Oe(()=>{const t=e();return t.currentGain==null&&(t.currentGain=y(()=>{let l=t.gainModifier?t.gainModifier.apply(t.scaling.currentGain(t)):t.scaling.currentGain(t);return l=i.floor(l).max(0),f(t.buyMax)||(l=l.min(1)),l})),t.actualGain==null&&(t.actualGain=t.currentGain),t.currentAt==null&&(t.currentAt=y(()=>{let l=t.scaling.currentAt(t);return t.roundUpCost&&(l=i.ceil(l)),l})),t.nextAt==null&&(t.nextAt=y(()=>{let l=t.scaling.nextAt(t);return t.roundUpCost&&(l=i.ceil(l)),l})),t.convert==null&&(t.convert=function(){const l=f(t.currentGain);t.gainResource.value=i.add(t.gainResource.value,l),kl(t.baseResource)&&(t.baseResource.value=0)}),k(t,"currentGain"),k(t,"actualGain"),k(t,"currentAt"),k(t,"nextAt"),k(t,"buyMax"),ee(t,"buyMax",!0),k(t,"roundUpCost"),ee(t,"roundUpCost",!0),t})}function kl(e){return e.precision!==void 0}function It(e,t){const l=jt(e),n=jt(t);return{currentGain(s){let r=f(s.baseResource.value);if(s.costModifier&&(r=s.costModifier.apply(r)),i.lt(r,f(l)))return 0;const u=i.div(r,f(l)).pow(f(n));return u.isNan()?new i(0):u},currentAt(s){var u,o,c;let r=f(s.currentGain);return s.gainModifier&&(r=s.gainModifier.revert(r)),r=i.max(0,r).root(f(n)).times(f(l)),s.costModifier&&(r=(c=(o=(u=s.costModifier)==null?void 0:u.revert)==null?void 0:o.call(u,r))!=null?c:r),r},nextAt(s){var u,o,c;let r=i.add(f(s.currentGain),1).floor();return s.gainModifier&&(r=s.gainModifier.revert(r)),r=i.max(0,r).root(f(n)).times(f(l)).max(f(l)),s.costModifier&&(r=(c=(o=(u=s.costModifier)==null?void 0:u.revert)==null?void 0:o.call(u,r))!=null?c:r),r}}}function $t(e){return _l(e)}function dr(e){return _l(()=>{const t=e();return ee(t,"buyMax",!1),t.currentGain==null&&(t.currentGain=y(()=>{let l=t.gainModifier?t.gainModifier.apply(t.scaling.currentGain(t)):t.scaling.currentGain(t);return l=i.floor(l).max(t.gainResource.value),f(t.buyMax)||(l=l.min(i.add(t.gainResource.value,1))),l})),t.actualGain==null&&(t.actualGain=y(()=>{let l=i.sub(i.floor(t.scaling.currentGain(t)),t.gainResource.value).max(0);return f(t.buyMax)||(l=l.min(1)),l})),ee(t,"convert",function(){f(t.actualGain),t.gainResource.value=t.gainModifier?t.gainModifier.apply(f(t.currentGain)):f(t.currentGain),kl(t.baseResource)&&(t.baseResource.value=0)}),t})}function K(e,t="points",l=0,n=void 0){const s=De(e)?e:Ue(e);return s.displayName=t,s.precision=l,s.small=n,s}function ot(e){const t=Ue(e.value);return et(e,l=>{i.gt(l,t.value)&&(t.value=l)}),t}function fr(e){const t=Ue(e.value);return et(e,(l,n)=>{i.gt(l,n)&&(t.value=i.add(t.value,i.sub(l,n)))}),t}const mr=new i("10^^8"),pr=new i("1e100");function vr(e,t){const l=U(0),n=U(0),s=U(0);return fe.on("update",u=>{if(n.value=0,i.lte(e.value,pr)){s.value=e.value;return}let o=e.value,c=s.value;if(s.value=o,i.gt(o,c))if(i.gte(o,mr))o=i.slog(o,1e10),c=i.slog(c,1e10),l.value=o.sub(c).div(u),n.value=-1;else for(;i.div(o,c).log(10).div(u).gte("100")&&n.value<=5&&i.gt(c,0);)o=i.log10(o),c=i.log10(c),l.value=o.sub(c).div(u),n.value++}),y(()=>n.value===0?t?A(t.value,e.precision,e.small)+" "+e.displayName+"/s":"":A(l.value)+" OOM"+(n.value<0?"^OOM":"^"+n.value)+"s/sec")}function at(e,t){const l=t!=null?t:e.value;return i.eq(e.precision,0)?ge(l):A(l,e.precision,e.small)}function gr(e,t){if(kl(e))return at(e,t);{const l=t!=null?t:e.value;return A(l)}}const hr=["x1","y1","x2","y2"],yr=H({props:{link:null,startNode:null,endNode:null,boundingRect:null},setup(e){const l=ye(e),n=y(()=>{const r=l.startNode.value.rect,u=l.boundingRect.value,o=u?{x:r.x+r.width/2-u.x,y:r.y+r.height/2-u.y}:{x:0,y:0};return l.link.value.offsetStart&&(o.x+=l.link.value.offsetStart.x,o.y+=l.link.value.offsetStart.y),o}),s=y(()=>{const r=l.endNode.value.rect,u=l.boundingRect.value,o=u?{x:r.x+r.width/2-u.x,y:r.y+r.height/2-u.y}:{x:0,y:0};return l.link.value.offsetEnd&&(o.x+=l.link.value.offsetEnd.x,o.y+=l.link.value.offsetEnd.y),o});return(r,u)=>(_(),D("line",ht({"stroke-width":"15px",stroke:"white"},e.link,{x1:f(n).x,y1:f(n).y,x2:f(s).x,y2:f(s).y}),null,16,hr))}});const br=H({props:{links:null},setup(e){var c;const l=Pt(e,"links"),n=U(null),s=pl(Ol,U({})),r=pl(Rl,U(void 0)),u=U((c=n.value)==null?void 0:c.getBoundingClientRect());et(r,()=>{var d;return u.value=(d=n.value)==null?void 0:d.getBoundingClientRect()}),wl(()=>{var d;return u.value=(d=n.value)==null?void 0:d.getBoundingClientRect()});const o=y(()=>{var w,b;const d=s.value;return(b=(w=l.value)==null?void 0:w.filter(m=>{var h,p;return((h=d[m.startNode.id])==null?void 0:h.rect)&&((p=d[m.startNode.id])==null?void 0:p.rect)}))!=null?b:[]});return(d,w)=>(_(),D(V,null,[f(o)?(_(),D("svg",Fn(ht({key:0},d.$attrs)),[(_(!0),D(V,null,nl(f(o),(b,m)=>(_(),x(yr,{key:m,link:b,boundingRect:u.value,startNode:f(s)[b.startNode.id],endNode:f(s)[b.endNode.id]},null,8,["link","boundingRect","startNode","endNode"]))),128))],16)):L("",!0),g("div",{ref_key:"resizeListener",ref:n,class:"resize-listener"},null,512)],64))}});var wr=te(br,[["__scopeId","data-v-063f6d6b"]]),Nr=H({props:{nodes:{type:E(Array),required:!0},leftSideNodes:E(Array),rightSideNodes:E(Array),branches:E(Array)},components:{Links:wr},setup(e){const{nodes:t,leftSideNodes:l,rightSideNodes:n}=ye(e),s=Xe();Qe(()=>{const o=ve(t);s.value=j(F(()=>a(V,null,[o.map(c=>a("span",{class:"row tree-row",style:"margin: 50px auto;"},[c.map(vt)]))])))});const r=Xe();Qe(()=>{const o=ve(l);r.value=o?j(F(()=>a("span",{class:"left-side-nodes small"},[o.map(vt)]))):""});const u=Xe();return Qe(()=>{const o=ve(n);u.value=o?j(F(()=>a("span",{class:"side-nodes small"},[o.map(vt)]))):""}),{unref:f,nodesComp:s,leftNodesComp:r,rightNodesComp:u}}});function _r(e,t,l,n,s,r){const u=Be("Links");return _(),D(V,null,[(_(),x(de(e.nodesComp))),e.leftNodesComp?(_(),x(de(e.leftNodesComp),{key:0})):L("",!0),e.rightNodesComp?(_(),x(de(e.rightNodesComp),{key:1})):L("",!0),e.branches?(_(),x(u,{key:2,links:e.unref(e.branches)},null,8,["links"])):L("",!0)],64)}var kr=te(Nr,[["render",_r],["__scopeId","data-v-39ca96d0"]]);const Cr={key:0},Sr={key:0,class:"mark star"},Mr=["src"],Pr=H({props:{mark:{type:[Boolean,String]}},setup(e){return(t,l)=>e.mark?(_(),D("div",Cr,[e.mark===!0?(_(),D("div",Sr)):(_(),D("img",{key:1,class:"mark",src:e.mark},null,8,Mr))])):L("",!0)}});var ol=te(Pr,[["__scopeId","data-v-2207999f"]]);const Ir=H({props:{id:null},setup(e){const l=ye(e),n=pl(Fl,()=>{}),s=pl(Al,()=>{}),r=U(null),u=y(()=>r.value&&r.value.parentElement);return et([u,l.id],([o,c],[d,w])=>{d&&s(f(w)),o&&n(c,o)}),Ql(()=>s(f(l.id))),(o,c)=>(_(),D("div",{class:"node",ref_key:"node",ref:r},null,512))}});var Tt=te(Ir,[["__scopeId","data-v-2cb1bb79"]]);const $r=H({props:{display:E(Object,String,Function),visibility:{type:E(Number),required:!0},style:E(String,Object,Array),classes:E(Object),onClick:Function,onHold:Function,color:E(String),glowColor:E(String),canClick:{type:E(Boolean),required:!0},mark:E(Boolean,String),id:{type:String,required:!0}},components:{MarkNode:ol,Node:Tt},setup(e){const{onClick:t,onHold:l,display:n}=ye(e),s=Kt(n),{start:r,stop:u}=ql(t,l);return{start:r,stop:u,comp:s,unref:f,Visibility:$,isCoercableComponent:We}}});function Tr(e,t,l,n,s,r){var c;const u=Be("MarkNode"),o=Be("Node");return e.unref(e.visibility)!==e.Visibility.None?(_(),D("div",{key:0,style:re({visibility:e.unref(e.visibility)===e.Visibility.Hidden?"hidden":void 0}),class:he({treeNode:!0,can:e.unref(e.canClick),...e.unref(e.classes)}),onClick:t[0]||(t[0]=(...d)=>e.onClick&&e.onClick(...d)),onMousedown:t[1]||(t[1]=(...d)=>e.start&&e.start(...d)),onMouseleave:t[2]||(t[2]=(...d)=>e.stop&&e.stop(...d)),onMouseup:t[3]||(t[3]=(...d)=>e.stop&&e.stop(...d)),onTouchstartPassive:t[4]||(t[4]=(...d)=>e.start&&e.start(...d)),onTouchendPassive:t[5]||(t[5]=(...d)=>e.stop&&e.stop(...d)),onTouchcancelPassive:t[6]||(t[6]=(...d)=>e.stop&&e.stop(...d))},[g("div",{style:re([{backgroundColor:e.unref(e.color),boxShadow:`-4px -4px 4px rgba(0, 0, 0, 0.25) inset, 0 0 20px ${e.unref(e.glowColor)}`},(c=e.unref(e.style))!=null?c:[]])},[(_(),x(de(e.unref(e.comp))))],4),a(u,{mark:e.unref(e.mark)},null,8,["mark"]),a(o,{id:e.id},null,8,["id"])],38)):L("",!0)}var Er=te($r,[["render",Tr],["__scopeId","data-v-1c0c107d"]]);const Br=Symbol("TreeNode"),Dr=Symbol("Tree");function kn(e){return Oe(()=>{var l;const t=(l=e==null?void 0:e())!=null?l:{};if(t.id=xe("treeNode-"),t.type=Br,t[Ee]=Er,k(t,"visibility"),ee(t,"visibility",$.Visible),k(t,"canClick"),ee(t,"canClick",!0),k(t,"color"),k(t,"display"),k(t,"glowColor"),k(t,"classes"),k(t,"style"),k(t,"mark"),t.onClick){const n=t.onClick.bind(t);t.onClick=function(){f(t.canClick)&&n()}}if(t.onHold){const n=t.onHold.bind(t);t.onHold=function(){f(t.canClick)&&n()}}return t[qe]=function(){const{display:n,visibility:s,style:r,classes:u,onClick:o,onHold:c,color:d,glowColor:w,canClick:b,mark:m,id:h}=this;return{display:n,visibility:s,style:r,classes:u,onClick:o,onHold:c,color:d,glowColor:w,canClick:b,mark:m,id:h}},t})}function qr(e){return Oe(()=>{const t=e();return t.id=xe("tree-"),t.type=Dr,t[Ee]=kr,t.isResetting=U(!1),t.resettingNode=Xe(null),t.reset=function(l){var s,r;const n=t;n.isResetting.value=!0,n.resettingNode.value=l,(s=n.resetPropagation)==null||s.call(n,n,l),(r=n.onReset)==null||r.call(n,l),n.isResetting.value=!1,n.resettingNode.value=null},t.links=y(()=>{var n;return(n=f(t.branches))!=null?n:[]}),k(t,"visibility"),ee(t,"visibility",$.Visible),k(t,"nodes"),k(t,"leftSideNodes"),k(t,"rightSideNodes"),k(t,"branches"),t[qe]=function(){const{nodes:l,leftSideNodes:n,rightSideNodes:s,branches:r}=this;return{nodes:l,leftSideNodes:n,rightSideNodes:s,branches:r}},t})}const Fr=function(e,t){const l=f(e.nodes),n=l.findIndex(s=>s.includes(t))-1;for(let s=n;s>=0;s--)l[s].forEach(r=>{var u;return(u=r.reset)==null?void 0:u.reset()})};function ct(e,t=null,l=0){const n=jt(l);return y(()=>t==null||i.gte(e.value,f(n))?at(e)+" "+e.displayName:`Reach ${i.eq(t.precision,0)?ge(f(n)):A(f(n),t.precision)} ${t.displayName} to unlock (You have ${i.eq(t.precision,0)?ge(t.value):A(t.value,t.precision)})`)}const Ar=Symbol("Reset");function tt(e){return Oe(()=>{const t=e();return t.id=xe("reset-"),t.type=Ar,t.reset=function(){var n;const l=s=>{s&&typeof s=="object"&&(Yt in s?s[Yt].value=s[al]:!(s instanceof i)&&!De(s)&&Object.values(s).forEach(r=>l(r)))};f(t.thingsToReset).forEach(l),fe.emit("reset",t),(n=t.onReset)==null||n.call(t)},k(t,"thingsToReset"),t})}const dl={};fe.on("removeLayer",e=>{var t;(t=dl[e.id])==null||t.call(dl),dl[e.id]=void 0});const Or=H({setup(e){const t=U("0"),l=new ResizeObserver(s),n=U(null);function s(){let r=n.value;if(r==null)return;let u=0;for(;r.previousSibling;){const o=r.previousSibling;o.dataset&&"vSticky"in o.dataset&&(u+=o.offsetHeight),r=o}t.value=u+"px"}return gt(s),document.fonts.ready.then(s),wl(()=>{var u;const r=(u=n.value)==null?void 0:u.parentElement;r&&l.observe(r)}),(r,u)=>(_(),D("div",{class:"sticky",style:re({top:t.value}),ref_key:"element",ref:n,"data-v-sticky":""},[Mt(r.$slots,"default",{},void 0,!0)],4))}});var Cn=te(Or,[["__scopeId","data-v-21495571"]]);const Rr=H({props:{resource:null,color:null},setup(e){const t=e,l=y(()=>at(t.resource));return(n,s)=>(_(),D("h2",{style:re({color:e.color,"text-shadow":"0px 0px 10px "+e.color})},ne(f(l)),5))}});const Lr={class:"main-display"},Vr={key:0},Gr={key:1},Ur=v(", "),dt=H({props:{resource:null,color:null,classes:null,style:null,effectDisplay:null},setup(e){const l=ye(e),n=U(null),s=Kt(l.effectDisplay),r=y(()=>i.lt(l.resource.value,"1e1000"));return(u,o)=>(_(),x(Cn,null,{default:z(()=>{var c,d;return[g("div",{class:"main-display-container",style:re({height:`${((d=(c=n.value)==null?void 0:c.$el.clientHeight)!=null?d:0)+50}px`})},[g("div",Lr,[f(r)?(_(),D("span",Vr,"You have ")):L("",!0),a(Rr,{resource:e.resource,color:e.color||"white"},null,8,["resource","color"]),v(" "+ne(e.resource.displayName),1),f(s)?(_(),D("span",Gr,[Ur,(_(),x(de(f(s)),{ref_key:"effectRef",ref:n},null,512))])):L("",!0)])],4)]}),_:1}))}});var xr=H({props:{display:{type:E(Object,String,Function),required:!0},visibility:{type:E(Number),required:!0},style:E(Object,String,Array),classes:E(Object),onClick:Function,onHold:Function,canClick:{type:E(Boolean),required:!0},small:Boolean,mark:E(Boolean,String),id:{type:String,required:!0}},components:{Node:Tt,MarkNode:ol},setup(e){const{display:t,onClick:l,onHold:n}=ye(e),s=Xe("");Qe(()=>{const o=ve(t);if(o==null){s.value="";return}if(We(o)){s.value=j(o);return}const c=j(o.title||"","h3"),d=j(o.description,"div");s.value=j(F(()=>a("span",null,[o.title?a("div",null,[a(c,null,null)]):null,a(d,null,null)])))});const{start:r,stop:u}=ql(l,n);return{start:r,stop:u,comp:s,Visibility:$,unref:f}}});function jr(e,t,l,n,s,r){var c;const u=Be("MarkNode"),o=Be("Node");return e.unref(e.visibility)!==e.Visibility.None?(_(),D("button",{key:0,style:re([{visibility:e.unref(e.visibility)===e.Visibility.Hidden?"hidden":void 0},(c=e.unref(e.style))!=null?c:[]]),onClick:t[0]||(t[0]=(...d)=>e.onClick&&e.onClick(...d)),onMousedown:t[1]||(t[1]=(...d)=>e.start&&e.start(...d)),onMouseleave:t[2]||(t[2]=(...d)=>e.stop&&e.stop(...d)),onMouseup:t[3]||(t[3]=(...d)=>e.stop&&e.stop(...d)),onTouchstartPassive:t[4]||(t[4]=(...d)=>e.start&&e.start(...d)),onTouchendPassive:t[5]||(t[5]=(...d)=>e.stop&&e.stop(...d)),onTouchcancelPassive:t[6]||(t[6]=(...d)=>e.stop&&e.stop(...d)),class:he({feature:!0,clickable:!0,can:e.unref(e.canClick),locked:!e.unref(e.canClick),small:e.small,...e.unref(e.classes)})},[e.unref(e.comp)?(_(),x(de(e.unref(e.comp)),{key:0})):L("",!0),a(u,{mark:e.unref(e.mark)},null,8,["mark"]),a(o,{id:e.id},null,8,["id"])],38)):L("",!0)}var Gl=te(xr,[["render",jr],["__scopeId","data-v-5e7c90cf"]]);const Hr=Symbol("Clickable");function rt(e){return Oe(()=>{var l;const t=(l=e==null?void 0:e())!=null?l:{};if(t.id=xe("clickable-"),t.type=Hr,t[Ee]=Gl,k(t,"visibility"),ee(t,"visibility",$.Visible),k(t,"canClick"),ee(t,"canClick",!0),k(t,"classes"),k(t,"style"),k(t,"mark"),k(t,"display"),t.onClick){const n=t.onClick.bind(t);t.onClick=function(s){f(t.canClick)&&n(s)}}if(t.onHold){const n=t.onHold.bind(t);t.onHold=function(){f(t.canClick)&&n()}}return t[qe]=function(){const{display:n,visibility:s,style:r,classes:u,onClick:o,onHold:c,canClick:d,small:w,mark:b,id:m}=this;return{display:n,visibility:s,style:f(r),classes:u,onClick:o,onHold:c,canClick:d,small:w,mark:b,id:m}},t})}function ft(e){return rt(()=>{const t=e();k(t,"showNextAt"),ee(t,"showNextAt",!0),ee(t,"minimumGain",1),t.resetDescription==null?t.resetDescription=y(()=>i.lt(t.conversion.gainResource.value,1e3)?"Reset for ":""):k(t,"resetDescription"),t.display==null&&(t.display=F(()=>a("span",null,[f(t.resetDescription),a("b",null,[at(t.conversion.gainResource,i.max(f(t.conversion.actualGain),f(t.minimumGain)))])," ",t.conversion.gainResource.displayName,Ne(a("div",null,[a("br",null,null),f(t.conversion.buyMax)?"Next:":"Req:"," ",gr(t.conversion.baseResource,f(t.conversion.buyMax)||i.floor(f(t.conversion.actualGain)).neq(1)?f(t.conversion.nextAt):f(t.conversion.currentAt))," ",kl(t.conversion.baseResource)?t.conversion.baseResource.displayName:t.baseResourceName||""]),[[Pe,f(t.showNextAt)]])]))),t.canClick==null&&(t.canClick=y(()=>i.gte(f(t.conversion.actualGain),f(t.minimumGain))));const l=t.onClick;return t.onClick=function(){!f(t.canClick)||(t.conversion.convert(),t.tree.reset(t.treeNode),t.resetTime&&(t.resetTime.value=t.resetTime[al]),l==null||l())},t})}function lt(e){return kn(()=>{const t=e();return k(t,"display"),ee(t,"display",t.layerID),k(t,"append"),{...t,display:t.display,onClick:f(t.append)?function(){if(R.tabs.includes(t.layerID)){const l=R.tabs.lastIndexOf(t.layerID);R.tabs.splice(l,1)}else R.tabs.push(t.layerID)}:function(){R.tabs.splice(1,1,t.layerID)}}})}var Wr=H({props:{display:{type:E(String,Object,Function),required:!0},visibility:{type:E(Number),required:!0},style:E(String,Object,Array),classes:E(Object),resource:Object,cost:E(String,Object,Number),canPurchase:{type:E(Boolean),required:!0},bought:{type:E(Boolean),required:!0},mark:E(Boolean,String),id:{type:String,required:!0},purchase:{type:Function,required:!0}},components:{Node:Tt,MarkNode:ol},setup(e){const{display:t,cost:l}=ye(e),n=Xe("");return Qe(()=>{const s=ve(t);if(s==null){n.value="";return}if(We(s)){n.value=j(s);return}const r=ve(l),u=j(s.title||"","h3"),o=j(s.description,"div"),c=j(s.effectDisplay||"");n.value=j(F(()=>{var d;return a("span",null,[s.title?a("div",null,[a(u,null,null)]):null,a(o,null,null),s.effectDisplay?a("div",null,[v("Currently: "),a(c,null,null)]):null,e.resource!=null?a(V,null,[a("br",null,null),v("Cost: "),e.resource&&at(e.resource,r)," ",(d=e.resource)==null?void 0:d.displayName]):null])}))}),{component:n,unref:f,Visibility:$}}});const zr=["disabled"];function Yr(e,t,l,n,s,r){var c;const u=Be("MarkNode"),o=Be("Node");return e.unref(e.visibility)!==e.Visibility.None?(_(),D("button",{key:0,style:re([{visibility:e.unref(e.visibility)===e.Visibility.Hidden?"hidden":void 0},(c=e.unref(e.style))!=null?c:{}]),onClick:t[0]||(t[0]=(...d)=>e.purchase&&e.purchase(...d)),class:he({feature:!0,upgrade:!0,can:e.unref(e.canPurchase),locked:!e.unref(e.canPurchase),bought:e.unref(e.bought),...e.unref(e.classes)}),disabled:!e.unref(e.canPurchase)},[e.unref(e.component)?(_(),x(de(e.unref(e.component)),{key:0})):L("",!0),a(u,{mark:e.unref(e.mark)},null,8,["mark"]),a(o,{id:e.id},null,8,["id"])],14,zr)):L("",!0)}var Zr=te(Wr,[["render",Yr],["__scopeId","data-v-7742f590"]]);const Kr=Symbol("Upgrade");function Je(e){const t=Ue(!1);return Oe(()=>{const l=e();return l.id=xe("upgrade-"),l.type=Kr,l[Ee]=Zr,l.canAfford==null&&(l.resource==null||l.cost==null)&&console.warn("Error: can't create upgrade without a canAfford property or a resource and cost property",l),l.bought=t,l.canAfford==null?l.canAfford=y(()=>{const n=l;return n.resource!=null&&n.cost!=null&&i.gte(n.resource.value,f(n.cost))}):k(l,"canAfford"),l.canPurchase=y(()=>f(l.visibility)===$.Visible&&f(l.canAfford)&&!f(l.bought)),l.purchase=function(){var s;const n=l;!f(n.canPurchase)||(n.resource!=null&&n.cost!=null&&(n.resource.value=i.sub(n.resource.value,f(n.cost))),t.value=!0,(s=n.onPurchase)==null||s.call(n))},k(l,"visibility"),ee(l,"visibility",$.Visible),k(l,"classes"),k(l,"style"),k(l,"display"),k(l,"mark"),k(l,"cost"),k(l,"resource"),l[qe]=function(){const{display:n,visibility:s,style:r,classes:u,resource:o,cost:c,canPurchase:d,bought:w,mark:b,id:m,purchase:h}=this;return{display:n,visibility:s,style:f(r),classes:u,resource:o,cost:c,canPurchase:d,bought:w,mark:b,id:m,purchase:h}},l})}const Jr=Symbol("Buyable");function He(e){const t=Ue(0);return Oe(()=>{var r,u;const l=e();if(l.canPurchase==null&&(l.resource==null||l.cost==null))throw console.warn("Cannot create buyable without a canPurchase property or a resource and cost property",l),"Cannot create buyable without a canPurchase property or a resource and cost property";l.id=xe("buyable-"),l.type=Jr,l[Ee]=Gl,l.amount=t,l.canAfford=y(()=>{const o=l,c=f(o.cost);return o.resource!=null&&c!=null&&i.gte(o.resource.value,c)}),l.canPurchase==null&&(l.canPurchase=y(()=>f(l.visibility)===$.Visible&&f(l.canAfford)&&i.lt(l.amount.value,f(l.purchaseLimit)))),l.maxed=y(()=>i.gte(l.amount.value,f(l.purchaseLimit))),k(l,"classes");const n=l.classes;l.classes=y(()=>{const o=f(n)||{};return l.maxed.value&&(o.bought=!0),o}),k(l,"canPurchase"),k(l,"keepRes"),l.keepRes===void 0&&(l.keepRes=!1),l.keepRes,l.canClick=l.canPurchase,l.onClick=l.purchase=(u=(r=l.onClick)!=null?r:l.purchase)!=null?u:function(){var d;const o=l;if(!f(o.canPurchase))return;const c=f(o.cost);o.cost!=null&&o.resource!=null&&(o.resource.value=i.sub(o.resource.value,c),o.amount.value=i.add(o.amount.value,1)),(d=this.onPurchase)==null||d.call(this,c)},k(l,"display");const s=l.display;return l.display=F(()=>{const o=f(s);if(We(o)){const c=j(o);return a(c,null,null)}if(o!=null&&l.cost!=null&&l.resource!=null){const c=l,d=j(o.title||"","h3"),w=j(o.description||""),b=j(o.effectDisplay||"");return a("span",null,[o.title?a("div",null,[a(d,null,null)]):null,o.description?a(w,null,null):null,o.showAmount===!1?null:a("div",null,[a("br",null,null),f(c.purchaseLimit)===i.dInf?a(V,null,[v("Amount: "),ge(c.amount.value)]):a(V,null,[v("Amount: "),ge(c.amount.value),v(" /")," ",ge(f(c.purchaseLimit))])]),o.effectDisplay?a("div",null,[a("br",null,null),v("Currently: "),a(b,null,null)]):null,c.cost&&!c.maxed.value?a("div",null,[a("br",null,null),v("Cost: "),A(f(c.cost)||0)," ",l.resource.displayName]):null])}return""}),k(l,"visibility"),ee(l,"visibility",$.Visible),k(l,"cost"),k(l,"resource"),k(l,"purchaseLimit"),ee(l,"purchaseLimit",i.dInf),k(l,"style"),k(l,"mark"),k(l,"small"),l[qe]=function(){const{display:o,visibility:c,style:d,classes:w,onClick:b,canClick:m,small:h,mark:p,id:S}=this;return{display:o,visibility:c,style:f(d),classes:w,onClick:b,canClick:m,small:h,mark:p,id:S}},l})}var Xr=H({props:{visibility:{type:E(Number),required:!0},display:{type:E(String,Object,Function),required:!0},style:E(String,Object,Array),classes:E(Object),earned:{type:E(Boolean),required:!0},id:{type:String,required:!0}},components:{Node:Tt},setup(e){const{display:t}=ye(e),l=Xe("");return Qe(()=>{const n=ve(t);if(n==null){l.value="";return}if(We(n)){l.value=j(n);return}const s=j(n.requirement,"h3"),r=j(n.effectDisplay||"","b"),u=j(n.optionsDisplay||"","span");l.value=j(F(()=>a("span",null,[a(s,null,null),n.effectDisplay?a("div",null,[a(r,null,null)]):null,n.optionsDisplay?a("div",{class:"equal-spaced"},[a(u,null,null)]):null])))}),{comp:l,unref:f,Visibility:$}}});function Qr(e,t,l,n,s,r){var o;const u=Be("Node");return e.unref(e.visibility)!==e.Visibility.None?(_(),D("div",{key:0,style:re([{visibility:e.unref(e.visibility)===e.Visibility.Hidden?"hidden":void 0},(o=e.unref(e.style))!=null?o:{}]),class:he({feature:!0,milestone:!0,done:e.unref(e.earned),...e.unref(e.classes)})},[(_(),x(de(e.unref(e.comp)))),a(u,{id:e.id},null,8,["id"])],6)):L("",!0)}var eo=te(Xr,[["render",Qr],["__scopeId","data-v-f4e8794e"]]);fe.on("setupVue",e=>e.use(Un));function Ul(e="white",t="8px"){return{transform:"scale(1.05, 1.05)",borderColor:"rgba(0, 0, 0, 0.125)",boxShadow:`-4px -4px 4px rgba(0, 0, 0, 0.25) inset, 0 0 ${t} ${e}`,zIndex:1}}function to(){return Ul("red","20px")}const lo=tn(),no=Symbol("Milestone");let St;(function(e){e.All="all",e.Configurable="configurable",e.Incomplete="incomplete",e.None="none"})(St||(St={}));function io(e){const t=Ue(!1);return Oe(()=>{var s;const l=(s=e==null?void 0:e())!=null?s:{};l.id=xe("milestone-"),l.type=no,l[Ee]=eo,l.earned=t,l.complete=function(){t.value=!0},k(l,"visibility"),ee(l,"visibility",$.Visible);const n=l.visibility;if(l.visibility=y(()=>{const r=f(l.display);switch(ce.msDisplay){default:case St.All:return f(n);case St.Configurable:return f(l.earned)&&!(r!=null&&typeof r=="object"&&"optionsDisplay"in r)?$.None:f(n);case St.Incomplete:return f(l.earned)?$.None:f(n);case St.None:return $.None}}),k(l,"style"),k(l,"classes"),k(l,"display"),l[qe]=function(){const{visibility:r,display:u,style:o,classes:c,earned:d,id:w}=this;return{visibility:r,display:u,style:f(o),classes:c,earned:d,id:w}},l.shouldEarn){const r=l;Qe(()=>{var u,o;if(ce.active===R.id&&!r.earned.value&&f(r.visibility)===$.Visible&&((u=r.shouldEarn)==null?void 0:u.call(r))&&(r.earned.value=!0,(o=r.onComplete)==null||o.call(r),r.display)){const c=f(r.display),d=j(We(c)?c:c.requirement);lo(a(V,null,[a("h3",null,[v("Milestone earned!")]),a("div",null,[a(d,null,null)])]))}})}return l})}fe.on("loadSettings",e=>{ee(e,"msDisplay",St.All)});const so=Object.values(St).map(e=>({label:rn(e),value:e}));mn(F(()=>a(Ll,{title:"Show Milestones",options:so,"onUpdate:modelValue":e=>ce.msDisplay=e,modelValue:ce.msDisplay},null)));function Fe(e,t){return k(t,"display"),k(t,"classes"),k(t,"style"),k(t,"direction"),ee(t,"direction",X.Up),k(t,"xoffset"),k(t,"yoffset"),t.pinnable&&("pinned"in e?(console.error("Cannot add pinnable tooltip to element that already has a property called 'pinned'"),t.pinnable=!1):e.pinned=t.pinned=Ue(!1)),gt(()=>{const l=e[Ee];e[Ee]=Ce;const n=e[qe].bind(e);e[qe]=function(){const{display:r,classes:u,style:o,direction:c,xoffset:d,yoffset:w,pinned:b}=this;return{element:{[Ee]:l,[qe]:n},display:r,classes:u,style:f(o),direction:c,xoffset:d,yoffset:w,pinned:b}}.bind(t)}),t}const ao=H({props:{visibility:{type:E(Number),required:!0},onClick:Function,onHold:Function,display:{type:E(Object,String,Function),required:!0},title:E(Object,String,Function),style:E(String,Object,Array),canClick:{type:E(Boolean),required:!0},id:{type:String,required:!0}},components:{Node:Tt},setup(e){const{onClick:t,onHold:l,title:n,display:s}=ye(e),{start:r,stop:u}=ql(t,l),o=Kt(n),c=zt(s);return{start:r,stop:u,titleComponent:o,component:c,Visibility:$,unref:f}}}),ro={key:0};function oo(e,t,l,n,s,r){var o;const u=Be("Node");return e.unref(e.visibility)!==e.Visibility.None?(_(),D("button",{key:0,class:he({feature:!0,tile:!0,can:e.unref(e.canClick),locked:!e.unref(e.canClick)}),style:re([{visibility:e.unref(e.visibility)===e.Visibility.Hidden?"hidden":void 0},(o=e.unref(e.style))!=null?o:{}]),onClick:t[0]||(t[0]=(...c)=>e.onClick&&e.onClick(...c)),onMousedown:t[1]||(t[1]=(...c)=>e.start&&e.start(...c)),onMouseleave:t[2]||(t[2]=(...c)=>e.stop&&e.stop(...c)),onMouseup:t[3]||(t[3]=(...c)=>e.stop&&e.stop(...c)),onTouchstartPassive:t[4]||(t[4]=(...c)=>e.start&&e.start(...c)),onTouchendPassive:t[5]||(t[5]=(...c)=>e.stop&&e.stop(...c)),onTouchcancelPassive:t[6]||(t[6]=(...c)=>e.stop&&e.stop(...c))},[e.title?(_(),D("div",ro,[(_(),x(de(e.titleComponent)))])):L("",!0),(_(),x(de(e.component),{style:{"white-space":"pre-line"}})),a(u,{id:e.id},null,8,["id"])],38)):L("",!0)}var uo=te(ao,[["render",oo],["__scopeId","data-v-26ac0e82"]]);const co=H({props:{visibility:{type:E(Number),required:!0},rows:{type:E(Number),required:!0},cols:{type:E(Number),required:!0},cells:{type:E(Object),required:!0}},components:{GridCell:uo},setup(){const e=y(()=>Zt[ce.theme].mergeAdjacent);function t(l){const{visibility:n,onClick:s,onHold:r,display:u,title:o,style:c,canClick:d,id:w}=l;return{visibility:n,onClick:s,onHold:r,display:u,title:o,style:c,canClick:d,id:w}}return{unref:f,gatherCellProps:t,Visibility:$,mergeAdjacent:e}}});function fo(e,t,l,n,s,r){const u=Be("GridCell");return e.unref(e.visibility)!==e.Visibility.None?(_(),D("div",{key:0,style:re({visibility:e.unref(e.visibility)===e.Visibility.Hidden?"hidden":void 0}),class:"table"},[(_(!0),D(V,null,nl(e.unref(e.rows),o=>(_(),D("div",{class:he(["row",{mergeAdjacent:e.mergeAdjacent}]),key:o},[(_(!0),D(V,null,nl(e.unref(e.cols),c=>(_(),x(u,ht({key:c},e.gatherCellProps(e.unref(e.cells)[o*100+c])),null,16))),128))],2))),128))],4)):L("",!0)}var mo=te(co,[["render",fo]]);function po(e){return new Proxy({},vo(e))}function vo(e){const t=y(()=>{const l=[];for(let n=1;n<=f(e.rows);n++)for(let s=1;s<=f(e.cols);s++)l.push((n*100+s).toString());return l});return{get(l,n){if(n==="isProxy")return!0;if(typeof n=="symbol")return e[n];if(!!t.value.includes(n.toString()))return l[n]==null&&(l[n]=new Proxy(e,go(n.toString()))),l[n]},set(l,n,s){return console.warn("Cannot set grid cells",l,n,s),!1},ownKeys(){return t.value},has(l,n){return t.value.includes(n.toString())},getOwnPropertyDescriptor(l,n){if(t.value.includes(n.toString()))return{configurable:!0,enumerable:!0,writable:!1}}}}function go(e){const t=["id","visibility","canClick","startState","state","style","classes","title","display","onClick","onHold"],l={};return{get(n,s,r){if(s==="isProxy")return!0;let u=n[s];return Dt(u)?()=>u.call(r,e,n.getState(e)):u!=null||typeof s=="symbol"?u:(s=s.slice(0,1).toUpperCase()+s.slice(1),s==="startState"?u.call(r,e):(u=n[`get${s}`],Dt(u)?(s in l||(l[s]=y(()=>u.call(r,e,n.getState(e)))),l[s].value):u!=null?f(u):(u=n[`on${s}`],Dt(u)?()=>u.call(r,e,n.getState(e)):u!=null?u:n[s])))},set(n,s,r,u){return s=`set${s.slice(0,1).toUpperCase()+s.slice(1)}`,s in n&&Dt(n[s])&&n[s].length<3?(n[s].call(u,e,r),!0):(console.warn(`No setter for "${s}".`,n),!1)},ownKeys(){return t},has(n,s){return t.includes(s.toString())},getOwnPropertyDescriptor(n,s){if(t.includes(s.toString()))return{configurable:!0,enumerable:!0,writable:!1}}}}function ho(e){const t=Ue({});return Oe(()=>{const l=e();if(l.id=xe("grid-"),l[Ee]=mo,l.cellState=t,l.getID=function(n){return l.id+"-"+n},l.getState=function(n){return this.cellState.value[n]!=null?t.value[n]:this.cells[n].startState},l.setState=function(n,s){t.value[n]=s},l.cells=po(l),k(l,"visibility"),ee(l,"visibility",$.Visible),k(l,"rows"),k(l,"cols"),k(l,"getVisibility"),ee(l,"getVisibility",$.Visible),k(l,"getCanClick"),ee(l,"getCanClick",!0),k(l,"getStartState"),k(l,"getStyle"),k(l,"getClasses"),k(l,"getTitle"),k(l,"getDisplay"),l.onClick){const n=l.onClick.bind(l);l.onClick=function(s,r){f(l.cells[s].canClick)&&n(s,r)}}if(l.onHold){const n=l.onHold.bind(l);l.onHold=function(s,r){f(l.cells[s].canClick)&&n(s,r)}}return l[qe]=function(){const{visibility:n,rows:s,cols:r,cells:u,id:o}=this;return{visibility:n,rows:s,cols:r,cells:u,id:o}},l})}function Ie(e,t,l){const n=jt(e),s=jt(t),r=l==null?void 0:jt(l);return{apply:u=>i.times(u,f(n)),revert:u=>i.div(u,f(n)),enabled:r,description:t==null?void 0:F(()=>a("div",{class:"modifier-container"},[a("span",{class:"modifier-amount"},[v("x"),A(f(n))]),f(s)?a("span",{class:"modifier-description"},[vt(f(s))]):null]))}}function Ot(...e){return{apply:t=>e.filter(l=>f(l.enabled)!==!1).reduce((l,n)=>n.apply(l),t),revert:e.every(t=>t.revert!=null)?t=>e.filter(l=>f(l.enabled)!==!1).reduceRight((l,n)=>n.revert(l),t):void 0,enabled:y(()=>e.filter(t=>f(t.enabled)!==!1).length>0),description:F(()=>a(V,null,[e.filter(t=>f(t.enabled)!==!1).map(t=>f(t.description)).filter(t=>t).map(vt)]))}}function Rt(e,t,l,n=1,s="",r="Base"){return a("div",null,[a("h3",null,[e,t?a("span",{class:"subtitle"},[v(" ("),t,v(")")]):null]),a("br",null,null),a("div",{class:"modifier-container"},[a("span",{class:"modifier-amount"},[A(n),s]),a("span",{class:"modifier-description"},[vt(r)])]),vt(f(l.description)),a("hr",null,null),v("Total: "),A(l.apply(n)),s])}function yo(e,t,l){return{currentGain(n){const s=i.div(n.baseResource.value,f(e)).log(f(t)).root(f(l));return s.isNan()?new i(0):s},currentAt(n){let s=f(n.currentGain);return n.gainModifier&&(s=n.gainModifier.revert(s)),s=i.max(0,s),i.pow(f(t),i.pow(s,f(l))).times(f(e))},nextAt(n){let s=i.add(f(n.currentGain),1);return n.gainModifier&&(s=n.gainModifier.revert(s)),s=i.max(0,s),i.pow(f(t),i.pow(s,f(l))).times(f(e)).max(f(t))}}}const bo=function(e,t){const l=[t];let n=[t];if(e.branches!=null){const s=f(e.branches);for(;n.length>0;){const r=[];n.forEach(u=>{s.filter(o=>o.startNode===u).map(o=>o.endNode).filter(o=>!l.includes(o)).forEach(o=>{var c;r.includes(o)||(r.push(o),(c=o.reset)==null||c.reset())})}),n=r,l.push(...n)}}};function wo(e,t){var s,r,u,o,c,d;if(t===void 0)return!1;if(e===void 0)return!0;const l=e.split("."),n=t.split(".");return parseInt((s=l[0])!=null?s:"0")>parseInt((r=n[0])!=null?r:"0")||parseInt((u=l[1])!=null?u:"0")>parseInt((o=n[1])!=null?o:"0")||parseInt((c=l[2])!=null?c:"0")>parseInt((d=n[2])!=null?d:"0")}function Qt(e){return No(e)}function No(e){const t={};return Object.keys(e).forEach(l=>{t[l]={bought:e[l]}}),t}const _o=kn(()=>({visibility:$.Hidden})),Ve=je("ai",()=>{const e="ai",t="Air",l="#ffd1fb",n=K(0,"Air Particles"),s=K(0,"Wind Force"),r=y(()=>{let P=i.gte(n.value,1)?n.value:0;return $e.upgrades[1].bought.value&&(P=i.mul(P,$e.upgradeEffects[0].value)),P}),u=y(()=>{let P=i.add(s.value,1);return P.gte(10)&&(P=i.pow(10,P.log10().sqrt())),P}),o=K(0,"Zephyr Force"),c=y(()=>{let P=i.gte(n.value,3)?i.div(s.value,M.milestones[28].earned.value?1:10):0;return $e.upgrades[1].bought.value&&(P=i.mul(P,$e.upgradeEffects[0].value)),P}),d=y(()=>i.add(o.value,1).log2()),w=K(0,"Tornado Force"),b=y(()=>{let P=i.gte(n.value,5)?i.div(o.value,M.milestones[28].earned.value?1:10):0;return $e.upgrades[1].bought.value&&(P=i.mul(P,$e.upgradeEffects[0].value)),P}),m=y(()=>i.add(w.value,1).log10().plus(1).log(3).plus(1).sqrt());fe.on("update",P=>{M.milestones[14].earned.value?(s.value=i.mul(i.pow(10,i.sqrt(r.value)),P).plus(i.pow(10,s.value)).log10(),o.value=i.mul(i.pow(10,i.sqrt(c.value)),P).plus(i.pow(10,o.value)).log10(),w.value=i.mul(i.pow(10,i.sqrt(b.value)),P).plus(i.pow(10,w.value)).log10()):(s.value=i.mul(r.value,P).plus(i.pow(10,s.value)).log10(),o.value=i.mul(c.value,P).plus(i.pow(10,o.value)).log10(),w.value=i.mul(b.value,P).plus(i.pow(10,w.value)).log10()),M.milestones[21].earned.value&&(n.value=i.mul(h.currentGain.value,P).plus(n.value))});const h=$t(()=>({scaling:{currentGain:P=>i.lt(P.baseResource.value,1e4)?0:M.milestones[10].earned.value?i.div(P.baseResource.value,1e4).pow(1/4).times(3).sub(2).floor():i.div(P.baseResource.value,5e3).log2().root(1.4).floor().sub(P.gainResource.value),currentAt:P=>{if(M.milestones[10].earned.value){let I=f(P.currentGain);return h.gainModifier&&(I=h.gainModifier.revert(I)),i.div(I,3).plus(2/3).pow(4).times(1e4)}else return i.pow(2,i.add(P.gainResource.value,1).pow(1.4)).times(5e3)},nextAt:P=>{if(M.milestones[10].earned.value){let I=i.add(f(P.currentGain),1);return h.gainModifier&&(I=h.gainModifier.revert(I)),i.div(I,3).plus(2/3).pow(4).times(1e4)}else return i.pow(2,i.add(P.gainResource.value,1).pow(1.4)).times(5e3)}},baseResource:Le.life,gainResource:n,buyMax:()=>M.milestones[10].earned.value,roundUpCost:!0,gainModifier:Ot(Ie(ie.mainEff,"Particle Combinator Effect",M.milestones[15].earned))})),p=tt(()=>({thingsToReset:()=>[Ve]})),S=lt(()=>({visibility:()=>M.milestones[6].earned.value?$.Visible:$.Hidden,layerID:e,display:F(()=>a("img",{src:"./nodes/air.png"},null)),color:l,reset:p}));Fe(S,{display:ct(n),pinnable:!0,style:()=>S.visibility.value===$.Visible?"":"display: none"});const C=ft(()=>({conversion:h,tree:ae.tree,treeNode:S}));return Fe(C,{display:F(()=>Rt("Modifiers","",h.gainModifier,h.scaling.currentGain(h))),pinnable:!0,direction:X.Down,style:"width: 400px; text-align: left"}),{id:e,name:t,color:l,air:n,wind:s,windEff:u,zephyr:o,zephyrEff:d,tornado:w,tornadoEff:m,display:F(()=>{const P=i.gt(r.value,0)?a("span",null,[v("Wind: "),A(s.value,2),v(", Wind Speed: "),A(r.value,2),v("x"),a("br",null,null),v("Multiplies Life Particle gain by "),A(u.value,2),v("."),a("br",null,null),a("br",null,null)]):"",I=i.gt(c.value,0)?a("span",null,[v("Zephyr: "),A(o.value,2),v(", Zephyr Speed: "),A(c.value,2),v("x"),a("br",null,null),v("Adds "),A(d.value,2),v(" levels to all Life Buyables."),a("br",null,null),a("br",null,null)]):"",B=i.gt(b.value,0)?a("span",null,[v("Tornado: "),A(w.value,2),v(", Tornado Speed:")," ",A(b.value,2),v("x"),a("br",null,null),v("Raise Base Particle gain ^"),A(m.value,2),a("br",null,null),a("br",null,null)]):"";return a(V,null,[a(dt,{resource:n,color:l},null),G(C),a("br",null,null),a("br",null,null),P,a("br",null,null),I,a("br",null,null),B,a("br",null,null)])}),treeNode:S}}),$e=je("sound",()=>{const e="sound",t="Sound",l="#ddcfff",n=K(0,"Sound Particles"),s=ot(n),r=_l(()=>({scaling:It(()=>1e7,1/3),baseResource:Ve.air,gainResource:n})),u=tt(()=>({thingsToReset:()=>[$e]})),o=lt(()=>({visibility:()=>M.milestones[32].earned.value?$.Visible:$.Hidden,layerID:e,display:F(()=>a("img",{src:"./nodes/sound.png"},null)),color:l,reset:u}));Fe(o,{display:ct(n),pinnable:!0,style:()=>o.visibility.value===$.Visible?"":"display: none"});const c=ft(()=>({conversion:r,tree:ae.tree,treeNode:o})),d=K(0,"Ultrasound"),w=y(()=>{let h=i.dOne;return i.gte(Re.lights[3].buyables[1].amount.value,1)&&(h=h.times(Re.lightBuyableEffects[3][1].value)),m[3].bought.value&&(h=h.times(b[3].value)),M.milestones[37].earned.value&&(h=h.times(2)),h}),b=[y(()=>i.add(d.value,1).log10().plus(1).log10().plus(1)),y(()=>i.add(d.value,1).log10().plus(1).sqrt()),y(()=>{let h=i.add(d.value,1).log10().div(20);return h.gte(.5)&&(h=h.plus(.5).log10().plus(.5)),h}),y(()=>i.add(d.value,1).log10().plus(1).sqrt()),y(()=>i.add(d.value,1).log10().plus(1)),y(()=>i.div(d.value,100).plus(1))],m=[Je(()=>({display:()=>({title:"Pitch",description:"Ultrasound boosts the gain speed of all Light Energy colors at a very reduced rate.",effectDisplay:Z(b[0].value)+"x"}),cost:100,resource:d})),Je(()=>({display:()=>({title:"Duration",description:"Ultrasound boosts Wind/Zephyr/Tornado speeds at a reduced rate.",effectDisplay:Z(b[1].value)+"x"}),cost:1e3,resource:d})),Je(()=>({display:()=>({title:"Volume",description:"Ultrasound boosts Life Buyable Power at a reduced rate.",effectDisplay:"+"+Z(i.mul(b[2].value,100))+"%"}),cost:2500,resource:d})),Je(()=>({display:()=>({title:"Timbre",description:"Ultrasound boosts its own gain at a reduced rate.",effectDisplay:Z(b[3].value)+"x"}),cost:1e4,resource:d})),Je(()=>({display:()=>({title:"Texture",description:"Ultrasound boosts Flame Particle gain at a reduced rate.",effectDisplay:Z(b[4].value)+"x"}),cost:1e5,resource:d})),Je(()=>({display:()=>({title:"Location",description:"Ultrasound boosts Aqua bar speed.",effectDisplay:Z(b[5].value)+"x"}),cost:4e5,resource:d}))];return fe.on("update",h=>{d.value=i.add(d.value,i.mul(n.value,h).times(w.value))}),{id:e,name:t,color:l,sound:n,best:s,ultrasound:d,upgrades:m,upgradeEffects:b,display:F(()=>a(V,null,[a(dt,{resource:n,color:l},null),G(c),a("br",null,null),v("There is "),Z(d.value),v(" Ultrasound (generated by Sound Particles)"),a("br",null,null),a("br",null,null),m.map(G)])),treeNode:o}}),ko=H({props:{display:null},setup(e){const t=e,{display:l}=ye(t),n=zt(l);return(s,r)=>(_(),x(de(f(n))))}}),Co=Symbol("Tab");function Tl(e){return Oe(()=>{const t=e();return t.id=xe("tab-"),t.type=Co,t[Ee]=ko,t[qe]=function(){const{display:l}=this;return{display:l}},t})}const So=H({props:{visibility:{type:E(Number),required:!0},display:{type:E(Object,String,Function),required:!0},style:E(String,Object,Array),classes:E(Object),glowColor:E(String),active:Boolean,floating:Boolean},emits:["selectTab"],setup(e,{emit:t}){const{display:l,glowColor:n,floating:s}=ye(e),r=zt(l),u=y(()=>{const c=ve(n);return c?f(s)?Ul(c):{boxShadow:`0px 9px 5px -6px ${c}`}:{}});function o(){t("selectTab")}return{selectTab:o,component:r,glowColorStyle:u,unref:f,Visibility:$}}});function Mo(e,t,l,n,s,r){var u;return e.unref(e.visibility)!==e.Visibility.None?(_(),D("button",{key:0,onClick:t[0]||(t[0]=(...o)=>e.selectTab&&e.selectTab(...o)),class:he(["tabButton",{active:e.active,...e.unref(e.classes)}]),style:re([{visibility:e.unref(e.visibility)===e.Visibility.Hidden?"hidden":void 0},e.glowColorStyle,(u=e.unref(e.style))!=null?u:{}])},[(_(),x(de(e.component)))],6)):L("",!0)}var Sn=te(So,[["render",Mo],["__scopeId","data-v-610a2549"]]);const Po=H({props:{visibility:{type:E(Number),required:!0},activeTab:{type:E(Object),required:!0},selected:{type:Object,required:!0},tabs:{type:E(Object),required:!0},style:E(String,Object,Array),classes:E(Object),buttonContainerStyle:E(String,Object,Array),buttonContainerClasses:E(Object)},components:{Sticky:Cn,TabButton:Sn},setup(e){const{activeTab:t}=ye(e),l=y(()=>Zt[ce.theme].floatingTabs),n=Xe("");Qe(()=>{const o=ve(t);if(o==null){n.value="";return}if(We(o)){n.value=j(o);return}n.value=j(f(o.display))});const s=y(()=>{const o=ve(t);return We(o)||!o?void 0:f(o.classes)}),r=y(()=>{const o=ve(t);return We(o)||!o?void 0:f(o.style)});function u(o){const{display:c,style:d,classes:w,glowColor:b,visibility:m}=o;return{display:c,style:f(d),classes:w,glowColor:b,visibility:m}}return{floating:l,tabClasses:s,tabStyle:r,Visibility:$,component:n,gatherButtonProps:u,unref:f}}});function Io(e,t,l,n,s,r){var c,d;const u=Be("TabButton"),o=Be("Sticky");return e.unref(e.visibility)!==e.Visibility.None?(_(),D("div",{key:0,class:he(["tab-family-container",{...e.unref(e.classes),...e.tabClasses}]),style:re([{visibility:e.unref(e.visibility)===e.Visibility.Hidden?"hidden":void 0},(c=e.unref(e.style))!=null?c:[],(d=e.tabStyle)!=null?d:[]])},[a(o,{class:he(["tab-buttons-container",e.unref(e.buttonContainerClasses)]),style:re(e.unref(e.buttonContainerStyle))},{default:z(()=>[g("div",{class:he(["tab-buttons",{floating:e.floating}])},[(_(!0),D(V,null,nl(e.unref(e.tabs),(w,b)=>(_(),x(u,ht({onSelectTab:m=>e.selected.value=b,floating:e.floating,key:b,active:e.unref(w.tab)===e.unref(e.activeTab)},e.gatherButtonProps(w)),null,16,["onSelectTab","floating","active"]))),128))],2)]),_:1},8,["class","style"]),e.unref(e.activeTab)?(_(),x(de(e.unref(e.component)),{key:0})):L("",!0)],6)):L("",!0)}var $o=te(Po,[["render",Io],["__scopeId","data-v-11575f45"]]);const To=Symbol("TabButton"),Eo=Symbol("TabFamily");function Mn(e,t){if(Object.keys(e).length===0)throw console.warn("Cannot create tab family with 0 tabs"),"Cannot create tab family with 0 tabs";const l=Ue(Object.keys(e)[0]);return Oe(()=>{var r;const n=(r=t==null?void 0:t())!=null?r:{};n.id=xe("tabFamily-"),n.type=Eo,n[Ee]=$o,n.tabs=Object.keys(e).reduce((u,o)=>{const c=e[o]();return c.type=To,c[Ee]=Sn,k(c,"visibility"),ee(c,"visibility",$.Visible),k(c,"tab"),k(c,"display"),k(c,"classes"),k(c,"style"),k(c,"glowColor"),u[o]=c,u},{}),n.selected=l,n.activeTab=y(()=>{const u=f(s.tabs);if(l.value in u&&f(u[l.value].visibility)===$.Visible)return f(u[l.value].tab);const o=Object.values(u).find(c=>f(c.visibility)===$.Visible);return o?f(o.tab):null}),k(n,"visibility"),ee(n,"visibility",$.Visible),k(n,"classes"),k(n,"style"),k(n,"buttonContainerClasses"),k(n,"buttonContainerStyle"),n[qe]=function(){const{visibility:u,activeTab:o,selected:c,tabs:d,style:w,classes:b,buttonContainerClasses:m,buttonContainerStyle:h}=this;return{visibility:u,activeTab:o,selected:c,tabs:d,style:f(w),classes:b,buttonContainerClasses:m,buttonContainerStyle:h}};const s=n;return s})}var Bo=H({props:{active:{type:E(Boolean),required:!0},maxed:{type:E(Boolean),required:!0},canComplete:{type:E(Boolean),required:!0},display:E(String,Object,Function),visibility:{type:E(Number),required:!0},style:E(String,Object,Array),classes:E(Object),completed:{type:E(Boolean),required:!0},canStart:{type:E(Boolean),required:!0},mark:E(Boolean,String),id:{type:String,required:!0},toggle:{type:Function,required:!0}},components:{MarkNode:ol,Node:Tt},setup(e){const{active:t,maxed:l,canComplete:n,display:s}=ye(e),r=y(()=>t.value?n.value?"Finish":"Exit Early":l.value?"Completed":"Start"),u=Xe(""),o=y(()=>{const c=ve(t),d=ve(n);return c?d?to():Ul():{}});return Qe(()=>{const c=ve(s);if(c==null){u.value="";return}if(We(c)){u.value=j(c);return}const d=j(c.title||"","h3"),w=j(c.description,"div"),b=j(c.goal||""),m=j(c.reward||""),h=j(c.effectDisplay||"");u.value=j(F(()=>a("span",null,[c.title?a("div",null,[a(d,null,null)]):null,a(w,null,null),c.goal?a("div",null,[a("br",null,null),v("Goal: "),a(b,null,null)]):null,c.reward?a("div",null,[a("br",null,null),v("Reward: "),a(m,null,null)]):null,c.effectDisplay?a("div",null,[v("Currently: "),a(h,null,null)]):null])))}),{buttonText:r,notifyStyle:o,comp:u,Visibility:$,unref:f}}});const Do=["disabled"];function qo(e,t,l,n,s,r){var c;const u=Be("MarkNode"),o=Be("Node");return e.unref(e.visibility)!==e.Visibility.None?(_(),D("div",{key:0,style:re([{visibility:e.unref(e.visibility)===e.Visibility.Hidden?"hidden":void 0},e.notifyStyle,(c=e.unref(e.style))!=null?c:{}]),class:he({feature:!0,challenge:!0,done:e.unref(e.completed),canStart:e.unref(e.canStart)&&!e.unref(e.maxed),maxed:e.unref(e.maxed),...e.unref(e.classes)})},[g("button",{class:"toggleChallenge",onClick:t[0]||(t[0]=(...d)=>e.toggle&&e.toggle(...d)),disabled:!e.unref(e.canStart)||e.unref(e.maxed)},ne(e.buttonText),9,Do),e.unref(e.comp)?(_(),x(de(e.unref(e.comp)),{key:0})):L("",!0),a(u,{mark:e.unref(e.mark)},null,8,["mark"]),a(o,{id:e.id},null,8,["id"])],6)):L("",!0)}var Fo=te(Bo,[["render",qo],["__scopeId","data-v-4d2947df"]]);const Ao=Symbol("ChallengeType");function Pl(e){const t=Ue(0),l=Ue(!1);return Oe(()=>{const n=e();if(n.canComplete==null&&(n.resource==null||n.goal==null))throw console.warn("Cannot create challenge without a canComplete property or a resource and goal property",n),"Cannot create challenge without a canComplete property or a resource and goal property";n.id=xe("challenge-"),n.type=Ao,n[Ee]=Fo,n.completions=t,n.active=l,n.completed=y(()=>i.gt(n.completions.value,0)),n.maxed=y(()=>i.gte(n.completions.value,f(n.completionLimit))),n.toggle=function(){var u,o,c,d,w;const r=n;if(r.active.value){if(f(r.canComplete)&&!r.maxed.value){let b=f(r.canComplete);typeof b=="boolean"&&(b=1),r.completions.value=i.min(i.add(r.completions.value,b),f(r.completionLimit)),(u=r.onComplete)==null||u.call(r)}r.active.value=!1,(o=r.onExit)==null||o.call(r),(c=r.reset)==null||c.reset()}else f(r.canStart)&&f(r.visibility)===$.Visible&&!r.maxed.value&&((d=r.reset)==null||d.reset(),r.active.value=!0,(w=r.onEnter)==null||w.call(r))},n.complete=function(r){var c,d,w;const u=n;let o=f(u.canComplete);u.active.value&&o!==!1&&(o===!0||i.neq(0,o))&&!u.maxed.value&&(typeof o=="boolean"&&(o=1),u.completions.value=i.min(i.add(u.completions.value,o),f(u.completionLimit)),(c=u.onComplete)==null||c.call(u),r!==!0&&(u.active.value=!1,(d=u.onExit)==null||d.call(u),(w=u.reset)==null||w.reset()))},k(n,"visibility"),ee(n,"visibility",$.Visible);const s=n.visibility;return n.visibility=y(()=>ce.hideChallenges===!0&&f(n.maxed)?$.None:f(s)),n.canComplete==null&&(n.canComplete=y(()=>{const r=n;return!r.active.value||r.resource==null||r.goal==null?!1:i.gte(r.resource.value,f(r.goal))})),n.mark==null&&(n.mark=y(()=>i.gt(f(n.completionLimit),1)&&!!f(n.maxed))),k(n,"canStart"),ee(n,"canStart",!0),k(n,"canComplete"),k(n,"completionLimit"),ee(n,"completionLimit",1),k(n,"mark"),k(n,"goal"),k(n,"classes"),k(n,"style"),k(n,"display"),n.reset!=null&&fe.on("reset",r=>{r===n.reset&&n.active.value&&n.toggle()}),n[qe]=function(){const{active:r,maxed:u,canComplete:o,display:c,visibility:d,style:w,classes:b,completed:m,canStart:h,mark:p,id:S,toggle:C}=this;return{active:r,maxed:u,canComplete:o,display:c,visibility:d,style:f(w),classes:b,completed:m,canStart:h,mark:p,id:S,toggle:C}},n})}fe.on("loadSettings",e=>{ee(e,"hideChallenges",!1)});mn(F(()=>a(pt,{title:"Hide Maxed Challenges","onUpdate:modelValue":e=>ce.hideChallenges=e,modelValue:ce.hideChallenges},null)));const Oo=H({props:{progress:{type:E(String,Object,Number),required:!0},width:{type:E(Number),required:!0},height:{type:E(Number),required:!0},direction:{type:E(String),required:!0},display:E(Object,String,Function),visibility:{type:E(Number),required:!0},style:E(Object,String,Array),classes:E(Object),borderStyle:E(Object,String,Array),textStyle:E(Object,String,Array),baseStyle:E(Object,String,Array),fillStyle:E(Object,String,Array),mark:E(Boolean,String),id:{type:String,required:!0}},components:{MarkNode:ol,Node:Tt},setup(e){const{progress:t,width:l,height:n,direction:s,display:r}=ye(e),u=y(()=>{let d=t.value instanceof i?t.value.toNumber():Number(t.value);return(1-Math.min(Math.max(d,0),1))*100}),o=y(()=>{const d={width:ve(l)+.5+"px",height:ve(n)+.5+"px"};switch(f(s)){case X.Up:d.clipPath=`inset(${u.value}% 0% 0% 0%)`,d.width=ve(l)+1+"px";break;case X.Down:d.clipPath=`inset(0% 0% ${u.value}% 0%)`,d.width=ve(l)+1+"px";break;case X.Right:d.clipPath=`inset(0% ${u.value}% 0% 0%)`;break;case X.Left:d.clipPath=`inset(0% 0% 0% ${u.value} + '%)`;break;case X.Default:d.clipPath="inset(0% 50% 0% 0%)";break}return d}),c=Kt(r);return{normalizedProgress:u,barStyle:o,component:c,unref:f,Visibility:$}}});function Ro(e,t,l,n,s,r){var c,d,w,b,m,h,p;const u=Be("MarkNode"),o=Be("Node");return e.unref(e.visibility)!==e.Visibility.None?(_(),D("div",{key:0,style:re([{width:e.unref(e.width)+"px",height:e.unref(e.height)+"px",visibility:e.unref(e.visibility)===e.Visibility.Hidden?"hidden":void 0},(c=e.unref(e.style))!=null?c:{}]),class:he({bar:!0,...e.unref(e.classes)})},[g("div",{class:"overlayTextContainer border",style:re([{width:e.unref(e.width)+"px",height:e.unref(e.height)+"px"},(d=e.unref(e.borderStyle))!=null?d:{}])},[e.component?(_(),D("span",{key:0,class:"overlayText",style:re(e.unref(e.textStyle))},[(_(),x(de(e.component)))],4)):L("",!0)],4),g("div",{class:"border",style:re([{width:e.unref(e.width)+"px",height:e.unref(e.height)+"px"},(w=e.unref(e.style))!=null?w:{},(b=e.unref(e.baseStyle))!=null?b:{},(m=e.unref(e.borderStyle))!=null?m:{}])},[g("div",{class:"fill",style:re([e.barStyle,(h=e.unref(e.style))!=null?h:{},(p=e.unref(e.fillStyle))!=null?p:{}])},null,4)],4),a(u,{mark:e.unref(e.mark)},null,8,["mark"]),a(o,{id:e.id},null,8,["id"])],6)):L("",!0)}var Lo=te(Oo,[["render",Ro],["__scopeId","data-v-02d0d7b2"]]);const Vo=Symbol("Bar");function fl(e){return Oe(()=>{const t=e();return t.id=xe("bar-"),t.type=Vo,t[Ee]=Lo,k(t,"visibility"),ee(t,"visibility",$.Visible),k(t,"width"),k(t,"height"),k(t,"direction"),k(t,"style"),k(t,"classes"),k(t,"borderStyle"),k(t,"baseStyle"),k(t,"textStyle"),k(t,"fillStyle"),k(t,"progress"),k(t,"display"),k(t,"mark"),t[qe]=function(){const{progress:l,width:n,height:s,direction:r,display:u,visibility:o,style:c,classes:d,borderStyle:w,textStyle:b,baseStyle:m,fillStyle:h,mark:p,id:S}=this;return{progress:l,width:n,height:s,direction:r,display:u,visibility:o,style:f(c),classes:d,borderStyle:w,textStyle:b,baseStyle:m,fillStyle:h,mark:p,id:S}},t})}const Ae=je("a",()=>{const e="a",t="Aqua",l="#2197eb",n=K(0,"Aqua Particles"),s=ot(n),r=K(0),u=K(0),o=y(()=>{let O=i.log10(i.add(u.value,1));return M.milestones[30].earned.value&&(O=O.times(1.1)),O}),c=y(()=>{let O=new i(1);return Me.upgradesR1[2].bought.value&&(O=O.times(Me.upgradeEffects[2].value)),O=O.times(Le.buyableEffects[4].value),O}),d=K(0),w=y(()=>{let O=i.log10(i.add(d.value,1));return M.milestones[27].earned.value&&(O=O.times(2)),M.milestones[30].earned.value&&(O=O.times(1.1)),i.gte(O,50)&&(O=i.mul(O,50).sqrt()),O}),b=K(0),m=y(()=>{let O=i.log10(i.add(b.value,1));return M.milestones[30].earned.value&&(O=O.times(1.1)),i.gte(O,40)&&(O=i.mul(O,40).sqrt()),O}),h=y(()=>{let O=new i(.2);return O=O.plus(Te.torrentEffAdded.value),O}),p=K(0),S=y(()=>{let O=i.log10(i.add(p.value,1));return M.milestones[30].earned.value&&(O=O.times(1.1)),i.gte(O,30)&&(O=i.mul(O,30).sqrt()),O});fe.on("update",O=>{u.value=i.add(u.value,i.mul(n.value,O).times(c.value).times(I.value)),d.value=i.add(d.value,i.mul(i.floor(o.value),O/10).times(I.value)),M.milestones[7].earned.value&&(b.value=i.add(b.value,i.mul(i.floor(d.value),O/2e6).times(I.value))),M.milestones[19].earned.value&&(p.value=i.add(p.value,i.mul(i.floor(b.value),O/1e10).times(I.value))),M.milestones[3].earned.value&&(n.value=i.mul(P.currentGain.value,O).plus(n.value)),r.value+=O});const C=y(()=>{if(pe.challenges[2].active.value)return i.dInf;let O=new i(10);return O=O.div(i.pow(2,i.floor(w.value))),pe.challenges[0].active.value&&(O=O.max(1).pow(pe.challenge1Data.aquaParticleCost.value)),O}),P=$t(()=>({scaling:It(C,1/3),baseResource:ae.particles,gainResource:n,roundUpCost:!0,gainModifier:Ot(Ie(Se.clickableEffects[2],"Lightning Mode C",()=>Se.lightningSel[2].value),Ie(3,"Advancement 5",()=>M.milestones[4].earned.value&&i.lte(r.value,M.adv5time.value)),Ie(ie.multiBuyableEffects[1].value,"Mud Molecule",()=>i.gte(ie.multiBuyables[1].value,1)&&M.milestones[15].earned.value),Ie(ie.mainEff,"Particle Combinator Effect",M.milestones[31].earned))})),I=y(()=>{let O=i.dOne;return O=O.times(pe.challenge1Data.reward.value),pe.challenges[1].active.value&&(O=O.div(pe.challenge2Data.aquaBarDiv.value)),M.milestones[11].earned.value&&(O=O.times(2)),M.milestones[14].earned.value&&(O=O.times(M.adv15eff.value)),i.gte(Re.lights[4].buyables[1].amount.value,1)&&(O=O.times(Re.lightBuyableEffects[4][1].value)),$e.upgrades[5].bought.value&&(O=O.times($e.upgradeEffects[5].value)),O}),B=fl(()=>({width:300,height:25,direction:X.Right,progress:()=>i.sub(o.value,i.floor(o.value))})),q=fl(()=>({width:300,height:25,direction:X.Right,progress:()=>i.sub(w.value,i.floor(w.value))})),oe=fl(()=>({width:300,height:25,direction:X.Right,progress:()=>i.sub(m.value,i.floor(m.value))})),Q=fl(()=>({width:300,height:25,direction:X.Right,progress:()=>i.sub(S.value,i.floor(S.value))})),_e=tt(()=>({thingsToReset:()=>[Ae]})),Y=lt(()=>({layerID:e,display:F(()=>a("img",{src:"./nodes/aqua.png"},null)),color:l,reset:_e}));Fe(Y,{display:ct(n),pinnable:!0});const ue=ft(()=>({conversion:P,tree:ae.tree,treeNode:Y}));return Fe(ue,{display:F(()=>Rt("Modifiers","",P.gainModifier,P.scaling.currentGain(P))),pinnable:!0,direction:X.Down,style:"width: 400px; text-align: left"}),{id:e,name:t,color:l,aqua:n,best:s,time:r,bubbleTime:u,bubbles:o,waveTime:d,waves:w,torrentTime:b,torrents:m,torrentEff:h,floodTime:p,floods:S,display:F(()=>a(V,null,[a(dt,{resource:n,color:l},null),G(ue),a("br",null,null),a("br",null,null),a("div",null,[Ne(a("div",null,[be(i.floor(o.value)),v(" Bubbles, each generating 1 Particle/second"),a("br",null,null),G(B)]),[[Pe,i.gt(s.value,0)]]),a("br",null,null),Ne(a("div",null,[be(i.floor(w.value)),v(" Waves, each halving the Aqua Particle cost"),a("br",null,null),G(q)]),[[Pe,i.gte(o.value,1)]]),a("br",null,null),Ne(a("div",null,[be(i.floor(m.value)),v(" Torrents, each increasing Particle gain by "),be(i.mul(h.value,100)),v("%"),a("br",null,null),G(oe)]),[[Pe,M.milestones[7].earned.value]]),a("br",null,null),Ne(a("div",null,[be(i.floor(S.value)),v(" Floods, each increasing the Base Particle gain exponent by 0.05"),a("br",null,null),G(Q)]),[[Pe,M.milestones[19].earned.value]])])])),treeNode:Y}}),pe=je("c",()=>{const e="c",t="Cryo",l="#03f4fc",n=K(0,"Cryo Particles"),s=ot(n),r=$t(()=>({scaling:It(1e3,3/4),baseResource:Ae.aqua,gainResource:n,roundUpCost:!0,gainModifier:Ot(Ie(ie.mainEff,"Particle Combinator Effect",M.milestones[15].earned))}));fe.on("update",p=>{M.milestones[22].earned.value&&(n.value=i.mul(r.currentGain.value,p).plus(n.value))});const u={lifeBuyableCosts:y(()=>i.div(d[0].completions.value,4).plus(1.25)),aquaParticleCost:y(()=>i.div(d[0].completions.value,5).plus(1.2)),reward:y(()=>{let p=d[0].completions.value;i.gte(p,11)&&(p=i.pow(p,2).div(11).plus(5));let S=i.add(n.value,1).sqrt().times(p).times(i.pow(1.1,p)).plus(1);const C=i.add(20,p);return S.gte(C)&&(S=S.log(C.sqrt()).pow(2).times(C).div(4)),i.gte(ie.best.value,6)&&(S=S.pow(ie.multiBuyableEffects[6].value)),S})},o={aquaBarDiv:y(()=>i.pow(1.5,d[1].completions.value).times(10)),reward:y(()=>{let p=d[1].completions.value;i.gte(p,11)&&(p=i.pow(p,2).div(11).plus(5));let S=i.mul(n.value,p).plus(1).log10().times(i.gte(p,11)?i.sub(p,9).log10().plus(1).cbrt():1).plus(1);return i.gte(ie.best.value,3)&&(S=S.pow(ie.multiBuyableEffects[3].value)),S})},c={exp:y(()=>i.div(d[2].completions.value,2).plus(2)),reward:y(()=>{let p=d[2].completions.value;return i.gte(p,11)&&(p=i.pow(p,2).div(11).plus(5)),i.sqrt(p).div(10).plus(1)})},d=[Pl(()=>({visibility:()=>i.gte(s.value,1)||M.milestones[26].earned.value?$.Visible:$.None,reset:w,completionLimit:y(()=>M.milestones[26].earned.value?20:10),resource:Ae.aqua,goal:()=>{let p=d[0].completions.value;return i.gte(p,10)&&(p=i.pow(p,2).div(10).plus(5)),i.pow(2,p).times(100)},display:()=>({title:"Temperature Decrease ("+ge(d[0].completions.value)+"/"+ge(d[0].completionLimit.value)+")",description:"Disable the Flame layer, Life buyable costs are raised ^"+A(u.lifeBuyableCosts.value,2)+", and Aqua Particle base cost is raised ^"+A(u.aquaParticleCost.value,2)+" and cannot get below 1",goal:ge(f(d[0].goal))+" Aqua Particles",reward:"All Aqua bars are faster based on Cryo Particles.",effectDisplay:A(u.reward.value,2)+"x"})})),Pl(()=>({visibility:()=>i.gte(d[0].completions.value,1)?$.Visible:$.None,reset:w,completionLimit:y(()=>M.milestones[26].earned.value?20:10),resource:Ae.aqua,goal:()=>{let p=d[1].completions.value;return i.gte(p,10)&&(p=i.pow(p,2).div(10).plus(5)),i.pow(2.5,p).times(150)},display:()=>({title:"Full Freeze ("+ge(d[1].completions.value)+"/"+ge(d[1].completionLimit.value)+")",description:"Disable the Life layer, and Aqua bars are "+A(o.aquaBarDiv.value,2)+"x slower",goal:ge(f(d[1].goal))+" Aqua Particles",reward:"All Life Buyables are cheaper based on Cryo Particles.",effectDisplay:"/"+A(o.reward.value,2)})})),Pl(()=>({visibility:()=>i.gte(d[1].completions.value,1)?$.Visible:$.None,reset:w,completionLimit:y(()=>10),resource:ae.particles,goal:()=>{let p=d[2].completions.value;return i.gte(p,10)&&(p=i.pow(p,2).div(10).plus(5)),i.pow(10,i.pow(p,1.5)).times(1e4)},display:()=>({title:"Absolute Zero ("+ge(d[2].completions.value)+"/"+ge(d[2].completionLimit.value)+")",description:"Disable the Aqua layer, and Fire Upgrade and Life Buyable costs are raised ^"+A(c.exp.value,2),goal:ge(f(d[2].goal))+" Particles",reward:"Empower the first Flame upgrade.",effectDisplay:"^"+A(c.reward.value,2)})}))],w=tt(()=>({thingsToReset:()=>M.milestones[15].earned.value?[Ae]:[Me,Le,Ae],onReset(){ae.particles.value=10,ae.best.value=ae.particles.value,ae.total.value=ae.particles.value}})),b=tt(()=>({thingsToReset:()=>{const p={cryo:n,best:s,treeNode:m};return M.milestones[26].earned.value?[{...p,challenge1Data:u,challenge2Data:o,challenge3Data:c}]:[{...p,challenges:d,challenge1Data:u,challenge2Data:o,challenge3Data:c}]}})),m=lt(()=>({visibility:()=>M.milestones[2].earned.value?$.Visible:$.Hidden,layerID:e,display:F(()=>a("img",{src:"./nodes/cryo.png"},null)),color:l,reset:b,glowColor:()=>d.some(p=>p.canComplete.value)?"red":""}));Fe(m,{display:ct(n),pinnable:!0,style:()=>m.visibility.value===$.Visible?"":"display: none"});const h=ft(()=>({conversion:r,tree:ae.tree,treeNode:m}));return Fe(h,{display:F(()=>Rt("Modifiers","",r.gainModifier,r.scaling.currentGain(r))),pinnable:!0,direction:X.Down,style:"width: 400px; text-align: left"}),{id:e,name:t,color:l,cryo:n,best:s,display:F(()=>a(V,null,[a(dt,{resource:n,color:l},null),G(h),a("br",null,null),a("br",null,null),a("table",null,[a("tbody",null,[d.map(p=>a("tr",null,[a("td",null,[G(p)])]))])])])),treeNode:m,challenges:d,challenge1Data:u,challenge2Data:o,challenge3Data:c}}),Gt=["Red","Orange","Yellow","Green","Blue","Indigo","Violet"],Il=["#FF4444","#FFBF44","#FFFF44","#44FF44","#4444FF","#8F44B6","#D844F7"],$l=["#FF0000","#FF7F00","#FFFF00","#00FF00","#0000FF","#4B0082","#9400D3"],Go=["#770000","#773700","#777700","#007700","#000077","#250041","#420061"],Re=je("light",()=>{const e="light",t="Light",l="#fff5c9",n=K(0,"Light Particles"),s=ot(n),r=_l(()=>({scaling:It(()=>1e9,1/3),baseResource:Se.lightning,gainResource:n})),u=tt(()=>({thingsToReset:()=>[Re]})),o=lt(()=>({visibility:()=>M.milestones[32].earned.value?$.Visible:$.Hidden,layerID:e,display:F(()=>a("img",{src:"./nodes/light.png"},null)),color:l,reset:u}));Fe(o,{display:ct(n),pinnable:!0,style:()=>o.visibility.value===$.Visible?"":"display: none"});const c=ft(()=>({conversion:r,tree:ae.tree,treeNode:o})),d=[[y(()=>p[0].buyables[0].amount.value),y(()=>i.add(p[0].energy.value,1).log10().div(10).plus(1).pow(i.add(p[0].buyables[1].amount.value,1).log2()))],[y(()=>i.pow(10,i.add(p[0].energy.value,1).log10().sqrt()).sub(1).cbrt().times(p[1].buyables[0].amount.value).div(10)),y(()=>i.add(p[1].energy.value,1).log10().times(i.add(p[1].buyables[1].amount.value,1).log2()).times(5)),y(()=>i.add(p[1].energy.value,1).log10().sqrt().times(p[1].buyables[2].amount.value).plus(1))],[y(()=>i.pow(10,i.add(n.value,1).log10().cbrt()).sub(1).root(4).times(p[2].buyables[0].amount.value).div(7.5)),y(()=>i.add(p[2].energy.value,1).log10().times(i.add(p[2].buyables[1].amount.value,1).log2()).div(2).plus(1).sqrt()),y(()=>i.add(p[2].energy.value,1).log10().sqrt().times(p[2].buyables[2].amount.value).div(2).plus(1))],[y(()=>i.pow(10,i.sqrt(ie.combinators.value)).sub(1).root(5).times(p[3].buyables[0].amount.value).div(40)),y(()=>i.add(p[3].energy.value,1).log10().times(i.add(p[3].buyables[1].amount.value,1).log2()).div(1.5).plus(1).root(2.5)),y(()=>i.add(p[3].energy.value,1).log10().sqrt().times(p[3].buyables[2].amount.value).div(3).plus(1))],[y(()=>i.pow(10,i.cbrt(pe.challenges.reduce((C,P)=>i.add(C,P.completions.value),0))).sub(1).root(6).times(p[4].buyables[0].amount.value).div(225)),y(()=>i.add(p[4].energy.value,1).log10().times(i.add(p[4].buyables[1].amount.value,1).log2()).plus(1).pow(1.25)),y(()=>i.add(p[4].energy.value,1).log10().sqrt().times(p[4].buyables[2].amount.value).div(4).plus(1))],[y(()=>i.pow(10,i.add($e.ultrasound.value,1).log10().root(4)).sub(1).root(7).times(p[5].buyables[0].amount.value).div(400)),y(()=>i.add(p[5].energy.value,1).log10().times(i.add(p[5].buyables[1].amount.value,1).log2()).plus(1).cbrt()),y(()=>i.add(p[5].energy.value,1).log10().sqrt().times(p[5].buyables[2].amount.value).div(5).plus(1))],[y(()=>i.pow(10,i.add(ie.attractionPower.value,1).log10().root(6)).sub(1).root(8).times(p[6].buyables[0].amount.value).div(750)),y(()=>i.add(p[6].energy.value,1).log10().times(i.add(p[6].buyables[1].amount.value,1).log2()).plus(1).log10().div(2).plus(1)),y(()=>i.add(p[6].energy.value,1).log10().sqrt().times(p[6].buyables[2].amount.value).div(6).plus(1))]],w=[[()=>({title:"Passion Bright",description:"Generate 1 Red Energy every second.",effectDisplay:A(d[0][0].value)+"/s"}),()=>({title:"Blinding Light",description:"Red Energy boosts Particle gain.",effectDisplay:A(d[0][1].value)+"x"})],[()=>({title:"Peace and Quiet",description:"Generate Orange Energy over time based on Red Energy.",effectDisplay:A(d[1][0].value)+"/s"}),()=>({title:"Sunset Sight",description:"Orange Energy adds to Base Particle gain.",effectDisplay:"+"+A(d[1][1].value)}),()=>({title:"Furious Height",description:"Orange Energy boosts Red Energy gain at a reduced rate.",effectDisplay:A(d[1][2].value)+"x"})],[()=>({title:"Shattered Dreams",description:"Generate Yellow Energy over time based on Light Particles.",effectDisplay:A(d[2][0].value)+"/s"}),()=>({title:"Thunderous Streams",description:"Yellow Energy boosts Lightning Particle gain.",effectDisplay:A(d[2][1].value)+"x"}),()=>({title:"Frightened Screams",description:"Yellow Energy boosts Orange Energy gain at a reduced rate.",effectDisplay:A(d[2][2].value)+"x"})],[()=>({title:"Beautiful Fragrance",description:"Generate Green Energy over time based on Combinators.",effectDisplay:A(d[3][0].value)+"/s"}),()=>({title:"Quantum Condensed",description:"Green Energy boosts Ultrasound gain.",effectDisplay:A(d[3][1].value)+"x"}),()=>({title:"Calm Sense",description:"Green Energy boosts Yellow Energy gain at a reduced rate.",effectDisplay:A(d[3][2].value)+"x"})],[()=>({title:"The Night Sky",description:"Generate Blue Energy over time based on Total Cryo Challenge Completions.",effectDisplay:A(d[4][0].value)+"/s"}),()=>({title:"Ocean Nigh",description:"Blue Energy boosts the speed of all Aqua bars.",effectDisplay:A(d[4][1].value)+"x"}),()=>({title:"Frozen Light",description:"Blue Energy boosts Green Energy gain at a reduced rate.",effectDisplay:A(d[4][2].value)+"x"})],[()=>({title:"Morning Sights",description:"Generate Indigo Energy over time based on Ultrasound.",effectDisplay:A(d[5][0].value)+"/s"}),()=>({title:"Beach Plight",description:"Indigo Energy boosts Attraction Power gain.",effectDisplay:A(d[5][1].value)+"x"}),()=>({title:"Refracted Lights",description:"Indigo Energy boosts Blue Energy gain at a reduced rate.",effectDisplay:A(d[5][2].value)+"x"})],[()=>({title:"Cosmic Wonders",description:"Generate Violet Energy over time based on Attraction Power.",effectDisplay:A(d[6][0].value)+"/s"}),()=>({title:"Deathly Plunders",description:"Violet Energy extends the length of all Color Energy boosts.",effectDisplay:"+"+A(i.sub(d[6][1].value,1).times(100))+"%"}),()=>({title:"Torn Asunder",description:"Violet Energy boosts Indigo Energy gain at a reduced rate.",effectDisplay:A(d[6][2].value)+"x"})]],b=rt(()=>({visibility:()=>we(M.milestones[43].earned.value&&i.gte(p[5].buyables[2].amount.value,1)),canClick:()=>h.every(C=>i.eq(C.time.value,0))&&i.gte(n.value,1),display:()=>({title:"All Energy Boosts",description:"Triples all Color Energy gain for "+hl(m.value)+", but sacrifices all Light Particles."}),onClick:()=>{h.forEach(C=>{var P,I;(I=(P=C.spell).onClick)==null||I.call(P)})}})),m=y(()=>{let C=i.sub(60,i.div(60,i.add(n.value,1).log10().div(2).plus(1).sqrt()));return M.milestones[38].earned.value&&(C=i.mul(C,1.5)),M.milestones[42].earned.value&&(C=i.mul(C,1.5)),C=i.mul(C,d[6][1].value),C}),h=[...new Array(7)].map((C,P)=>{const I=K(0),B=rt(()=>({canClick:()=>i.eq(I.value,0)&&i.gte(n.value,1),display:()=>({title:Gt[P]+" Energy Boost"+(i.gt(I.value,0)?" (ACTIVE)":""),description:"Triples "+Gt[P]+" Energy gain for "+hl(i.eq(I.value,0)?m.value:I.value)+", but sacrifices "+(M.milestones[42].earned.value?"33% of":M.milestones[38].earned.value?"50% of":"all")+" Light Particles."}),onClick:()=>{I.value=m.value,n.value=M.milestones[42].earned.value?i.div(n.value,1.5):M.milestones[38].earned.value?i.div(n.value,2):0},style:()=>({backgroundColor:i.gt(I.value,0)?Il[P]:i.gte(n.value,1)?$l[P]:"grey",color:i.eq(I.value,0)&&i.gte(n.value,1)&&(P==4||P==5)?Il[P]:"black"})}));return{time:I,spell:B}}),p=[...new Array(7)].map((C,P)=>{const I=K(0,Gt[P]+" Energy"),B=y(()=>{let Q=i.dOne;return $e.upgrades[0].bought.value&&(Q=Q.times($e.upgradeEffects[0].value)),M.milestones[33].earned.value&&(Q=Q.times(2)),M.milestones[35].earned.value&&(Q=Q.times(3)),M.milestones[36].earned.value&&(Q=Q.times(M.adv37eff.value)),M.milestones[41].earned.value&&(Q=Q.times(4)),P<6&&(Q=Q.times(d[P+1][2].value)),i.gt(h[P].time.value,0)&&(Q=Q.times(3)),Q}),q=[...new Array(w[P].length)].map((Q,_e)=>He(()=>({visibility:()=>_e==0?$.Visible:we(i.gte(q[_e-1].amount.value,1)),cost:()=>i.pow(P/4+_e/2+2,i.pow(q[_e].amount.value,1+(Math.sqrt(P)+_e)/10).plus((Math.sqrt(P)/4+Math.sqrt(_e))*3)),resource:_e==0?n:I,display:w[P][_e]}))),oe=Tl(()=>({display:F(()=>a(V,null,[a("h3",null,[v("There is "),A(I.value),v(" "),Gt[P],v(" Energy")]),a("br",null,null),q.map(G),a("br",null,null),a("br",null,null),G(h[P].spell),a("br",null,null)])),style:{backgroundColor:Go[P],color:P==4||P==5?Il[P]:$l[P]}}));return{energy:I,gainMult:B,buyables:q,tab:oe}}),S=Mn([...new Array(7)].map((C,P)=>[Gt[P],()=>({visibility:()=>P==0?$.Visible:we(p[P].buyables.length>0&&p[P-1].buyables.every(I=>i.gte(I.amount.value,1))),tab:p[P].tab,display:Gt[P],style:()=>({borderColor:$l[P]})})]).reduce((C,[P,I])=>({...C,[P]:I}),{}));return fe.on("update",C=>{for(let P=0;P<7;P++)p[P].energy.value=i.add(p[P].energy.value,i.mul(d[P][0].value,C).times(p[P].gainMult.value)),h[P].time.value=i.max(i.sub(h[P].time.value,C),0);M.milestones[43].earned.value&&(n.value=i.add(n.value,i.mul(r.currentGain.value,C).div(10)))}),{id:e,name:t,color:l,light:n,best:s,lights:p,lightBuyableEffects:d,tabFamily:S,lightSpells:h,allLightSpells:b,display:F(()=>a(V,null,[a(dt,{resource:n,color:l},null),G(c),a("br",null,null),a("br",null,null),G(S),a("br",null,null),a("br",null,null),G(b)])),treeNode:o}}),Se=je("li",()=>{const e="li",t="Lightning",l="#ffd500",n=K(0,"Lightning Particles"),s=ot(n),r={0:K(!1),1:K(!1),2:K(!1),3:K(!1)},u=$t(()=>({scaling:It(2500,1/4),baseResource:ae.particles,gainResource:n,roundUpCost:!0,gainModifier:Ot(Ie(ie.mainEff,"Particle Combinator Effect",M.milestones[15].earned),Ie(Re.lightBuyableEffects[2][1],"Yellow Energy Buyable 2",()=>i.gte(Re.lights[2].buyables[1].amount.value,1)))}));fe.on("update",h=>{M.milestones[15].earned.value&&(n.value=i.mul(u.currentGain.value,h).plus(n.value))});const o={0:y(()=>i.add(n.value,1).log2().times(2)),1:y(()=>{let h=i.add(n.value,1).sqrt();return h.gte(100)&&(h=h.log(100).times(100)),h}),2:y(()=>i.add(n.value,1).log(3).plus(1).sqrt()),3:y(()=>i.add(n.value,1).log10().times(i.add(ae.particles.value,1).sqrt()).plus(1).log10().plus(1))},c=y(()=>M.milestones[18].earned.value?2:1),d=[rt(()=>({visibility:()=>i.gte(s.value,1)?$.Visible:$.None,canClick:()=>!r[0].value,onClick:h=>{r[0].value=!0,Object.values(r).filter(p=>p.value).length>c.value&&(r[1].value=!1,r[2].value=!1,r[3].value=!1)},display:F(()=>a(V,null,[a("h3",null,[v("Lightning Mode A "),r[0].value?"(Active)":""]),a("br",null,null),v("Increase Particle gain based on Lightning Particles (Currently: +"),Z(o[0].value,1),v(")")]))})),rt(()=>({visibility:()=>i.gte(s.value,1)?$.Visible:$.None,canClick:()=>!r[1].value,onClick:h=>{r[1].value=!0,Object.values(r).filter(p=>p.value).length>c.value&&(r[0].value=!1,r[2].value=!1,r[3].value=!1)},display:F(()=>a(V,null,[a("h3",null,[v("Lightning Mode B "),r[1].value?"(Active)":""]),a("br",null,null),v("Multiply Particle gain based on Lightning Particles (Currently: x"),Z(o[1].value,2),v(")")]))})),rt(()=>({visibility:()=>i.gte(s.value,2)?$.Visible:$.None,canClick:()=>!r[2].value,onClick:h=>{r[2].value=!0,Object.values(r).filter(p=>p.value).length>c.value&&(r[0].value=!1,r[1].value=!1,r[3].value=!1)},display:F(()=>a(V,null,[a("h3",null,[v("Lightning Mode C "),r[2].value?"(Active)":""]),a("br",null,null),v("Multiply Flame, Life, and Aqua Particle gain based on Lightning Particles (Currently: x"),Z(o[2].value,2),v(")")]))})),rt(()=>({visibility:()=>i.gte(s.value,5)?$.Visible:$.None,canClick:()=>!r[3].value,onClick:h=>{r[3].value=!0,Object.values(r).filter(p=>p.value).length>c.value&&(r[0].value=!1,r[1].value=!1,r[2].value=!1)},display:F(()=>a(V,null,[a("h3",null,[v("Lightning Mode D "),r[3].value?"(Active)":""]),a("br",null,null),v("Multiply Particle gain based on Particles and Lightning Particles (Currently: x"),Z(o[3].value,2),v(")")]))}))],w=tt(()=>({thingsToReset:()=>{const h={id:e,name:t,color:l,lightning:n,best:s,treeNode:b,clickables:d,clickableEffects:o};return M.milestones[32].earned.value?[h]:[{...h,lightningSel:r}]}})),b=lt(()=>({visibility:()=>M.milestones[0].earned.value?$.Visible:$.Hidden,layerID:e,display:F(()=>a("img",{src:"./nodes/lightning.png"},null)),color:l,reset:w}));Fe(b,{display:ct(n),pinnable:!0,style:()=>b.visibility.value===$.Visible?"":"display: none"});const m=ft(()=>({conversion:u,tree:ae.tree,treeNode:b}));return Fe(m,{display:F(()=>Rt("Modifiers","",u.gainModifier,u.scaling.currentGain(u))),pinnable:!0,direction:X.Down,style:"width: 400px; text-align: left"}),{id:e,name:t,color:l,lightning:n,best:s,lightningSel:r,display:F(()=>a(V,null,[a(dt,{resource:n,color:l},null),G(m),a("br",null,null),a("br",null,null),a("table",null,[a("tbody",null,[a("tr",null,[d.map(h=>a("td",null,[G(h)]))])])])])),treeNode:b,clickables:d,clickableEffects:o}}),Uo=Symbol("MultiBuyable");function kt(e){return Oe(t=>{const l=Object.assign(t,e());if(l.canPurchase==null&&l.costSets.length==0)throw console.warn("Cannot create buyable without a canPurchase property or some element of costSets existing",l),"Cannot create buyable without a canPurchase property or some element of costSets existing";l.id=xe("multibuyable-"),l.type=Uo,l[Ee]=Gl,l.amount=l[Yt],l.canAfford=y(()=>{const u=l;for(let o=0;o<u.costSets.length;o++){const c=u.costSets[o],d=f(c.cost);if(i.lt(c.resource.value,d))return!1}return!0}),l.canPurchase==null&&(l.canPurchase=y(()=>f(l.visibility)===$.Visible&&f(l.canAfford)&&i.lt(l.amount.value,f(l.purchaseLimit)))),l.maxed=y(()=>i.gte(l.amount.value,f(l.purchaseLimit))),k(l,"classes");const n=l.classes;l.classes=y(()=>{const u=f(n)||{};return l.maxed.value&&(u.bought=!0),u}),k(l,"canPurchase"),k(l,"keepRes"),l.keepRes===void 0&&(l.keepRes=!1);const s=l.keepRes;l.canClick=l.canPurchase,l.onClick=l.purchase=function(){const u=l;if(!(!f(u.canPurchase)||u.costSets.length==0)){for(let o=0;o<u.costSets.length;o++){const c=u.costSets[o],d=f(c.cost);f(s)||(c.resource.value=i.sub(c.resource.value,d))}u.amount.value=i.add(u.amount.value,1)}},k(l,"display");const r=l.display;l.display=F(()=>{const u=f(r);if(We(u)){const o=j(u);return a(o,null,null)}if(u!=null&&l.costSets.length>0){const o=l,c=j(u.title||"","h3"),d=j(u.description),w=j(u.effectDisplay||""),b=f(o.purchaseLimit)===i.dInf?a(V,null,[v("Amount: "),ge(o.amount.value)]):a(V,null,[v("Amount: "),ge(o.amount.value),v(" /")," ",ge(f(o.purchaseLimit))]),m=o.costSets.map(h=>a("div",null,[A(f(h.cost)||0),v(" "),h.resource.displayName,a("br",null,null)]));return a("span",null,[u.title?a("div",null,[a(c,null,null)]):null,a(d,null,null),a("div",null,[a("br",null,null),b]),u.effectDisplay?a("div",null,[a("br",null,null),v("Currently: "),a(w,null,null)]):null,o.maxed.value?null:a("div",null,[a("br",null,null),v("Cost: "),m])])}return""}),k(l,"visibility"),ee(l,"visibility",$.Visible);for(let u=0;u<l.costSets.length;u++)k(l.costSets[u],"cost"),k(l.costSets[u],"resource");return k(l,"purchaseLimit"),ee(l,"purchaseLimit",i.dInf),k(l,"style"),k(l,"mark"),k(l,"small"),l[qe]=function(){const{display:u,visibility:o,style:c,classes:d,onClick:w,canClick:b,small:m,mark:h,id:p}=this;return{display:u,visibility:o,style:f(c),classes:d,onClick:w,canClick:b,small:m,mark:h,id:p}},l},Ue(0))}const ie=je("comb",()=>{const e="comb",t="Combinators",l="#03fca9",n=K(0,"Particle Combinators"),s=ot(n),r=y(()=>{let le=i.sqrt(n.value).plus(1);return M.milestones[32].earned.value&&(le=le.pow(2)),le}),u=dr(()=>({scaling:yo(1e11,4,2),baseResource:ae.particles,gainResource:n,roundUpCost:!0})),o=tt(()=>({thingsToReset:()=>[ie]})),c=lt(()=>({visibility:()=>M.milestones[15].earned.value?$.Visible:$.Hidden,layerID:e,display:F(()=>a("img",{src:"./nodes/combinators.png"},null)),color:l,reset:o,style:{transform:"scale(1.5)"},glowColor:()=>h.some(le=>le.canPurchase.value&&i.lt(le.amount.value,1))||i.gt(u.currentGain.value,n.value)?"red":""}));Fe(c,{display:ct(n),pinnable:!0,style:()=>c.visibility.value===$.Visible?"":"display: none"});const d=ft(()=>({conversion:u,tree:ae.tree,treeNode:c})),w=y(()=>{let le=n.value;i.gte(le,10)&&(le=i.mul(le,10).sqrt());let Ke=i.mul(50,le);return M.milestones[20].earned.value&&(Ke=Ke.times(1.2)),M.milestones[34].earned.value&&(Ke=Ke.times(1.2)),Ke.ceil()}),b={0:y(()=>{let le=i.add(Me.flame.value,1).log10().times(h[0].amount.value).times(S.value).plus(1).log10();return M.milestones[17].earned.value&&(le=le.pow(3)),le}),1:y(()=>i.add(Te.earth.value,1).log10().times(i.mul(h[1].amount.value,S.value).pow(1.5)).plus(1).cbrt()),2:y(()=>i.add(i.mul(n.value,i.mul(h[2].amount.value,S.value).plus(1).log10()),1).log10().plus(1).sqrt()),3:y(()=>i.add(Ve.air.value,1).log10().times(h[3].amount.value).times(S.value).plus(1).log10().div(2).plus(1)),4:y(()=>i.add(ae.baseGain.value,1).log10().times(i.mul(h[4].amount.value,S.value).pow(M.milestones[39].earned.value?2:1)).plus(1).log10().div(5).plus(1)),5:y(()=>i.add(i.mul(n.value,M.milestones[34].earned.value?i.mul(h[5].amount.value,S.value).div(100):i.mul(h[5].amount.value,S.value).plus(1).log10()),1).log10().plus(1)),6:y(()=>i.add(i.mul(n.value,i.mul(i.pow(h[6].amount.value,2),S.value).div(25)),1).log10().plus(1).sqrt()),7:y(()=>i.add(i.mul(i.sub(Le.buyablePower.value,1).max(0),i.mul(h[7].amount.value,S.value).div(40)),1))},m=rt(()=>({visibility:()=>we(M.milestones[40].earned.value),canClick:()=>h.some(le=>le.canPurchase.value),display:()=>({title:"Max All",description:" "}),onClick:()=>{for(let le=0;le<h.length;le++){const Ke=h[le],jl=Ke.costSets.reduce((Xt,Hl)=>i.min(Xt,i.div(Hl.resource.value,f(Hl.cost))),i.dInf).min(i.sub(f(Ke.purchaseLimit),Ke.amount.value)).floor();Ke.costSets.forEach(Xt=>{Xt.resource.value=i.sub(Xt.resource.value,jl.times(f(Xt.cost)))}),Ke.amount.value=i.add(Ke.amount.value,jl)}},small:!0})),h=[kt(()=>({visibility:()=>we(i.gte(s.value,1)),costSets:[{cost:1e6,resource:Me.flame},{cost:1e4,resource:Se.lightning}],display:()=>({title:"Spark Molecule",description:"Increase Base Particle gain based on Flame Particles.",effectDisplay:"+"+A(b[0].value)}),purchaseLimit:w})),kt(()=>({visibility:()=>we(i.gte(s.value,1)),costSets:[{cost:25e5,resource:Ae.aqua},{cost:100,resource:Te.earth}],display:()=>({title:"Mud Molecule",description:"Multiply Particle & Aqua Particle gain based on Earth Particles.",effectDisplay:A(b[1].value)+"x"}),purchaseLimit:w})),kt(()=>({visibility:()=>we(i.gte(s.value,2)),costSets:[{cost:1e8,resource:Le.life},{cost:1e5,resource:Se.lightning},{cost:500,resource:Te.earth}],display:()=>({title:"Protein Molecule",description:"Increase Life Buyable Power based on Combinators.",effectDisplay:"+"+A(i.sub(b[2].value,1).times(100))+"%"}),purchaseLimit:w})),kt(()=>({visibility:()=>we(i.gte(s.value,3)),costSets:[{cost:5e9,resource:Ae.aqua},{cost:1e8,resource:pe.cryo},{cost:1e5,resource:Ve.air}],display:()=>({title:"Snow Molecule",description:'Boost the effect of the "Full Freeze" challenge based on Air Particles.',effectDisplay:"^"+A(b[3].value)}),purchaseLimit:w})),kt(()=>({visibility:()=>we(i.gte(s.value,4)),costSets:[{cost:1e12,resource:Me.flame},{cost:1e6,resource:Te.earth}],display:()=>({title:"Magma Molecule",description:'Boost the effect of the "Heat = Speed" upgrade based on Base Particle gain.',effectDisplay:"^"+A(b[4].value)}),purchaseLimit:w})),kt(()=>({visibility:()=>we(i.gte(s.value,5)),costSets:[{cost:5e14,resource:Le.life},{cost:2e7,resource:Te.earth}],display:()=>({title:"Wood Molecule",description:"Divide the Earth Grid Cost based on Combinators.",effectDisplay:"/"+A(b[5].value)}),purchaseLimit:w})),kt(()=>({visibility:()=>we(i.gte(s.value,6)),costSets:[{cost:1e10,resource:Se.lightning},{cost:1e15,resource:pe.cryo},{cost:5e9,resource:Te.earth}],display:()=>({title:"Steel Molecule",description:'Boost the effect of the "Temperature Decrease" challenge based on Combinators.',effectDisplay:"^"+A(b[6].value)}),purchaseLimit:w})),kt(()=>({visibility:()=>we(i.gte(s.value,7)),costSets:[{cost:5e22,resource:Le.life},{cost:1e9,resource:Ve.air}],display:()=>({title:"Methane Molecule",description:"Boost Attraction Power gain based on Life Buyable Power.",effectDisplay:A(b[7].value)+"x"}),purchaseLimit:w}))];fe.on("update",le=>{M.milestones[36].earned.value&&(Q.value=i.add(Q.value,i.mul(i.add(Lt.value,Jt.value),le))),P.value=i.add(P.value,i.mul(i.add(Q.value,Y.value),le)),p.value=i.add(p.value,i.mul(i.add(P.value,B.value),le).times(C.value))});const p=K(1,"Attraction Power"),S=y(()=>i.max(p.value,1).log10().div(3).plus(1)),C=y(()=>{let le=1;return i.gte(n.value,7)&&(le=b[7].value),i.gte(Re.lights[5].buyables[1].amount.value,1)&&(le=i.mul(le,Re.lightBuyableEffects[5][1].value)),le}),P=K(0),I=He(()=>({cost:()=>i.pow(8,i.pow(i.div(I.amount.value,M.milestones[35].earned.value?3:1),2)),resource:p,display:()=>({title:"Covalent Bonds",description:"Creates "+A(B.value)+" additional Covalence Power."})})),B=y(()=>i.pow(2,i.mul(I.amount.value,oe.value)).sub(1)),q=He(()=>({cost:()=>i.pow(5,i.pow(q.amount.value,3)).times(1e5),resource:p,display:()=>({title:"Covalence Boosts",description:"Makes Covalent Bonds "+A(i.sub(oe.value,1).times(100))+"% stronger."})})),oe=y(()=>i.div(q.amount.value,2).plus(1)),Q=K(0),_e=He(()=>({cost:()=>i.pow(400,i.pow(i.div(_e.amount.value,M.milestones[35].earned.value?3:1),2)).times(100),resource:p,display:()=>({title:"Ionic Bonds",description:"Creates "+A(Y.value)+" additional Ionic Power."})})),Y=y(()=>i.pow(2,i.mul(_e.amount.value,O.value)).sub(1).div(10)),ue=He(()=>({cost:()=>i.pow(15,i.pow(ue.amount.value,3)).times(3e5),resource:p,display:()=>({title:"Ionic Boosts",description:"Makes Ionic Bonds "+A(i.sub(O.value,1).times(100))+"% stronger."})})),O=y(()=>i.div(ue.amount.value,2).plus(1)),Lt=K(0),Vt=He(()=>({cost:()=>i.pow(7e3,i.pow(i.div(Vt.amount.value,3),2)).times(1e8),resource:p,display:()=>({title:"Metallic Bonds",description:"Creates "+A(Jt.value)+" additional Metallic Power."})})),Jt=y(()=>i.pow(2,i.mul(Vt.amount.value,Ze.value)).sub(1).div(15)),Ye=He(()=>({cost:()=>i.pow(65,i.pow(Ye.amount.value,3)).times(1e9),resource:p,display:()=>({title:"Metallic Boosts",description:"Makes Metallic Bonds "+A(i.sub(Ze.value,1).times(100))+"% stronger."})})),Ze=y(()=>i.div(Ye.amount.value,2).plus(1)),nt=Tl(()=>({display:F(()=>a(V,null,[G(m),a("br",null,null),a("br",null,null),h.map(G),a("br",null,null)]))})),Tn=Tl(()=>({display:F(()=>a(V,null,[a("br",null,null),v("There is "),a("b",{style:"font-size: 20px;"},[A(p.value)]),v(" Attraction Power, which multiplies effective Molecules by")," ",a("b",{style:"font-size: 20px;"},[A(S.value)]),v("."),a("br",null,null),a("br",null,null),v("There is "),a("b",null,[A(i.add(P.value,B.value))])," ",v("Covalence Power. "),G(I),v(" "),G(q),a("br",null,null),a("br",null,null),v("There is "),a("b",null,[A(i.add(Q.value,Y.value))]),v(" Ionic Power. "),G(_e),v(" "),G(ue),a("br",null,null),a("br",null,null),Ne(a("div",null,[v("There is")," ",a("b",null,[A(i.add(Lt.value,Jt.value))])," ",v("Metallic Power. "),G(Vt),v(" "),G(Ye),a("br",null,null),a("br",null,null)]),[[Pe,M.milestones[36].earned.value]])]))})),xl=Mn({Molecules:()=>({visibility:$.Visible,tab:nt,display:"Molecules",style:{borderColor:l},glowColor:()=>h.some(le=>le.canPurchase.value&&i.lt(le.amount.value,1))||i.gt(u.currentGain.value,n.value)?"red":""}),Intrabonds:()=>({visibility:()=>we(M.milestones[23].earned.value),tab:Tn,display:"Intrabonds",style:()=>({borderColor:M.milestones[23].earned.value?"#ff9100":"transparent"})})});return{id:e,name:t,color:l,combinators:n,best:s,multiBuyables:h,multiBuyableEffects:b,mainEff:r,attractionPower:p,covalencePower:P,covalentBonds:I,covalenceBoost:q,ionicPower:Q,ionicBonds:_e,ionicBoost:ue,metallicPower:Lt,metallicBonds:Vt,metallicBoost:Ye,tabFamily:xl,maxAll:m,display:F(()=>a(V,null,[a(dt,{resource:n,color:l},null),G(d),v(" "),a("br",null,null),a("br",null,null),v("Multiplies "),M.milestones[31].earned.value?"Flame, Life, Aqua, ":"",v("Earth, Lightning, Air, and Cryo Particles by "),A(r.value),v("."),a("br",null,null),a("br",null,null),G(xl)])),treeNode:c}}),Te=je("e",()=>{const e="e",t="Earth",l="#733000",n=K(0,"Earth Particles"),s=ot(n),r=K(0),u=ot(r),o=y(()=>{let Y=i.pow(2,r.value);return i.gte(ie.best.value,5)&&(Y=Y.div(ie.multiBuyableEffects[5].value)),Y}),c=y(()=>i.pow(2,r.value)),d=y(()=>i.div(.2,i.mul(r.value,-1).sub(1)).plus(.4)),w=y(()=>{const Y={},ue={};for(let Ze=1;Ze<=B.rows;Ze++)for(let nt=1;nt<=B.cols;nt++)B.cells[Ze*100+nt].state&&(Y[Ze]=i.add(Y[Ze]||1,c.value),ue[nt]=i.add(ue[nt]||1,c.value));const O=Object.values(Y),Lt=Object.values(ue),Vt=O.length==0?1:O.reduce((Ze,nt)=>i.mul(Ze,nt)),Jt=Lt.length==0?1:Lt.reduce((Ze,nt)=>i.mul(Ze,nt));let Ye=i.mul(Vt,Jt).pow(d.value);return Ye.gte(10)&&(Ye=i.pow(10,Ye.log10().sqrt())),Ye.gte(100)&&(Ye=i.pow(100,Ye.log(100).cbrt())),Ye}),b=y(()=>i.lt(r.value,1)?0:w.value.div(10).plus(.9).log10().times(10)),m=y(()=>i.lt(r.value,2)?0:i.sub(.8,i.div(.8,i.div(b.value,100).plus(1)))),h=y(()=>i.lt(r.value,4)?1:i.add(b.value,1).log10().div(2).plus(1).pow(2)),p=y(()=>i.lt(r.value,16)?1:w.value.pow(1.1).div(Math.pow(100,1.1)).plus(.99)),S=$t(()=>({scaling:It(15e4,1/2),baseResource:Me.flame,gainResource:n,roundUpCost:!0,gainModifier:Ot(Ie(ie.mainEff,"Particle Combinator Effect",M.milestones[15].earned))})),C=F(()=>a(wn,{skipConfirm:i.lt(r.value,u.value),class:"feature clickable can",disabled:i.lt(r.value,1),customDisplay:"WARNING: This will reset your Earth Grid!",forceOnClick:()=>{r.value=i.sub(r.value,1);for(let Y=1;Y<=B.rows;Y++)for(let ue=1;ue<=B.cols;ue++)B.setState(Y*100+ue,!0)}},{default:()=>[a("b",null,[v("Level Down")])]})),P=rt(()=>({canClick:()=>Object.values(B.cells).every(Y=>Y.state),onClick:()=>{if(i.gte(r.value,i.sub(u.value,1)))for(let Y=1;Y<=B.rows;Y++)for(let ue=1;ue<=B.cols;ue++)B.setState(Y*100+ue,!1);r.value=i.add(r.value,1)},display:()=>({title:"Level Up",description:"Levels up the Earth Grid, but resets it. Requires all grid cells filled."})})),I=rt(()=>({visibility:()=>we(M.milestones[25].earned.value),canClick:()=>i.gte(n.value,i.mul(o.value,50))&&!Object.values(B.cells).every(Y=>Y.state),onClick:()=>{n.value=i.sub(n.value,i.mul(o.value,50));for(let Y=1;Y<=B.rows;Y++)for(let ue=1;ue<=B.cols;ue++)B.setState(Y*100+ue,!0)},display:()=>({title:"Fill Grid",description:"Cost: "+Z(i.mul(o.value,50))+" Earth Particles"})})),B=ho(()=>({rows:5,cols:5,getStartState:()=>!1,getDisplay:()=>" ",getStyle:(Y,ue)=>({width:"40px",minHeight:"40px",height:"40px",margin:"0 auto",backgroundColor:ue?"green":"black"}),getCanClick:(Y,ue)=>!ue&&i.gte(n.value,o.value),onClick:Y=>{n.value=i.sub(n.value,o.value),B.setState(Y,!0)}})),q=tt(()=>({thingsToReset:()=>[Te]})),oe=lt(()=>({visibility:()=>M.milestones[11].earned.value?$.Visible:$.Hidden,layerID:e,display:F(()=>a("img",{src:"./nodes/earth.png"},null)),color:l,reset:q}));Fe(oe,{display:ct(n),pinnable:!0,style:()=>oe.visibility.value===$.Visible?"":"display: none"});const Q=ft(()=>({conversion:S,tree:ae.tree,treeNode:oe}));Fe(Q,{display:F(()=>Rt("Modifiers","",S.gainModifier,S.scaling.currentGain(S))),pinnable:!0,direction:X.Down,style:"width: 400px; text-align: left"});const _e=K(0);return fe.on("update",Y=>{M.milestones[24].earned.value&&(n.value=i.mul(S.currentGain.value,Y).plus(n.value)),M.milestones[37].earned.value&&(_e.value+=Y,_e.value>=1&&(_e.value=0,i.gte(n.value,i.mul(o.value,100))&&(P.onClick(),I.onClick())))}),{id:e,name:t,color:l,earth:n,best:s,fillGrid:I,gridLevel:r,bestGridLevel:u,display:F(()=>a(V,null,[a(dt,{resource:n,color:l},null),G(Q),a("br",null,null),a("br",null,null),i.gte(s.value,1)?a("div",null,[v("Grid Level: "),be(r.value),a("br",null,null),v("Grid Cost: "),be(o.value),v(" Earth Particles"),a("br",null,null),a("br",null,null),v("Flame Particle Multiplier: "),Z(w.value),v("x"),a("br",null,null),Ne(a("span",null,[v("Base Particle Gain Added: +"),Z(b.value),v("/s"),a("br",null,null)]),[[Pe,i.gte(r.value,1)]]),Ne(a("span",null,[v("Torrent Effect Added: +"),Z(i.mul(m.value,100)),v("%"),a("br",null,null)]),[[Pe,i.gte(r.value,2)]]),Ne(a("span",null,[v("Life Buyable 6 Effect Mult: "),Z(h.value,2),v("x"),a("br",null,null)]),[[Pe,i.gte(r.value,4)]]),Ne(a("span",null,[v("Particle Gain Mult: "),Z(p.value,2),v("x"),a("br",null,null)]),[[Pe,i.gte(r.value,16)]]),a("br",null,null),G(I),a("br",null,null),G(B),a("br",null,null),a("table",null,[a("tr",null,[a("td",null,[G(C)])]),a("tr",null,[a("td",null,[G(P)])])])]):a("div",null,null)])),treeNode:oe,grid:B,flameMult:w,baseGainAdded:b,torrentEffAdded:m,lb6Mult:h,particleGainMult:p,autoTime:_e}}),M=je("adv",()=>{const e="adv",t="Advancements",l="#ffffff",n=[125,700,2e3,5e3,25e3,36e3,6e4,885e3,225e4,435e4,325e5,405e5,55555555,1e9,235e7,325e7,1e10,2e10,125e9,25e12,6e13,1e14,5e14,1e17,12e17,4e18,15e18,1e20,5e21,45e21,135e21,1e24,14e24,1e27,12e27,6e28,5e30,25e31,225e34,5e37,2e39,72e40,133e43,35e45,i.dInf],s=K(0,"Advancements"),r=$t(()=>({scaling:{currentGain:p=>i.gte(p.baseResource.value,n[new i(p.gainResource.value).toNumber()]||i.dInf)?1:0,currentAt:p=>n[new i(p.gainResource.value).toNumber()]||i.dInf,nextAt:p=>n[new i(p.gainResource.value).toNumber()]||i.dInf},baseResource:ae.particleGain,gainResource:s,roundUpCost:!0,buyMax:!1})),u=tt(()=>({thingsToReset:()=>[M]})),o=lt(()=>({layerID:e,display:"A",color:l,reset:u,glowColor:()=>i.gt(r.actualGain.value,0)?"red":""}));Fe(o,{display:ct(s),pinnable:!0,direction:X.Right});const c=ft(()=>({conversion:r,baseResourceName:"particles/s",tree:ae.tree,treeNode:o})),d=y(()=>{let p=120;return h[8].earned.value&&(p=i.sub(s.value,7).times(30).plus(p)),h[30].earned.value&&(p=1/0),p}),w=y(()=>i.pow(2,i.root(Te.gridLevel.value,1.5))),b=y(()=>i.pow(1.2,i.sub(s.value,35)));function m(p,S){const C=j(S);return io(()=>({visibility:()=>i.gte(s.value,p)?$.Visible:$.None,shouldEarn(){return i.gte(s.value,p)},display:{requirement:F(()=>a(V,null,[a("h3",null,[be(p),v(" Advancement")]),a("br",null,null),a(C,null,null)]))},style:{width:"30em"}}))}const h=[m(1,"Unlock Lightning"),m(2,"Unlock a new row of Flame Upgrades"),m(3,"Unlock Cryo"),m(4,"Gain 100% of Flame, Life, and Aqua Particles every second."),m(5,F(()=>a(V,null,[v("Flame, Life, and Aqua Particle gain is tripled for the first")," ",be(d.value),v(" seconds of a run.")]))),m(6,"Unlock a new row of Life Buyables"),m(7,"Unlock Air"),m(8,"Unlock a new Aqua Bar"),m(9,"The milestone at 5 Advancements lasts 30 seconds longer per Advancement after 7"),m(10,"Purchasing Life Buyables does not spend Life Particles"),m(11,"The Air requirement uses a more efficient formula, you can buy max Air, and you can buy all Life Buyables at once."),m(12,"Unlock Earth, and all Aqua Bars are twice as fast."),m(13,"Layers only reset along their branches, rather than by row (this does NOT affect Cryo Challenges)."),m(14,"After 1 second of a reset, all Flame Upgrades are automatically purchased if you can afford them."),m(15,F(()=>a(V,null,[v("Wind/Zephyr/Tornado Speeds work sublinearly (square root) rather than logarithmically, and Aqua Bars are faster based on your Earth Grid Level ("),A(w.value),v("x)")]))),m(16,"Unlock Particle Combinators, gain 100% of Lightning Particle gain every second, and starting a Cryo Challenge only resets the Aqua layer."),m(17,"All Life Buyables are automatically purchased every second."),m(18,"The Spark Molecule effect is cubed."),m(19,"You can activate two Lightning Modes at once."),m(20,"Unlock a new Aqua Bar."),m(21,"Increase the Molecule limit by 20%."),m(22,"Gain 100% of Air Particle gain every second."),m(23,"Gain 100% of Cryo Particle gain every second."),m(24,"Unlock Intrabonds."),m(25,"Gain 100% of Earth Particle gain every second."),m(26,"You can fill the Earth Grid with a single button."),m(27,"Keep Cryo Challenge completions on all resets, and increase the completion limits of the first two Cryo Challenges by 10."),m(28,"The Wave requirement scales 50% slower."),m(29,"Multiply Zephyr Speed and Tornado Speed by 10."),m(30,'Square the effect of the "Liquid Fire", "Magma Spirit" and "Speed = Heat" upgrades.'),m(31,"The effect of the milestone at 5 Advancements is permanently active, and all Aqua bar requirements scale 10% slower."),m(32,"The main Combinator effect also affects the first row of Particles."),m(33,"Unlock Light & Sound, square the Particle Combinator effect, and Lightning Modes are never de-selected by resets."),m(34,"All Light Energy colors are generated twice as fast, and you can buy max Life Buyables."),m(35,"Increase the Molecule limit by 20%, and the Wood Molecule effect uses a better formula."),m(36,"Covalent/Ionic Bond costs scale 67% slower, and all Light Energy colors are generated 3x as fast."),m(37,F(()=>a(V,null,[v("Unlock Metallic Bonds, and all Light Energy colors are generated 20% faster for every Advancement after 35 ("),A(b.value),v("x)")]))),m(38,"Automatically level up and fill the Earth Grid if both are possible every second, and double Ultrasound gain."),m(39,"Color Energy Boosts only use up half of your Light Particles when used, and they last 50% longer."),m(40,"The amount of Magma Molecules are effectively squared."),m(41,"You can max all Molecules at once."),m(42,"All Light Energy colors are generated 4x as fast."),m(43,"Color Energy boosts only use up 33% of your Light Particles when used, and they last 50% longer."),m(44,"Gain 10% of Light Particle gain every second, and you can activate all Color Energy boosts at once if you have unlocked all seven Color Energy types.")];return{id:e,name:t,color:l,advancements:s,adv5time:d,adv15eff:w,adv37eff:b,display:F(()=>a(V,null,[a(dt,{resource:s,color:l},null),G(c),a("br",null,null),a("br",null,null),a("table",null,[a("tbody",null,[h.map(p=>a("tr",null,[a("td",null,[G(p)])]))])])])),treeNode:o,milestones:h}}),Le=je("l",()=>{const e="l",t="Life",l="#32a85e",n=K(0,"Life Particles"),s=ot(n),r=K(0),u=K(0),o=y(()=>{let q=10;return pe.challenges[1].active.value&&(q=i.dInf),q}),c=$t(()=>({scaling:It(o,1/3),baseResource:ae.particles,gainResource:n,roundUpCost:!0,gainModifier:Ot(Ie(m[3],"Life Buyable 4",M.milestones[5].earned),Ie(Se.clickableEffects[2],"Lightning Mode C",()=>Se.lightningSel[2].value),Ie(3,"Advancement 5",()=>M.milestones[4].earned.value&&i.lte(r.value,M.adv5time.value)),Ie(Ve.windEff,"Wind Effect",M.milestones[6].earned),Ie(ie.mainEff,"Particle Combinator Effect",M.milestones[31].earned))}));fe.on("update",q=>{M.milestones[3].earned.value&&(n.value=i.mul(c.currentGain.value,q).plus(n.value)),r.value+=q,u.value+=q,M.milestones[16].earned.value&&u.value>=1&&(u.value=0,S.onClick(void 0))});const d=y(()=>{let q=1;return i.gte(ie.best.value,2)&&(q=ie.multiBuyableEffects[2].value),$e.upgrades[2].bought.value&&(q=i.add(q,$e.upgradeEffects[2].value)),q}),w=y(()=>Ve.zephyrEff.value),b=[y(()=>{let q=m[5].value;return Me.upgradesR2[0].bought.value&&(q=q.plus(Me.upgradeEffects[3].value)),q.plus(w.value)}),y(()=>i.add(m[5].value,w.value)),y(()=>i.add(m[5].value,w.value)),y(()=>i.add(m[5].value,w.value)),y(()=>i.add(m[5].value,w.value)),y(()=>w.value)],m={0:y(()=>i.add(C[0].amount.value,b[0].value).times(d.value)),1:y(()=>i.pow(2,i.add(C[1].amount.value,b[1].value).times(d.value))),2:y(()=>i.mul(2,i.add(C[2].amount.value,b[2].value).times(d.value))),3:y(()=>i.pow(1.15,i.add(C[3].amount.value,b[3].value).times(d.value))),4:y(()=>i.pow(2.25,i.add(C[4].amount.value,b[4].value).times(d.value))),5:y(()=>i.add(ae.particleGain.value,1).log10().times(i.add(C[5].amount.value,b[5].value).times(d.value)).plus(1).log10().div(5).times(Te.lb6Mult.value))},h=y(()=>{let q=i.dOne;return q=q.times(pe.challenge2Data.reward.value),q}),p=y(()=>{let q=i.dOne;return pe.challenges[0].active.value&&(q=q.times(pe.challenge1Data.lifeBuyableCosts.value)),pe.challenges[2].active.value&&(q=q.times(pe.challenge3Data.exp.value)),q}),S=rt(()=>({visibility:()=>M.milestones[10].earned.value?$.Visible:$.None,canClick:()=>M.milestones[10].earned.value,display:()=>M.milestones[33].earned.value?"Max All":"Buy All",small:!0,onClick:q=>{for(let oe=0;oe<C.length;oe++)if(f(C[oe].canClick))if(M.milestones[33].earned.value){const Q=C[oe].target();C[oe].amount.value=i.max(C[oe].amount.value,Q)}else C[oe].onClick()}})),C=[He(()=>({visibility:()=>i.gt(s.value,0)?$.Visible:$.None,cost(){const q=C[0].amount.value;return i.pow(3,q).div(h.value).pow(p.value)},target(){return i.root(n.value,p.value).times(h.value).max(1).log(3).plus(1).floor()},resource:n,display:()=>({title:"Regeneration",description:"Generate 1 Particle/second.",effectDisplay:"+"+ge(m[0].value)}),keepRes:()=>M.milestones[9].earned.value})),He(()=>({visibility:()=>i.gt(C[0].amount.value,0)?$.Visible:$.None,cost(){const q=C[1].amount.value;return i.pow(4,i.pow(q,1.2)).times(10).div(h.value).pow(p.value)},target(){return i.root(n.value,p.value).times(h.value).div(10).max(1).log(4).root(1.2).plus(1).floor()},resource:n,display:()=>({title:"The Source",description:"Double Particle gain.",effectDisplay:Z(m[1].value)+"x"}),keepRes:()=>M.milestones[9].earned.value})),He(()=>({visibility:()=>i.gt(C[1].amount.value,0)?$.Visible:$.None,cost(){const q=C[2].amount.value;return i.pow(2.5,i.pow(q,1.4)).times(50).div(h.value).pow(p.value)},target(){return i.root(n.value,p.value).times(h.value).div(50).max(1).log(2.5).root(1.4).plus(1).floor()},resource:n,display:()=>({title:"Solar Warmth",description:"Flame Upgrade 1's effect increases by 2.",effectDisplay:"+"+ge(m[2].value)}),keepRes:()=>M.milestones[9].earned.value})),He(()=>({visibility:()=>M.milestones[5].earned.value?$.Visible:$.None,cost(){const q=C[3].amount.value;return i.pow(2,i.pow(q,1.6)).times(200).div(h.value).pow(p.value)},target(){return i.root(n.value,p.value).times(h.value).div(200).max(1).log2().root(1.6).plus(1).floor()},resource:n,display:()=>({title:"Existence Formula",description:"Increase Life Particle gain by 15%.",effectDisplay:Z(m[3].value,2)+"x"}),keepRes:()=>M.milestones[9].earned.value})),He(()=>({visibility:()=>i.gt(C[3].amount.value,0)?$.Visible:$.None,cost(){const q=C[4].amount.value;return i.pow(1.5,i.pow(q,1.8)).times(1e4).div(h.value).pow(p.value)},target(){return i.root(n.value,p.value).times(h.value).div(1e4).max(1).log(1.5).root(1.8).plus(1).floor()},resource:n,display:()=>({title:"Water Lily",description:"Make the Bubble bar 125% faster.",effectDisplay:Z(m[4].value,2)+"x"}),keepRes:()=>M.milestones[9].earned.value})),He(()=>({visibility:()=>i.gt(C[4].amount.value,0)?$.Visible:$.None,cost(){const q=C[5].amount.value;return i.pow(2,i.pow(2,q)).times(12e3).div(h.value).pow(p.value)},target(){return i.root(n.value,p.value).times(h.value).div(12e3).max(1).log2().sqrt().plus(1).floor()},resource:n,display:()=>({title:"Purest Form",description:"Add levels to all previous Life Buyables based on Particle gain.",effectDisplay:"+"+Z(m[5].value,2)}),keepRes:()=>M.milestones[9].earned.value}))],P=tt(()=>({thingsToReset:()=>[Le]})),I=lt(()=>({layerID:e,display:F(()=>a("img",{src:"./nodes/life.png"},null)),color:l,reset:P,glowColor:()=>C.some(q=>q.canPurchase.value)?"red":""}));Fe(I,{display:ct(n),pinnable:!0});const B=ft(()=>({conversion:c,tree:ae.tree,treeNode:I}));return Fe(B,{display:F(()=>Rt("Modifiers","",c.gainModifier,c.scaling.currentGain(c))),pinnable:!0,direction:X.Down,style:"width: 400px; text-align: left"}),{id:e,name:t,color:l,life:n,best:s,time:r,autoTime:u,buyableEffects:m,display:F(()=>a(V,null,[a(dt,{resource:n,color:l},null),G(B),a("br",null,null),a("br",null,null),Ne(a("div",null,[a("b",null,[v("Buyable Power: "),Z(i.mul(d.value,100)),v("%")])]),[[Pe,i.gt(d.value,1)]]),G(S),a("table",null,[a("tbody",null,[a("tr",null,[a("td",null,[G(C[0])]),a("td",null,[G(C[1])]),a("td",null,[G(C[2])])]),a("tr",null,[a("td",null,[G(C[3])]),a("td",null,[G(C[4])]),a("td",null,[G(C[5])])])])])])),treeNode:I,buyables:C,buyablePower:d}}),Me=je("f",()=>{const e="f",t="Flame",l="#fc3b00",n=K(0,"Flame Particles"),s=ot(n),r=K(0),u=K(!1),o=y(()=>pe.challenges[0].active.value?i.dInf:10),c=$t(()=>({scaling:It(o,1/3),baseResource:ae.particles,gainResource:n,roundUpCost:!0,gainModifier:Ot(Ie(d[4],"Flame Upgrade 5",m[1].bought),Ie(Se.clickableEffects[2],"Lightning Mode C",()=>Se.lightningSel[2].value),Ie(3,"Advancement 5",()=>M.milestones[4].earned.value&&i.lte(r.value,M.adv5time.value)),Ie(Te.flameMult,"Earth Grid Boost 1",M.milestones[11].earned),Ie(ie.mainEff,"Particle Combinator Effect",M.milestones[31].earned),Ie($e.upgradeEffects[4],"Sound Upgrade 5",$e.upgrades[4].bought))}));fe.on("update",C=>{if(M.milestones[3].earned.value&&(n.value=i.mul(c.currentGain.value,C).plus(n.value)),r.value+=C,!u.value&&M.milestones[13].earned.value&&r.value>=1&&i.gte(n.value,i.pow(2e4,w.value))){u.value=!0;for(let P=0;P<3;P++)b[P].purchase(),m[P].purchase()}});const d={0:y(()=>{let C=new i(1);return C=C.plus(Le.buyableEffects[2].value),C.pow(pe.challenge3Data.reward.value)}),1:y(()=>{let C=i.add(n.value,1).log(20).plus(1);return i.gte(ie.best.value,4)&&(C=C.pow(ie.multiBuyableEffects[4].value)),C}),2:y(()=>i.add(n.value,1).log(5).plus(1).pow(M.milestones[29].earned.value?2:1)),3:y(()=>i.add(n.value,1).log10().pow(M.milestones[29].earned.value?1:.5)),4:y(()=>i.add(ae.particles.value,1).log10().plus(1).log10().plus(1).pow(M.milestones[29].earned.value?2:1)),5:y(()=>i.add(n.value,1).log10().sqrt().times(3))},w=y(()=>{let C=i.dOne;return pe.challenges[2].active.value&&(C=C.times(pe.challenge3Data.exp.value)),C}),b=[Je(()=>({visibility:()=>i.gt(s.value,0)?$.Visible:$.None,cost:1,resource:n,display:F(()=>a("div",null,[a("h3",null,[v("A Hot Start")]),a("br",null,null),v("Generate")," ",Z(d[0].value,i.gt(pe.challenge3Data.reward.value,1)?2:0)," ",v("Particles/second."),a("br",null,null),a("br",null,null),v("Cost: "),at(n,f(b[0].cost)),v(" "),n.displayName]))})),Je(()=>({visibility:()=>b[0].bought.value?$.Visible:$.None,cost:()=>i.pow(5,w.value),resource:n,display:F(()=>a("div",null,[a("h3",null,[v("Heat = Speed")]),a("br",null,null),v("Flame Particles multiply Particle gain at a reduced rate."),a("br",null,null),v("Currently: "),Z(d[1].value,2),v("x"),a("br",null,null),a("br",null,null),v("Cost: "),at(n,f(b[1].cost)),v(" "),n.displayName]))})),Je(()=>({visibility:()=>b[1].bought.value?$.Visible:$.None,cost:()=>i.pow(30,w.value),resource:n,display:F(()=>a("div",null,[a("h3",null,[v("Liquid Fire")]),a("br",null,null),v("Flame Particles make the Bubble bar faster."),a("br",null,null),v("Currently: "),Z(d[2].value,2),v("x"),a("br",null,null),a("br",null,null),v("Cost: "),at(n,f(b[2].cost)),v(" "),n.displayName]))}))],m=[Je(()=>({visibility:()=>M.milestones[1].earned.value?$.Visible:$.None,cost:()=>i.pow(100,w.value),resource:n,display:F(()=>a("div",null,[a("h3",null,[v("Magma Spirit")]),a("br",null,null),v("Flame Particles add levels to the first Life Buyable."),a("br",null,null),v("Currently: +"),be(d[3].value),a("br",null,null),a("br",null,null),v("Cost: "),at(n,f(m[0].cost)),v(" "),n.displayName]))})),Je(()=>({visibility:()=>m[0].bought.value?$.Visible:$.None,cost:()=>i.pow(1e3,w.value),resource:n,display:F(()=>a("div",null,[a("h3",null,[v("Speed = Heat?")]),a("br",null,null),v("Particles multiply Flame Particle gain at a reduced rate."),a("br",null,null),v("Currently: "),Z(d[4].value,2),v("x"),a("br",null,null),a("br",null,null),v("Cost: "),at(n,f(m[1].cost)),v(" "),n.displayName]))})),Je(()=>({visibility:()=>m[1].bought.value?$.Visible:$.None,cost:()=>i.pow(1e4,w.value),resource:n,display:F(()=>a("div",null,[a("h3",null,[v("Hot Feet")]),a("br",null,null),v("Flame Particles increase base Particle gain at a reduced rate."),a("br",null,null),v("Currently: +"),Z(d[5].value,2),a("br",null,null),a("br",null,null),v("Cost: "),at(n,f(m[2].cost)),v(" "),n.displayName]))}))],h=tt(()=>({thingsToReset:()=>[Me]})),p=lt(()=>({layerID:e,display:F(()=>a("img",{src:"./nodes/flame.png"},null)),color:l,reset:h,glowColor:()=>b.some(C=>C.canPurchase.value)||m.some(C=>C.canPurchase.value)?"red":""}));Fe(p,{display:ct(n),pinnable:!0});const S=ft(()=>({conversion:c,tree:ae.tree,treeNode:p}));return Fe(S,{display:F(()=>Rt("Modifiers","",c.gainModifier,c.scaling.currentGain(c))),pinnable:!0,direction:X.Down,style:"width: 400px; text-align: left"}),{id:e,name:t,color:l,flame:n,best:s,time:r,autoDone:u,upgradeEffects:d,display:F(()=>a(V,null,[a(dt,{resource:n,color:l},null),G(S),a("br",null,null),a("br",null,null),a("table",null,[a("tbody",null,[a("tr",null,[b.map(C=>a("td",null,[G(C)]))]),a("tr",null,[m.map(C=>a("td",null,[G(C)]))])])])])),treeNode:p,upgradesR1:b,upgradesR2:m}});const xo=H({props:{visibility:{type:E(Number),required:!0},display:{type:E(Object,String,Function),required:!0},title:{type:E(Object,String,Function),required:!0},color:E(String),collapsed:{type:Object,required:!0},style:E(Object,String,Array),titleStyle:E(Object,String,Array),bodyStyle:E(Object,String,Array),classes:E(Object),id:{type:String,required:!0}},components:{Node:Tt,CollapseTransition:Rn},setup(e){const{title:t,display:l}=ye(e),n=zt(t),s=zt(l),r=y(()=>Zt[ce.theme].mergeAdjacent);return{titleComponent:n,bodyComponent:s,stacked:r,unref:f,Visibility:$}}}),jo=e=>(yt("data-v-338c9154"),e=e(),bt(),e),Ho=jo(()=>g("span",{class:"toggle"},"\u25BC",-1));function Wo(e,t,l,n,s,r){var c;const u=Be("CollapseTransition"),o=Be("Node");return e.unref(e.visibility)!==e.Visibility.None?(_(),D("div",{key:0,class:he(["infobox",{collapsed:e.unref(e.collapsed),stacked:e.stacked,...e.unref(e.classes)}]),style:re([{borderColor:e.unref(e.color),visibility:e.unref(e.visibility)===e.Visibility.Hidden?"hidden":void 0},(c=e.unref(e.style))!=null?c:{}])},[g("button",{class:"title",style:re([{backgroundColor:e.unref(e.color)},e.unref(e.titleStyle)||[]]),onClick:t[0]||(t[0]=d=>e.collapsed.value=!e.unref(e.collapsed))},[Ho,(_(),x(de(e.titleComponent)))],4),a(u,null,{default:z(()=>[e.unref(e.collapsed)?L("",!0):(_(),D("div",{key:0,class:"body",style:re({backgroundColor:e.unref(e.color)})},[(_(),x(de(e.bodyComponent),{style:re(e.unref(e.bodyStyle))},null,8,["style"]))],4))]),_:1}),a(o,{id:e.id},null,8,["id"])],6)):L("",!0)}var zo=te(xo,[["render",Wo],["__scopeId","data-v-338c9154"]]);const Yo=Symbol("Infobox");function mt(e){const t=Ue(!0);return Oe(()=>{const l=e();return l.id=xe("infobox-"),l.type=Yo,l[Ee]=zo,l.collapsed=t,k(l,"visibility"),ee(l,"visibility",$.Visible),k(l,"color"),k(l,"style"),k(l,"titleStyle"),k(l,"bodyStyle"),k(l,"classes"),k(l,"title"),k(l,"display"),l[qe]=function(){const{visibility:n,display:s,title:r,color:u,collapsed:o,style:c,titleStyle:d,bodyStyle:w,classes:b,id:m}=this;return{visibility:n,display:s,title:r,color:u,collapsed:o,style:f(c),titleStyle:d,bodyStyle:w,classes:b,id:m}},l})}const Pn=je("lore",()=>{const e="lore",t="Lore",l="#f4d4ff",n=[mt(()=>({visibility:$.Visible,color:"#000000",title:"The Beginning",display:F(()=>a(V,null,[v("So... you're telling me that I can make my own universe? Sweet!"),a("br",null,null),a("br",null,null),v("No, I'm not going to back down just because I'm younger than you, let me have this."),a("br",null,null),a("br",null,null),v("Great! So, I can just take these tools and get started then?"),a("br",null,null),a("br",null,null),v("Alright, here goes!"),a("br",null,null)])),titleStyle:{color:"white"}})),mt(()=>({visibility:Nt(()=>we(M.milestones[0].earned.value)),color:"#ffd500",title:"A New Particle",display:F(()=>a(V,null,[v("Ooh I have news for you! I found a new primordial particle!"),a("br",null,null),a("br",null,null),v("Oh... you've already heard of this one? I thought I made some kind of discovery..."),a("br",null,null),a("br",null,null),v("Yes, I did expect a universe to be normally made of only three particle types, thank you."),a("br",null,null),a("br",null,null),v("Ugh I guess I'll just keep building this thing then, maybe you could tell me things like this a little sooner next time?"),a("br",null,null)])),style:{color:"black"}})),mt(()=>({visibility:Nt(()=>we(M.milestones[2].earned.value)),color:"#03f4fc",title:"Frozen Solid",display:F(()=>a(V,null,[v("Oh let me guess, this one was already discovered too, right?"),a("br",null,null),a("br",null,null),v("See, I knew it. Damn discovering new things is harder than I thought."),a("br",null,null),a("br",null,null),v("I guess particles that make things cold aren't really all that interesting, and are probably completely useless, but hey why not put them in too, right?"),a("br",null,null),a("br",null,null),v("Time to keep making this boring universe..."),a("br",null,null)])),style:{color:"black"}})),mt(()=>({visibility:Nt(()=>we(M.milestones[3].earned.value)),color:"#ffffff",title:"Self Sustaining",display:F(()=>a(V,null,[v("Ah, my universe has finally reached the point where it can generate its own particles! This has gotta be revolutionary, right?"),a("br",null,null),a("br",null,null),v("No? You're saying that self-sustaining universes already exist? Ughhhh what does it take to make something new?"),a("br",null,null),a("br",null,null),v("Nah, I'll be able to make something unique, you may think it's all been done before but I'm sure I'll stumble upon something unique soon."),a("br",null,null),a("br",null,null),v("You don't have to believe in me, just let me prove you wrong."),a("br",null,null)])),style:{color:"black"}})),mt(()=>({visibility:Nt(()=>we(M.milestones[6].earned.value)),color:"#ffd1fb",title:"Sustenance of the Universe",display:F(()=>a(V,null,[v("Oh, so now I discover Air Particles? I would've thought that was needed sooner, no? How can Flame Particles exist without some air to keep them alive?"),a("br",null,null),a("br",null,null),v("You're saying that there aren't rules here yet? I mean I guess I never actually made those, but who cares? There should be some default rules to keep things making sense, right?"),a("br",null,null),a("br",null,null),v("No? I mean that could result in some wacky worlds, couldn't it? Don't we want some kind of order in the multiverse?"),a("br",null,null),a("br",null,null),v("Okay okay, jeez you don't have to yell, I know I shouldn't be asking these things, I was just saying-"),a("br",null,null),a("br",null,null),v("Ugh fine, I guess I'll just keep building the world like you asked, but could I get some answers later?"),a("br",null,null),a("br",null,null),v("Sweet! Thanks for the free motivation!"),a("br",null,null)])),style:{color:"black"}})),mt(()=>({visibility:Nt(()=>we(M.milestones[11].earned.value)),color:"#733000",title:"A Dense Mind",display:F(()=>a(V,null,[v("Yet another fundamental base for any universe, huh. I was really hoping to find something interesting, something I haven't heard of being in a universe before..."),a("br",null,null),a("br",null,null),v("You may think that, but there are certainly more combinations of particles in a universe than universes in the cosmos, or at least I assume as much."),a("br",null,null),a("br",null,null),v("Oh, so you're telling me you know everything then? No. If I don't know anything than neither do you, so don't claim otherwise."),a("br",null,null),a("br",null,null),v("Ugh whatever, I'm tired of talking at you. Can't you just have me talk with one of your assistants or something? I'm sure you have a few to spare."),a("br",null,null),a("br",null,null),v("Nobody cares about that tired old protocol, dammit, I'm bored and I could use someone else to talk to. Eh regardless, I guess I'll just keep going for now, but please just get me someone, thanks."),a("br",null,null)])),style:{color:"black"}})),mt(()=>({visibility:Nt(()=>we(M.milestones[15].earned.value)),color:"#03fca9",title:"Brought Together",display:F(()=>a(V,null,[v("Wait you're still here? Fine I guess I'll suffer through you for the time being if you're really going to be like that."),a("br",null,null),a("br",null,null),v("Whatever. So it seems I can combine particles into molecules now? That's pretty sick, but I'd say it's something that exists in other universes too, right?"),a("br",null,null),a("br",null,null),v("Yep, thought so. I'm glad I didn't get my hopes up for this one. That being said, this is pretty great, there are countless combinations to make now!"),a("br",null,null),a("br",null,null),v(`Oh? So you're telling me that I don't have enough combinators to make "countless combinations"? Damn you're always making things less interesting...`),a("br",null,null),a("br",null,null),v("Whatever. Enjoy your quiet time while I do all the work. I know you're technically my boss but cmon, you could help a little. Anyways, time to make some molecules, I guess."),a("br",null,null)])),style:{color:"black"}})),mt(()=>({visibility:Nt(()=>we(M.milestones[23].earned.value)),color:"#ff9100",title:"Heartfelt Emotion",display:F(()=>a(V,null,[v("Ooh, so I can use these to strengthen molecules?"),a("br",null,null),a("br",null,null),v("Look, I'm tired of your sass, okay? Just let me have a fun time with this, or literally just leave, I couldn't care less."),a("br",null,null),a("br",null,null),v("Wait really? You'll actually leave? Damn okay, I guess I'll be alone in this universe then, just me and the hundred quadrillion particles I create every second..."),a("br",null,null),a("br",null,null),v("Alright, enjoy your vacation or whatever, I'll keep building this universe I guess."),a("br",null,null),a("br",null,null),v("Wait, you'll actually send one of your assistants to keep me company? Wow I'm excited, I'll have someone fun to talk to!"),a("br",null,null),a("br",null,null),v("Good! If you don't like them, I probably will, so please, send them over as soon as possible. Goodbye forever!"),a("br",null,null)])),style:{color:"black"}})),mt(()=>({visibility:Nt(()=>we(M.milestones[32].earned.value)),color:"#ffffff",title:"Correction Major",display:F(()=>a(V,null,[v("Hello! Yes I'm the one making the universe here! Maybe I'm just a novice, but that's what you're here for, right?"),a("br",null,null),a("br",null,null),v("Wait what? You're saying that I'm underqualified for this? How dare you, just because I skipped half of my classes doesn't mean-"),a("br",null,null),a("br",null,null),v("Oh, you meant that I need experience before I can make a universe here? But to get experience I'd need to make a universe, right?"),a("br",null,null),a("br",null,null),v("So I need experience to make a universe, but need to make a universe to have experience. Jeez, I'm no million-year-old genius but that sounds like a paradox to me."),a("br",null,null),a("br",null,null),v("No, you cannot take control of this operation, it's mine! You have no authority here, so leave or I'll throw over a septillion particles at you! That oughta leave a dent!"),a("br",null,null),a("br",null,null),v("Yeah you're right, that's barely anything, but still! You have no right! I'll mind my business, and you mind yours! Or you could actually do your job and help me out here!"),a("br",null,null),a("br",null,null),v("Well, I guess it's time to add something to help people sense the world around them, huh... What shall I do..."),a("br",null,null)])),style:{color:"black"}}))],s=lt(()=>({layerID:e,display:"L",color:l}));return{id:e,name:t,color:l,loreData:n,treeNode:s,display:F(()=>a(V,null,[a("table",null,[a("tbody",null,[n.map(r=>a(V,null,[vt(r),a("div",{style:"margin-top: 0.5em;"},null)]))])])]))}}),Zo=function(e,t){M.milestones[12].earned.value?bo(e,t):Fr(e,t)},ae=je("main",()=>{const e=K(10,"particles",2),t=ot(e),l=fr(e),n=y(()=>{let c=new i(0);return Me.upgradesR1[0].bought.value&&(c=c.plus(Me.upgradeEffects[0].value)),Me.upgradesR2[2].bought.value&&(c=c.plus(Me.upgradeEffects[5].value)),c=c.plus(Le.buyableEffects[0].value),c=c.plus(i.floor(Ae.bubbles.value)),Se.lightningSel[0].value&&(c=c.plus(Se.clickableEffects[0].value)),c=c.plus(Te.baseGainAdded.value),c=c.plus(ie.multiBuyableEffects[0].value),M.milestones[32].earned.value&&(c=c.plus(Re.lightBuyableEffects[1][1].value)),c}),s=y(()=>{let c=i.dOne;return c=c.times(Ve.tornadoEff.value),M.milestones[19].earned.value&&(c=c.plus(i.mul(.05,i.floor(Ae.floods.value)))),c}),r=y(()=>{const c=n.value;let d=i.pow(c,s.value);return Me.upgradesR1[1].bought.value&&(d=d.times(Me.upgradeEffects[1].value)),d=d.times(Le.buyableEffects[1].value),Se.lightningSel[1].value&&(d=d.times(Se.clickableEffects[1].value)),Se.lightningSel[3].value&&(d=d.times(Se.clickableEffects[3].value)),M.milestones[7].earned.value&&(d=d.times(i.pow(Ae.torrentEff.value.plus(1),i.floor(Ae.torrents.value)))),i.gte(ie.multiBuyables[1].value,1)&&M.milestones[15].earned.value&&(d=d.times(ie.multiBuyableEffects[1].value)),i.gte(Te.gridLevel.value,16)&&(d=d.times(Te.particleGainMult.value)),M.milestones[32].earned.value&&(d=d.times(Re.lightBuyableEffects[0][1].value)),d});fe.on("update",c=>{e.value=i.add(e.value,i.times(r.value,c))});const u=vr(e,r),o=qr(()=>({nodes:()=>[[Me.treeNode,Le.treeNode,Ae.treeNode],[Te.treeNode,Se.treeNode,Ve.treeNode,pe.treeNode],[Re.treeNode,_o,$e.treeNode],[ie.treeNode]],leftSideNodes:[M.treeNode,Pn.treeNode],branches:()=>{const c=[];return pe.treeNode.visibility.value==$.Visible&&c.push({startNode:pe.treeNode,endNode:Ae.treeNode}),Ve.treeNode.visibility.value==$.Visible&&c.push({startNode:Ve.treeNode,endNode:Le.treeNode}),Te.treeNode.visibility.value==$.Visible&&c.push({startNode:Te.treeNode,endNode:Me.treeNode}),ie.treeNode.visibility.value==$.Visible&&(c.push({startNode:ie.treeNode,endNode:Te.treeNode}),c.push({startNode:ie.treeNode,endNode:Se.treeNode}),c.push({startNode:ie.treeNode,endNode:Ve.treeNode}),c.push({startNode:ie.treeNode,endNode:pe.treeNode})),Re.treeNode.visibility.value==$.Visible&&c.push({startNode:Re.treeNode,endNode:Se.treeNode,stroke:"#999999"}),$e.treeNode.visibility.value==$.Visible&&c.push({startNode:$e.treeNode,endNode:Ve.treeNode,stroke:"#999999"}),c},onReset(){e.value=[Me.treeNode,Le.treeNode,Ae.treeNode].some(c=>zl(this.resettingNode.value)===zl(c))?0:10,t.value=e.value,l.value=e.value},resetPropagation:Zo}));return{name:"Tree",links:o.links,display:F(()=>a(V,null,[Ne(a("div",null,[v("Game Paused")]),[[Pe,R.devSpeed===0]]),Ne(a("div",null,[v("Dev Speed: "),A(R.devSpeed||0,2),v("x")]),[[Pe,R.devSpeed&&R.devSpeed!==1]]),Ne(a("div",null,[v("Offline Time: "),Nl(R.offlineTime||0)]),[[Pe,R.offlineTime!=null]]),a("div",null,[Ne(a("span",null,[v("You have ")]),[[Pe,i.lt(e.value,"1e1000")]]),a("h2",null,[ge(e.value)]),Ne(a("span",null,[v(" particles")]),[[Pe,i.lt(e.value,"1e1e6")]])]),Ne(a("div",null,[v("[Base Gain: "),A(n.value,2),v("/s"),Ne(a("span",null,[v("\xA0\u2192 "),A(i.pow(n.value,s.value),2),v("/s")]),[[Pe,i.gt(s.value,1)]]),v("]")]),[[Pe,i.gt(n.value,0)&&i.neq(n.value,r.value)]]),Ne(a("div",null,[v("("),u.value,v(")")]),[[Pe,i.gt(r.value,0)]]),a(cr,null,null),G(o)])),particles:e,particleGain:r,baseGain:n,baseGainExp:s,best:t,total:l,oomps:u,tree:o}}),Ko=e=>[ae,Me,Le,Ae,M,Pn,Se,pe,Ve,Te,ie,Re,$e],In=y(()=>i.gte(ae.particleGain.value,i.dInf));function Jo(e,t){var n,s,r,u,o,c;const l=t.layers;wo("1.1",e)&&(((n=l==null?void 0:l.li)==null?void 0:n.lightningSel)!==void 0&&typeof l.li.lightningSel==typeof Number&&(l.li.lightningSel={0:l.li.lightningSel==0,1:l.li.lightningSel==1,2:l.li.lightningSel==2,3:l.li.lightningSel==3}),((s=l==null?void 0:l.f)==null?void 0:s.upgradesR1)!==void 0&&(l.f.upgradesR1=Qt(l.f.upgradesR1)),((r=l==null?void 0:l.f)==null?void 0:r.upgradesR2)!==void 0&&(l.f.upgradesR2=Qt(l.f.upgradesR2)),((u=l==null?void 0:l.l)==null?void 0:u.buyables)!==void 0&&(l.l.buyables=Qt(l.l.buyables)),((o=l==null?void 0:l.e)==null?void 0:o.grid)!==void 0&&(l.e.grid=Qt(l.e.grid)),((c=l==null?void 0:l.adv)==null?void 0:c.milestones)!==void 0&&(l.adv.milestones=Qt(l.adv.milestones))),t.layers=l}function Xo(e,t){t.modVersion=se.versionNumber}var $n=Object.freeze(Object.defineProperty({__proto__:null,main:ae,getInitialLayers:Ko,hasWon:In,fixOldSaveEarly:Jo,fixOldSave:Xo},Symbol.toStringTag,{value:"Module"}));const ul=e=>(yt("data-v-4a50ce42"),e=e(),bt(),e),Qo={class:"game-over-modal-header"},eu=["src","alt"],tu={class:"game-over-modal-title"},lu=ul(()=>g("h2",null,"Congratulations!",-1)),nu={key:0},iu=ul(()=>g("br",null,null,-1)),su=ul(()=>g("div",null," Please check the Discord to discuss the game or to check for new content updates! ",-1)),au=ul(()=>g("br",null,null,-1)),ru=["href"],ou=ul(()=>g("span",{class:"material-icons game-over-modal-discord"},"discord",-1)),uu=H({setup(e){const{title:t,logo:l,discordName:n,discordLink:s,versionNumber:r,versionTitle:u}=se,o=y(()=>Nl(R.timePlayed)),c=y(()=>In.value&&!R.keepGoing),d=Pt(R,"autosave");function w(){R.keepGoing=!0}function b(){qt(Ht())}return(m,h)=>(_(),x(Ft,{"model-value":f(c)},{header:z(()=>[g("div",Qo,[f(l)?(_(),D("img",{key:0,class:"game-over-modal-logo",src:f(l),alt:f(t)},null,8,eu)):L("",!0),g("div",tu,[lu,g("h4",null,"You've beaten "+ne(f(t))+" v"+ne(f(r))+": "+ne(f(u)),1)])])]),body:z(({shown:p})=>[p?(_(),D("div",nu,[g("div",null,"It took you "+ne(f(o))+" to beat the game.",1),iu,su,au,g("div",null,[g("a",{href:f(s),class:"game-over-modal-discord-link"},[ou,v(" "+ne(f(n)),1)],8,ru)]),a(pt,{title:"Autosave",modelValue:f(d),"onUpdate:modelValue":h[0]||(h[0]=S=>De(d)?d.value=S:null)},null,8,["modelValue"])])):L("",!0)]),footer:z(()=>[g("div",{class:"game-over-footer"},[g("button",{onClick:w,class:"button"},"Keep Going"),g("button",{onClick:b,class:"button danger"},"Play Again")])]),_:1},8,["model-value"]))}});var cu=te(uu,[["__scopeId","data-v-4a50ce42"]]);const Cl=e=>(yt("data-v-3de07c06"),e=e(),bt(),e),du=Cl(()=>g("div",{class:"nan-modal-header"},[g("h2",null,"NaN value detected!")],-1)),fu={key:0},mu=Cl(()=>g("br",null,null,-1)),pu=["href"],vu=Cl(()=>g("span",{class:"material-icons nan-modal-discord"},"discord",-1)),gu=Cl(()=>g("br",null,null,-1)),hu={class:"nan-footer"},yu=H({setup(e){const{discordName:t,discordLink:l}=se,n=Pt(R,"autosave"),s=Pt(me,"hasNaN"),r=U(null),u=y(()=>{var h;return(h=me.NaNPath)==null?void 0:h.join(".")}),o=y(()=>{var h;return(h=me.NaNPath)==null?void 0:h.slice(-1)[0]}),c=y(()=>me.NaNReceiver&&o.value?me.NaNReceiver[o.value]:null),d=y({get(){return R.devSpeed===0},set(h){R.devSpeed=h?null:0}});function w(){me.NaNReceiver&&o.value&&(me.NaNReceiver[o.value]=new i(0),me.hasNaN=!1)}function b(){me.NaNReceiver&&o.value&&(me.NaNReceiver[o.value]=new i(1),me.hasNaN=!1)}function m(){me.NaNReceiver&&o.value&&(me.NaNReceiver[o.value]=new i(NaN),me.hasNaN=!1)}return(h,p)=>(_(),D(V,null,[a(Ft,ht({modelValue:f(s),"onUpdate:modelValue":p[4]||(p[4]=S=>De(s)?s.value=S:null)},h.$attrs),{header:z(()=>[du]),body:z(()=>[g("div",null,[v(' Attempted to assign "'+ne(f(u))+'" to NaN',1),f(c)?(_(),D("span",fu,ne(" ")+"(previously "+ne(f(A)(f(c)))+")",1)):L("",!0),v(". Auto-saving has been "+ne(f(n)?"enabled":"disabled")+". Check the console for more details, and consider sharing it with the developers on discord. ",1)]),mu,g("div",null,[g("a",{href:f(l),class:"nan-modal-discord-link"},[vu,v(" "+ne(f(t)),1)],8,pu)]),gu,a(pt,{title:"Autosave",modelValue:f(n),"onUpdate:modelValue":p[0]||(p[0]=S=>De(n)?n.value=S:null)},null,8,["modelValue"]),f(se).enablePausing?(_(),x(pt,{key:0,title:"Pause game",modelValue:f(d),"onUpdate:modelValue":p[1]||(p[1]=S=>De(d)?d.value=S:null)},null,8,["modelValue"])):L("",!0)]),footer:z(()=>[g("div",hu,[g("button",{onClick:p[2]||(p[2]=S=>{var C;return(C=r.value)==null?void 0:C.open()}),class:"button"},"Open Saves Manager"),g("button",{onClick:w,class:"button"},"Set to 0"),g("button",{onClick:b,class:"button"},"Set to 1"),f(c)&&f(i).neq(f(c),0)&&f(i).neq(f(c),1)?(_(),D("button",{key:0,onClick:p[3]||(p[3]=S=>s.value=!1),class:"button"}," Set to previous ")):L("",!0),g("button",{onClick:m,class:"button danger"},"Ignore")])]),_:1},16,["modelValue"]),a(Nn,{ref_key:"savesManager",ref:r},null,512)],64))}});var bu=te(yu,[["__scopeId","data-v-3de07c06"]]);const wu={key:0,class:"tpsDisplay"},Nu={key:0,class:"low"},_u=H({setup(e){const t=y(()=>i.div(me.lastTenTicks.length,me.lastTenTicks.reduce((r,u)=>r+u,0))),l=U([]);Qe(()=>{l.value.push(Math.round(t.value.toNumber())),l.value.length>10&&(l.value=l.value.slice(1))});const n=y(()=>l.value.reduce((r,u)=>i.max(r,u),0)),s=y(()=>i.sub(t.value,n.value).gt(1));return(r,u)=>f(t).isNan()?L("",!0):(_(),D("div",wu,[v(" TPS: "+ne(f(ge)(f(t)))+" ",1),a(Bl,{name:"fade"},{default:z(()=>[f(s)?(_(),D("span",Nu,ne(f(ge)(f(n))),1)):L("",!0)]),_:1})]))}});var ku=te(_u,[["__scopeId","data-v-46a3ed5b"]]);var Cu=H({setup(e){const t=se.useHeader,l=y(()=>Zt[ce.theme].variables),n=Pt(ce,"showTPS"),s=y(()=>j(F(()=>a(V,null,[ji.map(G)]))));return(r,u)=>(_(),D(V,null,[g("div",{id:"modal-root",style:re(f(l))},null,4),g("div",{class:he(["app",{useHeader:f(t)}]),style:re(f(l))},[f(t)?(_(),x(_n,{key:0})):L("",!0),a(ur),f(f(n))?(_(),x(ku,{key:1})):L("",!0),a(cu),a(bu),(_(),x(de(f(s))))],6)],64))}});var Su=te(Cu,[["__scopeId","data-v-9417972e"]]);function Mu(e={}){const{immediate:t=!1,onNeedRefresh:l,onOfflineReady:n,onRegistered:s,onRegisterError:r}=e;let u,o;const c=async(d=!0)=>{d&&(u==null||u.addEventListener("controlling",w=>{w.isUpdate&&window.location.reload()})),o&&o.waiting&&await jn(o.waiting,{type:"SKIP_WAITING"})};if("serviceWorker"in navigator){u=new xn("./sw.js",{scope:"./",type:"classic"}),u.addEventListener("activated",d=>{d.isUpdate||n==null||n()});{const d=()=>{l==null||l()};u.addEventListener("waiting",d),u.addEventListener("externalwaiting",d)}u.register({immediate:t}).then(d=>{o=d,s==null||s(d)}).catch(d=>{r==null||r(d)})}return c}function Pu(e={}){const{immediate:t=!0,onNeedRefresh:l,onOfflineReady:n,onRegistered:s,onRegisterError:r}=e,u=U(!1),o=U(!1);return{updateServiceWorker:Mu({immediate:t,onNeedRefresh(){u.value=!0,l==null||l()},onOfflineReady(){o.value=!0,n==null||n()},onRegistered:s,onRegisterError:r}),offlineReady:o,needRefresh:u}}document.title=se.title;window.projInfo=se;if(se.id==="")throw"Project ID is empty! Please select a unique ID for this project in /src/data/projInfo.json";requestAnimationFrame(async()=>{console.log(`%cMade in Profectus%c
Learn more at www.moddingtree.com`,"font-weight: bold; font-size: 24px; color: #A3BE8C; background: #2E3440; padding: 4px 8px; border-radius: 8px;","padding: 4px;"),await Vi();const{globalBus:e,startGameLoop:t}=await vl(()=>Promise.resolve().then(function(){return Li}),void 0),l=window.vue=An(Su);e.emit("setupVue",l),l.mount("#app"),gt(()=>{const n=tn(),{updateServiceWorker:s}=Pu({onNeedRefresh(){n.info("New content available, click or reload to update.",{timeout:!1,closeOnClick:!1,draggable:!1,icon:{iconClass:"material-icons",iconChildren:"refresh",iconTag:"i"},rtl:!1,onClick(){s()}})},onOfflineReady(){n.info("App ready to work offline")},onRegisterError:console.warn,onRegistered(r){r&&setInterval(r.update,60*60*1e3)}})}),t()});
