import"./vue.03290593.js";import{a2 as b,y as El,u as rl,H as f,b3 as nt,ae as H,x as U,aG as en,A as tt,b4 as lt,ac as a,U as V,aC as wl,av as ht,o as _,a4 as q,r as Mt,a5 as g,aJ as cl,F as be,c as x,w as z,b9 as Ne,bs as Pe,au as yt,bu as ll,T as Dl,Y as Dn,ab as m,l as Bn,n as Be,bv as zl,aN as De,a3 as L,O as ne,K as ye,aP as fe,M as oe,aK as bt,aI as wt,D as Pt,bn as qn,br as An,aM as nl,ap as pl,L as Fn,bw as et,C as Yl,be as On}from"./@vue.f16def16.js";import{i as Rn}from"./is-plain-object.906d88e8.js";import{c as tn}from"./nanoevents.1080beb7.js";import{L as Ct}from"./lz-string.731cedc5.js";import{_ as te,C as Vn}from"./@ivanv.89b9fb6e.js";import{Y as Ln}from"./vue-next-select.b0c1cf10.js";import{D as Gn}from"./vuedraggable.5a5850e9.js";import{p as Un}from"./vue-textarea-autosize.35804eaf.js";import{s as xn,u as ln}from"./vue-toastification.ce13befc.js";import{v as jn,n as Hn}from"./workbox-window.8d14e8b7.js";import"./sortablejs.979fc46a.js";const Wn=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const u of r.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&n(u)}).observe(document,{childList:!0,subtree:!0});function l(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerpolicy&&(r.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?r.credentials="include":s.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(s){if(s.ep)return;s.ep=!0;const r=l(s);fetch(s.href,r)}};Wn();const zn="modulepreload",Zl={},Yn="./",vl=function(t,l){return!l||l.length===0?t():Promise.all(l.map(n=>{if(n=`${Yn}${n}`,n in Zl)return;Zl[n]=!0;const s=n.endsWith(".css"),r=s?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${n}"]${r}`))return;const u=document.createElement("link");if(u.rel=s?"stylesheet":zn,s||(u.as="script",u.crossOrigin=""),u.href=n,document.head.appendChild(u),s)return new Promise((o,c)=>{u.addEventListener("load",o),u.addEventListener("error",()=>c(new Error(`Unable to preload CSS for ${n}`)))})})).then(()=>t())},Zn="Primordia",Kn="primordius",Jn="Jacorb90",Xn="Jacorb's Games",Qn="https://discord.gg/wwQfgPa",ei="1.4",ti="Void Decay",li=!0,ni=!1,ii=2,si=!0,ai=null,ri="",oi=["main"],ui=3600,ci=1,di=!0,fi="base64";var se={title:Zn,id:Kn,author:Jn,discordName:Xn,discordLink:Qn,versionNumber:ei,versionTitle:ti,allowGoBack:li,defaultShowSmall:ni,defaultDecimalsShown:ii,useHeader:si,banner:ai,logo:ri,initialTabs:oi,maxTickLength:ui,offlineLimit:ci,enablePausing:di,exportEncoding:fi};const Sl=17,mi=9e15,pi=Math.log10(9e15),vi=1/9e15,gi=308,hi=-324,Kl=5,yi=function(){const e=[];for(let l=hi+1;l<=gi;l++)e.push(Number("1e"+l));const t=323;return function(l){return e[l+t]}}(),Et=[2,Math.E,3,4,5,6,7,8,9,10],bi=[[1,1.0891168053867777,1.1789745164521264,1.2701428397304229,1.3632066654400328,1.4587804913784246,1.557523817412741,1.660158301473385,1.767487542936873,1.8804205225512542,2],[1,1.1121114330934,1.23103892493161,1.35838369631113,1.49605193039935,1.64635423375119,1.81213853570186,1.99697132461829,2.20538955455724,2.44325744833852,Math.E],[1,1.1187738849693603,1.2464963939368214,1.38527004705667,1.5376664685821402,1.7068895236551784,1.897001227148399,2.1132403089001035,2.362480153784171,2.6539010333870774,3],[1,1.1367350847096405,1.2889510672956703,1.4606478703324786,1.6570295196661111,1.8850062585672889,2.1539465047453485,2.476829779693097,2.872061932789197,3.3664204535587183,4],[1,1.1494592900767588,1.319708228183931,1.5166291280087583,1.748171114438024,2.0253263297298045,2.3636668498288547,2.7858359149579424,3.3257226212448145,4.035730287722532,5],[1,1.159225940787673,1.343712473580932,1.5611293155111927,1.8221199554561318,2.14183924486326,2.542468319282638,3.0574682501653316,3.7390572020926873,4.6719550537360774,6],[1,1.1670905356972596,1.3632807444991446,1.5979222279405536,1.8842640123816674,2.2416069644878687,2.69893426559423,3.3012632110403577,4.121250340630164,5.281493033448316,7],[1,1.1736630594087796,1.379783782386201,1.6292821855668218,1.9378971836180754,2.3289975651071977,2.8384347394720835,3.5232708454565906,4.478242031114584,5.868592169644505,8],[1,1.1793017514670474,1.394054150657457,1.65664127441059,1.985170999970283,2.4069682290577457,2.9647310119960752,3.7278665320924946,4.814462547283592,6.436522247411611,9],[1,1.18422737399915,1.4066113788546144,1.680911177655277,2.027492094355525,2.4775152854601967,3.080455730250329,3.918234505962507,5.1332705696484595,6.9878696918072905,10]],wi=[[-1,-.9194161097107025,-.8335625019330468,-.7425599821143978,-.6466611521029437,-.5462617907227869,-.4419033816638769,-.3342645487554494,-.224140440909962,-.11241087890006762,0],[-1,-.90603157029014,-.80786507256596,-.7064666939634,-.60294836853664,-.49849837513117,-.39430303318768,-.29147201034755,-.19097820800866,-.09361896280296,0],[-1,-.9021579584316141,-.8005762598234203,-.6964780623319391,-.5911906810998454,-.486050182576545,-.3823089430815083,-.28106046722897615,-.1831906535795894,-.08935809204418144,0],[-1,-.8917227442365535,-.781258746326964,-.6705130326902455,-.5612813129406509,-.4551067709033134,-.35319256652135966,-.2563741554088552,-.1651412821106526,-.0796919581982668,0],[-1,-.8843387974366064,-.7678744063886243,-.6529563724510552,-.5415870994657841,-.4352842206588936,-.33504449124791424,-.24138853420685147,-.15445285440944467,-.07409659641336663,0],[-1,-.8786709358426346,-.7577735191184886,-.6399546189952064,-.527284921869926,-.4211627631006314,-.3223479611761232,-.23107655627789858,-.1472057700818259,-.07035171210706326,0],[-1,-.8740862815291583,-.7497032990976209,-.6297119746181752,-.5161838335958787,-.41036238255751956,-.31277212146489963,-.2233976621705518,-.1418697367979619,-.06762117662323441,0],[-1,-.8702632331800649,-.7430366914122081,-.6213373075161548,-.5072025698095242,-.40171437727184167,-.30517930701410456,-.21736343968190863,-.137710238299109,-.06550774483471955,0],[-1,-.8670016295947213,-.7373984232432306,-.6143173985094293,-.49973884395492807,-.394584953527678,-.2989649949848695,-.21245647317021688,-.13434688362382652,-.0638072667348083,0],[-1,-.8641642839543857,-.732534623168535,-.6083127477059322,-.4934049257184696,-.3885773075899922,-.29376029055315767,-.2083678561173622,-.13155653399373268,-.062401588652553186,0]],N=function(t){return i.fromValue_noAlloc(t)},W=function(e,t,l){return i.fromComponents(e,t,l)},J=function(t,l,n){return i.fromComponents_noNormalize(t,l,n)},_t=function(t,l){const n=l+1,s=Math.ceil(Math.log10(Math.abs(t))),r=Math.round(t*Math.pow(10,n-s))*Math.pow(10,s-n);return parseFloat(r.toFixed(Math.max(n-s,0)))},Ml=function(e){return Math.sign(e)*Math.log10(Math.abs(e))},Ni=function(e){if(!isFinite(e))return e;if(e<-50)return e===Math.trunc(e)?Number.NEGATIVE_INFINITY:0;let t=1;for(;e<10;)t=t*e,++e;e-=1;let l=.9189385332046727;l=l+(e+.5)*Math.log(e),l=l-e;const n=e*e;let s=e;return l=l+1/(12*s),s=s*n,l=l+1/(360*s),s=s*n,l=l+1/(1260*s),s=s*n,l=l+1/(1680*s),s=s*n,l=l+1/(1188*s),s=s*n,l=l+691/(360360*s),s=s*n,l=l+7/(1092*s),s=s*n,l=l+3617/(122400*s),Math.exp(l)/t},nn=.5671432904097838,Jl=function(e,t=1e-10){let l,n;if(!Number.isFinite(e)||e===0)return e;if(e===1)return nn;e<10?l=0:l=Math.log(e)-Math.log(Math.log(e));for(let s=0;s<100;++s){if(n=(e*Math.exp(-l)+l*l)/(l+1),Math.abs(n-l)<t*Math.abs(n))return n;l=n}throw Error(`Iteration failed to converge: ${e.toString()}`)};function Xl(e,t=1e-10){let l,n,s,r;if(!Number.isFinite(e.mag)||e===i.dZero)return e;if(e===i.dOne)return N(nn);i.abs(e),l=i.ln(e);for(let u=0;u<100;++u){if(n=i.exp(-l),s=l.sub(e.mul(n)),r=l.sub(s.div(l.add(1).sub(l.add(2).mul(s).div(i.mul(2,l).add(2))))),i.abs(r.sub(l)).lt(i.abs(r).mul(t)))return r;l=r}throw Error(`Iteration failed to converge: ${e.toString()}`)}const T=class{constructor(e){this.sign=Number.NaN,this.mag=Number.NaN,this.layer=Number.NaN,e instanceof T||e!=null&&typeof e=="object"&&"sign"in e&&"mag"in e&&"layer"in e?this.fromDecimal(e):typeof e=="number"?this.fromNumber(e):typeof e=="string"?this.fromString(e):(this.sign=0,this.layer=0,this.mag=0)}get m(){if(this.sign===0)return 0;if(this.layer===0){const e=Math.floor(Math.log10(this.mag));let t;return this.mag===5e-324?t=5:t=this.mag/yi(e),this.sign*t}else if(this.layer===1){const e=this.mag-Math.floor(this.mag);return this.sign*Math.pow(10,e)}else return this.sign}set m(e){this.layer<=2?this.fromMantissaExponent(e,this.e):(this.sign=Math.sign(e),this.sign===0&&(this.layer,this.exponent))}get e(){return this.sign===0?0:this.layer===0?Math.floor(Math.log10(this.mag)):this.layer===1?Math.floor(this.mag):this.layer===2?Math.floor(Math.sign(this.mag)*Math.pow(10,Math.abs(this.mag))):this.mag*Number.POSITIVE_INFINITY}set e(e){this.fromMantissaExponent(this.m,e)}get s(){return this.sign}set s(e){e===0?(this.sign=0,this.layer=0,this.mag=0):this.sign=e}get mantissa(){return this.m}set mantissa(e){this.m=e}get exponent(){return this.e}set exponent(e){this.e=e}static fromComponents(e,t,l){return new T().fromComponents(e,t,l)}static fromComponents_noNormalize(e,t,l){return new T().fromComponents_noNormalize(e,t,l)}static fromMantissaExponent(e,t){return new T().fromMantissaExponent(e,t)}static fromMantissaExponent_noNormalize(e,t){return new T().fromMantissaExponent_noNormalize(e,t)}static fromDecimal(e){return new T().fromDecimal(e)}static fromNumber(e){return new T().fromNumber(e)}static fromString(e){return new T().fromString(e)}static fromValue(e){return new T().fromValue(e)}static fromValue_noAlloc(e){return e instanceof T?e:new T(e)}static abs(e){return N(e).abs()}static neg(e){return N(e).neg()}static negate(e){return N(e).neg()}static negated(e){return N(e).neg()}static sign(e){return N(e).sign}static sgn(e){return N(e).sign}static round(e){return N(e).round()}static floor(e){return N(e).floor()}static ceil(e){return N(e).ceil()}static trunc(e){return N(e).trunc()}static add(e,t){return N(e).add(t)}static plus(e,t){return N(e).add(t)}static sub(e,t){return N(e).sub(t)}static subtract(e,t){return N(e).sub(t)}static minus(e,t){return N(e).sub(t)}static mul(e,t){return N(e).mul(t)}static multiply(e,t){return N(e).mul(t)}static times(e,t){return N(e).mul(t)}static div(e,t){return N(e).div(t)}static divide(e,t){return N(e).div(t)}static recip(e){return N(e).recip()}static reciprocal(e){return N(e).recip()}static reciprocate(e){return N(e).reciprocate()}static cmp(e,t){return N(e).cmp(t)}static cmpabs(e,t){return N(e).cmpabs(t)}static compare(e,t){return N(e).cmp(t)}static isNaN(e){return e=N(e),isNaN(e.sign)||isNaN(e.layer)||isNaN(e.mag)}static isFinite(e){return e=N(e),isFinite(e.sign)&&isFinite(e.layer)&&isFinite(e.mag)}static eq(e,t){return N(e).eq(t)}static equals(e,t){return N(e).eq(t)}static neq(e,t){return N(e).neq(t)}static notEquals(e,t){return N(e).notEquals(t)}static lt(e,t){return N(e).lt(t)}static lte(e,t){return N(e).lte(t)}static gt(e,t){return N(e).gt(t)}static gte(e,t){return N(e).gte(t)}static max(e,t){return N(e).max(t)}static min(e,t){return N(e).min(t)}static minabs(e,t){return N(e).minabs(t)}static maxabs(e,t){return N(e).maxabs(t)}static clamp(e,t,l){return N(e).clamp(t,l)}static clampMin(e,t){return N(e).clampMin(t)}static clampMax(e,t){return N(e).clampMax(t)}static cmp_tolerance(e,t,l){return N(e).cmp_tolerance(t,l)}static compare_tolerance(e,t,l){return N(e).cmp_tolerance(t,l)}static eq_tolerance(e,t,l){return N(e).eq_tolerance(t,l)}static equals_tolerance(e,t,l){return N(e).eq_tolerance(t,l)}static neq_tolerance(e,t,l){return N(e).neq_tolerance(t,l)}static notEquals_tolerance(e,t,l){return N(e).notEquals_tolerance(t,l)}static lt_tolerance(e,t,l){return N(e).lt_tolerance(t,l)}static lte_tolerance(e,t,l){return N(e).lte_tolerance(t,l)}static gt_tolerance(e,t,l){return N(e).gt_tolerance(t,l)}static gte_tolerance(e,t,l){return N(e).gte_tolerance(t,l)}static pLog10(e){return N(e).pLog10()}static absLog10(e){return N(e).absLog10()}static log10(e){return N(e).log10()}static log(e,t){return N(e).log(t)}static log2(e){return N(e).log2()}static ln(e){return N(e).ln()}static logarithm(e,t){return N(e).logarithm(t)}static pow(e,t){return N(e).pow(t)}static pow10(e){return N(e).pow10()}static root(e,t){return N(e).root(t)}static factorial(e,t){return N(e).factorial()}static gamma(e,t){return N(e).gamma()}static lngamma(e,t){return N(e).lngamma()}static exp(e){return N(e).exp()}static sqr(e){return N(e).sqr()}static sqrt(e){return N(e).sqrt()}static cube(e){return N(e).cube()}static cbrt(e){return N(e).cbrt()}static tetrate(e,t=2,l=J(1,0,1)){return N(e).tetrate(t,l)}static iteratedexp(e,t=2,l=J(1,0,1)){return N(e).iteratedexp(t,l)}static iteratedlog(e,t=10,l=1){return N(e).iteratedlog(t,l)}static layeradd10(e,t){return N(e).layeradd10(t)}static layeradd(e,t,l=10){return N(e).layeradd(t,l)}static slog(e,t=10){return N(e).slog(t)}static lambertw(e){return N(e).lambertw()}static ssqrt(e){return N(e).ssqrt()}static pentate(e,t=2,l=J(1,0,1)){return N(e).pentate(t,l)}static affordGeometricSeries(e,t,l,n){return this.affordGeometricSeries_core(N(e),N(t),N(l),n)}static sumGeometricSeries(e,t,l,n){return this.sumGeometricSeries_core(e,N(t),N(l),n)}static affordArithmeticSeries(e,t,l,n){return this.affordArithmeticSeries_core(N(e),N(t),N(l),N(n))}static sumArithmeticSeries(e,t,l,n){return this.sumArithmeticSeries_core(N(e),N(t),N(l),N(n))}static efficiencyOfPurchase(e,t,l){return this.efficiencyOfPurchase_core(N(e),N(t),N(l))}static randomDecimalForTesting(e){if(Math.random()*20<1)return J(0,0,0);const t=Math.random()>.5?1:-1;if(Math.random()*20<1)return J(t,0,1);const l=Math.floor(Math.random()*(e+1));let n=l===0?Math.random()*616-308:Math.random()*16;Math.random()>.9&&(n=Math.trunc(n));let s=Math.pow(10,n);return Math.random()>.9&&(s=Math.trunc(s)),W(t,l,s)}static affordGeometricSeries_core(e,t,l,n){const s=t.mul(l.pow(n));return T.floor(e.div(s).mul(l.sub(1)).add(1).log10().div(l.log10()))}static sumGeometricSeries_core(e,t,l,n){return t.mul(l.pow(n)).mul(T.sub(1,l.pow(e))).div(T.sub(1,l))}static affordArithmeticSeries_core(e,t,l,n){const r=t.add(n.mul(l)).sub(l.div(2)),u=r.pow(2);return r.neg().add(u.add(l.mul(e).mul(2)).sqrt()).div(l).floor()}static sumArithmeticSeries_core(e,t,l,n){const s=t.add(n.mul(l));return e.div(2).mul(s.mul(2).plus(e.sub(1).mul(l)))}static efficiencyOfPurchase_core(e,t,l){return e.div(t).add(e.div(l))}normalize(){if(this.sign===0||this.mag===0&&this.layer===0)return this.sign=0,this.mag=0,this.layer=0,this;if(this.layer===0&&this.mag<0&&(this.mag=-this.mag,this.sign=-this.sign),this.layer===0&&this.mag<vi)return this.layer+=1,this.mag=Math.log10(this.mag),this;let e=Math.abs(this.mag),t=Math.sign(this.mag);if(e>=mi)return this.layer+=1,this.mag=t*Math.log10(e),this;for(;e<pi&&this.layer>0;)this.layer-=1,this.layer===0?this.mag=Math.pow(10,this.mag):(this.mag=t*Math.pow(10,e),e=Math.abs(this.mag),t=Math.sign(this.mag));return this.layer===0&&(this.mag<0?(this.mag=-this.mag,this.sign=-this.sign):this.mag===0&&(this.sign=0)),this}fromComponents(e,t,l){return this.sign=e,this.layer=t,this.mag=l,this.normalize(),this}fromComponents_noNormalize(e,t,l){return this.sign=e,this.layer=t,this.mag=l,this}fromMantissaExponent(e,t){return this.layer=1,this.sign=Math.sign(e),e=Math.abs(e),this.mag=t+Math.log10(e),this.normalize(),this}fromMantissaExponent_noNormalize(e,t){return this.fromMantissaExponent(e,t),this}fromDecimal(e){return this.sign=e.sign,this.layer=e.layer,this.mag=e.mag,this}fromNumber(e){return this.mag=Math.abs(e),this.sign=Math.sign(e),this.layer=0,this.normalize(),this}fromString(e){e=e.replace(",","");const t=e.split("^^^");if(t.length===2){const p=parseFloat(t[0]),y=parseFloat(t[1]),v=t[1].split(";");let M=1;if(v.length===2&&(M=parseFloat(v[1]),isFinite(M)||(M=1)),isFinite(p)&&isFinite(y)){const C=T.pentate(p,y,M);return this.sign=C.sign,this.layer=C.layer,this.mag=C.mag,this}}const l=e.split("^^");if(l.length===2){const p=parseFloat(l[0]),y=parseFloat(l[1]),v=l[1].split(";");let M=1;if(v.length===2&&(M=parseFloat(v[1]),isFinite(M)||(M=1)),isFinite(p)&&isFinite(y)){const C=T.tetrate(p,y,M);return this.sign=C.sign,this.layer=C.layer,this.mag=C.mag,this}}const n=e.split("^");if(n.length===2){const p=parseFloat(n[0]),y=parseFloat(n[1]);if(isFinite(p)&&isFinite(y)){const v=T.pow(p,y);return this.sign=v.sign,this.layer=v.layer,this.mag=v.mag,this}}e=e.trim().toLowerCase();let s,r,u=e.split("pt");if(u.length===2){s=10,r=parseFloat(u[0]),u[1]=u[1].replace("(",""),u[1]=u[1].replace(")","");let p=parseFloat(u[1]);if(isFinite(p)||(p=1),isFinite(s)&&isFinite(r)){const y=T.tetrate(s,r,p);return this.sign=y.sign,this.layer=y.layer,this.mag=y.mag,this}}if(u=e.split("p"),u.length===2){s=10,r=parseFloat(u[0]),u[1]=u[1].replace("(",""),u[1]=u[1].replace(")","");let p=parseFloat(u[1]);if(isFinite(p)||(p=1),isFinite(s)&&isFinite(r)){const y=T.tetrate(s,r,p);return this.sign=y.sign,this.layer=y.layer,this.mag=y.mag,this}}const o=e.split("e"),c=o.length-1;if(c===0){const p=parseFloat(e);if(isFinite(p))return this.fromNumber(p)}else if(c===1){const p=parseFloat(e);if(isFinite(p)&&p!==0)return this.fromNumber(p)}const d=e.split("e^");if(d.length===2){this.sign=1,d[0].charAt(0)=="-"&&(this.sign=-1);let p="";for(let y=0;y<d[1].length;++y){const v=d[1].charCodeAt(y);if(v>=43&&v<=57||v===101)p+=d[1].charAt(y);else return this.layer=parseFloat(p),this.mag=parseFloat(d[1].substr(y+1)),this.normalize(),this}}if(c<1)return this.sign=0,this.layer=0,this.mag=0,this;const h=parseFloat(o[0]);if(h===0)return this.sign=0,this.layer=0,this.mag=0,this;let w=parseFloat(o[o.length-1]);if(c>=2){const p=parseFloat(o[o.length-2]);isFinite(p)&&(w*=Math.sign(p),w+=Ml(p))}if(!isFinite(h))this.sign=o[0]==="-"?-1:1,this.layer=c,this.mag=w;else if(c===1)this.sign=Math.sign(h),this.layer=1,this.mag=w+Math.log10(Math.abs(h));else if(this.sign=Math.sign(h),this.layer=c,c===2){const p=T.mul(W(1,2,w),N(h));return this.sign=p.sign,this.layer=p.layer,this.mag=p.mag,this}else this.mag=w;return this.normalize(),this}fromValue(e){return e instanceof T||e!=null&&typeof e=="object"&&"sign"in e&&"mag"in e&&"layer"in e?this.fromDecimal(e):typeof e=="number"?this.fromNumber(e):typeof e=="string"?this.fromString(e):(this.sign=0,this.layer=0,this.mag=0,this)}toNumber(){return Number.isFinite(this.layer)?this.layer===0?this.sign*this.mag:this.layer===1?this.sign*Math.pow(10,this.mag):this.mag>0?this.sign>0?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:0:Number.NaN}mantissaWithDecimalPlaces(e){return isNaN(this.m)?Number.NaN:this.m===0?0:_t(this.m,e)}magnitudeWithDecimalPlaces(e){return isNaN(this.mag)?Number.NaN:this.mag===0?0:_t(this.mag,e)}toString(){return isNaN(this.layer)||isNaN(this.sign)||isNaN(this.mag)?"NaN":this.mag===Number.POSITIVE_INFINITY||this.layer===Number.POSITIVE_INFINITY?this.sign===1?"Infinity":"-Infinity":this.layer===0?this.mag<1e21&&this.mag>1e-7||this.mag===0?(this.sign*this.mag).toString():this.m+"e"+this.e:this.layer===1?this.m+"e"+this.e:this.layer<=Kl?(this.sign===-1?"-":"")+"e".repeat(this.layer)+this.mag:(this.sign===-1?"-":"")+"(e^"+this.layer+")"+this.mag}toExponential(e){return this.layer===0?(this.sign*this.mag).toExponential(e):this.toStringWithDecimalPlaces(e)}toFixed(e){return this.layer===0?(this.sign*this.mag).toFixed(e):this.toStringWithDecimalPlaces(e)}toPrecision(e){return this.e<=-7?this.toExponential(e-1):e>this.e?this.toFixed(e-this.exponent-1):this.toExponential(e-1)}valueOf(){return this.toString()}toJSON(){return this.toString()}toStringWithDecimalPlaces(e){return this.layer===0?this.mag<1e21&&this.mag>1e-7||this.mag===0?(this.sign*this.mag).toFixed(e):_t(this.m,e)+"e"+_t(this.e,e):this.layer===1?_t(this.m,e)+"e"+_t(this.e,e):this.layer<=Kl?(this.sign===-1?"-":"")+"e".repeat(this.layer)+_t(this.mag,e):(this.sign===-1?"-":"")+"(e^"+this.layer+")"+_t(this.mag,e)}abs(){return J(this.sign===0?0:1,this.layer,this.mag)}neg(){return J(-this.sign,this.layer,this.mag)}negate(){return this.neg()}negated(){return this.neg()}sgn(){return this.sign}round(){return this.mag<0?T.dZero:this.layer===0?W(this.sign,0,Math.round(this.mag)):this}floor(){return this.mag<0?T.dZero:this.layer===0?W(this.sign,0,Math.floor(this.mag)):this}ceil(){return this.mag<0?T.dZero:this.layer===0?W(this.sign,0,Math.ceil(this.mag)):this}trunc(){return this.mag<0?T.dZero:this.layer===0?W(this.sign,0,Math.trunc(this.mag)):this}add(e){const t=N(e);if(!Number.isFinite(this.layer))return this;if(!Number.isFinite(t.layer)||this.sign===0)return t;if(t.sign===0)return this;if(this.sign===-t.sign&&this.layer===t.layer&&this.mag===t.mag)return J(0,0,0);let l,n;if(this.layer>=2||t.layer>=2)return this.maxabs(t);if(T.cmpabs(this,t)>0?(l=this,n=t):(l=t,n=this),l.layer===0&&n.layer===0)return N(l.sign*l.mag+n.sign*n.mag);const s=l.layer*Math.sign(l.mag),r=n.layer*Math.sign(n.mag);if(s-r>=2)return l;if(s===0&&r===-1){if(Math.abs(n.mag-Math.log10(l.mag))>Sl)return l;{const u=Math.pow(10,Math.log10(l.mag)-n.mag),o=n.sign+l.sign*u;return W(Math.sign(o),1,n.mag+Math.log10(Math.abs(o)))}}if(s===1&&r===0){if(Math.abs(l.mag-Math.log10(n.mag))>Sl)return l;{const u=Math.pow(10,l.mag-Math.log10(n.mag)),o=n.sign+l.sign*u;return W(Math.sign(o),1,Math.log10(n.mag)+Math.log10(Math.abs(o)))}}if(Math.abs(l.mag-n.mag)>Sl)return l;{const u=Math.pow(10,l.mag-n.mag),o=n.sign+l.sign*u;return W(Math.sign(o),1,n.mag+Math.log10(Math.abs(o)))}}plus(e){return this.add(e)}sub(e){return this.add(N(e).neg())}subtract(e){return this.sub(e)}minus(e){return this.sub(e)}mul(e){const t=N(e);if(!Number.isFinite(this.layer))return this;if(!Number.isFinite(t.layer))return t;if(this.sign===0||t.sign===0)return J(0,0,0);if(this.layer===t.layer&&this.mag===-t.mag)return J(this.sign*t.sign,0,1);let l,n;if(this.layer>t.layer||this.layer==t.layer&&Math.abs(this.mag)>Math.abs(t.mag)?(l=this,n=t):(l=t,n=this),l.layer===0&&n.layer===0)return N(l.sign*n.sign*l.mag*n.mag);if(l.layer>=3||l.layer-n.layer>=2)return W(l.sign*n.sign,l.layer,l.mag);if(l.layer===1&&n.layer===0)return W(l.sign*n.sign,1,l.mag+Math.log10(n.mag));if(l.layer===1&&n.layer===1)return W(l.sign*n.sign,1,l.mag+n.mag);if(l.layer===2&&n.layer===1){const s=W(Math.sign(l.mag),l.layer-1,Math.abs(l.mag)).add(W(Math.sign(n.mag),n.layer-1,Math.abs(n.mag)));return W(l.sign*n.sign,s.layer+1,s.sign*s.mag)}if(l.layer===2&&n.layer===2){const s=W(Math.sign(l.mag),l.layer-1,Math.abs(l.mag)).add(W(Math.sign(n.mag),n.layer-1,Math.abs(n.mag)));return W(l.sign*n.sign,s.layer+1,s.sign*s.mag)}throw Error("Bad arguments to mul: "+this+", "+e)}multiply(e){return this.mul(e)}times(e){return this.mul(e)}div(e){const t=N(e);return this.mul(t.recip())}divide(e){return this.div(e)}divideBy(e){return this.div(e)}dividedBy(e){return this.div(e)}recip(){return this.mag===0?T.dNaN:this.layer===0?W(this.sign,0,1/this.mag):W(this.sign,this.layer,-this.mag)}reciprocal(){return this.recip()}reciprocate(){return this.recip()}cmp(e){const t=N(e);return this.sign>t.sign?1:this.sign<t.sign?-1:this.sign*this.cmpabs(e)}cmpabs(e){const t=N(e),l=this.mag>0?this.layer:-this.layer,n=t.mag>0?t.layer:-t.layer;return l>n?1:l<n?-1:this.mag>t.mag?1:this.mag<t.mag?-1:0}compare(e){return this.cmp(e)}isNan(){return isNaN(this.sign)||isNaN(this.layer)||isNaN(this.mag)}isFinite(){return isFinite(this.sign)&&isFinite(this.layer)&&isFinite(this.mag)}eq(e){const t=N(e);return this.sign===t.sign&&this.layer===t.layer&&this.mag===t.mag}equals(e){return this.eq(e)}neq(e){return!this.eq(e)}notEquals(e){return this.neq(e)}lt(e){return this.cmp(e)===-1}lte(e){return!this.gt(e)}gt(e){return this.cmp(e)===1}gte(e){return!this.lt(e)}max(e){const t=N(e);return this.lt(t)?t:this}min(e){const t=N(e);return this.gt(t)?t:this}maxabs(e){const t=N(e);return this.cmpabs(t)<0?t:this}minabs(e){const t=N(e);return this.cmpabs(t)>0?t:this}clamp(e,t){return this.max(e).min(t)}clampMin(e){return this.max(e)}clampMax(e){return this.min(e)}cmp_tolerance(e,t){const l=N(e);return this.eq_tolerance(l,t)?0:this.cmp(l)}compare_tolerance(e,t){return this.cmp_tolerance(e,t)}eq_tolerance(e,t){const l=N(e);if(t==null&&(t=1e-7),this.sign!==l.sign||Math.abs(this.layer-l.layer)>1)return!1;let n=this.mag,s=l.mag;return this.layer>l.layer&&(s=Ml(s)),this.layer<l.layer&&(n=Ml(n)),Math.abs(n-s)<=t*Math.max(Math.abs(n),Math.abs(s))}equals_tolerance(e,t){return this.eq_tolerance(e,t)}neq_tolerance(e,t){return!this.eq_tolerance(e,t)}notEquals_tolerance(e,t){return this.neq_tolerance(e,t)}lt_tolerance(e,t){const l=N(e);return!this.eq_tolerance(l,t)&&this.lt(l)}lte_tolerance(e,t){const l=N(e);return this.eq_tolerance(l,t)||this.lt(l)}gt_tolerance(e,t){const l=N(e);return!this.eq_tolerance(l,t)&&this.gt(l)}gte_tolerance(e,t){const l=N(e);return this.eq_tolerance(l,t)||this.gt(l)}pLog10(){return this.lt(T.dZero)?T.dZero:this.log10()}absLog10(){return this.sign===0?T.dNaN:this.layer>0?W(Math.sign(this.mag),this.layer-1,Math.abs(this.mag)):W(1,0,Math.log10(this.mag))}log10(){return this.sign<=0?T.dNaN:this.layer>0?W(Math.sign(this.mag),this.layer-1,Math.abs(this.mag)):W(this.sign,0,Math.log10(this.mag))}log(e){return e=N(e),this.sign<=0||e.sign<=0||e.sign===1&&e.layer===0&&e.mag===1?T.dNaN:this.layer===0&&e.layer===0?W(this.sign,0,Math.log(this.mag)/Math.log(e.mag)):T.div(this.log10(),e.log10())}log2(){return this.sign<=0?T.dNaN:this.layer===0?W(this.sign,0,Math.log2(this.mag)):this.layer===1?W(Math.sign(this.mag),0,Math.abs(this.mag)*3.321928094887362):this.layer===2?W(Math.sign(this.mag),1,Math.abs(this.mag)+.5213902276543247):W(Math.sign(this.mag),this.layer-1,Math.abs(this.mag))}ln(){return this.sign<=0?T.dNaN:this.layer===0?W(this.sign,0,Math.log(this.mag)):this.layer===1?W(Math.sign(this.mag),0,Math.abs(this.mag)*2.302585092994046):this.layer===2?W(Math.sign(this.mag),1,Math.abs(this.mag)+.36221568869946325):W(Math.sign(this.mag),this.layer-1,Math.abs(this.mag))}logarithm(e){return this.log(e)}pow(e){const t=N(e),l=this,n=t;if(l.sign===0)return n.eq(0)?J(1,0,1):l;if(l.sign===1&&l.layer===0&&l.mag===1)return l;if(n.sign===0)return J(1,0,1);if(n.sign===1&&n.layer===0&&n.mag===1)return l;const s=l.absLog10().mul(n).pow10();return this.sign===-1?Math.abs(n.toNumber()%2)%2===1?s.neg():Math.abs(n.toNumber()%2)%2===0?s:T.dNaN:s}pow10(){if(!Number.isFinite(this.layer)||!Number.isFinite(this.mag))return T.dNaN;let e=this;if(e.layer===0){const t=Math.pow(10,e.sign*e.mag);if(Number.isFinite(t)&&Math.abs(t)>=.1)return W(1,0,t);if(e.sign===0)return T.dOne;e=J(e.sign,e.layer+1,Math.log10(e.mag))}return e.sign>0&&e.mag>=0?W(e.sign,e.layer+1,e.mag):e.sign<0&&e.mag>=0?W(-e.sign,e.layer+1,-e.mag):T.dOne}pow_base(e){return N(e).pow(this)}root(e){const t=N(e);return this.pow(t.recip())}factorial(){return this.mag<0?this.add(1).gamma():this.layer===0?this.add(1).gamma():this.layer===1?T.exp(T.mul(this,T.ln(this).sub(1))):T.exp(this)}gamma(){if(this.mag<0)return this.recip();if(this.layer===0){if(this.lt(J(1,0,24)))return N(Ni(this.sign*this.mag));const e=this.mag-1;let t=.9189385332046727;t=t+(e+.5)*Math.log(e),t=t-e;const l=e*e;let n=e,s=12*n,r=1/s,u=t+r;if(u===t||(t=u,n=n*l,s=360*n,r=1/s,u=t-r,u===t))return T.exp(t);t=u,n=n*l,s=1260*n;let o=1/s;return t=t+o,n=n*l,s=1680*n,o=1/s,t=t-o,T.exp(t)}else return this.layer===1?T.exp(T.mul(this,T.ln(this).sub(1))):T.exp(this)}lngamma(){return this.gamma().ln()}exp(){return this.mag<0?T.dOne:this.layer===0&&this.mag<=709.7?N(Math.exp(this.sign*this.mag)):this.layer===0?W(1,1,this.sign*Math.log10(Math.E)*this.mag):this.layer===1?W(1,2,this.sign*(Math.log10(.4342944819032518)+this.mag)):W(1,this.layer+1,this.sign*this.mag)}sqr(){return this.pow(2)}sqrt(){if(this.layer===0)return N(Math.sqrt(this.sign*this.mag));if(this.layer===1)return W(1,2,Math.log10(this.mag)-.3010299956639812);{const e=T.div(J(this.sign,this.layer-1,this.mag),J(1,0,2));return e.layer+=1,e.normalize(),e}}cube(){return this.pow(3)}cbrt(){return this.pow(1/3)}tetrate(e=2,t=J(1,0,1)){if(e===1)return T.pow(this,t);if(e===0)return new T(t);if(this.eq(T.dOne))return T.dOne;if(this.eq(-1))return T.pow(this,t);if(e===Number.POSITIVE_INFINITY){const s=this.toNumber();if(s<=1.444667861009766&&s>=.06598803584531254){if(s>1.444667861009099)return new T(Math.E);const r=T.ln(this).neg();return r.lambertw().div(r)}else return s>1.444667861009766?new T(Number.POSITIVE_INFINITY):T.dNaN}if(this.eq(T.dZero)){let s=Math.abs((e+1)%2);return s>1&&(s=2-s),new T(s)}if(e<0)return T.iteratedlog(t,this,-e);t=N(t);const l=e;e=Math.trunc(e);const n=l-e;if(this.gt(T.dZero)&&this.lte(1.444667861009766)){e=Math.min(1e4,e);for(let s=0;s<e;++s){const r=t;if(t=this.pow(t),r.eq(t))return t}if(n!=0){const s=this.pow(t);return t.mul(1-n).add(s.mul(n))}return t}n!==0&&(t.eq(T.dOne)?this.gt(10)?t=this.pow(n):(t=N(T.tetrate_critical(this.toNumber(),n)),this.lt(2)&&(t=t.sub(1).mul(this.minus(1)).plus(1))):this.eq(10)?t=t.layeradd10(n):t=t.layeradd(n,this));for(let s=0;s<e;++s){if(t=this.pow(t),!isFinite(t.layer)||!isFinite(t.mag))return t.normalize();if(t.layer-this.layer>3)return J(t.sign,t.layer+(e-s-1),t.mag);if(s>1e4)return t}return t}iteratedexp(e=2,t=J(1,0,1)){return this.tetrate(e,t)}iteratedlog(e=10,t=1){if(t<0)return T.tetrate(e,-t,this);e=N(e);let l=N(this);const n=t;t=Math.trunc(t);const s=n-t;if(l.layer-e.layer>3){const r=Math.min(t,l.layer-e.layer-3);t-=r,l.layer-=r}for(let r=0;r<t;++r){if(l=l.log(e),!isFinite(l.layer)||!isFinite(l.mag))return l.normalize();if(r>1e4)return l}return s>0&&s<1&&(e.eq(10)?l=l.layeradd10(-s):l=l.layeradd(-s,e)),l}slog(e=10){if(e=N(e),e.lte(T.dZero)||e.eq(T.dOne))return T.dNaN;if(e.lt(T.dOne))return this.eq(T.dOne)?T.dZero:this.eq(T.dZero)?T.dNegOne:T.dNaN;if(this.mag<0||this.eq(T.dZero))return T.dNegOne;let t=0,l=N(this);if(l.layer-e.layer>3){const n=l.layer-e.layer-3;t+=n,l.layer-=n}for(let n=0;n<100;++n)if(l.lt(T.dZero))l=T.pow(e,l),t-=1;else{if(l.lte(T.dOne))return N(t+T.slog_critical(e.toNumber(),l.toNumber()));t+=1,l=T.log(l,e)}return N(t)}static slog_critical(e,t){return e>10?t-1:T.critical_section(e,t,wi)}static tetrate_critical(e,t){return T.critical_section(e,t,bi)}static critical_section(e,t,l){t*=10,t<0&&(t=0),t>10&&(t=10),e<2&&(e=2),e>10&&(e=10);let n=0,s=0;for(let o=0;o<Et.length;++o)if(Et[o]==e){n=l[o][Math.floor(t)],s=l[o][Math.ceil(t)];break}else if(Et[o]<e&&Et[o+1]>e){const c=(e-Et[o])/(Et[o+1]-Et[o]);n=l[o][Math.floor(t)]*(1-c)+l[o+1][Math.floor(t)]*c,s=l[o][Math.ceil(t)]*(1-c)+l[o+1][Math.ceil(t)]*c;break}const r=t-Math.floor(t);return n*(1-r)+s*r}layeradd10(e){e=T.fromValue_noAlloc(e).toNumber();const t=N(this);if(e>=1){t.mag<0&&t.layer>0?(t.sign=0,t.mag=0,t.layer=0):t.sign===-1&&t.layer==0&&(t.sign=1,t.mag=-t.mag);const l=Math.trunc(e);e-=l,t.layer+=l}if(e<=-1){const l=Math.trunc(e);if(e-=l,t.layer+=l,t.layer<0)for(let n=0;n<100;++n){if(t.layer++,t.mag=Math.log10(t.mag),!isFinite(t.mag))return t.sign===0&&(t.sign=1),t.layer<0&&(t.layer=0),t.normalize();if(t.layer>=0)break}}for(;t.layer<0;)t.layer++,t.mag=Math.log10(t.mag);return t.sign===0&&(t.sign=1,t.mag===0&&t.layer>=1&&(t.layer-=1,t.mag=1)),t.normalize(),e!==0?t.layeradd(e,10):t}layeradd(e,t){const n=this.slog(t).toNumber()+e;return n>=0?T.tetrate(t,n):Number.isFinite(n)?n>=-1?T.log(T.tetrate(t,n+1),t):T.log(T.log(T.tetrate(t,n+2),t),t):T.dNaN}lambertw(){if(this.lt(-.3678794411710499))throw Error("lambertw is unimplemented for results less than -1, sorry!");if(this.mag<0)return N(Jl(this.toNumber()));if(this.layer===0)return N(Jl(this.sign*this.mag));if(this.layer===1)return Xl(this);if(this.layer===2)return Xl(this);if(this.layer>=3)return J(this.sign,this.layer-1,this.mag);throw"Unhandled behavior in lambertw()"}ssqrt(){if(this.sign==1&&this.layer>=3)return J(this.sign,this.layer-1,this.mag);const e=this.ln();return e.div(e.lambertw())}pentate(e=2,t=J(1,0,1)){t=N(t);const l=e;e=Math.trunc(e);const n=l-e;n!==0&&(t.eq(T.dOne)?(++e,t=new T(n)):this.eq(10)?t=t.layeradd10(n):t=t.layeradd(n,this));for(let s=0;s<e;++s){if(t=this.tetrate(t.toNumber()),!isFinite(t.layer)||!isFinite(t.mag))return t.normalize();if(s>10)return t}return t}sin(){return this.mag<0?this:this.layer===0?N(Math.sin(this.sign*this.mag)):J(0,0,0)}cos(){return this.mag<0?T.dOne:this.layer===0?N(Math.cos(this.sign*this.mag)):J(0,0,0)}tan(){return this.mag<0?this:this.layer===0?N(Math.tan(this.sign*this.mag)):J(0,0,0)}asin(){return this.mag<0?this:this.layer===0?N(Math.asin(this.sign*this.mag)):J(Number.NaN,Number.NaN,Number.NaN)}acos(){return this.mag<0?N(Math.acos(this.toNumber())):this.layer===0?N(Math.acos(this.sign*this.mag)):J(Number.NaN,Number.NaN,Number.NaN)}atan(){return this.mag<0?this:this.layer===0?N(Math.atan(this.sign*this.mag)):N(Math.atan(this.sign*(1/0)))}sinh(){return this.exp().sub(this.negate().exp()).div(2)}cosh(){return this.exp().add(this.negate().exp()).div(2)}tanh(){return this.sinh().div(this.cosh())}asinh(){return T.ln(this.add(this.sqr().add(1).sqrt()))}acosh(){return T.ln(this.add(this.sqr().sub(1).sqrt()))}atanh(){return this.abs().gte(1)?J(Number.NaN,Number.NaN,Number.NaN):T.ln(this.add(1).div(N(1).sub(this))).div(2)}ascensionPenalty(e){return e===0?this:this.root(T.pow(10,e))}egg(){return this.add(9)}lessThanOrEqualTo(e){return this.cmp(e)<1}lessThan(e){return this.cmp(e)<0}greaterThanOrEqualTo(e){return this.cmp(e)>-1}greaterThan(e){return this.cmp(e)>0}};let i=T;i.dZero=J(0,0,0);i.dOne=J(1,0,1);i.dNegOne=J(-1,0,1);i.dTwo=J(1,0,2);i.dTen=J(1,0,10);i.dNaN=J(Number.NaN,Number.NaN,Number.NaN);i.dInf=J(1,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY);i.dNegInf=J(-1,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY);i.dNumberMax=W(1,0,Number.MAX_VALUE);i.dNumberMin=W(1,0,Number.MIN_VALUE);const _i=new i(1);function el(e,t,l=!0){let n=i.log10(e).floor(),s=i.div(e,i.pow(10,n));s.toStringWithDecimalPlaces(t)==="10"&&(s=_i,n=n.add(1));const r=n.gte(1e9)?Z(n,Math.max(Math.max(t,3),se.defaultDecimalsShown)):n.gte(1e4)?gl(n,0):n.toStringWithDecimalPlaces(0);return l?s.toStringWithDecimalPlaces(t)+"e"+r:"e"+r}function gl(e,t){if(e==null)return"NaN";if(e=new i(e),e.mag<.001)return 0 .toFixed(t);const n=e.toStringWithDecimalPlaces(t).split(".");return n[0]=n[0].replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,"),n.length==1?n[0]:n[0]+"."+n[1]}function sn(e,t){return e==null?"NaN":(e=new i(e),e.mag<1e-4?0 .toFixed(t):(e.mag<.1&&t!==0&&(t=Math.max(Math.max(t,e.log10().negate().ceil().toNumber()),se.defaultDecimalsShown)),e.toStringWithDecimalPlaces(t)))}const ki=new i("eeee1000"),Ci=new i("e100000"),Ql=new i("e1000"),an=new i(1e9),Si=new i(1e6),Mi=new i(1e3);new i(.98);const Pi=new i(.001),Ii=new i(0);function Z(e,t,l){if(t==null&&(t=se.defaultDecimalsShown),l=l!=null?l:se.defaultShowSmall,e=new i(e),isNaN(e.sign)||isNaN(e.layer)||isNaN(e.mag))return"NaN";if(e.sign<0)return"-"+Z(e.neg(),t);if(e.mag===Number.POSITIVE_INFINITY)return"Infinity";if(e.gte(ki)){const n=e.slog();return n.gte(Si)?"F"+Z(n.floor()):i.pow(10,n.sub(n.floor())).toStringWithDecimalPlaces(3)+"F"+gl(n.floor(),0)}else{if(e.gte(Ci))return el(e,0,!1);if(e.gte(Ql))return el(e,0);if(e.gte(an))return el(e,t);if(e.gte(Mi))return gl(e,0);if(e.gte(Pi)||!l)return sn(e,t);if(e.eq(Ii))return 0 .toFixed(t)}return e=rn(e),e.lt(Ql)?el(e,t).replace(/([^(?:e|F)]*)$/,"-$1"):Z(e,t)+"\u207B\xB9"}function we(e){return e=new i(e),e.sign<0?"-"+we(e.neg()):e.gte(an)?Z(e):Z(e,0)}function hl(e){return i.lt(e,0)?"-"+hl(i.neg(e)):i.gt(e,2**51)?Z(i.div(e,31536e3))+"y":(e=new i(e).toNumber(),e<60?Z(e)+"s":e<3600?we(Math.floor(e/60))+"m "+Z(e%60)+"s":e<86400?we(Math.floor(e/3600))+"h "+we(Math.floor(e/60)%60)+"m "+we(e%60)+"s":e<31536e3?we(Math.floor(e/84600)%365)+"d "+we(Math.floor(e/3600)%24)+"h "+we(Math.floor(e/60)%60)+"m":we(Math.floor(e/31536e3))+"y "+we(Math.floor(e/84600)%365)+"d "+we(Math.floor(e/3600)%24)+"h")}function $i(e,t,l){e=new i(e);let n=e.toStringWithDecimalPlaces(t);return new i(n).gte(l)&&(n=i.sub(l,Math.pow(.1,t)).toStringWithDecimalPlaces(t)),n}function Ti(e,t){return Z(e,t,!0)}function rn(e){let t=i.log10(e).ceil();const l=i.div(e,i.pow(10,t));return t=t.neg(),e=new i(10).pow(t).times(l),e}var Ei=Object.freeze(Object.defineProperty({__proto__:null,default:i,exponentialFormat:el,commaFormat:gl,regularFormat:sn,format:Z,formatWhole:we,formatTime:hl,toPlaces:$i,formatSmall:Ti,invertOOM:rn},Symbol.toStringTag,{value:"Module"}));const{exponentialFormat:Di,commaFormat:Bi,regularFormat:qi,format:F,formatWhole:re,formatTime:Nl,toPlaces:Ai,formatSmall:Fi,invertOOM:Oi}=Ei;window.Decimal=i;window.exponentialFormat=Di;window.commaFormat=Bi;window.regularFormat=qi;window.format=F;window.formatWhole=re;window.formatTime=Nl;window.toPlaces=Ai;window.formatSmall=Fi;window.invertOOM=Oi;function on(e){let t=e.replace(/([A-Z])/g," $1");return t=t.charAt(0).toUpperCase()+t.slice(1),t}function Bt(e){return typeof e=="function"}var X=(e=>(e.Up="Up",e.Down="Down",e.Left="Left",e.Right="Right",e.Default="Up",e))(X||{});const il=Symbol("DoNotCache");function k(e,t){const l=e[t];Bt(l)&&l.length===0&&!l[il]?e[t]=b(l.bind(e)):Bt(l)&&(e[t]=l.bind(e),e[t][il]=!0)}function jt(e){return Bt(e)&&!e[il]&&(e=b(e)),e}const Ee=Symbol("Component"),qe=Symbol("GatherProps");let Ri=0;function He(e="feature-"){return e+Ri++}var $=(e=>(e[e.Visible=0]="Visible",e[e.Hidden=1]="Hidden",e[e.None=2]="None",e))($||{});function B(e){return e[il]=!0,e}function he(e,t=2){return e?0:t}function ee(e,t,l){e[t]===void 0&&l!=null&&(e[t]=l)}const Dt={variables:{"--foreground":"#dfdfdf","--background":"#0f0f0f","--feature-foreground":"#0f0f0f","--tooltip-background":"rgba(0, 0, 0, 0.75)","--raised-background":"#0f0f0f","--points":"#ffffff","--locked":"#bf8f8f","--highlighted":"#333","--bought":"#77bf5f","--danger":"rgb(220, 53, 69)","--link":"#02f2f2","--outline":"#dfdfdf","--accent1":"#627a82","--accent2":"#658262","--accent3":"#7c6282","--border-radius":"15px","--modal-border":"solid 2px var(--color)","--feature-margin":"0px"},floatingTabs:!0,mergeAdjacent:!0,showPin:!0};var Bl=(e=>(e.Classic="classic",e.Paper="paper",e.Nordic="nordic",e.Aqua="aqua",e))(Bl||{}),Zt={classic:Dt,paper:{...Dt,variables:{...Dt.variables,"--background":"#2a323d","--feature-foreground":"#000","--raised-background":"#333c4a","--locked":"#3a3e45","--bought":"#5C8A58","--outline":"#333c4a","--border-radius":"4px","--modal-border":"","--feature-margin":"5px"},floatingTabs:!1},nordic:{...Dt,variables:{...Dt.variables,"--foreground":"#D8DEE9","--background":"#2E3440","--feature-foreground":"#000","--raised-background":"#3B4252","--points":"#E5E9F0","--locked":"#4c566a","--highlighted":"#434c5e","--bought":"#8FBCBB","--danger":"#D08770","--link":"#88C0D0","--outline":"#3B4252","--accent1":"#B48EAD","--accent2":"#A3BE8C","--accent3":"#EBCB8B","--border-radius":"4px","--modal-border":"solid 2px #3B4252","--feature-margin":"5px"},floatingTabs:!1},aqua:{...Dt,variables:{...Dt.variables,"--foreground":"#bfdfff","--background":"#001f3f","--tooltip-background":"rgba(0, 15, 31, 0.75)","--raised-background":"#001f3f","--points":"#dfefff","--locked":"#c4a7b3","--outline":"#bfdfff"}}};const ke=Symbol("ProxyState"),Ut=Symbol("ProxyPath");function Oe(e,t={}){const l=t;let n=!1;function s(){return n||(Object.assign(l,e(l)),n=!0),l}return new Proxy(l,{get(r,u){return u===ke?s():s()[u]},set(r,u,o){return s()[u]=o,!0},has(r,u){return u===ke?!0:Reflect.has(s(),u)},ownKeys(){return Reflect.ownKeys(s())},getOwnPropertyDescriptor(r,u){return n||(Object.assign(l,e(l)),n=!0),Object.getOwnPropertyDescriptor(r,u)}})}var pe=window.state=El({lastTenTicks:[],hasNaN:!1,NaNPath:[]});const un=rl({id:"",devSpeed:null,name:"",tabs:[],time:-1,autosave:!0,offlineProd:!0,offlineTime:null,timePlayed:0,keepGoing:!1,modID:"",modVersion:"",layers:{}});function cn(e){return JSON.stringify(e,(t,l)=>f(l))}const dn={get(e,t){var n;if(t===ke||t===Ut)return e[t];const l=e[ke][t];if(t!=="value"&&(Rn(l)||Array.isArray(l))){if(l!==((n=e[t])==null?void 0:n[ke])){const s=[...e[Ut],t];e[t]=new Proxy({[ke]:l,[Ut]:s},dn)}return e[t]}return l},set(e,t,l,n){if(!pe.hasNaN&&(typeof l=="number"&&isNaN(l)||l instanceof i&&(isNaN(l.sign)||isNaN(l.layer)||isNaN(l.mag)))){const s=e[ke][t];if(!(typeof s=="number"&&isNaN(s)||s instanceof i&&(isNaN(s.sign)||isNaN(s.layer)||isNaN(s.mag))))throw un.autosave=!1,pe.hasNaN=!0,pe.NaNPath=[...e[Ut],t],pe.NaNReceiver=n,console.error("Attempted to set NaN value",[...e[Ut],t],e[ke]),"Attempted to set NaN value. See above for details"}return e[ke][t]=l,!0},ownKeys(e){return Reflect.ownKeys(e[ke])},has(e,t){return Reflect.has(e[ke],t)},getOwnPropertyDescriptor(e,t){return Object.getOwnPropertyDescriptor(e[ke],t)}};var R=window.player=new Proxy({[ke]:un,[Ut]:["player"]},dn);const me=tn();let xt=null,tl=null;function yl(){const e=Date.now();let t=(e-R.time)/1e3;R.time=e;const l=t;if(pe.lastTenTicks.push(l),pe.lastTenTicks.length>10&&(pe.lastTenTicks=pe.lastTenTicks.slice(1)),!((tl==null?void 0:tl.value)&&!R.keepGoing)&&!pe.hasNaN&&(t=Math.max(t,0),R.devSpeed!==0)){if(R.offlineTime!=null){if(i.gt(R.offlineTime,se.offlineLimit*3600)&&(R.offlineTime=se.offlineLimit*3600),i.gt(R.offlineTime,0)&&R.devSpeed!==0){const n=Math.max(R.offlineTime/10,t);R.offlineTime=R.offlineTime-n,t+=n}else R.devSpeed===0&&(R.offlineTime+=t);(!R.offlineProd||i.lt(R.offlineTime,0))&&(R.offlineTime=null)}t=Math.min(t,se.maxTickLength),R.devSpeed!=null&&(t*=R.devSpeed),Number.isFinite(t)||(t=1e308),!i.eq(t,0)&&(R.timePlayed+=t,Number.isFinite(R.timePlayed)||(R.timePlayed=1e308),me.emit("update",t,l),de.unthrottled?(requestAnimationFrame(yl),xt!=null&&(clearInterval(xt),xt=null)):xt==null&&(xt=setInterval(yl,50)))}}async function Vi(){tl=(await vl(()=>Promise.resolve().then(function(){return Tn}),void 0)).hasWon,nt(tl,e=>{e&&me.emit("gameWon")}),de.unthrottled?requestAnimationFrame(yl):xt=setInterval(yl,50)}var Li=Object.freeze(Object.defineProperty({__proto__:null,globalBus:me,startGameLoop:Vi},Symbol.toStringTag,{value:"Module"}));function fn(e={}){return Object.assign({id:`${se.id}-0`,name:"Default Save",tabs:se.initialTabs.slice(),time:Date.now(),autosave:!0,offlineProd:!0,offlineTime:0,timePlayed:0,keepGoing:!1,modID:se.id,modVersion:se.versionNumber,layers:{}},e)}function at(e){const t=Ct.compressToUTF16(cn(e!=null?e:R[ke]));return localStorage.setItem((e!=null?e:R[ke]).id,t),t}async function Gi(){xi();try{let e=localStorage.getItem(de.active);if(e==null){await qt(Ht());return}if(e[0]!=="{")if(e[0]==="e")e=decodeURIComponent(escape(atob(e)));else if(e[0]==="\u1BE1")e=Ct.decompressFromUTF16(e);else throw"Unable to determine save encoding";const t=JSON.parse(e);if(t.modID!==se.id){await qt(Ht());return}t.id=de.active,await qt(t)}catch(e){console.error(`Failed to load save. Falling back to new save.
`,e),await qt(Ht())}}function Ht(){const e=ml(),t=fn({id:e});return at(t),de.saves.push(e),t}function ml(){let e,t=0;do e=`${se.id}-${t++}`;while(localStorage.getItem(e));return e}async function qt(e){console.info("Loading save",e);const{layers:t,removeLayer:l,addLayer:n}=await vl(()=>Promise.resolve().then(function(){return rs}),void 0),{fixOldSave:s,fixOldSaveEarly:r,getInitialLayers:u}=await vl(()=>Promise.resolve().then(function(){return Tn}),void 0);e.modVersion!==se.versionNumber&&r(e.modVersion,e);for(const o in t){const c=t[o];c&&l(c)}u(e).forEach(o=>n(o,e)),e=fn(e),e.offlineProd&&e.time&&(e.offlineTime==null&&(e.offlineTime=0),e.offlineTime+=(Date.now()-e.time)/1e3),e.time=Date.now(),e.modVersion!==se.versionNumber&&s(e.modVersion,e),Object.assign(R,e),de.active=R.id}setInterval(()=>{R.autosave&&at()},1e3);window.onbeforeunload=()=>{R.autosave&&at()};window.save=at;const Ui=window.hardReset=async()=>{await qt(Ht())},sl=rl({active:"",saves:[],showTPS:!0,theme:Bl.Nordic,unthrottled:!1});nt(sl,e=>{const t=Ct.compressToUTF16(JSON.stringify(e));localStorage.setItem(se.id,t)},{deep:!0});var de=window.settings=sl;window.hardResetSettings=()=>{const e={active:"",saves:[],showTPS:!0,theme:Bl.Nordic};me.emit("loadSettings",e),Object.assign(sl,e),Ui()};function xi(){try{let e=localStorage.getItem(se.id);if(e!=null&&e!==""){if(e[0]!=="{")if(e[0]==="e")e=decodeURIComponent(escape(atob(e)));else if(e[0]==="\u1BE1")e=Ct.decompressFromUTF16(e);else{console.warn("Unable to determine settings encoding",e);return}const t=JSON.parse(e);typeof t=="object"&&Object.assign(sl,t)}me.emit("loadSettings",sl)}catch{}}const mn=rl([]);function pn(e){mn.push(e)}const ji=rl([]),Hi=rl([]);function j(e,t="span"){return typeof e=="function"?H({render:e}):typeof e=="string"?e.length>0?(e=e.trim(),e.charAt(0)!=="<"&&(e=`<${t}>${e}</${t}>`),H({template:e})):H({render:()=>({})}):e}function G(e){if(ze(e))return typeof e=="function"?e():j(e);const t=e[Ee];return a(t,e[qe](),null)}function gt(e){if(ze(e))return typeof e=="function"?e():typeof e=="string"?a(V,null,[e]):a(e,null,null);const t=e[Ee];return a(t,e[qe](),null)}function ze(e){return typeof e=="string"?!0:typeof e=="object"?e==null?!1:"render"in e||"component"in e:typeof e=="function"&&e[il]===!0}function ql(e,t){const l=U(null),n=U(void 0);function s(o){l.value||(l.value=setInterval(u,250)),n.value=o}function r(){l.value&&(clearInterval(l.value),l.value=null)}function u(){t&&t.value?t.value():e&&e.value&&e.value(n.value)}return en(r),{start:s,stop:r,handleHolding:u}}function zt(e,t="div"){const l=tt();return lt(()=>{l.value=j(ge(e),t)}),l}function Kt(e,t="div"){const l=tt(null);return lt(()=>{const n=ge(e);l.value=n==null?null:j(n,t)}),l}function Wi(e){return b(()=>ge(e))}function ge(e){return f(f(e))}function E(...e){return e.includes(Object)||e.push(Object),e}const zi=H({emits:["updateNodes"],setup(e,{emit:t}){var h;const l=U({}),n=new ResizeObserver(o),s=U(null);wl(()=>{const w=s.value;w!=null&&n.observe(w)});let r=!0,u=U((h=s.value)==null?void 0:h.getBoundingClientRect());function o(){s.value!=null&&r&&(r=!1,ht(()=>{var w;u.value=(w=s.value)==null?void 0:w.getBoundingClientRect(),Object.values(l.value).filter(p=>p).forEach(p=>p.rect=p.element.getBoundingClientRect()),t("updateNodes",l.value),r=!0}))}document.fonts.ready.then(o);const c={attributes:!1,childList:!0,subtree:!1};cl(Al,(w,p)=>{const y=new MutationObserver(()=>d(w));y.observe(p,c),l.value[w]={element:p,observer:y,rect:p.getBoundingClientRect()},t("updateNodes",l.value),ht(()=>d(w))}),cl(Fl,w=>{var p;(p=l.value[w])==null||p.observer.disconnect(),l.value[w]=void 0,t("updateNodes",l.value)}),cl(Ol,l),cl(Rl,u);function d(w){const p=l.value[w];p!=null&&(p.rect=p.element.getBoundingClientRect(),t("updateNodes",l.value))}return(w,p)=>(_(),q(V,null,[Mt(w.$slots,"default",{},void 0,!0),g("div",{ref_key:"resizeListener",ref:s,class:"resize-listener"},null,512)],64))}});var vn=te(zi,[["__scopeId","data-v-6a08ac80"]]);const Yi=["onPointerdown"],Zi={class:"modal-wrapper"},Ki={class:"modal-container"},Ji={class:"modal-header"},Xi=m(" default header "),Qi={class:"modal-body"},es=m(" default body "),ts={class:"modal-footer"},ls=g("div",{class:"modal-default-flex-grow"},null,-1),At=H({props:{modelValue:{type:Boolean}},emits:["update:modelValue"],setup(e,{expose:t,emit:l}){const s=be(e),r=b(()=>s.modelValue||o.value);function u(){l("update:modelValue",!1)}const o=U(!1),c=U(null),d=b(()=>{var h,w;return(w=(h=c.value)==null?void 0:h.nodes)!=null?w:null});return t({isOpen:r,nodes:d}),(h,w)=>(_(),x(Dn,{to:"#modal-root"},[a(Dl,{name:"modal",onBeforeEnter:w[0]||(w[0]=p=>o.value=!0),onAfterLeave:w[1]||(w[1]=p=>o.value=!1)},{default:z(()=>[Ne(g("div",yt({class:"modal-mask",onPointerdown:ll(u,["self"])},h.$attrs),[g("div",Zi,[g("div",Ki,[g("div",Ji,[Mt(h.$slots,"header",{shown:f(r)},()=>[Xi])]),g("div",Qi,[a(vn,{ref_key:"contextRef",ref:c},{default:z(()=>[Mt(h.$slots,"body",{shown:f(r)},()=>[es])]),_:3},512)]),g("div",ts,[Mt(h.$slots,"footer",{shown:f(r)},()=>[g("div",{class:"modal-default-footer"},[ls,g("button",{class:"button modal-default-button",onClick:u}," Close ")])])])])])],16,Yi),[[Pe,e.modelValue]])]),_:3})]))}}),Yt=Symbol("PersistentState"),al=Symbol("DefaultValue"),bl=Symbol("StackTrace"),gn=Symbol("Deleted");function ns(){var e;return((e=new Error().stack)==null?void 0:e.split(`
`).slice(3,5).map(t=>t.trim()).join(`
`))||""}function je(e){const t=Be(e)?e:U(e);return t[Yt]=t,t[al]=Be(e)?e.value:e,t[bl]=ns(),t[gn]=!1,rt.length===0?console.warn("Creating a persistent ref outside of a layer. This is not officially supported",t,`
Created at:
`+t[bl]):Wt[rt[rt.length-1]].add(t),t}me.on("addLayer",(e,t)=>{const l=[],n=(s,r=[])=>{let u=!1;return Object.keys(s).forEach(o=>{const c=s[o];if(c&&typeof c=="object")if(Yt in c){if(u=!0,c[gn]){console.warn("Deleted persistent ref present in returned object. Ignoring...",c,`
Created at:
`+c[bl]);return}Wt[e.id].delete(ke in c?c[ke]:c);const d=r.reduce((w,p)=>(p in w||(w[p]={}),w[p]),t),h=d[o];d[o]=c[Yt],Bn(d)?h!=null?d[o]=h:d[o]=c[al]:h!=null?d[o].value=h:d[o].value=c[al]}else!(c instanceof i)&&!Be(c)&&!l.includes(c)&&(typeof c.type=="symbol"&&l.push(c),n(c,[...r,o])&&(zl(c)&&!zl(s)?console.warn("Found array that contains persistent values when adding layer. Keep in mind changing the order of elements in the array will mess with existing player saves.",ke in s?s[ke]:s,o):u=!0))}),u};n(e),Wt[e.id].forEach(s=>{console.error(`Created persistent ref in ${e.id} without registering it to the layer! Make sure to include everything persistent in the returned object`,s,`
Created at:
`+s[bl])}),Wt[e.id].clear()});const Al=Symbol("RegisterNode"),Fl=Symbol("UnregisterNode"),Ol=Symbol("Nodes"),Rl=Symbol("Bounds"),xe=El({});window.layers=xe;const Wt={},rt=[];function Ge(e,t){return Oe(()=>{const l={},n=l.emitter=tn();if(l.on=n.on.bind(n),l.emit=n.emit.bind(n),l.nodes=U({}),l.id=e,rt.push(e),Wt[e]=new Set,l.minimized=je(!1),Object.assign(l,t.call(l)),rt[rt.length-1]==null||rt[rt.length-1]!==e)throw`Adding layers stack in invalid state. This should not happen
Stack: ${rt}
Trying to pop ${l.id}`;return rt.pop(),k(l,"color"),k(l,"display"),k(l,"name"),ee(l,"name",l.id),k(l,"minWidth"),ee(l,"minWidth",600),k(l,"minimizable"),ee(l,"minimizable",!0),l})}function hn(e,t){if(console.info("Adding layer",e.id),xe[e.id]){console.error("Attempted to add layer with same ID as existing layer",e.id,xe[e.id]);return}ee(t,"layers",{}),t.layers[e.id]==null&&(t.layers[e.id]={}),xe[e.id]=e,me.emit("addLayer",e,t.layers[e.id])}function is(e){return xe[e]}function yn(e){console.info("Removing layer",e.id),me.emit("removeLayer",e),xe[e.id]=void 0}function ss(e){yn(e),hn(e,R)}function as(e){const t=U(!1);return{openModal:()=>t.value=!0,modal:B(()=>a(At,{modelValue:t.value,"onUpdate:modelValue":l=>t.value=l},{header:()=>a("h2",null,[f(e.name)]),body:f(e.display)}))}}me.on("update",function(t){Object.values(xe).forEach(l=>{l==null||l.emit("preUpdate",t)}),Object.values(xe).forEach(l=>{l==null||l.emit("update",t)}),Object.values(xe).forEach(l=>{l==null||l.emit("postUpdate",t)})});var rs=Object.freeze(Object.defineProperty({__proto__:null,RegisterNodeInjectionKey:Al,UnregisterNodeInjectionKey:Fl,NodesInjectionKey:Ol,BoundsInjectionKey:Rl,layers:xe,persistentRefs:Wt,addingLayers:rt,createLayer:Ge,addLayer:hn,getLayer:is,removeLayer:yn,reloadLayer:ss,setupLayerModal:as},Symbol.toStringTag,{value:"Module"}));const os=H({components:{Context:vn},props:{index:{type:Number,required:!0},tab:{type:Function,required:!0},display:{type:E(Object,String,Function),required:!0},minimized:{type:Object,required:!0},minWidth:{type:E(Number,String),required:!0},name:{type:E(String),required:!0},color:E(String),minimizable:E(Boolean),nodes:{type:Object,required:!0}},setup(e){const{display:t,index:l,minimized:n,minWidth:s,tab:r}=be(e),u=zt(t),o=b(()=>se.allowGoBack&&l.value>0&&!n.value);function c(){R.tabs.splice(f(e.index),1/0)}ht(()=>h(n.value,f(s.value))),nt([n,Wi(s)],([w,p])=>h(w,p));function d(w){e.nodes.value=w}function h(w,p){const y=typeof p=="number"||Number.isNaN(parseInt(p))?p+"px":p,v=r.value();v!=null&&(w?(v.style.flexGrow="0",v.style.flexShrink="0",v.style.width="60px",v.style.minWidth=v.style.flexBasis="",v.style.margin="0"):(v.style.flexGrow="",v.style.flexShrink="",v.style.width="",v.style.minWidth=v.style.flexBasis=y,v.style.margin=""))}return{component:u,showGoBack:o,updateNodes:d,unref:f,goBack:c}}});function us(e,t,l,n,s,r){const u=De("Context");return _(),q("div",{class:"layer-container",style:oe({"--layer-color":e.unref(e.color)})},[e.showGoBack?(_(),q("button",{key:0,class:"goBack",onClick:t[0]||(t[0]=(...o)=>e.goBack&&e.goBack(...o))},"\u2190")):L("",!0),e.minimized.value?(_(),q("button",{key:1,class:"layer-tab minimized",onClick:t[1]||(t[1]=o=>e.minimized.value=!1)},[g("div",null,ne(e.unref(e.name)),1)])):(_(),q("div",{key:2,class:ye(["layer-tab",{showGoBack:e.showGoBack}])},[a(u,{onUpdateNodes:e.updateNodes},{default:z(()=>[(_(),x(fe(e.component)))]),_:1},8,["onUpdateNodes"])],2)),e.unref(e.minimizable)?(_(),q("button",{key:3,class:"minimize",onClick:t[2]||(t[2]=o=>e.minimized.value=!0)}," \u25BC ")):L("",!0)],4)}var cs=te(os,[["render",us],["__scopeId","data-v-34c9d881"]]);const it=e=>(bt("data-v-19ae30e6"),e=e(),wt(),e),ds=it(()=>g("h2",null,"Changelog",-1)),fs=it(()=>g("details",{open:""},[g("summary",null,[m("v1.4 Void Decay - "),g("time",null,"2022-08-20")]),g("ul",null,[g("li",{class:"balancing"},"Balanced up to 5e46 Particles/s"),g("li",{class:"feature"},"Implemented Advancements 45-??"),g("li",{class:"feature"},"Implemented Void."),g("li",{class:"fix"},"Updated to Profectus 0.5.1")])],-1)),ms=it(()=>g("details",{open:""},[g("summary",null,[m("v1.3 For the Senses - "),g("time",null,"2022-05-17")]),g("ul",null,[g("li",{class:"balancing"},"Balanced up to 5e46 Particles/s"),g("li",{class:"feature"},"Implemented Advancements 33-44"),g("li",{class:"feature"},"Implemented Light and Sound."),g("li",{class:"fix"},"A few minor bugfixes, and updated to Profectus 0.4.1")])],-1)),ps=it(()=>g("details",null,[g("summary",null,[m("v1.2 Bond Glue - "),g("time",null,"2022-05-09")]),g("ul",null,[g("li",{class:"balancing"},"Balanced up to 1.4e25 Particles/s"),g("li",{class:"feature"},"Implemented Advancements 24-32"),g("li",{class:"feature"},"Implemented Intrabonds"),g("li",{class:"fix"}," Fixed a bug with the Cryo Challenge rewards not being dependent on the right challenge completions (this might slightly slow down your particles/s, but not substantially enough to be a problem) ")])],-1)),vs=it(()=>g("details",null,[g("summary",null,[m("v1.1.1 Big Loar - "),g("time",null,"2022-05-05")]),g("ul",null,[g("li",{class:"balancing"},"Balanced up to 1e17 Particles/s"),g("li",{class:"feature"},"Implemented Advancements 22-23"),g("li",{class:"feature"},"Added a Lore node because why not :)")])],-1)),gs=it(()=>g("details",null,[g("summary",null,[m("v1.1 Particle Combinators - "),g("time",null,"2022-05-03")]),g("ul",null,[g("li",{class:"balancing"},"Balanced up to 1e14 Particles/s"),g("li",{class:"feature"},"Implemented Advancements 16-21"),g("li",{class:"feature"},"Implemented Particle Combinators"),g("li",{class:"breaking"}," Updated to Profectus v0.4, which caused saves to glitch out a bit. Here is a list of everything that may have reset for you: Flame Upgrades, Life Buyables, and the Earth Grid (but not its level) ")])],-1)),hs=it(()=>g("details",null,[g("summary",null,[m("v1.0.2 Tooltip Heaven - "),g("time",null,"2022-04-24")]),g("ul",null,[g("li",{class:"fix"},"Updated to Profectus v0.3.3"),g("li",{class:"fix"},"Added tooltips to layer nodes (thanks to thepaperpilot)"),g("li",{class:"fix"}," Added modifier tooltips to reset buttons (note that it's not in the Aqua layer, it doesn't let you click the reset button when it is, so I had to remove it for the time being while I try to figure that out) "),g("li",{class:"fix"}," Fixed the way that the branched reset propagation works (I really borked that one up lol) ")])],-1)),ys=it(()=>g("details",null,[g("summary",null,[m("v1.0.1 Refined Edges - "),g("time",null,"2022-04-24")]),g("ul",null,[g("li",{class:"fix"},"Updated to Profectus v0.3.2"),g("li",{class:"fix"}," Added glow color to certain layers (thanks to thepaperpilot) ")])],-1)),bs=it(()=>g("details",null,[g("summary",null,[m("v1.0 Our Planet - "),g("time",null,"2022-04-23")]),g("ul",null,[g("li",{class:"balancing"},"Balanced up to 3e9 Particles/s"),g("li",{class:"feature"},"Implemented Advancements 11-15"),g("li",{class:"feature"},"Implemented Earth layer")])],-1)),ws=it(()=>g("details",null,[g("summary",null,[m("v0.3 Windseeker - "),g("time",null,"2022-04-14")]),g("ul",null,[g("li",{class:"balancing"},"Balanced up to 40,500,000 Particles/s"),g("li",{class:"feature"},"Implemented Advancements 7-11"),g("li",{class:"feature"},"Implemented Air layer")])],-1)),Ns=it(()=>g("details",null,[g("summary",null,[m("v0.2 Several Advancements - "),g("time",null,"2022-04-11")]),g("ul",null,[g("li",{class:"balancing"},"Balanced up to 43,000 Particles/s"),g("li",{class:"feature"},"Implemented Advancements 2-6"),g("li",{class:"feature"},"Implemented Cryo layer")])],-1)),_s=it(()=>g("details",null,[g("summary",null,[m("v0.1 Basic Mechanics - "),g("time",null,"2022-04-08")]),g("ul",null,[g("li",{class:"feature"},"Implemented Flame, Life, & Water layers"),g("li",{class:"feature"},"Implemented Advancement 1"),g("li",{class:"feature"},"Implemented Lightning layer")])],-1)),ks=H({setup(e,{expose:t}){const l=U(!1);return t({open(){l.value=!0}}),(n,s)=>(_(),x(At,{modelValue:l.value,"onUpdate:modelValue":s[0]||(s[0]=r=>l.value=r)},{header:z(()=>[ds]),body:z(()=>[fs,ms,ps,vs,gs,hs,ys,bs,ws,Ns,_s]),_:1},8,["modelValue"]))}});var Cs=te(ks,[["__scopeId","data-v-19ae30e6"]]),Ss=H({props:{element:Object,display:{type:E(Object,String,Function),required:!0},style:E(Object,String,Array),classes:E(Object),direction:E(String),xoffset:E(String),yoffset:E(String),pinned:Object},setup(e){const{element:t,display:l,pinned:n}=be(e),s=U(!1),r=b(()=>(ge(n)||s.value)&&u.value),u=Kt(l),o=tt(j(B(()=>{const h=ge(t);return h==null?"":gt(h)})));function c(h){const w=n;h.shiftKey&&w&&(w.value=!w.value,h.stopPropagation(),h.preventDefault())}const d=b(()=>ge(n)&&Zt[de.theme].showPin);return{Direction:X,isHovered:s,isShown:r,comp:u,elementComp:o,unref:f,togglePinned:c,showPin:d}}});const Ms={key:0,class:"material-icons pinned"};function Ps(e,t,l,n,s,r){return _(),q("div",{class:ye(["tooltip-container",{shown:e.isShown}]),onMouseenter:t[0]||(t[0]=u=>e.isHovered=!0),onMouseleave:t[1]||(t[1]=u=>e.isHovered=!1),onClickCapture:t[2]||(t[2]=(...u)=>e.togglePinned&&e.togglePinned(...u))},[Mt(e.$slots,"default",{},void 0,!0),e.elementComp?(_(),x(fe(e.elementComp),{key:0})):L("",!0),a(Dl,{name:"fade"},{default:z(()=>{var u;return[e.isShown?(_(),q("div",{key:0,class:ye(["tooltip",{top:e.unref(e.direction)===e.Direction.Up,left:e.unref(e.direction)===e.Direction.Left,right:e.unref(e.direction)===e.Direction.Right,bottom:e.unref(e.direction)===e.Direction.Down,...e.unref(e.classes)}]),style:oe([{"--xoffset":e.unref(e.xoffset)||"0px","--yoffset":e.unref(e.yoffset)||"0px"},(u=e.unref(e.style))!=null?u:{}])},[e.showPin?(_(),q("span",Ms,"push_pin")):L("",!0),e.comp?(_(),x(fe(e.comp),{key:1})):L("",!0)],6)):L("",!0)]}),_:1})],34)}var Ce=te(Ss,[["render",Ps],["__scopeId","data-v-6102fa3a"]]);const Ft=e=>(bt("data-v-7dec2dec"),e=e(),wt(),e),Is={class:"info-modal-header"},$s=["src","alt"],Ts={class:"info-modal-title"},Es={key:0},Ds={key:0},Bs={key:0},qs=Ft(()=>g("div",null," Made in Profectus, by thepaperpilot with inspiration from Acameada and Jacorb ",-1)),As=Ft(()=>g("br",null,null,-1)),Fs=Ft(()=>g("br",null,null,-1)),Os=["href"],Rs=Ft(()=>g("span",{class:"material-icons info-modal-discord"},"discord",-1)),Vs=Ft(()=>g("div",null,[g("a",{href:"https://discord.gg/WzejVAx",class:"info-modal-discord-link"},[g("span",{class:"material-icons info-modal-discord"},"discord"),m(" The Paper Pilot Community ")])],-1)),Ls=Ft(()=>g("div",null,[g("a",{href:"https://discord.gg/F3xveHV",class:"info-modal-discord-link"},[g("span",{class:"material-icons info-modal-discord"},"discord"),m(" The Modding Tree ")])],-1)),Gs=Ft(()=>g("br",null,null,-1));var Us=H({props:{changelog:null},setup(e,{expose:t}){const l=e,{title:n,logo:s,author:r,discordName:u,discordLink:o,versionNumber:c,versionTitle:d}=se,h=be(l),w=U(!1),p=b(()=>Nl(R.timePlayed)),y=b(()=>j(B(()=>a(V,null,[ji.map(G)]))));t({open(){w.value=!0}});function v(){var M;(M=f(h.changelog))==null||M.open()}return(M,C)=>(_(),x(At,{modelValue:w.value,"onUpdate:modelValue":C[0]||(C[0]=P=>w.value=P)},{header:z(()=>[g("div",Is,[f(s)?(_(),q("img",{key:0,class:"info-modal-logo",src:f(s),alt:f(n)},null,8,$s)):L("",!0),g("div",Ts,[g("h2",null,ne(f(n)),1),g("h4",null,[m(" v"+ne(f(c)),1),f(d)?(_(),q("span",Es,": "+ne(f(d)),1)):L("",!0)])])])]),body:z(({shown:P})=>[P?(_(),q("div",Ds,[f(r)?(_(),q("div",Bs,"By "+ne(f(r)),1)):L("",!0),qs,As,g("div",{class:"link",onClick:v},"Changelog"),Fs,g("div",null,[f(o)?(_(),q("a",{key:0,href:f(o),class:"info-modal-discord-link"},[Rs,m(" "+ne(f(u)),1)],8,Os)):L("",!0)]),Vs,Ls,Gs,g("div",null,"Time Played: "+ne(f(p)),1),(_(),x(fe(f(y))))])):L("",!0)]),_:1},8,["modelValue"]))}});var xs=te(Us,[["__scopeId","data-v-7dec2dec"]]);const js={class:"field"},Hs={key:0,class:"field-title"},Vl=H({props:{title:null,modelValue:null,options:null,placeholder:null,closeOnSelect:{type:Boolean}},emits:["update:modelValue"],setup(e,{emit:t}){var u;const l=e,n=Kt(Pt(l,"title"),"span"),s=U((u=l.options.find(o=>o.value===l.modelValue))!=null?u:null);nt(Pt(l,"modelValue"),o=>{var c;ge(s)!==o&&(s.value=(c=l.options.find(d=>d.value===o))!=null?c:null)});function r(o){t("update:modelValue",o.value)}return(o,c)=>(_(),q("div",js,[f(n)?(_(),q("span",Hs,[(_(),x(fe(f(n))))])):L("",!0),a(f(Ln),{options:e.options,modelValue:s.value,"onUpdate:modelValue":[c[0]||(c[0]=d=>s.value=d),r],min:1,"label-by":"label",placeholder:e.placeholder,"close-on-select":e.closeOnSelect},null,8,["options","modelValue","placeholder","close-on-select"])]))}});const Ws={class:"field"},zs=H({props:{title:null,modelValue:{type:Boolean}},emits:["update:modelValue"],setup(e,{emit:t}){const l=e,n=b(()=>j(f(l.title)||"<span></span>","span")),s=b({get(){return!!l.modelValue},set(r){t("update:modelValue",r)}});return(r,u)=>(_(),q("label",Ws,[Ne(g("input",{type:"checkbox",class:"toggle","onUpdate:modelValue":u[0]||(u[0]=o=>Be(s)?s.value=o:null)},null,512),[[qn,f(s)]]),(_(),x(fe(f(n))))]))}});var vt=te(zs,[["__scopeId","data-v-2b109500"]]);const bn=e=>(bt("data-v-bc13791c"),e=e(),wt(),e),Ys=bn(()=>g("div",{class:"header"},[g("h2",null,"Options")],-1)),Zs=bn(()=>g("hr",null,null,-1));var Ks=H({setup(e,{expose:t}){const l=U(!1);t({open(){l.value=!0}});const n=Object.keys(Zt).map(v=>({label:on(v),value:v})),s=b(()=>j(B(()=>a(V,null,[mn.map(G)])))),{showTPS:r,theme:u,unthrottled:o}=be(de),{autosave:c,offlineProd:d}=be(R),h=b({get(){return R.devSpeed===0},set(v){R.devSpeed=v?0:null}}),w=B(()=>a("span",null,[m("Offline Production"),a(Ce,{display:"Save-specific"},{default:()=>[m("*")]})])),p=B(()=>a("span",null,[m("Autosave"),a(Ce,{display:"Save-specific"},{default:()=>[m("*")]})])),y=B(()=>a("span",null,[m("Pause game"),a(Ce,{display:"Save-specific"},{default:()=>[m("*")]})]));return(v,M)=>(_(),x(At,{modelValue:l.value,"onUpdate:modelValue":M[6]||(M[6]=C=>l.value=C)},{header:z(()=>[Ys]),body:z(()=>[a(Vl,{title:"Theme",options:f(n),modelValue:f(u),"onUpdate:modelValue":M[0]||(M[0]=C=>Be(u)?u.value=C:null)},null,8,["options","modelValue"]),(_(),x(fe(f(s)))),a(vt,{title:"Show TPS",modelValue:f(r),"onUpdate:modelValue":M[1]||(M[1]=C=>Be(r)?r.value=C:null)},null,8,["modelValue"]),Zs,a(vt,{title:"Unthrottled",modelValue:f(o),"onUpdate:modelValue":M[2]||(M[2]=C=>Be(o)?o.value=C:null)},null,8,["modelValue"]),a(vt,{title:f(w),modelValue:f(d),"onUpdate:modelValue":M[3]||(M[3]=C=>Be(d)?d.value=C:null)},null,8,["title","modelValue"]),a(vt,{title:f(p),modelValue:f(c),"onUpdate:modelValue":M[4]||(M[4]=C=>Be(c)?c.value=C:null)},null,8,["title","modelValue"]),f(se).enablePausing?(_(),x(vt,{key:0,title:f(y),modelValue:f(h),"onUpdate:modelValue":M[5]||(M[5]=C=>Be(h)?h.value=C:null)},null,8,["title","modelValue"])):L("",!0)]),_:1},8,["modelValue"]))}});var Js=te(Ks,[["__scopeId","data-v-bc13791c"]]);const Xs=["onSubmit"],Qs={class:"field"},ea={key:0,class:"field-title"},ta=["placeholder"],la=H({props:{title:null,modelValue:null,textArea:{type:Boolean},placeholder:null,maxHeight:null},emits:["update:modelValue","submit"],setup(e,{emit:t}){const n=be(e),s=b(()=>{var c;return((c=n.title)==null?void 0:c.value)&&j(f(n.title.value),"span")}),r=U(null);wl(()=>{var c;(c=r.value)==null||c.focus()});const u=b({get(){return f(n.modelValue)||""},set(c){t("update:modelValue",c)}});function o(){t("submit")}return(c,d)=>(_(),q("form",{onSubmit:ll(o,["prevent"])},[g("div",Qs,[f(s)?(_(),q("span",ea,[(_(),x(fe(f(s))))])):L("",!0),e.textArea?(_(),x(f(Un),{key:1,modelValue:f(u),"onUpdate:modelValue":d[0]||(d[0]=h=>Be(u)?u.value=h:null),placeholder:e.placeholder,maxHeight:e.maxHeight,onBlur:o,ref_key:"field",ref:r},null,8,["modelValue","placeholder","maxHeight"])):Ne((_(),q("input",{key:2,type:"text","onUpdate:modelValue":d[1]||(d[1]=h=>Be(u)?u.value=h:null),placeholder:e.placeholder,class:ye({fullWidth:!e.title}),onBlur:o,ref_key:"field",ref:r},null,42,ta)),[[An,f(u)]])])],40,Xs))}});var wn=te(la,[["__scopeId","data-v-d74adb0a"]]);const na={key:0},ia=["onClick","disabled"],sa={key:0},aa=["onClick"],ra=H({props:{disabled:{type:Boolean},skipConfirm:{type:Boolean},forceOnClick:null,customDisplay:null},emits:["click","confirmingChanged"],setup(e,{emit:t}){const n=be(e),s=U(!1);nt(s,o=>{t("confirmingChanged",o)});function r(){var o,c,d,h;if(f(n.skipConfirm)){t("click"),(c=(o=n==null?void 0:n.forceOnClick)==null?void 0:o.value)==null||c.call(o);return}s.value&&(t("click"),(h=(d=n==null?void 0:n.forceOnClick)==null?void 0:d.value)==null||h.call(d)),s.value=!s.value}function u(){s.value=!1}return(o,c)=>(_(),q("span",{class:ye(["container",{confirming:s.value}])},[s.value?(_(),q("span",na,ne(e.customDisplay?e.customDisplay:"Are you sure?"),1)):L("",!0),g("button",{onClick:ll(r,["stop"]),class:"button danger",disabled:e.disabled},[s.value?(_(),q("span",sa,"Yes")):Mt(o.$slots,"default",{key:1},void 0,!0)],8,ia),s.value?(_(),q("button",{key:1,class:"button",onClick:ll(u,["stop"])},"No",8,aa)):L("",!0)],2))}});var Nn=te(ra,[["__scopeId","data-v-1f8c0899"]]);const oa=["onClick"],ua=H({props:{left:{type:Boolean}},emits:["click"],setup(e,{emit:t}){const l=U(!1),n=U(null);function s(){t("click"),n.value&&clearTimeout(n.value),l.value=!1,ht(()=>{l.value=!0,n.value=setTimeout(()=>l.value=!1,500)})}return(r,u)=>(_(),q("button",{onClick:ll(s,["stop"]),class:ye(["feedback",{activated:l.value,left:e.left}])},[Mt(r.$slots,"default",{},void 0,!0)],10,oa))}});var ca=te(ua,[["__scopeId","data-v-01a1b95c"]]);const Nt=e=>(bt("data-v-0136bef4"),e=e(),wt(),e),da=Nt(()=>g("div",{class:"handle material-icons"},"drag_handle",-1)),fa={key:0,class:"actions"},ma=Nt(()=>g("span",{class:"material-icons"},"content_paste",-1)),pa=Nt(()=>g("span",{class:"material-icons"},"content_copy",-1)),va=Nt(()=>g("span",{class:"material-icons"},"edit",-1)),ga=Nt(()=>g("span",{class:"material-icons",style:{margin:"-2px"}},"delete",-1)),ha={key:1,class:"actions"},ya=Nt(()=>g("span",{class:"material-icons"},"check",-1)),ba=Nt(()=>g("span",{class:"material-icons"},"close",-1)),wa={key:2,class:"details"},Na={class:"save-version"},_a=Nt(()=>g("br",null,null,-1)),ka={key:0},Ca={key:3,class:"details"},Sa={key:4,class:"details error"},Ma=Nt(()=>g("br",null,null,-1)),Pa=H({props:{save:null},emits:["export","open","duplicate","delete","editName"],setup(e,{emit:t}){const l=e,{save:n}=be(l),s=new Intl.DateTimeFormat("en-US",{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}),r=U(!1),u=U(!1),o=U("");nt(r,()=>o.value=n.value.name||"");const c=b(()=>n.value&&n.value.id===R.id),d=b(()=>c.value?R.time:n.value&&n.value.time||0);function h(){t("editName",o.value),r.value=!1}return(w,p)=>(_(),q("div",{class:ye(["save",{active:f(c)}])},[da,r.value?(_(),q("div",ha,[g("button",{onClick:h,class:"button"},[a(Ce,{display:"Save",direction:f(X).Left,class:"info"},{default:z(()=>[ya]),_:1},8,["direction"])]),g("button",{onClick:p[5]||(p[5]=y=>r.value=!r.value),class:"button"},[a(Ce,{display:"Cancel",direction:f(X).Left,class:"info"},{default:z(()=>[ba]),_:1},8,["direction"])])])):(_(),q("div",fa,[f(n).error==null&&!u.value?(_(),x(ca,{key:0,onClick:p[0]||(p[0]=y=>t("export")),class:"button",left:""},{default:z(()=>[a(Ce,{display:"Export",direction:f(X).Left,class:"info"},{default:z(()=>[ma]),_:1},8,["direction"])]),_:1})):L("",!0),f(n).error==null&&!u.value?(_(),q("button",{key:1,onClick:p[1]||(p[1]=y=>t("duplicate")),class:"button"},[a(Ce,{display:"Duplicate",direction:f(X).Left,class:"info"},{default:z(()=>[pa]),_:1},8,["direction"])])):L("",!0),f(n).error==null&&!u.value?(_(),q("button",{key:2,onClick:p[2]||(p[2]=y=>r.value=!r.value),class:"button"},[a(Ce,{display:"Edit Name",direction:f(X).Left,class:"info"},{default:z(()=>[va]),_:1},8,["direction"])])):L("",!0),a(Nn,{disabled:f(c),onClick:p[3]||(p[3]=y=>t("delete")),onConfirmingChanged:p[4]||(p[4]=y=>u.value=y)},{default:z(()=>[a(Ce,{display:"Delete",direction:f(X).Left,class:"info"},{default:z(()=>[ga]),_:1},8,["direction"])]),_:1},8,["disabled"])])),f(n).error==null&&!r.value?(_(),q("div",wa,[g("button",{class:"button open",onClick:p[6]||(p[6]=y=>t("open"))},[g("h3",null,ne(f(n).name),1)]),g("span",Na,"v"+ne(f(n).modVersion),1),_a,f(d)?(_(),q("div",ka,"Last played "+ne(f(s).format(f(d))),1)):L("",!0)])):f(n).error==null&&r.value?(_(),q("div",Ca,[a(wn,{modelValue:o.value,"onUpdate:modelValue":p[7]||(p[7]=y=>o.value=y),class:"editname",onSubmit:h},null,8,["modelValue"])])):(_(),q("div",Sa,[m(" Error: Failed to load save with id "+ne(f(n).id),1),Ma,m(ne(f(n).error),1)]))],2))}});var Ia=te(Pa,[["__scopeId","data-v-0136bef4"]]);const Ll=e=>(bt("data-v-3b9991aa"),e=e(),wt(),e),$a=Ll(()=>g("h2",null,"Saves Manager",-1)),Ta={class:"modal-footer"},Ea={class:"field"},Da=Ll(()=>g("span",{class:"field-title"},"Create Save",-1)),Ba={class:"field-buttons"},qa={class:"footer"},Aa=Ll(()=>g("div",{style:{"flex-grow":"1"}},null,-1)),Fa=H({setup(e,{expose:t}){const l=U(!1),n=U(null);t({open(){l.value=!0}});const s=U(!1),r=U(""),u=U(null);nt(r,I=>{I?ht(()=>{try{if(I[0]!=="{")if(I[0]==="e")I=decodeURIComponent(escape(atob(I)));else if(I[0]==="\u1BE1")I=Ct.decompressFromUTF16(I);else{console.warn("Unable to determine preset encoding",I),s.value=!0;return}const D=JSON.parse(I);if(typeof D!="object"){s.value=!0;return}const A=ml();D.id=A,at(D),r.value="",s.value=!1,de.saves.push(A)}catch{s.value=!0}}):s.value=!1});let o={},c=U(Object.keys(o).reduce((I,D)=>(I.push({label:D.split("/").slice(-1)[0].slice(0,-4),value:o[D]}),I),[]));const d=El({});function h(I){if(d[I]==null){let D=localStorage.getItem(I);if(D==null)d[I]={error:"Save doesn't exist in localStorage",id:I};else if(D==="dW5kZWZpbmVk")d[I]={error:"Save is undefined",id:I};else try{if(D[0]!=="{")if(D[0]==="e")D=decodeURIComponent(escape(atob(D)));else if(D[0]==="\u1BE1")D=Ct.decompressFromUTF16(D);else return console.warn("Unable to determine preset encoding",D),s.value=!0,d[I]={error:"Unable to determine preset encoding",id:I},d[I];d[I]={...JSON.parse(D),id:I}}catch(A){d[I]={error:A,id:I},console.warn(`SavesManager: Failed to load info about save with id ${I}:
${A}
${D}`)}}return d[I]}nt(l,I=>{I&&Object.keys(d).forEach(D=>delete d[D])});const w=b(()=>de.saves.reduce((I,D)=>(I[D]=h(D),I),{}));function p(I){let D;switch(R.id===I?D=cn(R[ke]):D=JSON.stringify(w.value[I]),se.exportEncoding){default:console.warn(`Unknown save encoding: ${se.exportEncoding}. Defaulting to lz`);case"lz":D=Ct.compressToUTF16(D);break;case"base64":D=btoa(unescape(encodeURIComponent(D)));break;case"plain":break}const A=document.createElement("textarea");A.value=D,document.body.appendChild(A),A.select(),A.setSelectionRange(0,99999),document.execCommand("copy"),document.body.removeChild(A)}function y(I){R.id===I&&at();const D={...w.value[I],id:ml()};at(D),de.saves.push(D.id)}function v(I){de.saves=de.saves.filter(D=>D!==I),localStorage.removeItem(I),d[I]=void 0}function M(I){w.value[R.id].time=R.time,at(),d[R.id]=void 0,qt(w.value[I]),d[I]=void 0}function C(I){if(u.value=I,ht(()=>{u.value=null}),I[0]!=="{")if(I[0]==="e")I=decodeURIComponent(escape(atob(I)));else if(I[0]==="\u1BE1")I=Ct.decompressFromUTF16(I);else{console.warn("Unable to determine preset encoding",I);return}const D=JSON.parse(I);D.id=ml(),at(D),de.saves.push(D.id),M(D.id)}function P(I,D){const A=w.value[I];A&&(A.name=D,R.id===I?(R.name=D,at()):(at(A),d[I]=void 0))}return(I,D)=>(_(),x(At,{modelValue:l.value,"onUpdate:modelValue":D[4]||(D[4]=A=>l.value=A),ref_key:"modal",ref:n},{header:z(()=>[$a]),body:z(({shown:A})=>[A?(_(),x(f(Gn),{key:0,list:f(de).saves,handle:".handle",itemKey:ue=>ue},{item:z(({element:ue})=>[a(Ia,{save:f(w)[ue],onOpen:Q=>M(ue),onExport:Q=>p(ue),onEditName:Q=>P(ue,Q),onDuplicate:Q=>y(ue),onDelete:Q=>v(ue)},null,8,["save","onOpen","onExport","onEditName","onDuplicate","onDelete"])]),_:1},8,["list","itemKey"])):L("",!0)]),footer:z(()=>[g("div",Ta,[a(wn,{modelValue:r.value,"onUpdate:modelValue":D[0]||(D[0]=A=>r.value=A),title:"Import Save",placeholder:"Paste your save here!",class:ye({importingFailed:s.value})},null,8,["modelValue","class"]),g("div",Ea,[Da,g("div",Ba,[g("button",{class:"button",onClick:D[1]||(D[1]=A=>M(f(Ht)().id))},"New Game"),Object.keys(f(c)).length>0?(_(),x(Vl,{key:0,options:f(c),modelValue:u.value,"onUpdate:modelValue":D[2]||(D[2]=A=>C(A)),closeOnSelect:"",placeholder:"Select preset",class:"presets"},null,8,["options","modelValue"])):L("",!0)])]),g("div",qa,[Aa,g("button",{class:"button modal-default-button",onClick:D[3]||(D[3]=A=>l.value=!1)}," Close ")])])]),_:1},8,["modelValue"]))}});var _n=te(Fa,[["__scopeId","data-v-3b9991aa"]]);const Ze=e=>(bt("data-v-4a3f8425"),e=e(),wt(),e),Oa=["src","alt"],Ra={key:1,class:"title"},Va=Ze(()=>g("div",{style:{"flex-grow":"1",cursor:"unset"}},null,-1)),La={class:"discord"},Ga={class:"discord-links"},Ua={key:0},xa=["href"],ja=Ze(()=>g("li",null,[g("a",{href:"https://discord.gg/WzejVAx",target:"_blank"},"The Paper Pilot Community")],-1)),Ha=Ze(()=>g("li",null,[g("a",{href:"https://discord.gg/F3xveHV",target:"_blank"},"The Modding Tree")],-1)),Wa={href:"https://forums.moddingtree.com/",target:"_blank"},za=Ze(()=>g("span",{class:"material-icons"},"forum",-1)),Ya=Ze(()=>g("span",{class:"material-icons"},"info",-1)),Za=Ze(()=>g("span",{class:"material-icons"},"library_books",-1)),Ka=Ze(()=>g("span",{class:"material-icons"},"settings",-1)),Ja=Ze(()=>g("span",{class:"material-icons"},"library_books",-1)),Xa=Ze(()=>g("span",{class:"material-icons"},"settings",-1)),Qa=Ze(()=>g("span",{class:"material-icons"},"info",-1)),er={href:"https://forums.moddingtree.com/",target:"_blank"},tr=Ze(()=>g("span",{class:"material-icons"},"forum",-1)),lr={class:"discord"},nr={class:"discord-links"},ir={key:0},sr=["href"],ar=Ze(()=>g("li",null,[g("a",{href:"https://discord.gg/WzejVAx",target:"_blank"},"The Paper Pilot Community")],-1)),rr=Ze(()=>g("li",null,[g("a",{href:"https://discord.gg/F3xveHV",target:"_blank"},"The Modding Tree")],-1)),or=H({setup(e){const t=U(null),l=U(null),n=U(null),s=U(null),{useHeader:r,banner:u,title:o,discordName:c,discordLink:d,versionNumber:h}=se;function w(){window.open(d,"mywindow")}return(p,y)=>(_(),q(V,null,[f(r)?(_(),q("div",yt({key:0,class:"nav"},p.$attrs),[f(u)?(_(),q("img",{key:0,src:f(u),class:"banner",alt:f(o)},null,8,Oa)):(_(),q("div",Ra,ne(f(o)),1)),g("div",{onClick:y[0]||(y[0]=v=>{var M;return(M=s.value)==null?void 0:M.open()}),class:"version-container"},[a(Ce,{display:"Changelog",direction:f(X).Down,class:"version"},{default:z(()=>[g("span",null,"v"+ne(f(h)),1)]),_:1},8,["direction"])]),Va,g("div",La,[g("span",{onClick:w,class:"material-icons"},"discord"),g("ul",Ga,[f(d)?(_(),q("li",Ua,[g("a",{href:f(d),target:"_blank"},ne(f(c)),9,xa)])):L("",!0),ja,Ha])]),g("div",null,[g("a",Wa,[a(Ce,{display:"Forums",direction:f(X).Down,yoffset:"5px"},{default:z(()=>[za]),_:1},8,["direction"])])]),g("div",{onClick:y[1]||(y[1]=v=>{var M;return(M=t.value)==null?void 0:M.open()})},[a(Ce,{display:"Info",direction:f(X).Down,class:"info"},{default:z(()=>[Ya]),_:1},8,["direction"])]),g("div",{onClick:y[2]||(y[2]=v=>{var M;return(M=l.value)==null?void 0:M.open()})},[a(Ce,{display:"Saves",direction:f(X).Down,xoffset:"-20px"},{default:z(()=>[Za]),_:1},8,["direction"])]),g("div",{onClick:y[3]||(y[3]=v=>{var M;return(M=n.value)==null?void 0:M.open()})},[a(Ce,{display:"Options",direction:f(X).Down,xoffset:"-66px"},{default:z(()=>[Ka]),_:1},8,["direction"])])],16)):(_(),q("div",yt({key:1,class:"overlay-nav"},p.$attrs),[g("div",{onClick:y[4]||(y[4]=v=>{var M;return(M=s.value)==null?void 0:M.open()}),class:"version-container"},[a(Ce,{display:"Changelog",direction:f(X).Right,xoffset:"25%",class:"version"},{default:z(()=>[g("span",null,"v"+ne(f(h)),1)]),_:1},8,["direction"])]),g("div",{onClick:y[5]||(y[5]=v=>{var M;return(M=l.value)==null?void 0:M.open()})},[a(Ce,{display:"Saves",direction:f(X).Right},{default:z(()=>[Ja]),_:1},8,["direction"])]),g("div",{onClick:y[6]||(y[6]=v=>{var M;return(M=n.value)==null?void 0:M.open()})},[a(Ce,{display:"Options",direction:f(X).Right},{default:z(()=>[Xa]),_:1},8,["direction"])]),g("div",{onClick:y[7]||(y[7]=v=>{var M;return(M=t.value)==null?void 0:M.open()})},[a(Ce,{display:"Info",direction:f(X).Right},{default:z(()=>[Qa]),_:1},8,["direction"])]),g("div",null,[g("a",er,[a(Ce,{display:"Forums",direction:f(X).Right,xoffset:"7px"},{default:z(()=>[tr]),_:1},8,["direction"])])]),g("div",lr,[g("span",{onClick:w,class:"material-icons"},"discord"),g("ul",nr,[f(d)?(_(),q("li",ir,[g("a",{href:f(d),target:"_blank"},ne(f(c)),9,sr)])):L("",!0),ar,rr])])],16)),a(xs,{ref_key:"info",ref:t,changelog:s.value},null,8,["changelog"]),a(_n,{ref_key:"savesManager",ref:l},null,512),a(Js,{ref_key:"options",ref:n},null,512),a(Cs,{ref_key:"changelog",ref:s},null,512)],64))}});var kn=te(or,[["__scopeId","data-v-4a3f8425"]]);const ur={class:"inner-tab"},cr=H({setup(e){const t=Pt(R,"tabs"),l=b(()=>Object.keys(xe)),n=se.useHeader;function s(r){const{display:u,minimized:o,minWidth:c,name:d,color:h,minimizable:w,nodes:p}=r;return{display:u,minimized:o,minWidth:c,name:d,color:h,minimizable:w,nodes:p}}return(r,u)=>(_(),q("div",{class:ye(["tabs-container",{useHeader:f(n)}])},[(_(!0),q(V,null,nl(f(t),(o,c)=>{var d,h;return _(),q("div",{key:c,class:ye(["tab",f((d=f(xe)[o])==null?void 0:d.classes)]),ref_for:!0,ref:`tab-${c}`,style:oe(f((h=f(xe)[o])==null?void 0:h.style))},[c===0&&!f(n)?(_(),x(kn,{key:0})):L("",!0),g("div",ur,[f(l).includes(o)?(_(),x(cs,yt({key:0},s(f(xe)[o]),{index:c,tab:()=>{var w;return(w=r.$refs[`tab-${c}`])==null?void 0:w[0]}}),null,16,["index","tab"])):(_(),x(fe(o),{key:1,index:c},null,8,["index"]))])],6)}),128))],2))}});var dr=te(cr,[["__scopeId","data-v-4cb9ce0f"]]);const fr=H({props:{width:{default:"8px"},height:{default:"17px"}},setup(e){return(t,l)=>(_(),q("div",{style:oe({width:e.width,height:e.height})},null,4))}});function _l(e){return Oe(()=>{const t=e();return t.currentGain==null&&(t.currentGain=b(()=>{let l=t.gainModifier?t.gainModifier.apply(t.scaling.currentGain(t)):t.scaling.currentGain(t);return l=i.floor(l).max(0),f(t.buyMax)||(l=l.min(1)),l})),t.actualGain==null&&(t.actualGain=t.currentGain),t.currentAt==null&&(t.currentAt=b(()=>{let l=t.scaling.currentAt(t);return t.roundUpCost&&(l=i.ceil(l)),l})),t.nextAt==null&&(t.nextAt=b(()=>{let l=t.scaling.nextAt(t);return t.roundUpCost&&(l=i.ceil(l)),l})),t.convert==null&&(t.convert=function(){const l=f(t.currentGain);t.gainResource.value=i.add(t.gainResource.value,l),kl(t.baseResource)&&(t.baseResource.value=0)}),k(t,"currentGain"),k(t,"actualGain"),k(t,"currentAt"),k(t,"nextAt"),k(t,"buyMax"),ee(t,"buyMax",!0),k(t,"roundUpCost"),ee(t,"roundUpCost",!0),t})}function kl(e){return e.precision!==void 0}function It(e,t){const l=jt(e),n=jt(t);return{currentGain(s){let r=f(s.baseResource.value);if(s.costModifier&&(r=s.costModifier.apply(r)),i.lt(r,f(l)))return 0;const u=i.div(r,f(l)).pow(f(n));return u.isNan()?new i(0):u},currentAt(s){var u,o,c;let r=f(s.currentGain);return s.gainModifier&&(r=s.gainModifier.revert(r)),r=i.max(0,r).root(f(n)).times(f(l)),s.costModifier&&(r=(c=(o=(u=s.costModifier)==null?void 0:u.revert)==null?void 0:o.call(u,r))!=null?c:r),r},nextAt(s){var u,o,c;let r=i.add(f(s.currentGain),1).floor();return s.gainModifier&&(r=s.gainModifier.revert(r)),r=i.max(0,r).root(f(n)).times(f(l)).max(f(l)),s.costModifier&&(r=(c=(o=(u=s.costModifier)==null?void 0:u.revert)==null?void 0:o.call(u,r))!=null?c:r),r}}}function $t(e){return _l(e)}function mr(e){return _l(()=>{const t=e();return ee(t,"buyMax",!1),t.currentGain==null&&(t.currentGain=b(()=>{let l=t.gainModifier?t.gainModifier.apply(t.scaling.currentGain(t)):t.scaling.currentGain(t);return l=i.floor(l).max(t.gainResource.value),f(t.buyMax)||(l=l.min(i.add(t.gainResource.value,1))),l})),t.actualGain==null&&(t.actualGain=b(()=>{let l=i.sub(i.floor(t.scaling.currentGain(t)),t.gainResource.value).max(0);return f(t.buyMax)||(l=l.min(1)),l})),ee(t,"convert",function(){f(t.actualGain),t.gainResource.value=t.gainModifier?t.gainModifier.apply(f(t.currentGain)):f(t.currentGain),kl(t.baseResource)&&(t.baseResource.value=0)}),t})}function K(e,t="points",l=0,n=void 0){const s=Be(e)?e:je(e);return s.displayName=t,s.precision=l,s.small=n,s}function ct(e){const t=je(e.value);return nt(e,l=>{i.gt(l,t.value)&&(t.value=l)}),t}function pr(e){const t=je(e.value);return nt(e,(l,n)=>{i.gt(l,n)&&(t.value=i.add(t.value,i.sub(l,n)))}),t}const vr=new i("10^^8"),gr=new i("1e100");function hr(e,t){const l=U(0),n=U(0),s=U(0);return me.on("update",u=>{if(n.value=0,i.lte(e.value,gr)){s.value=e.value;return}let o=e.value,c=s.value;if(s.value=o,i.gt(o,c))if(i.gte(o,vr))o=i.slog(o,1e10),c=i.slog(c,1e10),l.value=o.sub(c).div(u),n.value=-1;else for(;i.div(o,c).log(10).div(u).gte("100")&&n.value<=5&&i.gt(c,0);)o=i.log10(o),c=i.log10(c),l.value=o.sub(c).div(u),n.value++}),b(()=>n.value===0?t?F(t.value,e.precision,e.small)+" "+e.displayName+"/s":"":F(l.value)+" OOM"+(n.value<0?"^OOM":"^"+n.value)+"s/sec")}function ot(e,t){const l=t!=null?t:e.value;return i.eq(e.precision,0)?re(l):F(l,e.precision,e.small)}function yr(e,t){if(kl(e))return ot(e,t);{const l=t!=null?t:e.value;return F(l)}}const br=["x1","y1","x2","y2"],wr=H({props:{link:null,startNode:null,endNode:null,boundingRect:null},setup(e){const l=be(e),n=b(()=>{const r=l.startNode.value.rect,u=l.boundingRect.value,o=u?{x:r.x+r.width/2-u.x,y:r.y+r.height/2-u.y}:{x:0,y:0};return l.link.value.offsetStart&&(o.x+=l.link.value.offsetStart.x,o.y+=l.link.value.offsetStart.y),o}),s=b(()=>{const r=l.endNode.value.rect,u=l.boundingRect.value,o=u?{x:r.x+r.width/2-u.x,y:r.y+r.height/2-u.y}:{x:0,y:0};return l.link.value.offsetEnd&&(o.x+=l.link.value.offsetEnd.x,o.y+=l.link.value.offsetEnd.y),o});return(r,u)=>(_(),q("line",yt({"stroke-width":"15px",stroke:"white"},e.link,{x1:f(n).x,y1:f(n).y,x2:f(s).x,y2:f(s).y}),null,16,br))}});const Nr=H({props:{links:null},setup(e){var c;const l=Pt(e,"links"),n=U(null),s=pl(Ol,U({})),r=pl(Rl,U(void 0)),u=U((c=n.value)==null?void 0:c.getBoundingClientRect());nt(r,()=>{var d;return u.value=(d=n.value)==null?void 0:d.getBoundingClientRect()}),wl(()=>{var d;return u.value=(d=n.value)==null?void 0:d.getBoundingClientRect()});const o=b(()=>{var h,w;const d=s.value;return(w=(h=l.value)==null?void 0:h.filter(p=>{var y,v;return((y=d[p.startNode.id])==null?void 0:y.rect)&&((v=d[p.startNode.id])==null?void 0:v.rect)}))!=null?w:[]});return(d,h)=>(_(),q(V,null,[f(o)?(_(),q("svg",Fn(yt({key:0},d.$attrs)),[(_(!0),q(V,null,nl(f(o),(w,p)=>(_(),x(wr,{key:p,link:w,boundingRect:u.value,startNode:f(s)[w.startNode.id],endNode:f(s)[w.endNode.id]},null,8,["link","boundingRect","startNode","endNode"]))),128))],16)):L("",!0),g("div",{ref_key:"resizeListener",ref:n,class:"resize-listener"},null,512)],64))}});var _r=te(Nr,[["__scopeId","data-v-063f6d6b"]]),kr=H({props:{nodes:{type:E(Array),required:!0},leftSideNodes:E(Array),rightSideNodes:E(Array),branches:E(Array)},components:{Links:_r},setup(e){const{nodes:t,leftSideNodes:l,rightSideNodes:n}=be(e),s=tt();lt(()=>{const o=ge(t);s.value=j(B(()=>a(V,null,[o.map(c=>a("span",{class:"row tree-row",style:"margin: 50px auto;"},[c.map(gt)]))])))});const r=tt();lt(()=>{const o=ge(l);r.value=o?j(B(()=>a("span",{class:"left-side-nodes small"},[o.map(gt)]))):""});const u=tt();return lt(()=>{const o=ge(n);u.value=o?j(B(()=>a("span",{class:"side-nodes small"},[o.map(gt)]))):""}),{unref:f,nodesComp:s,leftNodesComp:r,rightNodesComp:u}}});function Cr(e,t,l,n,s,r){const u=De("Links");return _(),q(V,null,[(_(),x(fe(e.nodesComp))),e.leftNodesComp?(_(),x(fe(e.leftNodesComp),{key:0})):L("",!0),e.rightNodesComp?(_(),x(fe(e.rightNodesComp),{key:1})):L("",!0),e.branches?(_(),x(u,{key:2,links:e.unref(e.branches)},null,8,["links"])):L("",!0)],64)}var Sr=te(kr,[["render",Cr],["__scopeId","data-v-39ca96d0"]]);const Mr={key:0},Pr={key:0,class:"mark star"},Ir=["src"],$r=H({props:{mark:{type:[Boolean,String]}},setup(e){return(t,l)=>e.mark?(_(),q("div",Mr,[e.mark===!0?(_(),q("div",Pr)):(_(),q("img",{key:1,class:"mark",src:e.mark},null,8,Ir))])):L("",!0)}});var ol=te($r,[["__scopeId","data-v-2207999f"]]);const Tr=H({props:{id:null},setup(e){const l=be(e),n=pl(Al,()=>{}),s=pl(Fl,()=>{}),r=U(null),u=b(()=>r.value&&r.value.parentElement);return nt([u,l.id],([o,c],[d,h])=>{d&&s(f(h)),o&&n(c,o)}),en(()=>s(f(l.id))),(o,c)=>(_(),q("div",{class:"node",ref_key:"node",ref:r},null,512))}});var Tt=te(Tr,[["__scopeId","data-v-2cb1bb79"]]);const Er=H({props:{display:E(Object,String,Function),visibility:{type:E(Number),required:!0},style:E(String,Object,Array),classes:E(Object),onClick:Function,onHold:Function,color:E(String),glowColor:E(String),canClick:{type:E(Boolean),required:!0},mark:E(Boolean,String),id:{type:String,required:!0}},components:{MarkNode:ol,Node:Tt},setup(e){const{onClick:t,onHold:l,display:n}=be(e),s=Kt(n),{start:r,stop:u}=ql(t,l);return{start:r,stop:u,comp:s,unref:f,Visibility:$,isCoercableComponent:ze}}});function Dr(e,t,l,n,s,r){var c;const u=De("MarkNode"),o=De("Node");return e.unref(e.visibility)!==e.Visibility.None?(_(),q("div",{key:0,style:oe({visibility:e.unref(e.visibility)===e.Visibility.Hidden?"hidden":void 0}),class:ye({treeNode:!0,can:e.unref(e.canClick),...e.unref(e.classes)}),onClick:t[0]||(t[0]=(...d)=>e.onClick&&e.onClick(...d)),onMousedown:t[1]||(t[1]=(...d)=>e.start&&e.start(...d)),onMouseleave:t[2]||(t[2]=(...d)=>e.stop&&e.stop(...d)),onMouseup:t[3]||(t[3]=(...d)=>e.stop&&e.stop(...d)),onTouchstartPassive:t[4]||(t[4]=(...d)=>e.start&&e.start(...d)),onTouchendPassive:t[5]||(t[5]=(...d)=>e.stop&&e.stop(...d)),onTouchcancelPassive:t[6]||(t[6]=(...d)=>e.stop&&e.stop(...d))},[g("div",{style:oe([{backgroundColor:e.unref(e.color),boxShadow:`-4px -4px 4px rgba(0, 0, 0, 0.25) inset, 0 0 20px ${e.unref(e.glowColor)}`},(c=e.unref(e.style))!=null?c:[]])},[(_(),x(fe(e.unref(e.comp))))],4),a(u,{mark:e.unref(e.mark)},null,8,["mark"]),a(o,{id:e.id},null,8,["id"])],38)):L("",!0)}var Br=te(Er,[["render",Dr],["__scopeId","data-v-1c0c107d"]]);const qr=Symbol("TreeNode"),Ar=Symbol("Tree");function Cn(e){return Oe(()=>{var l;const t=(l=e==null?void 0:e())!=null?l:{};if(t.id=He("treeNode-"),t.type=qr,t[Ee]=Br,k(t,"visibility"),ee(t,"visibility",$.Visible),k(t,"canClick"),ee(t,"canClick",!0),k(t,"color"),k(t,"display"),k(t,"glowColor"),k(t,"classes"),k(t,"style"),k(t,"mark"),t.onClick){const n=t.onClick.bind(t);t.onClick=function(){f(t.canClick)&&n()}}if(t.onHold){const n=t.onHold.bind(t);t.onHold=function(){f(t.canClick)&&n()}}return t[qe]=function(){const{display:n,visibility:s,style:r,classes:u,onClick:o,onHold:c,color:d,glowColor:h,canClick:w,mark:p,id:y}=this;return{display:n,visibility:s,style:r,classes:u,onClick:o,onHold:c,color:d,glowColor:h,canClick:w,mark:p,id:y}},t})}function Fr(e){return Oe(()=>{const t=e();return t.id=He("tree-"),t.type=Ar,t[Ee]=Sr,t.isResetting=U(!1),t.resettingNode=tt(null),t.reset=function(l){var s,r;const n=t;n.isResetting.value=!0,n.resettingNode.value=l,(s=n.resetPropagation)==null||s.call(n,n,l),(r=n.onReset)==null||r.call(n,l),n.isResetting.value=!1,n.resettingNode.value=null},t.links=b(()=>{var n;return(n=f(t.branches))!=null?n:[]}),k(t,"visibility"),ee(t,"visibility",$.Visible),k(t,"nodes"),k(t,"leftSideNodes"),k(t,"rightSideNodes"),k(t,"branches"),t[qe]=function(){const{nodes:l,leftSideNodes:n,rightSideNodes:s,branches:r}=this;return{nodes:l,leftSideNodes:n,rightSideNodes:s,branches:r}},t})}const Or=function(e,t){const l=f(e.nodes),n=l.findIndex(s=>s.includes(t))-1;for(let s=n;s>=0;s--)l[s].forEach(r=>{var u;return(u=r.reset)==null?void 0:u.reset()})};function dt(e,t=null,l=0){const n=jt(l);return b(()=>t==null||i.gte(e.value,f(n))?ot(e)+" "+e.displayName:`Reach ${i.eq(t.precision,0)?re(f(n)):F(f(n),t.precision)} ${t.displayName} to unlock (You have ${i.eq(t.precision,0)?re(t.value):F(t.value,t.precision)})`)}const Rr=Symbol("Reset");function Ye(e){return Oe(()=>{const t=e();return t.id=He("reset-"),t.type=Rr,t.reset=function(){var n;const l=s=>{s&&typeof s=="object"&&(Yt in s?s[Yt].value=s[al]:!(s instanceof i)&&!Be(s)&&Object.values(s).forEach(r=>l(r)))};f(t.thingsToReset).forEach(l),me.emit("reset",t),(n=t.onReset)==null||n.call(t)},k(t,"thingsToReset"),t})}const dl={};me.on("removeLayer",e=>{var t;(t=dl[e.id])==null||t.call(dl),dl[e.id]=void 0});const Vr=H({setup(e){const t=U("0"),l=new ResizeObserver(s),n=U(null);function s(){let r=n.value;if(r==null)return;let u=0;for(;r.previousSibling;){const o=r.previousSibling;o.dataset&&"vSticky"in o.dataset&&(u+=o.offsetHeight),r=o}t.value=u+"px"}return ht(s),document.fonts.ready.then(s),wl(()=>{var u;const r=(u=n.value)==null?void 0:u.parentElement;r&&l.observe(r)}),(r,u)=>(_(),q("div",{class:"sticky",style:oe({top:t.value}),ref_key:"element",ref:n,"data-v-sticky":""},[Mt(r.$slots,"default",{},void 0,!0)],4))}});var Sn=te(Vr,[["__scopeId","data-v-21495571"]]);const Lr=H({props:{resource:null,color:null},setup(e){const t=e,l=b(()=>ot(t.resource));return(n,s)=>(_(),q("h2",{style:oe({color:e.color,"text-shadow":"0px 0px 10px "+e.color})},ne(f(l)),5))}});const Gr={class:"main-display"},Ur={key:0},xr={key:1},jr=m(", "),ft=H({props:{resource:null,color:null,classes:null,style:null,effectDisplay:null},setup(e){const l=be(e),n=U(null),s=Kt(l.effectDisplay),r=b(()=>i.lt(l.resource.value,"1e1000"));return(u,o)=>(_(),x(Sn,null,{default:z(()=>{var c,d;return[g("div",{class:"main-display-container",style:oe({height:`${((d=(c=n.value)==null?void 0:c.$el.clientHeight)!=null?d:0)+50}px`})},[g("div",Gr,[f(r)?(_(),q("span",Ur,"You have ")):L("",!0),a(Lr,{resource:e.resource,color:e.color||"white"},null,8,["resource","color"]),m(" "+ne(e.resource.displayName),1),f(s)?(_(),q("span",xr,[jr,(_(),x(fe(f(s)),{ref_key:"effectRef",ref:n},null,512))])):L("",!0)])],4)]}),_:1}))}});var Hr=H({props:{display:{type:E(Object,String,Function),required:!0},visibility:{type:E(Number),required:!0},style:E(Object,String,Array),classes:E(Object),onClick:Function,onHold:Function,canClick:{type:E(Boolean),required:!0},small:Boolean,mark:E(Boolean,String),id:{type:String,required:!0}},components:{Node:Tt,MarkNode:ol},setup(e){const{display:t,onClick:l,onHold:n}=be(e),s=tt("");lt(()=>{const o=ge(t);if(o==null){s.value="";return}if(ze(o)){s.value=j(o);return}const c=j(o.title||"","h3"),d=j(o.description,"div");s.value=j(B(()=>a("span",null,[o.title?a("div",null,[a(c,null,null)]):null,a(d,null,null)])))});const{start:r,stop:u}=ql(l,n);return{start:r,stop:u,comp:s,Visibility:$,unref:f}}});function Wr(e,t,l,n,s,r){var c;const u=De("MarkNode"),o=De("Node");return e.unref(e.visibility)!==e.Visibility.None?(_(),q("button",{key:0,style:oe([{visibility:e.unref(e.visibility)===e.Visibility.Hidden?"hidden":void 0},(c=e.unref(e.style))!=null?c:[]]),onClick:t[0]||(t[0]=(...d)=>e.onClick&&e.onClick(...d)),onMousedown:t[1]||(t[1]=(...d)=>e.start&&e.start(...d)),onMouseleave:t[2]||(t[2]=(...d)=>e.stop&&e.stop(...d)),onMouseup:t[3]||(t[3]=(...d)=>e.stop&&e.stop(...d)),onTouchstartPassive:t[4]||(t[4]=(...d)=>e.start&&e.start(...d)),onTouchendPassive:t[5]||(t[5]=(...d)=>e.stop&&e.stop(...d)),onTouchcancelPassive:t[6]||(t[6]=(...d)=>e.stop&&e.stop(...d)),class:ye({feature:!0,clickable:!0,can:e.unref(e.canClick),locked:!e.unref(e.canClick),small:e.small,...e.unref(e.classes)})},[e.unref(e.comp)?(_(),x(fe(e.unref(e.comp)),{key:0})):L("",!0),a(u,{mark:e.unref(e.mark)},null,8,["mark"]),a(o,{id:e.id},null,8,["id"])],38)):L("",!0)}var Gl=te(Hr,[["render",Wr],["__scopeId","data-v-5e7c90cf"]]);const zr=Symbol("Clickable");function ut(e){return Oe(()=>{var l;const t=(l=e==null?void 0:e())!=null?l:{};if(t.id=He("clickable-"),t.type=zr,t[Ee]=Gl,k(t,"visibility"),ee(t,"visibility",$.Visible),k(t,"canClick"),ee(t,"canClick",!0),k(t,"classes"),k(t,"style"),k(t,"mark"),k(t,"display"),t.onClick){const n=t.onClick.bind(t);t.onClick=function(s){f(t.canClick)&&n(s)}}if(t.onHold){const n=t.onHold.bind(t);t.onHold=function(){f(t.canClick)&&n()}}return t[qe]=function(){const{display:n,visibility:s,style:r,classes:u,onClick:o,onHold:c,canClick:d,small:h,mark:w,id:p}=this;return{display:n,visibility:s,style:f(r),classes:u,onClick:o,onHold:c,canClick:d,small:h,mark:w,id:p}},t})}function mt(e){return ut(()=>{const t=e();k(t,"showNextAt"),ee(t,"showNextAt",!0),ee(t,"minimumGain",1),t.resetDescription==null?t.resetDescription=b(()=>i.lt(t.conversion.gainResource.value,1e3)?"Reset for ":""):k(t,"resetDescription"),t.display==null&&(t.display=B(()=>a("span",null,[f(t.resetDescription),a("b",null,[ot(t.conversion.gainResource,i.max(f(t.conversion.actualGain),f(t.minimumGain)))])," ",t.conversion.gainResource.displayName,Ne(a("div",null,[a("br",null,null),f(t.conversion.buyMax)?"Next:":"Req:"," ",yr(t.conversion.baseResource,f(t.conversion.buyMax)||i.floor(f(t.conversion.actualGain)).neq(1)?f(t.conversion.nextAt):f(t.conversion.currentAt))," ",kl(t.conversion.baseResource)?t.conversion.baseResource.displayName:t.baseResourceName||""]),[[Pe,f(t.showNextAt)]])]))),t.canClick==null&&(t.canClick=b(()=>i.gte(f(t.conversion.actualGain),f(t.minimumGain))));const l=t.onClick;return t.onClick=function(){!f(t.canClick)||(t.conversion.convert(),t.tree.reset(t.treeNode),t.resetTime&&(t.resetTime.value=t.resetTime[al]),l==null||l())},t})}function Ke(e){return Cn(()=>{const t=e();return k(t,"display"),ee(t,"display",t.layerID),k(t,"append"),{...t,display:t.display,onClick:f(t.append)?function(){if(R.tabs.includes(t.layerID)){const l=R.tabs.lastIndexOf(t.layerID);R.tabs.splice(l,1)}else R.tabs.push(t.layerID)}:function(){R.tabs.splice(1,1,t.layerID)}}})}var Yr=H({props:{display:{type:E(String,Object,Function),required:!0},visibility:{type:E(Number),required:!0},style:E(String,Object,Array),classes:E(Object),resource:Object,cost:E(String,Object,Number),canPurchase:{type:E(Boolean),required:!0},bought:{type:E(Boolean),required:!0},mark:E(Boolean,String),id:{type:String,required:!0},purchase:{type:Function,required:!0}},components:{Node:Tt,MarkNode:ol},setup(e){const{display:t,cost:l}=be(e),n=tt("");return lt(()=>{const s=ge(t);if(s==null){n.value="";return}if(ze(s)){n.value=j(s);return}const r=ge(l),u=j(s.title||"","h3"),o=j(s.description,"div"),c=j(s.effectDisplay||"");n.value=j(B(()=>{var d;return a("span",null,[s.title?a("div",null,[a(u,null,null)]):null,a(o,null,null),s.effectDisplay?a("div",null,[m("Currently: "),a(c,null,null)]):null,e.resource!=null?a(V,null,[a("br",null,null),m("Cost: "),e.resource&&ot(e.resource,r)," ",(d=e.resource)==null?void 0:d.displayName]):null])}))}),{component:n,unref:f,Visibility:$}}});const Zr=["disabled"];function Kr(e,t,l,n,s,r){var c;const u=De("MarkNode"),o=De("Node");return e.unref(e.visibility)!==e.Visibility.None?(_(),q("button",{key:0,style:oe([{visibility:e.unref(e.visibility)===e.Visibility.Hidden?"hidden":void 0},(c=e.unref(e.style))!=null?c:{}]),onClick:t[0]||(t[0]=(...d)=>e.purchase&&e.purchase(...d)),class:ye({feature:!0,upgrade:!0,can:e.unref(e.canPurchase),locked:!e.unref(e.canPurchase),bought:e.unref(e.bought),...e.unref(e.classes)}),disabled:!e.unref(e.canPurchase)},[e.unref(e.component)?(_(),x(fe(e.unref(e.component)),{key:0})):L("",!0),a(u,{mark:e.unref(e.mark)},null,8,["mark"]),a(o,{id:e.id},null,8,["id"])],14,Zr)):L("",!0)}var Jr=te(Yr,[["render",Kr],["__scopeId","data-v-7742f590"]]);const Xr=Symbol("Upgrade");function Re(e){const t=je(!1);return Oe(()=>{const l=e();return l.id=He("upgrade-"),l.type=Xr,l[Ee]=Jr,l.canAfford==null&&(l.resource==null||l.cost==null)&&console.warn("Error: can't create upgrade without a canAfford property or a resource and cost property",l),l.bought=t,l.canAfford==null?l.canAfford=b(()=>{const n=l;return n.resource!=null&&n.cost!=null&&i.gte(n.resource.value,f(n.cost))}):k(l,"canAfford"),l.canPurchase=b(()=>f(l.visibility)===$.Visible&&f(l.canAfford)&&!f(l.bought)),l.purchase=function(){var s;const n=l;!f(n.canPurchase)||(n.resource!=null&&n.cost!=null&&(n.resource.value=i.sub(n.resource.value,f(n.cost))),t.value=!0,(s=n.onPurchase)==null||s.call(n))},k(l,"visibility"),ee(l,"visibility",$.Visible),k(l,"classes"),k(l,"style"),k(l,"display"),k(l,"mark"),k(l,"cost"),k(l,"resource"),l[qe]=function(){const{display:n,visibility:s,style:r,classes:u,resource:o,cost:c,canPurchase:d,bought:h,mark:w,id:p,purchase:y}=this;return{display:n,visibility:s,style:f(r),classes:u,resource:o,cost:c,canPurchase:d,bought:h,mark:w,id:p,purchase:y}},l})}const Qr=Symbol("Buyable");function We(e){const t=je(0);return Oe(()=>{var r,u;const l=e();if(l.canPurchase==null&&(l.resource==null||l.cost==null))throw console.warn("Cannot create buyable without a canPurchase property or a resource and cost property",l),"Cannot create buyable without a canPurchase property or a resource and cost property";l.id=He("buyable-"),l.type=Qr,l[Ee]=Gl,l.amount=t,l.canAfford=b(()=>{const o=l,c=f(o.cost);return o.resource!=null&&c!=null&&i.gte(o.resource.value,c)}),l.canPurchase==null&&(l.canPurchase=b(()=>f(l.visibility)===$.Visible&&f(l.canAfford)&&i.lt(l.amount.value,f(l.purchaseLimit)))),l.maxed=b(()=>i.gte(l.amount.value,f(l.purchaseLimit))),k(l,"classes");const n=l.classes;l.classes=b(()=>{const o=f(n)||{};return l.maxed.value&&(o.bought=!0),o}),k(l,"canPurchase"),k(l,"keepRes"),l.keepRes===void 0&&(l.keepRes=!1),l.keepRes,l.canClick=l.canPurchase,l.onClick=l.purchase=(u=(r=l.onClick)!=null?r:l.purchase)!=null?u:function(){var d;const o=l;if(!f(o.canPurchase))return;const c=f(o.cost);o.cost!=null&&o.resource!=null&&(o.resource.value=i.sub(o.resource.value,c),o.amount.value=i.add(o.amount.value,1)),(d=this.onPurchase)==null||d.call(this,c)},k(l,"display");const s=l.display;return l.display=B(()=>{const o=f(s);if(ze(o)){const c=j(o);return a(c,null,null)}if(o!=null&&l.cost!=null&&l.resource!=null){const c=l,d=j(o.title||"","h3"),h=j(o.description||""),w=j(o.effectDisplay||"");return a("span",null,[o.title?a("div",null,[a(d,null,null)]):null,o.description?a(h,null,null):null,o.showAmount===!1?null:a("div",null,[a("br",null,null),f(c.purchaseLimit)===i.dInf?a(V,null,[m("Amount: "),re(c.amount.value)]):a(V,null,[m("Amount: "),re(c.amount.value),m(" /")," ",re(f(c.purchaseLimit))])]),o.effectDisplay?a("div",null,[a("br",null,null),m("Currently: "),a(w,null,null)]):null,c.cost&&!c.maxed.value?a("div",null,[a("br",null,null),m("Cost: "),F(f(c.cost)||0)," ",l.resource.displayName]):null])}return""}),k(l,"visibility"),ee(l,"visibility",$.Visible),k(l,"cost"),k(l,"resource"),k(l,"purchaseLimit"),ee(l,"purchaseLimit",i.dInf),k(l,"style"),k(l,"mark"),k(l,"small"),l[qe]=function(){const{display:o,visibility:c,style:d,classes:h,onClick:w,canClick:p,small:y,mark:v,id:M}=this;return{display:o,visibility:c,style:f(d),classes:h,onClick:w,canClick:p,small:y,mark:v,id:M}},l})}var eo=H({props:{visibility:{type:E(Number),required:!0},display:{type:E(String,Object,Function),required:!0},style:E(String,Object,Array),classes:E(Object),earned:{type:E(Boolean),required:!0},id:{type:String,required:!0}},components:{Node:Tt},setup(e){const{display:t}=be(e),l=tt("");return lt(()=>{const n=ge(t);if(n==null){l.value="";return}if(ze(n)){l.value=j(n);return}const s=j(n.requirement,"h3"),r=j(n.effectDisplay||"","b"),u=j(n.optionsDisplay||"","span");l.value=j(B(()=>a("span",null,[a(s,null,null),n.effectDisplay?a("div",null,[a(r,null,null)]):null,n.optionsDisplay?a("div",{class:"equal-spaced"},[a(u,null,null)]):null])))}),{comp:l,unref:f,Visibility:$}}});function to(e,t,l,n,s,r){var o;const u=De("Node");return e.unref(e.visibility)!==e.Visibility.None?(_(),q("div",{key:0,style:oe([{visibility:e.unref(e.visibility)===e.Visibility.Hidden?"hidden":void 0},(o=e.unref(e.style))!=null?o:{}]),class:ye({feature:!0,milestone:!0,done:e.unref(e.earned),...e.unref(e.classes)})},[(_(),x(fe(e.unref(e.comp)))),a(u,{id:e.id},null,8,["id"])],6)):L("",!0)}var lo=te(eo,[["render",to],["__scopeId","data-v-f4e8794e"]]);me.on("setupVue",e=>e.use(xn));function Ul(e="white",t="8px"){return{transform:"scale(1.05, 1.05)",borderColor:"rgba(0, 0, 0, 0.125)",boxShadow:`-4px -4px 4px rgba(0, 0, 0, 0.25) inset, 0 0 ${t} ${e}`,zIndex:1}}function no(){return Ul("red","20px")}const io=ln(),so=Symbol("Milestone");let St;(function(e){e.All="all",e.Configurable="configurable",e.Incomplete="incomplete",e.None="none"})(St||(St={}));function ao(e){const t=je(!1);return Oe(()=>{var s;const l=(s=e==null?void 0:e())!=null?s:{};l.id=He("milestone-"),l.type=so,l[Ee]=lo,l.earned=t,l.complete=function(){t.value=!0},k(l,"visibility"),ee(l,"visibility",$.Visible);const n=l.visibility;if(l.visibility=b(()=>{const r=f(l.display);switch(de.msDisplay){default:case St.All:return f(n);case St.Configurable:return f(l.earned)&&!(r!=null&&typeof r=="object"&&"optionsDisplay"in r)?$.None:f(n);case St.Incomplete:return f(l.earned)?$.None:f(n);case St.None:return $.None}}),k(l,"style"),k(l,"classes"),k(l,"display"),l[qe]=function(){const{visibility:r,display:u,style:o,classes:c,earned:d,id:h}=this;return{visibility:r,display:u,style:f(o),classes:c,earned:d,id:h}},l.shouldEarn){const r=l;lt(()=>{var u,o;if(de.active===R.id&&!r.earned.value&&f(r.visibility)===$.Visible&&((u=r.shouldEarn)==null?void 0:u.call(r))&&(r.earned.value=!0,(o=r.onComplete)==null||o.call(r),r.display)){const c=f(r.display),d=j(ze(c)?c:c.requirement);io(a(V,null,[a("h3",null,[m("Milestone earned!")]),a("div",null,[a(d,null,null)])]))}})}return l})}me.on("loadSettings",e=>{ee(e,"msDisplay",St.All)});const ro=Object.values(St).map(e=>({label:on(e),value:e}));pn(B(()=>a(Vl,{title:"Show Milestones",options:ro,"onUpdate:modelValue":e=>de.msDisplay=e,modelValue:de.msDisplay},null)));function Ae(e,t){return k(t,"display"),k(t,"classes"),k(t,"style"),k(t,"direction"),ee(t,"direction",X.Up),k(t,"xoffset"),k(t,"yoffset"),t.pinnable&&("pinned"in e?(console.error("Cannot add pinnable tooltip to element that already has a property called 'pinned'"),t.pinnable=!1):e.pinned=t.pinned=je(!1)),ht(()=>{const l=e[Ee];e[Ee]=Ce;const n=e[qe].bind(e);e[qe]=function(){const{display:r,classes:u,style:o,direction:c,xoffset:d,yoffset:h,pinned:w}=this;return{element:{[Ee]:l,[qe]:n},display:r,classes:u,style:f(o),direction:c,xoffset:d,yoffset:h,pinned:w}}.bind(t)}),t}const oo=H({props:{visibility:{type:E(Number),required:!0},onClick:Function,onHold:Function,display:{type:E(Object,String,Function),required:!0},title:E(Object,String,Function),style:E(String,Object,Array),canClick:{type:E(Boolean),required:!0},id:{type:String,required:!0}},components:{Node:Tt},setup(e){const{onClick:t,onHold:l,title:n,display:s}=be(e),{start:r,stop:u}=ql(t,l),o=Kt(n),c=zt(s);return{start:r,stop:u,titleComponent:o,component:c,Visibility:$,unref:f}}}),uo={key:0};function co(e,t,l,n,s,r){var o;const u=De("Node");return e.unref(e.visibility)!==e.Visibility.None?(_(),q("button",{key:0,class:ye({feature:!0,tile:!0,can:e.unref(e.canClick),locked:!e.unref(e.canClick)}),style:oe([{visibility:e.unref(e.visibility)===e.Visibility.Hidden?"hidden":void 0},(o=e.unref(e.style))!=null?o:{}]),onClick:t[0]||(t[0]=(...c)=>e.onClick&&e.onClick(...c)),onMousedown:t[1]||(t[1]=(...c)=>e.start&&e.start(...c)),onMouseleave:t[2]||(t[2]=(...c)=>e.stop&&e.stop(...c)),onMouseup:t[3]||(t[3]=(...c)=>e.stop&&e.stop(...c)),onTouchstartPassive:t[4]||(t[4]=(...c)=>e.start&&e.start(...c)),onTouchendPassive:t[5]||(t[5]=(...c)=>e.stop&&e.stop(...c)),onTouchcancelPassive:t[6]||(t[6]=(...c)=>e.stop&&e.stop(...c))},[e.title?(_(),q("div",uo,[(_(),x(fe(e.titleComponent)))])):L("",!0),(_(),x(fe(e.component),{style:{"white-space":"pre-line"}})),a(u,{id:e.id},null,8,["id"])],38)):L("",!0)}var fo=te(oo,[["render",co],["__scopeId","data-v-26ac0e82"]]);const mo=H({props:{visibility:{type:E(Number),required:!0},rows:{type:E(Number),required:!0},cols:{type:E(Number),required:!0},cells:{type:E(Object),required:!0}},components:{GridCell:fo},setup(){const e=b(()=>Zt[de.theme].mergeAdjacent);function t(l){const{visibility:n,onClick:s,onHold:r,display:u,title:o,style:c,canClick:d,id:h}=l;return{visibility:n,onClick:s,onHold:r,display:u,title:o,style:c,canClick:d,id:h}}return{unref:f,gatherCellProps:t,Visibility:$,mergeAdjacent:e}}});function po(e,t,l,n,s,r){const u=De("GridCell");return e.unref(e.visibility)!==e.Visibility.None?(_(),q("div",{key:0,style:oe({visibility:e.unref(e.visibility)===e.Visibility.Hidden?"hidden":void 0}),class:"table"},[(_(!0),q(V,null,nl(e.unref(e.rows),o=>(_(),q("div",{class:ye(["row",{mergeAdjacent:e.mergeAdjacent}]),key:o},[(_(!0),q(V,null,nl(e.unref(e.cols),c=>(_(),x(u,yt({key:c},e.gatherCellProps(e.unref(e.cells)[o*100+c])),null,16))),128))],2))),128))],4)):L("",!0)}var vo=te(mo,[["render",po]]);function go(e){return new Proxy({},ho(e))}function ho(e){const t=b(()=>{const l=[];for(let n=1;n<=f(e.rows);n++)for(let s=1;s<=f(e.cols);s++)l.push((n*100+s).toString());return l});return{get(l,n){if(n==="isProxy")return!0;if(typeof n=="symbol")return e[n];if(!!t.value.includes(n.toString()))return l[n]==null&&(l[n]=new Proxy(e,yo(n.toString()))),l[n]},set(l,n,s){return console.warn("Cannot set grid cells",l,n,s),!1},ownKeys(){return t.value},has(l,n){return t.value.includes(n.toString())},getOwnPropertyDescriptor(l,n){if(t.value.includes(n.toString()))return{configurable:!0,enumerable:!0,writable:!1}}}}function yo(e){const t=["id","visibility","canClick","startState","state","style","classes","title","display","onClick","onHold"],l={};return{get(n,s,r){if(s==="isProxy")return!0;let u=n[s];return Bt(u)?()=>u.call(r,e,n.getState(e)):u!=null||typeof s=="symbol"?u:(s=s.slice(0,1).toUpperCase()+s.slice(1),s==="startState"?u.call(r,e):(u=n[`get${s}`],Bt(u)?(s in l||(l[s]=b(()=>u.call(r,e,n.getState(e)))),l[s].value):u!=null?f(u):(u=n[`on${s}`],Bt(u)?()=>u.call(r,e,n.getState(e)):u!=null?u:n[s])))},set(n,s,r,u){return s=`set${s.slice(0,1).toUpperCase()+s.slice(1)}`,s in n&&Bt(n[s])&&n[s].length<3?(n[s].call(u,e,r),!0):(console.warn(`No setter for "${s}".`,n),!1)},ownKeys(){return t},has(n,s){return t.includes(s.toString())},getOwnPropertyDescriptor(n,s){if(t.includes(s.toString()))return{configurable:!0,enumerable:!0,writable:!1}}}}function bo(e){const t=je({});return Oe(()=>{const l=e();if(l.id=He("grid-"),l[Ee]=vo,l.cellState=t,l.getID=function(n){return l.id+"-"+n},l.getState=function(n){return this.cellState.value[n]!=null?t.value[n]:this.cells[n].startState},l.setState=function(n,s){t.value[n]=s},l.cells=go(l),k(l,"visibility"),ee(l,"visibility",$.Visible),k(l,"rows"),k(l,"cols"),k(l,"getVisibility"),ee(l,"getVisibility",$.Visible),k(l,"getCanClick"),ee(l,"getCanClick",!0),k(l,"getStartState"),k(l,"getStyle"),k(l,"getClasses"),k(l,"getTitle"),k(l,"getDisplay"),l.onClick){const n=l.onClick.bind(l);l.onClick=function(s,r){f(l.cells[s].canClick)&&n(s,r)}}if(l.onHold){const n=l.onHold.bind(l);l.onHold=function(s,r){f(l.cells[s].canClick)&&n(s,r)}}return l[qe]=function(){const{visibility:n,rows:s,cols:r,cells:u,id:o}=this;return{visibility:n,rows:s,cols:r,cells:u,id:o}},l})}function Ie(e,t,l){const n=jt(e),s=jt(t),r=l==null?void 0:jt(l);return{apply:u=>i.times(u,f(n)),revert:u=>i.div(u,f(n)),enabled:r,description:t==null?void 0:B(()=>a("div",{class:"modifier-container"},[a("span",{class:"modifier-amount"},[m("x"),F(f(n))]),f(s)?a("span",{class:"modifier-description"},[gt(f(s))]):null]))}}function Ot(...e){return{apply:t=>e.filter(l=>f(l.enabled)!==!1).reduce((l,n)=>n.apply(l),t),revert:e.every(t=>t.revert!=null)?t=>e.filter(l=>f(l.enabled)!==!1).reduceRight((l,n)=>n.revert(l),t):void 0,enabled:b(()=>e.filter(t=>f(t.enabled)!==!1).length>0),description:B(()=>a(V,null,[e.filter(t=>f(t.enabled)!==!1).map(t=>f(t.description)).filter(t=>t).map(gt)]))}}function Rt(e,t,l,n=1,s="",r="Base"){return a("div",null,[a("h3",null,[e,t?a("span",{class:"subtitle"},[m(" ("),t,m(")")]):null]),a("br",null,null),a("div",{class:"modifier-container"},[a("span",{class:"modifier-amount"},[F(n),s]),a("span",{class:"modifier-description"},[gt(r)])]),gt(f(l.description)),a("hr",null,null),m("Total: "),F(l.apply(n)),s])}function wo(e,t,l){return{currentGain(n){const s=i.div(n.baseResource.value,f(e)).log(f(t)).root(f(l));return s.isNan()?new i(0):s},currentAt(n){let s=f(n.currentGain);return n.gainModifier&&(s=n.gainModifier.revert(s)),s=i.max(0,s),i.pow(f(t),i.pow(s,f(l))).times(f(e))},nextAt(n){let s=i.add(f(n.currentGain),1);return n.gainModifier&&(s=n.gainModifier.revert(s)),s=i.max(0,s),i.pow(f(t),i.pow(s,f(l))).times(f(e)).max(f(t))}}}const No=function(e,t){const l=[t];let n=[t];if(e.branches!=null){const s=f(e.branches);for(;n.length>0;){const r=[];n.forEach(u=>{s.filter(o=>o.startNode===u).map(o=>o.endNode).filter(o=>!l.includes(o)).forEach(o=>{var c;r.includes(o)||(r.push(o),(c=o.reset)==null||c.reset())})}),n=r,l.push(...n)}}};function _o(e,t){var s,r,u,o,c,d;if(t===void 0)return!1;if(e===void 0)return!0;const l=e.split("."),n=t.split(".");return parseInt((s=l[0])!=null?s:"0")>parseInt((r=n[0])!=null?r:"0")||parseInt((u=l[1])!=null?u:"0")>parseInt((o=n[1])!=null?o:"0")||parseInt((c=l[2])!=null?c:"0")>parseInt((d=n[2])!=null?d:"0")}function Qt(e){return ko(e)}function ko(e){const t={};return Object.keys(e).forEach(l=>{t[l]={bought:e[l]}}),t}const Co=Cn(()=>({visibility:$.Hidden})),Ue=Ge("ai",()=>{const e="ai",t="Air",l="#ffd1fb",n=K(0,"Air Particles"),s=K(0,"Wind Force"),r=b(()=>{let P=i.gte(n.value,1)?n.value:0;return $e.upgrades[1].bought.value&&(P=i.mul(P,$e.upgradeEffects[0].value)),P}),u=b(()=>{let P=i.add(s.value,1);return P.gte(10)&&(P=i.pow(10,P.log10().sqrt())),P}),o=K(0,"Zephyr Force"),c=b(()=>{let P=i.gte(n.value,3)?i.div(s.value,S.milestones[28].earned.value?1:10):0;return $e.upgrades[1].bought.value&&(P=i.mul(P,$e.upgradeEffects[0].value)),P}),d=b(()=>i.add(o.value,1).log2()),h=K(0,"Tornado Force"),w=b(()=>{let P=i.gte(n.value,5)?i.div(o.value,S.milestones[28].earned.value?1:10):0;return $e.upgrades[1].bought.value&&(P=i.mul(P,$e.upgradeEffects[0].value)),P}),p=b(()=>i.add(h.value,1).log10().plus(1).log(3).plus(1).sqrt());me.on("update",P=>{S.milestones[14].earned.value?(s.value=i.mul(i.pow(10,i.sqrt(r.value)),P).plus(i.pow(10,s.value)).log10(),o.value=i.mul(i.pow(10,i.sqrt(c.value)),P).plus(i.pow(10,o.value)).log10(),h.value=i.mul(i.pow(10,i.sqrt(w.value)),P).plus(i.pow(10,h.value)).log10()):(s.value=i.mul(r.value,P).plus(i.pow(10,s.value)).log10(),o.value=i.mul(c.value,P).plus(i.pow(10,o.value)).log10(),h.value=i.mul(w.value,P).plus(i.pow(10,h.value)).log10()),S.milestones[21].earned.value&&(n.value=i.mul(y.currentGain.value,P).plus(n.value))});const y=$t(()=>({scaling:{currentGain:P=>i.lt(P.baseResource.value,1e4)?0:S.milestones[10].earned.value?i.div(P.baseResource.value,1e4).pow(1/4).times(3).sub(2).floor():i.div(P.baseResource.value,5e3).log2().root(1.4).floor().sub(P.gainResource.value),currentAt:P=>{if(S.milestones[10].earned.value){let I=f(P.currentGain);return y.gainModifier&&(I=y.gainModifier.revert(I)),i.div(I,3).plus(2/3).pow(4).times(1e4)}else return i.pow(2,i.add(P.gainResource.value,1).pow(1.4)).times(5e3)},nextAt:P=>{if(S.milestones[10].earned.value){let I=i.add(f(P.currentGain),1);return y.gainModifier&&(I=y.gainModifier.revert(I)),i.div(I,3).plus(2/3).pow(4).times(1e4)}else return i.pow(2,i.add(P.gainResource.value,1).pow(1.4)).times(5e3)}},baseResource:Le.life,gainResource:n,buyMax:()=>S.milestones[10].earned.value,roundUpCost:!0,gainModifier:Ot(Ie(ie.mainEff,"Particle Combinator Effect",S.milestones[15].earned))})),v=Ye(()=>({thingsToReset:()=>[Ue]})),M=Ke(()=>({visibility:()=>S.milestones[6].earned.value?$.Visible:$.Hidden,layerID:e,display:B(()=>a("img",{src:"./nodes/air.png"},null)),color:l,reset:v}));Ae(M,{display:dt(n),pinnable:!0,style:()=>M.visibility.value===$.Visible?"":"display: none"});const C=mt(()=>({conversion:y,tree:ae.tree,treeNode:M}));return Ae(C,{display:B(()=>Rt("Modifiers","",y.gainModifier,y.scaling.currentGain(y))),pinnable:!0,direction:X.Down,style:"width: 400px; text-align: left"}),{id:e,name:t,color:l,air:n,wind:s,windEff:u,zephyr:o,zephyrEff:d,tornado:h,tornadoEff:p,display:B(()=>{const P=i.gt(r.value,0)?a("span",null,[m("Wind: "),F(s.value,2),m(", Wind Speed: "),F(r.value,2),m("x"),a("br",null,null),m("Multiplies Life Particle gain by "),F(u.value,2),m("."),a("br",null,null),a("br",null,null)]):"",I=i.gt(c.value,0)?a("span",null,[m("Zephyr: "),F(o.value,2),m(", Zephyr Speed: "),F(c.value,2),m("x"),a("br",null,null),m("Adds "),F(d.value,2),m(" levels to all Life Buyables."),a("br",null,null),a("br",null,null)]):"",D=i.gt(w.value,0)?a("span",null,[m("Tornado: "),F(h.value,2),m(", Tornado Speed:")," ",F(w.value,2),m("x"),a("br",null,null),m("Raise Base Particle gain ^"),F(p.value,2),a("br",null,null),a("br",null,null)]):"";return a(V,null,[a(ft,{resource:n,color:l},null),G(C),a("br",null,null),a("br",null,null),P,a("br",null,null),I,a("br",null,null),D,a("br",null,null)])}),treeNode:M}}),$e=Ge("sound",()=>{const e="sound",t="Sound",l="#ddcfff",n=K(0,"Sound Particles"),s=ct(n),r=_l(()=>({scaling:It(()=>1e7,1/3),baseResource:Ue.air,gainResource:n})),u=Ye(()=>({thingsToReset:()=>[$e]})),o=Ke(()=>({visibility:()=>S.milestones[32].earned.value?$.Visible:$.Hidden,layerID:e,display:B(()=>a("img",{src:"./nodes/sound.png"},null)),color:l,reset:u}));Ae(o,{display:dt(n),pinnable:!0,style:()=>o.visibility.value===$.Visible?"":"display: none"});const c=mt(()=>({conversion:r,tree:ae.tree,treeNode:o})),d=K(0,"Ultrasound"),h=b(()=>{let y=i.dOne;return i.gte(Ve.lights[3].buyables[1].amount.value,1)&&(y=y.times(Ve.lightBuyableEffects[3][1].value)),p[3].bought.value&&(y=y.times(w[3].value)),S.milestones[37].earned.value&&(y=y.times(2)),y}),w=[b(()=>i.add(d.value,1).log10().plus(1).log10().plus(1)),b(()=>i.add(d.value,1).log10().plus(1).sqrt()),b(()=>{let y=i.add(d.value,1).log10().div(20);return y.gte(.5)&&(y=y.plus(.5).log10().plus(.5)),y}),b(()=>i.add(d.value,1).log10().plus(1).sqrt()),b(()=>i.add(d.value,1).log10().plus(1)),b(()=>i.div(d.value,100).plus(1))],p=[Re(()=>({display:()=>({title:"Pitch",description:"Ultrasound boosts the gain speed of all Light Energy colors at a very reduced rate.",effectDisplay:Z(w[0].value)+"x"}),cost:100,resource:d})),Re(()=>({display:()=>({title:"Duration",description:"Ultrasound boosts Wind/Zephyr/Tornado speeds at a reduced rate.",effectDisplay:Z(w[1].value)+"x"}),cost:1e3,resource:d})),Re(()=>({display:()=>({title:"Volume",description:"Ultrasound boosts Life Buyable Power at a reduced rate.",effectDisplay:"+"+Z(i.mul(w[2].value,100))+"%"}),cost:2500,resource:d})),Re(()=>({display:()=>({title:"Timbre",description:"Ultrasound boosts its own gain at a reduced rate.",effectDisplay:Z(w[3].value)+"x"}),cost:1e4,resource:d})),Re(()=>({display:()=>({title:"Texture",description:"Ultrasound boosts Flame Particle gain at a reduced rate.",effectDisplay:Z(w[4].value)+"x"}),cost:1e5,resource:d})),Re(()=>({display:()=>({title:"Location",description:"Ultrasound boosts Aqua bar speed.",effectDisplay:Z(w[5].value)+"x"}),cost:4e5,resource:d}))];return me.on("update",y=>{d.value=i.add(d.value,i.mul(n.value,y).times(h.value))}),{id:e,name:t,color:l,sound:n,best:s,ultrasound:d,upgrades:p,upgradeEffects:w,display:B(()=>a(V,null,[a(ft,{resource:n,color:l},null),G(c),a("br",null,null),m("There is "),Z(d.value),m(" Ultrasound (generated by Sound Particles)"),a("br",null,null),a("br",null,null),p.map(G)])),treeNode:o}}),So=H({props:{display:null},setup(e){const t=e,{display:l}=be(t),n=zt(l);return(s,r)=>(_(),x(fe(f(n))))}}),Mo=Symbol("Tab");function Tl(e){return Oe(()=>{const t=e();return t.id=He("tab-"),t.type=Mo,t[Ee]=So,t[qe]=function(){const{display:l}=this;return{display:l}},t})}const Po=H({props:{visibility:{type:E(Number),required:!0},display:{type:E(Object,String,Function),required:!0},style:E(String,Object,Array),classes:E(Object),glowColor:E(String),active:Boolean,floating:Boolean},emits:["selectTab"],setup(e,{emit:t}){const{display:l,glowColor:n,floating:s}=be(e),r=zt(l),u=b(()=>{const c=ge(n);return c?f(s)?Ul(c):{boxShadow:`0px 9px 5px -6px ${c}`}:{}});function o(){t("selectTab")}return{selectTab:o,component:r,glowColorStyle:u,unref:f,Visibility:$}}});function Io(e,t,l,n,s,r){var u;return e.unref(e.visibility)!==e.Visibility.None?(_(),q("button",{key:0,onClick:t[0]||(t[0]=(...o)=>e.selectTab&&e.selectTab(...o)),class:ye(["tabButton",{active:e.active,...e.unref(e.classes)}]),style:oe([{visibility:e.unref(e.visibility)===e.Visibility.Hidden?"hidden":void 0},e.glowColorStyle,(u=e.unref(e.style))!=null?u:{}])},[(_(),x(fe(e.component)))],6)):L("",!0)}var Mn=te(Po,[["render",Io],["__scopeId","data-v-610a2549"]]);const $o=H({props:{visibility:{type:E(Number),required:!0},activeTab:{type:E(Object),required:!0},selected:{type:Object,required:!0},tabs:{type:E(Object),required:!0},style:E(String,Object,Array),classes:E(Object),buttonContainerStyle:E(String,Object,Array),buttonContainerClasses:E(Object)},components:{Sticky:Sn,TabButton:Mn},setup(e){const{activeTab:t}=be(e),l=b(()=>Zt[de.theme].floatingTabs),n=tt("");lt(()=>{const o=ge(t);if(o==null){n.value="";return}if(ze(o)){n.value=j(o);return}n.value=j(f(o.display))});const s=b(()=>{const o=ge(t);return ze(o)||!o?void 0:f(o.classes)}),r=b(()=>{const o=ge(t);return ze(o)||!o?void 0:f(o.style)});function u(o){const{display:c,style:d,classes:h,glowColor:w,visibility:p}=o;return{display:c,style:f(d),classes:h,glowColor:w,visibility:p}}return{floating:l,tabClasses:s,tabStyle:r,Visibility:$,component:n,gatherButtonProps:u,unref:f}}});function To(e,t,l,n,s,r){var c,d;const u=De("TabButton"),o=De("Sticky");return e.unref(e.visibility)!==e.Visibility.None?(_(),q("div",{key:0,class:ye(["tab-family-container",{...e.unref(e.classes),...e.tabClasses}]),style:oe([{visibility:e.unref(e.visibility)===e.Visibility.Hidden?"hidden":void 0},(c=e.unref(e.style))!=null?c:[],(d=e.tabStyle)!=null?d:[]])},[a(o,{class:ye(["tab-buttons-container",e.unref(e.buttonContainerClasses)]),style:oe(e.unref(e.buttonContainerStyle))},{default:z(()=>[g("div",{class:ye(["tab-buttons",{floating:e.floating}])},[(_(!0),q(V,null,nl(e.unref(e.tabs),(h,w)=>(_(),x(u,yt({onSelectTab:p=>e.selected.value=w,floating:e.floating,key:w,active:e.unref(h.tab)===e.unref(e.activeTab)},e.gatherButtonProps(h)),null,16,["onSelectTab","floating","active"]))),128))],2)]),_:1},8,["class","style"]),e.unref(e.activeTab)?(_(),x(fe(e.unref(e.component)),{key:0})):L("",!0)],6)):L("",!0)}var Eo=te($o,[["render",To],["__scopeId","data-v-11575f45"]]);const Do=Symbol("TabButton"),Bo=Symbol("TabFamily");function Pn(e,t){if(Object.keys(e).length===0)throw console.warn("Cannot create tab family with 0 tabs"),"Cannot create tab family with 0 tabs";const l=je(Object.keys(e)[0]);return Oe(()=>{var r;const n=(r=t==null?void 0:t())!=null?r:{};n.id=He("tabFamily-"),n.type=Bo,n[Ee]=Eo,n.tabs=Object.keys(e).reduce((u,o)=>{const c=e[o]();return c.type=Do,c[Ee]=Mn,k(c,"visibility"),ee(c,"visibility",$.Visible),k(c,"tab"),k(c,"display"),k(c,"classes"),k(c,"style"),k(c,"glowColor"),u[o]=c,u},{}),n.selected=l,n.activeTab=b(()=>{const u=f(s.tabs);if(l.value in u&&f(u[l.value].visibility)===$.Visible)return f(u[l.value].tab);const o=Object.values(u).find(c=>f(c.visibility)===$.Visible);return o?f(o.tab):null}),k(n,"visibility"),ee(n,"visibility",$.Visible),k(n,"classes"),k(n,"style"),k(n,"buttonContainerClasses"),k(n,"buttonContainerStyle"),n[qe]=function(){const{visibility:u,activeTab:o,selected:c,tabs:d,style:h,classes:w,buttonContainerClasses:p,buttonContainerStyle:y}=this;return{visibility:u,activeTab:o,selected:c,tabs:d,style:f(h),classes:w,buttonContainerClasses:p,buttonContainerStyle:y}};const s=n;return s})}var qo=H({props:{active:{type:E(Boolean),required:!0},maxed:{type:E(Boolean),required:!0},canComplete:{type:E(Boolean),required:!0},display:E(String,Object,Function),visibility:{type:E(Number),required:!0},style:E(String,Object,Array),classes:E(Object),completed:{type:E(Boolean),required:!0},canStart:{type:E(Boolean),required:!0},mark:E(Boolean,String),id:{type:String,required:!0},toggle:{type:Function,required:!0}},components:{MarkNode:ol,Node:Tt},setup(e){const{active:t,maxed:l,canComplete:n,display:s}=be(e),r=b(()=>t.value?n.value?"Finish":"Exit Early":l.value?"Completed":"Start"),u=tt(""),o=b(()=>{const c=ge(t),d=ge(n);return c?d?no():Ul():{}});return lt(()=>{const c=ge(s);if(c==null){u.value="";return}if(ze(c)){u.value=j(c);return}const d=j(c.title||"","h3"),h=j(c.description,"div"),w=j(c.goal||""),p=j(c.reward||""),y=j(c.effectDisplay||"");u.value=j(B(()=>a("span",null,[c.title?a("div",null,[a(d,null,null)]):null,a(h,null,null),c.goal?a("div",null,[a("br",null,null),m("Goal: "),a(w,null,null)]):null,c.reward?a("div",null,[a("br",null,null),m("Reward: "),a(p,null,null)]):null,c.effectDisplay?a("div",null,[m("Currently: "),a(y,null,null)]):null])))}),{buttonText:r,notifyStyle:o,comp:u,Visibility:$,unref:f}}});const Ao=["disabled"];function Fo(e,t,l,n,s,r){var c;const u=De("MarkNode"),o=De("Node");return e.unref(e.visibility)!==e.Visibility.None?(_(),q("div",{key:0,style:oe([{visibility:e.unref(e.visibility)===e.Visibility.Hidden?"hidden":void 0},e.notifyStyle,(c=e.unref(e.style))!=null?c:{}]),class:ye({feature:!0,challenge:!0,done:e.unref(e.completed),canStart:e.unref(e.canStart)&&!e.unref(e.maxed),maxed:e.unref(e.maxed),...e.unref(e.classes)})},[g("button",{class:"toggleChallenge",onClick:t[0]||(t[0]=(...d)=>e.toggle&&e.toggle(...d)),disabled:!e.unref(e.canStart)||e.unref(e.maxed)},ne(e.buttonText),9,Ao),e.unref(e.comp)?(_(),x(fe(e.unref(e.comp)),{key:0})):L("",!0),a(u,{mark:e.unref(e.mark)},null,8,["mark"]),a(o,{id:e.id},null,8,["id"])],6)):L("",!0)}var Oo=te(qo,[["render",Fo],["__scopeId","data-v-4d2947df"]]);const Ro=Symbol("ChallengeType");function Pl(e){const t=je(0),l=je(!1);return Oe(()=>{const n=e();if(n.canComplete==null&&(n.resource==null||n.goal==null))throw console.warn("Cannot create challenge without a canComplete property or a resource and goal property",n),"Cannot create challenge without a canComplete property or a resource and goal property";n.id=He("challenge-"),n.type=Ro,n[Ee]=Oo,n.completions=t,n.active=l,n.completed=b(()=>i.gt(n.completions.value,0)),n.maxed=b(()=>i.gte(n.completions.value,f(n.completionLimit))),n.toggle=function(){var u,o,c,d,h;const r=n;if(r.active.value){if(f(r.canComplete)&&!r.maxed.value){let w=f(r.canComplete);typeof w=="boolean"&&(w=1),r.completions.value=i.min(i.add(r.completions.value,w),f(r.completionLimit)),(u=r.onComplete)==null||u.call(r)}r.active.value=!1,(o=r.onExit)==null||o.call(r),(c=r.reset)==null||c.reset()}else f(r.canStart)&&f(r.visibility)===$.Visible&&!r.maxed.value&&((d=r.reset)==null||d.reset(),r.active.value=!0,(h=r.onEnter)==null||h.call(r))},n.complete=function(r){var c,d,h;const u=n;let o=f(u.canComplete);u.active.value&&o!==!1&&(o===!0||i.neq(0,o))&&!u.maxed.value&&(typeof o=="boolean"&&(o=1),u.completions.value=i.min(i.add(u.completions.value,o),f(u.completionLimit)),(c=u.onComplete)==null||c.call(u),r!==!0&&(u.active.value=!1,(d=u.onExit)==null||d.call(u),(h=u.reset)==null||h.reset()))},k(n,"visibility"),ee(n,"visibility",$.Visible);const s=n.visibility;return n.visibility=b(()=>de.hideChallenges===!0&&f(n.maxed)?$.None:f(s)),n.canComplete==null&&(n.canComplete=b(()=>{const r=n;return!r.active.value||r.resource==null||r.goal==null?!1:i.gte(r.resource.value,f(r.goal))})),n.mark==null&&(n.mark=b(()=>i.gt(f(n.completionLimit),1)&&!!f(n.maxed))),k(n,"canStart"),ee(n,"canStart",!0),k(n,"canComplete"),k(n,"completionLimit"),ee(n,"completionLimit",1),k(n,"mark"),k(n,"goal"),k(n,"classes"),k(n,"style"),k(n,"display"),n.reset!=null&&me.on("reset",r=>{r===n.reset&&n.active.value&&n.toggle()}),n[qe]=function(){const{active:r,maxed:u,canComplete:o,display:c,visibility:d,style:h,classes:w,completed:p,canStart:y,mark:v,id:M,toggle:C}=this;return{active:r,maxed:u,canComplete:o,display:c,visibility:d,style:f(h),classes:w,completed:p,canStart:y,mark:v,id:M,toggle:C}},n})}me.on("loadSettings",e=>{ee(e,"hideChallenges",!1)});pn(B(()=>a(vt,{title:"Hide Maxed Challenges","onUpdate:modelValue":e=>de.hideChallenges=e,modelValue:de.hideChallenges},null)));const Vo=H({props:{progress:{type:E(String,Object,Number),required:!0},width:{type:E(Number),required:!0},height:{type:E(Number),required:!0},direction:{type:E(String),required:!0},display:E(Object,String,Function),visibility:{type:E(Number),required:!0},style:E(Object,String,Array),classes:E(Object),borderStyle:E(Object,String,Array),textStyle:E(Object,String,Array),baseStyle:E(Object,String,Array),fillStyle:E(Object,String,Array),mark:E(Boolean,String),id:{type:String,required:!0}},components:{MarkNode:ol,Node:Tt},setup(e){const{progress:t,width:l,height:n,direction:s,display:r}=be(e),u=b(()=>{let d=t.value instanceof i?t.value.toNumber():Number(t.value);return(1-Math.min(Math.max(d,0),1))*100}),o=b(()=>{const d={width:ge(l)+.5+"px",height:ge(n)+.5+"px"};switch(f(s)){case X.Up:d.clipPath=`inset(${u.value}% 0% 0% 0%)`,d.width=ge(l)+1+"px";break;case X.Down:d.clipPath=`inset(0% 0% ${u.value}% 0%)`,d.width=ge(l)+1+"px";break;case X.Right:d.clipPath=`inset(0% ${u.value}% 0% 0%)`;break;case X.Left:d.clipPath=`inset(0% 0% 0% ${u.value} + '%)`;break;case X.Default:d.clipPath="inset(0% 50% 0% 0%)";break}return d}),c=Kt(r);return{normalizedProgress:u,barStyle:o,component:c,unref:f,Visibility:$}}});function Lo(e,t,l,n,s,r){var c,d,h,w,p,y,v;const u=De("MarkNode"),o=De("Node");return e.unref(e.visibility)!==e.Visibility.None?(_(),q("div",{key:0,style:oe([{width:e.unref(e.width)+"px",height:e.unref(e.height)+"px",visibility:e.unref(e.visibility)===e.Visibility.Hidden?"hidden":void 0},(c=e.unref(e.style))!=null?c:{}]),class:ye({bar:!0,...e.unref(e.classes)})},[g("div",{class:"overlayTextContainer border",style:oe([{width:e.unref(e.width)+"px",height:e.unref(e.height)+"px"},(d=e.unref(e.borderStyle))!=null?d:{}])},[e.component?(_(),q("span",{key:0,class:"overlayText",style:oe(e.unref(e.textStyle))},[(_(),x(fe(e.component)))],4)):L("",!0)],4),g("div",{class:"border",style:oe([{width:e.unref(e.width)+"px",height:e.unref(e.height)+"px"},(h=e.unref(e.style))!=null?h:{},(w=e.unref(e.baseStyle))!=null?w:{},(p=e.unref(e.borderStyle))!=null?p:{}])},[g("div",{class:"fill",style:oe([e.barStyle,(y=e.unref(e.style))!=null?y:{},(v=e.unref(e.fillStyle))!=null?v:{}])},null,4)],4),a(u,{mark:e.unref(e.mark)},null,8,["mark"]),a(o,{id:e.id},null,8,["id"])],6)):L("",!0)}var Go=te(Vo,[["render",Lo],["__scopeId","data-v-02d0d7b2"]]);const Uo=Symbol("Bar");function fl(e){return Oe(()=>{const t=e();return t.id=He("bar-"),t.type=Uo,t[Ee]=Go,k(t,"visibility"),ee(t,"visibility",$.Visible),k(t,"width"),k(t,"height"),k(t,"direction"),k(t,"style"),k(t,"classes"),k(t,"borderStyle"),k(t,"baseStyle"),k(t,"textStyle"),k(t,"fillStyle"),k(t,"progress"),k(t,"display"),k(t,"mark"),t[qe]=function(){const{progress:l,width:n,height:s,direction:r,display:u,visibility:o,style:c,classes:d,borderStyle:h,textStyle:w,baseStyle:p,fillStyle:y,mark:v,id:M}=this;return{progress:l,width:n,height:s,direction:r,display:u,visibility:o,style:f(c),classes:d,borderStyle:h,textStyle:w,baseStyle:p,fillStyle:y,mark:v,id:M}},t})}const Fe=Ge("a",()=>{const e="a",t="Aqua",l="#2197eb",n=K(0,"Aqua Particles"),s=ct(n),r=K(0),u=K(0),o=b(()=>{let O=i.log10(i.add(u.value,1));return S.milestones[30].earned.value&&(O=O.times(1.1)),O}),c=b(()=>{let O=new i(1);return Me.upgradesR1[2].bought.value&&(O=O.times(Me.upgradeEffects[2].value)),O=O.times(Le.buyableEffects[4].value),O}),d=K(0),h=b(()=>{let O=i.log10(i.add(d.value,1));return S.milestones[27].earned.value&&(O=O.times(2)),S.milestones[30].earned.value&&(O=O.times(1.1)),i.gte(O,50)&&(O=i.mul(O,50).sqrt()),O}),w=K(0),p=b(()=>{let O=i.log10(i.add(w.value,1));return S.milestones[30].earned.value&&(O=O.times(1.1)),i.gte(O,40)&&(O=i.mul(O,40).sqrt()),O}),y=b(()=>{let O=new i(.2);return O=O.plus(Te.torrentEffAdded.value),O}),v=K(0),M=b(()=>{let O=i.log10(i.add(v.value,1));return S.milestones[30].earned.value&&(O=O.times(1.1)),i.gte(O,30)&&(O=i.mul(O,30).sqrt()),O});me.on("update",O=>{u.value=i.add(u.value,i.mul(n.value,O).times(c.value).times(I.value)),d.value=i.add(d.value,i.mul(i.floor(o.value),O/10).times(I.value)),S.milestones[7].earned.value&&(w.value=i.add(w.value,i.mul(i.floor(d.value),O/2e6).times(I.value))),S.milestones[19].earned.value&&(v.value=i.add(v.value,i.mul(i.floor(w.value),O/1e10).times(I.value))),S.milestones[3].earned.value&&(n.value=i.mul(P.currentGain.value,O).plus(n.value)),r.value+=O});const C=b(()=>{if(ve.challenges[2].active.value)return i.dInf;let O=new i(10);return O=O.div(i.pow(2,i.floor(h.value))),ve.challenges[0].active.value&&(O=O.max(1).pow(ve.challenge1Data.aquaParticleCost.value)),O}),P=$t(()=>({scaling:It(C,1/3),baseResource:ae.particles,gainResource:n,roundUpCost:!0,gainModifier:Ot(Ie(Se.clickableEffects[2],"Lightning Mode C",()=>Se.lightningSel[2].value),Ie(3,"Advancement 5",()=>S.milestones[4].earned.value&&i.lte(r.value,S.adv5time.value)),Ie(ie.multiBuyableEffects[1].value,"Mud Molecule",()=>i.gte(ie.multiBuyables[1].value,1)&&S.milestones[15].earned.value),Ie(ie.mainEff,"Particle Combinator Effect",S.milestones[31].earned))})),I=b(()=>{let O=i.dOne;return O=O.times(ve.challenge1Data.reward.value),ve.challenges[1].active.value&&(O=O.div(ve.challenge2Data.aquaBarDiv.value)),S.milestones[11].earned.value&&(O=O.times(2)),S.milestones[14].earned.value&&(O=O.times(S.adv15eff.value)),i.gte(Ve.lights[4].buyables[1].amount.value,1)&&(O=O.times(Ve.lightBuyableEffects[4][1].value)),$e.upgrades[5].bought.value&&(O=O.times($e.upgradeEffects[5].value)),O}),D=fl(()=>({width:300,height:25,direction:X.Right,progress:()=>i.sub(o.value,i.floor(o.value))})),A=fl(()=>({width:300,height:25,direction:X.Right,progress:()=>i.sub(h.value,i.floor(h.value))})),ue=fl(()=>({width:300,height:25,direction:X.Right,progress:()=>i.sub(p.value,i.floor(p.value))})),Q=fl(()=>({width:300,height:25,direction:X.Right,progress:()=>i.sub(M.value,i.floor(M.value))})),_e=Ye(()=>({thingsToReset:()=>[Fe]})),Y=Ke(()=>({layerID:e,display:B(()=>a("img",{src:"./nodes/aqua.png"},null)),color:l,reset:_e}));Ae(Y,{display:dt(n),pinnable:!0});const ce=mt(()=>({conversion:P,tree:ae.tree,treeNode:Y}));return Ae(ce,{display:B(()=>Rt("Modifiers","",P.gainModifier,P.scaling.currentGain(P))),pinnable:!0,direction:X.Down,style:"width: 400px; text-align: left"}),{id:e,name:t,color:l,aqua:n,best:s,time:r,bubbleTime:u,bubbles:o,waveTime:d,waves:h,torrentTime:w,torrents:p,torrentEff:y,floodTime:v,floods:M,display:B(()=>a(V,null,[a(ft,{resource:n,color:l},null),G(ce),a("br",null,null),a("br",null,null),a("div",null,[Ne(a("div",null,[we(i.floor(o.value)),m(" Bubbles, each generating 1 Particle/second"),a("br",null,null),G(D)]),[[Pe,i.gt(s.value,0)]]),a("br",null,null),Ne(a("div",null,[we(i.floor(h.value)),m(" Waves, each halving the Aqua Particle cost"),a("br",null,null),G(A)]),[[Pe,i.gte(o.value,1)]]),a("br",null,null),Ne(a("div",null,[we(i.floor(p.value)),m(" Torrents, each increasing Particle gain by "),we(i.mul(y.value,100)),m("%"),a("br",null,null),G(ue)]),[[Pe,S.milestones[7].earned.value]]),a("br",null,null),Ne(a("div",null,[we(i.floor(M.value)),m(" Floods, each increasing the Base Particle gain exponent by 0.05"),a("br",null,null),G(Q)]),[[Pe,S.milestones[19].earned.value]])])])),treeNode:Y}}),ve=Ge("c",()=>{const e="c",t="Cryo",l="#03f4fc",n=K(0,"Cryo Particles"),s=ct(n),r=$t(()=>({scaling:It(1e3,3/4),baseResource:Fe.aqua,gainResource:n,roundUpCost:!0,gainModifier:Ot(Ie(ie.mainEff,"Particle Combinator Effect",S.milestones[15].earned))}));me.on("update",v=>{S.milestones[22].earned.value&&(n.value=i.mul(r.currentGain.value,v).plus(n.value))});const u={lifeBuyableCosts:b(()=>i.div(d[0].completions.value,4).plus(1.25)),aquaParticleCost:b(()=>i.div(d[0].completions.value,5).plus(1.2)),reward:b(()=>{let v=d[0].completions.value;i.gte(v,11)&&(v=i.pow(v,2).div(11).plus(5));let M=i.add(n.value,1).sqrt().times(v).times(i.pow(1.1,v)).plus(1);const C=i.add(20,v);return M.gte(C)&&(M=M.log(C.sqrt()).pow(2).times(C).div(4)),i.gte(ie.best.value,6)&&(M=M.pow(ie.multiBuyableEffects[6].value)),M})},o={aquaBarDiv:b(()=>i.pow(1.5,d[1].completions.value).times(10)),reward:b(()=>{let v=d[1].completions.value;i.gte(v,11)&&(v=i.pow(v,2).div(11).plus(5));let M=i.mul(n.value,v).plus(1).log10().times(i.gte(v,11)?i.sub(v,9).log10().plus(1).cbrt():1).plus(1);return i.gte(ie.best.value,3)&&(M=M.pow(ie.multiBuyableEffects[3].value)),M})},c={exp:b(()=>i.div(d[2].completions.value,2).plus(2)),reward:b(()=>{let v=d[2].completions.value;return i.gte(v,11)&&(v=i.pow(v,2).div(11).plus(5)),i.sqrt(v).div(10).plus(1)})},d=[Pl(()=>({visibility:()=>i.gte(s.value,1)||S.milestones[26].earned.value?$.Visible:$.None,reset:h,completionLimit:b(()=>S.milestones[26].earned.value?20:10),resource:Fe.aqua,goal:()=>{let v=d[0].completions.value;return i.gte(v,10)&&(v=i.pow(v,2).div(10).plus(5)),i.pow(2,v).times(100)},display:()=>({title:"Temperature Decrease ("+re(d[0].completions.value)+"/"+re(d[0].completionLimit.value)+")",description:"Disable the Flame layer, Life buyable costs are raised ^"+F(u.lifeBuyableCosts.value,2)+", and Aqua Particle base cost is raised ^"+F(u.aquaParticleCost.value,2)+" and cannot get below 1",goal:re(f(d[0].goal))+" Aqua Particles",reward:"All Aqua bars are faster based on Cryo Particles.",effectDisplay:F(u.reward.value,2)+"x"})})),Pl(()=>({visibility:()=>i.gte(d[0].completions.value,1)?$.Visible:$.None,reset:h,completionLimit:b(()=>S.milestones[26].earned.value?20:10),resource:Fe.aqua,goal:()=>{let v=d[1].completions.value;return i.gte(v,10)&&(v=i.pow(v,2).div(10).plus(5)),i.pow(2.5,v).times(150)},display:()=>({title:"Full Freeze ("+re(d[1].completions.value)+"/"+re(d[1].completionLimit.value)+")",description:"Disable the Life layer, and Aqua bars are "+F(o.aquaBarDiv.value,2)+"x slower",goal:re(f(d[1].goal))+" Aqua Particles",reward:"All Life Buyables are cheaper based on Cryo Particles.",effectDisplay:"/"+F(o.reward.value,2)})})),Pl(()=>({visibility:()=>i.gte(d[1].completions.value,1)?$.Visible:$.None,reset:h,completionLimit:b(()=>10),resource:ae.particles,goal:()=>{let v=d[2].completions.value;return i.gte(v,10)&&(v=i.pow(v,2).div(10).plus(5)),i.pow(10,i.pow(v,1.5)).times(1e4)},display:()=>({title:"Absolute Zero ("+re(d[2].completions.value)+"/"+re(d[2].completionLimit.value)+")",description:"Disable the Aqua layer, and Fire Upgrade and Life Buyable costs are raised ^"+F(c.exp.value,2),goal:re(f(d[2].goal))+" Particles",reward:"Empower the first Flame upgrade.",effectDisplay:"^"+F(c.reward.value,2)})}))],h=Ye(()=>({thingsToReset:()=>S.milestones[15].earned.value?[Fe]:[Me,Le,Fe],onReset(){ae.particles.value=10,ae.best.value=ae.particles.value,ae.total.value=ae.particles.value}})),w=Ye(()=>({thingsToReset:()=>{const v={cryo:n,best:s,treeNode:p};return S.milestones[26].earned.value?[{...v,challenge1Data:u,challenge2Data:o,challenge3Data:c}]:[{...v,challenges:d,challenge1Data:u,challenge2Data:o,challenge3Data:c}]}})),p=Ke(()=>({visibility:()=>S.milestones[2].earned.value?$.Visible:$.Hidden,layerID:e,display:B(()=>a("img",{src:"./nodes/cryo.png"},null)),color:l,reset:w,glowColor:()=>d.some(v=>v.canComplete.value)?"red":""}));Ae(p,{display:dt(n),pinnable:!0,style:()=>p.visibility.value===$.Visible?"":"display: none"});const y=mt(()=>({conversion:r,tree:ae.tree,treeNode:p}));return Ae(y,{display:B(()=>Rt("Modifiers","",r.gainModifier,r.scaling.currentGain(r))),pinnable:!0,direction:X.Down,style:"width: 400px; text-align: left"}),{id:e,name:t,color:l,cryo:n,best:s,display:B(()=>a(V,null,[a(ft,{resource:n,color:l},null),G(y),a("br",null,null),a("br",null,null),a("table",null,[a("tbody",null,[d.map(v=>a("tr",null,[a("td",null,[G(v)])]))])])])),treeNode:p,challenges:d,challenge1Data:u,challenge2Data:o,challenge3Data:c}}),Gt=["Red","Orange","Yellow","Green","Blue","Indigo","Violet"],Il=["#FF4444","#FFBF44","#FFFF44","#44FF44","#4444FF","#8F44B6","#D844F7"],$l=["#FF0000","#FF7F00","#FFFF00","#00FF00","#0000FF","#4B0082","#9400D3"],xo=["#770000","#773700","#777700","#007700","#000077","#250041","#420061"],Ve=Ge("light",()=>{const e="light",t="Light",l="#fff5c9",n=K(0,"Light Particles"),s=ct(n),r=_l(()=>({scaling:It(()=>1e9,1/3),baseResource:Se.lightning,gainResource:n})),u=Ye(()=>({thingsToReset:()=>[Ve]})),o=Ke(()=>({visibility:()=>S.milestones[32].earned.value?$.Visible:$.Hidden,layerID:e,display:B(()=>a("img",{src:"./nodes/light.png"},null)),color:l,reset:u}));Ae(o,{display:dt(n),pinnable:!0,style:()=>o.visibility.value===$.Visible?"":"display: none"});const c=mt(()=>({conversion:r,tree:ae.tree,treeNode:o})),d=[[b(()=>v[0].buyables[0].amount.value),b(()=>i.add(v[0].energy.value,1).log10().div(10).plus(1).pow(i.add(v[0].buyables[1].amount.value,1).log2()))],[b(()=>i.pow(10,i.add(v[0].energy.value,1).log10().sqrt()).sub(1).cbrt().times(v[1].buyables[0].amount.value).div(10)),b(()=>i.add(v[1].energy.value,1).log10().times(i.add(v[1].buyables[1].amount.value,1).log2()).times(5)),b(()=>i.add(v[1].energy.value,1).log10().sqrt().times(v[1].buyables[2].amount.value).plus(1))],[b(()=>i.pow(10,i.add(n.value,1).log10().cbrt()).sub(1).root(4).times(v[2].buyables[0].amount.value).div(7.5)),b(()=>i.add(v[2].energy.value,1).log10().times(i.add(v[2].buyables[1].amount.value,1).log2()).div(2).plus(1).sqrt()),b(()=>i.add(v[2].energy.value,1).log10().sqrt().times(v[2].buyables[2].amount.value).div(2).plus(1))],[b(()=>i.pow(10,i.sqrt(ie.combinators.value)).sub(1).root(5).times(v[3].buyables[0].amount.value).div(40)),b(()=>i.add(v[3].energy.value,1).log10().times(i.add(v[3].buyables[1].amount.value,1).log2()).div(1.5).plus(1).root(2.5)),b(()=>i.add(v[3].energy.value,1).log10().sqrt().times(v[3].buyables[2].amount.value).div(3).plus(1))],[b(()=>i.pow(10,i.cbrt(ve.challenges.reduce((C,P)=>i.add(C,P.completions.value),0))).sub(1).root(6).times(v[4].buyables[0].amount.value).div(225)),b(()=>i.add(v[4].energy.value,1).log10().times(i.add(v[4].buyables[1].amount.value,1).log2()).plus(1).pow(1.25)),b(()=>i.add(v[4].energy.value,1).log10().sqrt().times(v[4].buyables[2].amount.value).div(4).plus(1))],[b(()=>i.pow(10,i.add($e.ultrasound.value,1).log10().root(4)).sub(1).root(7).times(v[5].buyables[0].amount.value).div(400)),b(()=>i.add(v[5].energy.value,1).log10().times(i.add(v[5].buyables[1].amount.value,1).log2()).plus(1).cbrt()),b(()=>i.add(v[5].energy.value,1).log10().sqrt().times(v[5].buyables[2].amount.value).div(5).plus(1))],[b(()=>i.pow(10,i.add(ie.attractionPower.value,1).log10().root(6)).sub(1).root(8).times(v[6].buyables[0].amount.value).div(750)),b(()=>i.add(v[6].energy.value,1).log10().times(i.add(v[6].buyables[1].amount.value,1).log2()).plus(1).log10().div(2).plus(1)),b(()=>i.add(v[6].energy.value,1).log10().sqrt().times(v[6].buyables[2].amount.value).div(6).plus(1))]],h=[[()=>({title:"Passion Bright",description:"Generate 1 Red Energy every second.",effectDisplay:F(d[0][0].value)+"/s"}),()=>({title:"Blinding Light",description:"Red Energy boosts Particle gain.",effectDisplay:F(d[0][1].value)+"x"})],[()=>({title:"Peace and Quiet",description:"Generate Orange Energy over time based on Red Energy.",effectDisplay:F(d[1][0].value)+"/s"}),()=>({title:"Sunset Sight",description:"Orange Energy adds to Base Particle gain.",effectDisplay:"+"+F(d[1][1].value)}),()=>({title:"Furious Height",description:"Orange Energy boosts Red Energy gain at a reduced rate.",effectDisplay:F(d[1][2].value)+"x"})],[()=>({title:"Shattered Dreams",description:"Generate Yellow Energy over time based on Light Particles.",effectDisplay:F(d[2][0].value)+"/s"}),()=>({title:"Thunderous Streams",description:"Yellow Energy boosts Lightning Particle gain.",effectDisplay:F(d[2][1].value)+"x"}),()=>({title:"Frightened Screams",description:"Yellow Energy boosts Orange Energy gain at a reduced rate.",effectDisplay:F(d[2][2].value)+"x"})],[()=>({title:"Beautiful Fragrance",description:"Generate Green Energy over time based on Combinators.",effectDisplay:F(d[3][0].value)+"/s"}),()=>({title:"Quantum Condensed",description:"Green Energy boosts Ultrasound gain.",effectDisplay:F(d[3][1].value)+"x"}),()=>({title:"Calm Sense",description:"Green Energy boosts Yellow Energy gain at a reduced rate.",effectDisplay:F(d[3][2].value)+"x"})],[()=>({title:"The Night Sky",description:"Generate Blue Energy over time based on Total Cryo Challenge Completions.",effectDisplay:F(d[4][0].value)+"/s"}),()=>({title:"Ocean Nigh",description:"Blue Energy boosts the speed of all Aqua bars.",effectDisplay:F(d[4][1].value)+"x"}),()=>({title:"Frozen Light",description:"Blue Energy boosts Green Energy gain at a reduced rate.",effectDisplay:F(d[4][2].value)+"x"})],[()=>({title:"Morning Sights",description:"Generate Indigo Energy over time based on Ultrasound.",effectDisplay:F(d[5][0].value)+"/s"}),()=>({title:"Beach Plight",description:"Indigo Energy boosts Attraction Power gain.",effectDisplay:F(d[5][1].value)+"x"}),()=>({title:"Refracted Lights",description:"Indigo Energy boosts Blue Energy gain at a reduced rate.",effectDisplay:F(d[5][2].value)+"x"})],[()=>({title:"Cosmic Wonders",description:"Generate Violet Energy over time based on Attraction Power.",effectDisplay:F(d[6][0].value)+"/s"}),()=>({title:"Deathly Plunders",description:"Violet Energy extends the length of all Color Energy boosts.",effectDisplay:"+"+F(i.sub(d[6][1].value,1).times(100))+"%"}),()=>({title:"Torn Asunder",description:"Violet Energy boosts Indigo Energy gain at a reduced rate.",effectDisplay:F(d[6][2].value)+"x"})]],w=ut(()=>({visibility:()=>he(S.milestones[43].earned.value&&i.gte(v[5].buyables[2].amount.value,1)),canClick:()=>y.every(C=>i.eq(C.time.value,0))&&i.gte(n.value,1),display:()=>({title:"All Energy Boosts",description:"Triples all Color Energy gain for "+hl(p.value)+", but sacrifices all Light Particles."}),onClick:()=>{y.forEach(C=>{var P,I;(I=(P=C.spell).onClick)==null||I.call(P)})}})),p=b(()=>{let C=i.sub(60,i.div(60,i.add(n.value,1).log10().div(2).plus(1).sqrt()));return S.milestones[38].earned.value&&(C=i.mul(C,1.5)),S.milestones[42].earned.value&&(C=i.mul(C,1.5)),C=i.mul(C,d[6][1].value),C}),y=[...new Array(7)].map((C,P)=>{const I=K(0),D=ut(()=>({canClick:()=>i.eq(I.value,0)&&i.gte(n.value,1),display:()=>({title:Gt[P]+" Energy Boost"+(i.gt(I.value,0)?" (ACTIVE)":""),description:"Triples "+Gt[P]+" Energy gain for "+hl(i.eq(I.value,0)?p.value:I.value)+", but sacrifices "+(S.milestones[42].earned.value?"33% of":S.milestones[38].earned.value?"50% of":"all")+" Light Particles."}),onClick:()=>{I.value=p.value,n.value=S.milestones[42].earned.value?i.div(n.value,1.5):S.milestones[38].earned.value?i.div(n.value,2):0},style:()=>({backgroundColor:i.gt(I.value,0)?Il[P]:i.gte(n.value,1)?$l[P]:"grey",color:i.eq(I.value,0)&&i.gte(n.value,1)&&(P==4||P==5)?Il[P]:"black"})}));return{time:I,spell:D}}),v=[...new Array(7)].map((C,P)=>{const I=K(0,Gt[P]+" Energy"),D=b(()=>{let Q=i.dOne;return $e.upgrades[0].bought.value&&(Q=Q.times($e.upgradeEffects[0].value)),S.milestones[33].earned.value&&(Q=Q.times(2)),S.milestones[35].earned.value&&(Q=Q.times(3)),S.milestones[36].earned.value&&(Q=Q.times(S.adv37eff.value)),S.milestones[41].earned.value&&(Q=Q.times(4)),P<6&&(Q=Q.times(d[P+1][2].value)),i.gt(y[P].time.value,0)&&(Q=Q.times(3)),Q}),A=[...new Array(h[P].length)].map((Q,_e)=>We(()=>({visibility:()=>_e==0?$.Visible:he(i.gte(A[_e-1].amount.value,1)),cost:()=>i.pow(P/4+_e/2+2,i.pow(A[_e].amount.value,1+(Math.sqrt(P)+_e)/10).plus((Math.sqrt(P)/4+Math.sqrt(_e))*3)),resource:_e==0?n:I,display:h[P][_e]}))),ue=Tl(()=>({display:B(()=>a(V,null,[a("h3",null,[m("There is "),F(I.value),m(" "),Gt[P],m(" Energy")]),a("br",null,null),A.map(G),a("br",null,null),a("br",null,null),G(y[P].spell),a("br",null,null)])),style:{backgroundColor:xo[P],color:P==4||P==5?Il[P]:$l[P]}}));return{energy:I,gainMult:D,buyables:A,tab:ue}}),M=Pn([...new Array(7)].map((C,P)=>[Gt[P],()=>({visibility:()=>P==0?$.Visible:he(v[P].buyables.length>0&&v[P-1].buyables.every(I=>i.gte(I.amount.value,1))),tab:v[P].tab,display:Gt[P],style:()=>({borderColor:$l[P]})})]).reduce((C,[P,I])=>({...C,[P]:I}),{}));return me.on("update",C=>{for(let P=0;P<7;P++)v[P].energy.value=i.add(v[P].energy.value,i.mul(d[P][0].value,C).times(v[P].gainMult.value)),y[P].time.value=i.max(i.sub(y[P].time.value,C),0);S.milestones[43].earned.value&&(n.value=i.add(n.value,i.mul(r.currentGain.value,C).div(10)))}),{id:e,name:t,color:l,light:n,best:s,lights:v,lightBuyableEffects:d,tabFamily:M,lightSpells:y,allLightSpells:w,display:B(()=>a(V,null,[a(ft,{resource:n,color:l},null),G(c),a("br",null,null),a("br",null,null),G(M),a("br",null,null),a("br",null,null),G(w)])),treeNode:o}}),Se=Ge("li",()=>{const e="li",t="Lightning",l="#ffd500",n=K(0,"Lightning Particles"),s=ct(n),r={0:K(!1),1:K(!1),2:K(!1),3:K(!1)},u=$t(()=>({scaling:It(2500,1/4),baseResource:ae.particles,gainResource:n,roundUpCost:!0,gainModifier:Ot(Ie(ie.mainEff,"Particle Combinator Effect",S.milestones[15].earned),Ie(Ve.lightBuyableEffects[2][1],"Yellow Energy Buyable 2",()=>i.gte(Ve.lights[2].buyables[1].amount.value,1)))}));me.on("update",y=>{S.milestones[15].earned.value&&(n.value=i.mul(u.currentGain.value,y).plus(n.value))});const o={0:b(()=>i.add(n.value,1).log2().times(2)),1:b(()=>{let y=i.add(n.value,1).sqrt();return y.gte(100)&&(y=y.log(100).times(100)),y}),2:b(()=>i.add(n.value,1).log(3).plus(1).sqrt()),3:b(()=>i.add(n.value,1).log10().times(i.add(ae.particles.value,1).sqrt()).plus(1).log10().plus(1))},c=b(()=>S.milestones[18].earned.value?2:1),d=[ut(()=>({visibility:()=>i.gte(s.value,1)?$.Visible:$.None,canClick:()=>!r[0].value,onClick:y=>{r[0].value=!0,Object.values(r).filter(v=>v.value).length>c.value&&(r[1].value=!1,r[2].value=!1,r[3].value=!1)},display:B(()=>a(V,null,[a("h3",null,[m("Lightning Mode A "),r[0].value?"(Active)":""]),a("br",null,null),m("Increase Particle gain based on Lightning Particles (Currently: +"),Z(o[0].value,1),m(")")]))})),ut(()=>({visibility:()=>i.gte(s.value,1)?$.Visible:$.None,canClick:()=>!r[1].value,onClick:y=>{r[1].value=!0,Object.values(r).filter(v=>v.value).length>c.value&&(r[0].value=!1,r[2].value=!1,r[3].value=!1)},display:B(()=>a(V,null,[a("h3",null,[m("Lightning Mode B "),r[1].value?"(Active)":""]),a("br",null,null),m("Multiply Particle gain based on Lightning Particles (Currently: x"),Z(o[1].value,2),m(")")]))})),ut(()=>({visibility:()=>i.gte(s.value,2)?$.Visible:$.None,canClick:()=>!r[2].value,onClick:y=>{r[2].value=!0,Object.values(r).filter(v=>v.value).length>c.value&&(r[0].value=!1,r[1].value=!1,r[3].value=!1)},display:B(()=>a(V,null,[a("h3",null,[m("Lightning Mode C "),r[2].value?"(Active)":""]),a("br",null,null),m("Multiply Flame, Life, and Aqua Particle gain based on Lightning Particles (Currently: x"),Z(o[2].value,2),m(")")]))})),ut(()=>({visibility:()=>i.gte(s.value,5)?$.Visible:$.None,canClick:()=>!r[3].value,onClick:y=>{r[3].value=!0,Object.values(r).filter(v=>v.value).length>c.value&&(r[0].value=!1,r[1].value=!1,r[2].value=!1)},display:B(()=>a(V,null,[a("h3",null,[m("Lightning Mode D "),r[3].value?"(Active)":""]),a("br",null,null),m("Multiply Particle gain based on Particles and Lightning Particles (Currently: x"),Z(o[3].value,2),m(")")]))}))],h=Ye(()=>({thingsToReset:()=>{const y={id:e,name:t,color:l,lightning:n,best:s,treeNode:w,clickables:d,clickableEffects:o};return S.milestones[32].earned.value?[y]:[{...y,lightningSel:r}]}})),w=Ke(()=>({visibility:()=>S.milestones[0].earned.value?$.Visible:$.Hidden,layerID:e,display:B(()=>a("img",{src:"./nodes/lightning.png"},null)),color:l,reset:h}));Ae(w,{display:dt(n),pinnable:!0,style:()=>w.visibility.value===$.Visible?"":"display: none"});const p=mt(()=>({conversion:u,tree:ae.tree,treeNode:w}));return Ae(p,{display:B(()=>Rt("Modifiers","",u.gainModifier,u.scaling.currentGain(u))),pinnable:!0,direction:X.Down,style:"width: 400px; text-align: left"}),{id:e,name:t,color:l,lightning:n,best:s,lightningSel:r,display:B(()=>a(V,null,[a(ft,{resource:n,color:l},null),G(p),a("br",null,null),a("br",null,null),a("table",null,[a("tbody",null,[a("tr",null,[d.map(y=>a("td",null,[G(y)]))])])])])),treeNode:w,clickables:d,clickableEffects:o}}),jo=Symbol("MultiBuyable");function kt(e){return Oe(t=>{const l=Object.assign(t,e());if(l.canPurchase==null&&l.costSets.length==0)throw console.warn("Cannot create buyable without a canPurchase property or some element of costSets existing",l),"Cannot create buyable without a canPurchase property or some element of costSets existing";l.id=He("multibuyable-"),l.type=jo,l[Ee]=Gl,l.amount=l[Yt],l.canAfford=b(()=>{const u=l;for(let o=0;o<u.costSets.length;o++){const c=u.costSets[o],d=f(c.cost);if(i.lt(c.resource.value,d))return!1}return!0}),l.canPurchase==null&&(l.canPurchase=b(()=>f(l.visibility)===$.Visible&&f(l.canAfford)&&i.lt(l.amount.value,f(l.purchaseLimit)))),l.maxed=b(()=>i.gte(l.amount.value,f(l.purchaseLimit))),k(l,"classes");const n=l.classes;l.classes=b(()=>{const u=f(n)||{};return l.maxed.value&&(u.bought=!0),u}),k(l,"canPurchase"),k(l,"keepRes"),l.keepRes===void 0&&(l.keepRes=!1);const s=l.keepRes;l.canClick=l.canPurchase,l.onClick=l.purchase=function(){const u=l;if(!(!f(u.canPurchase)||u.costSets.length==0)){for(let o=0;o<u.costSets.length;o++){const c=u.costSets[o],d=f(c.cost);f(s)||(c.resource.value=i.sub(c.resource.value,d))}u.amount.value=i.add(u.amount.value,1)}},k(l,"display");const r=l.display;l.display=B(()=>{const u=f(r);if(ze(u)){const o=j(u);return a(o,null,null)}if(u!=null&&l.costSets.length>0){const o=l,c=j(u.title||"","h3"),d=j(u.description),h=j(u.effectDisplay||""),w=f(o.purchaseLimit)===i.dInf?a(V,null,[m("Amount: "),re(o.amount.value)]):a(V,null,[m("Amount: "),re(o.amount.value),m(" /")," ",re(f(o.purchaseLimit))]),p=o.costSets.map(y=>a("div",null,[F(f(y.cost)||0),m(" "),y.resource.displayName,a("br",null,null)]));return a("span",null,[u.title?a("div",null,[a(c,null,null)]):null,a(d,null,null),a("div",null,[a("br",null,null),w]),u.effectDisplay?a("div",null,[a("br",null,null),m("Currently: "),a(h,null,null)]):null,o.maxed.value?null:a("div",null,[a("br",null,null),m("Cost: "),p])])}return""}),k(l,"visibility"),ee(l,"visibility",$.Visible);for(let u=0;u<l.costSets.length;u++)k(l.costSets[u],"cost"),k(l.costSets[u],"resource");return k(l,"purchaseLimit"),ee(l,"purchaseLimit",i.dInf),k(l,"style"),k(l,"mark"),k(l,"small"),l[qe]=function(){const{display:u,visibility:o,style:c,classes:d,onClick:h,canClick:w,small:p,mark:y,id:v}=this;return{display:u,visibility:o,style:f(c),classes:d,onClick:h,canClick:w,small:p,mark:y,id:v}},l},je(0))}const ie=Ge("comb",()=>{const e="comb",t="Combinators",l="#03fca9",n=K(0,"Particle Combinators"),s=ct(n),r=b(()=>{let le=i.sqrt(n.value).plus(1);return S.milestones[32].earned.value&&(le=le.pow(2)),le}),u=mr(()=>({scaling:wo(1e11,4,2),baseResource:ae.particles,gainResource:n,roundUpCost:!0})),o=Ye(()=>({thingsToReset:()=>[ie]})),c=Ke(()=>({visibility:()=>S.milestones[15].earned.value?$.Visible:$.Hidden,layerID:e,display:B(()=>a("img",{src:"./nodes/combinators.png"},null)),color:l,reset:o,style:{transform:"scale(1.5)"},glowColor:()=>y.some(le=>le.canPurchase.value&&i.lt(le.amount.value,1))||i.gt(u.currentGain.value,n.value)?"red":""}));Ae(c,{display:dt(n),pinnable:!0,style:()=>c.visibility.value===$.Visible?"":"display: none"});const d=mt(()=>({conversion:u,tree:ae.tree,treeNode:c})),h=b(()=>{let le=n.value;i.gte(le,10)&&(le=i.mul(le,10).sqrt());let Qe=i.mul(50,le);return S.milestones[20].earned.value&&(Qe=Qe.times(1.2)),S.milestones[34].earned.value&&(Qe=Qe.times(1.2)),Qe.ceil()}),w={0:b(()=>{let le=i.add(Me.flame.value,1).log10().times(y[0].amount.value).times(M.value).plus(1).log10();return S.milestones[17].earned.value&&(le=le.pow(3)),le}),1:b(()=>i.add(Te.earth.value,1).log10().times(i.mul(y[1].amount.value,M.value).pow(1.5)).plus(1).cbrt()),2:b(()=>i.add(i.mul(n.value,i.mul(y[2].amount.value,M.value).plus(1).log10()),1).log10().plus(1).sqrt()),3:b(()=>i.add(Ue.air.value,1).log10().times(y[3].amount.value).times(M.value).plus(1).log10().div(2).plus(1)),4:b(()=>i.add(ae.baseGain.value,1).log10().times(i.mul(y[4].amount.value,M.value).pow(S.milestones[39].earned.value?2:1)).plus(1).log10().div(5).plus(1)),5:b(()=>i.add(i.mul(n.value,S.milestones[34].earned.value?i.mul(y[5].amount.value,M.value).div(100):i.mul(y[5].amount.value,M.value).plus(1).log10()),1).log10().plus(1)),6:b(()=>i.add(i.mul(n.value,i.mul(i.pow(y[6].amount.value,2),M.value).div(25)),1).log10().plus(1).sqrt()),7:b(()=>i.add(i.mul(i.sub(Le.buyablePower.value,1).max(0),i.mul(y[7].amount.value,M.value).div(40)),1))},p=ut(()=>({visibility:()=>he(S.milestones[40].earned.value),canClick:()=>y.some(le=>le.canPurchase.value),display:()=>({title:"Max All",description:" "}),onClick:()=>{for(let le=0;le<y.length;le++){const Qe=y[le],Hl=Qe.costSets.reduce((Xt,Wl)=>i.min(Xt,i.div(Wl.resource.value,f(Wl.cost))),i.dInf).min(i.sub(f(Qe.purchaseLimit),Qe.amount.value)).floor();Qe.costSets.forEach(Xt=>{Xt.resource.value=i.sub(Xt.resource.value,Hl.times(f(Xt.cost)))}),Qe.amount.value=i.add(Qe.amount.value,Hl)}},small:!0})),y=[kt(()=>({visibility:()=>he(i.gte(s.value,1)),costSets:[{cost:1e6,resource:Me.flame},{cost:1e4,resource:Se.lightning}],display:()=>({title:"Spark Molecule",description:"Increase Base Particle gain based on Flame Particles.",effectDisplay:"+"+F(w[0].value)}),purchaseLimit:h})),kt(()=>({visibility:()=>he(i.gte(s.value,1)),costSets:[{cost:25e5,resource:Fe.aqua},{cost:100,resource:Te.earth}],display:()=>({title:"Mud Molecule",description:"Multiply Particle & Aqua Particle gain based on Earth Particles.",effectDisplay:F(w[1].value)+"x"}),purchaseLimit:h})),kt(()=>({visibility:()=>he(i.gte(s.value,2)),costSets:[{cost:1e8,resource:Le.life},{cost:1e5,resource:Se.lightning},{cost:500,resource:Te.earth}],display:()=>({title:"Protein Molecule",description:"Increase Life Buyable Power based on Combinators.",effectDisplay:"+"+F(i.sub(w[2].value,1).times(100))+"%"}),purchaseLimit:h})),kt(()=>({visibility:()=>he(i.gte(s.value,3)),costSets:[{cost:5e9,resource:Fe.aqua},{cost:1e8,resource:ve.cryo},{cost:1e5,resource:Ue.air}],display:()=>({title:"Snow Molecule",description:'Boost the effect of the "Full Freeze" challenge based on Air Particles.',effectDisplay:"^"+F(w[3].value)}),purchaseLimit:h})),kt(()=>({visibility:()=>he(i.gte(s.value,4)),costSets:[{cost:1e12,resource:Me.flame},{cost:1e6,resource:Te.earth}],display:()=>({title:"Magma Molecule",description:'Boost the effect of the "Heat = Speed" upgrade based on Base Particle gain.',effectDisplay:"^"+F(w[4].value)}),purchaseLimit:h})),kt(()=>({visibility:()=>he(i.gte(s.value,5)),costSets:[{cost:5e14,resource:Le.life},{cost:2e7,resource:Te.earth}],display:()=>({title:"Wood Molecule",description:"Divide the Earth Grid Cost based on Combinators.",effectDisplay:"/"+F(w[5].value)}),purchaseLimit:h})),kt(()=>({visibility:()=>he(i.gte(s.value,6)),costSets:[{cost:1e10,resource:Se.lightning},{cost:1e15,resource:ve.cryo},{cost:5e9,resource:Te.earth}],display:()=>({title:"Steel Molecule",description:'Boost the effect of the "Temperature Decrease" challenge based on Combinators.',effectDisplay:"^"+F(w[6].value)}),purchaseLimit:h})),kt(()=>({visibility:()=>he(i.gte(s.value,7)),costSets:[{cost:5e22,resource:Le.life},{cost:1e9,resource:Ue.air}],display:()=>({title:"Methane Molecule",description:"Boost Attraction Power gain based on Life Buyable Power.",effectDisplay:F(w[7].value)+"x"}),purchaseLimit:h}))];me.on("update",le=>{S.milestones[36].earned.value&&(Q.value=i.add(Q.value,i.mul(i.add(Vt.value,Jt.value),le))),P.value=i.add(P.value,i.mul(i.add(Q.value,Y.value),le)),v.value=i.add(v.value,i.mul(i.add(P.value,D.value),le).times(C.value))});const v=K(1,"Attraction Power"),M=b(()=>i.max(v.value,1).log10().div(3).plus(1)),C=b(()=>{let le=1;return i.gte(n.value,7)&&(le=w[7].value),i.gte(Ve.lights[5].buyables[1].amount.value,1)&&(le=i.mul(le,Ve.lightBuyableEffects[5][1].value)),le}),P=K(0),I=We(()=>({cost:()=>i.pow(8,i.pow(i.div(I.amount.value,S.milestones[35].earned.value?3:1),2)),resource:v,display:()=>({title:"Covalent Bonds",description:"Creates "+F(D.value)+" additional Covalence Power."})})),D=b(()=>i.pow(2,i.mul(I.amount.value,ue.value)).sub(1)),A=We(()=>({cost:()=>i.pow(5,i.pow(A.amount.value,3)).times(1e5),resource:v,display:()=>({title:"Covalence Boosts",description:"Makes Covalent Bonds "+F(i.sub(ue.value,1).times(100))+"% stronger."})})),ue=b(()=>i.div(A.amount.value,2).plus(1)),Q=K(0),_e=We(()=>({cost:()=>i.pow(400,i.pow(i.div(_e.amount.value,S.milestones[35].earned.value?3:1),2)).times(100),resource:v,display:()=>({title:"Ionic Bonds",description:"Creates "+F(Y.value)+" additional Ionic Power."})})),Y=b(()=>i.pow(2,i.mul(_e.amount.value,O.value)).sub(1).div(10)),ce=We(()=>({cost:()=>i.pow(15,i.pow(ce.amount.value,3)).times(3e5),resource:v,display:()=>({title:"Ionic Boosts",description:"Makes Ionic Bonds "+F(i.sub(O.value,1).times(100))+"% stronger."})})),O=b(()=>i.div(ce.amount.value,2).plus(1)),Vt=K(0),Lt=We(()=>({cost:()=>i.pow(7e3,i.pow(i.div(Lt.amount.value,3),2)).times(1e8),resource:v,display:()=>({title:"Metallic Bonds",description:"Creates "+F(Jt.value)+" additional Metallic Power."})})),Jt=b(()=>i.pow(2,i.mul(Lt.amount.value,Xe.value)).sub(1).div(15)),Je=We(()=>({cost:()=>i.pow(65,i.pow(Je.amount.value,3)).times(1e9),resource:v,display:()=>({title:"Metallic Boosts",description:"Makes Metallic Bonds "+F(i.sub(Xe.value,1).times(100))+"% stronger."})})),Xe=b(()=>i.div(Je.amount.value,2).plus(1)),st=Tl(()=>({display:B(()=>a(V,null,[G(p),a("br",null,null),a("br",null,null),y.map(G),a("br",null,null)]))})),En=Tl(()=>({display:B(()=>a(V,null,[a("br",null,null),m("There is "),a("b",{style:"font-size: 20px;"},[F(v.value)]),m(" Attraction Power, which multiplies effective Molecules by")," ",a("b",{style:"font-size: 20px;"},[F(M.value)]),m("."),a("br",null,null),a("br",null,null),m("There is "),a("b",null,[F(i.add(P.value,D.value))])," ",m("Covalence Power. "),G(I),m(" "),G(A),a("br",null,null),a("br",null,null),m("There is "),a("b",null,[F(i.add(Q.value,Y.value))]),m(" Ionic Power. "),G(_e),m(" "),G(ce),a("br",null,null),a("br",null,null),Ne(a("div",null,[m("There is")," ",a("b",null,[F(i.add(Vt.value,Jt.value))])," ",m("Metallic Power. "),G(Lt),m(" "),G(Je),a("br",null,null),a("br",null,null)]),[[Pe,S.milestones[36].earned.value]])]))})),jl=Pn({Molecules:()=>({visibility:$.Visible,tab:st,display:"Molecules",style:{borderColor:l},glowColor:()=>y.some(le=>le.canPurchase.value&&i.lt(le.amount.value,1))||i.gt(u.currentGain.value,n.value)?"red":""}),Intrabonds:()=>({visibility:()=>he(S.milestones[23].earned.value),tab:En,display:"Intrabonds",style:()=>({borderColor:S.milestones[23].earned.value?"#ff9100":"transparent"})})});return{id:e,name:t,color:l,combinators:n,best:s,multiBuyables:y,multiBuyableEffects:w,mainEff:r,attractionPower:v,covalencePower:P,covalentBonds:I,covalenceBoost:A,ionicPower:Q,ionicBonds:_e,ionicBoost:ce,metallicPower:Vt,metallicBonds:Lt,metallicBoost:Je,tabFamily:jl,maxAll:p,display:B(()=>a(V,null,[a(ft,{resource:n,color:l},null),G(d),m(" "),a("br",null,null),a("br",null,null),m("Multiplies "),S.milestones[31].earned.value?"Flame, Life, Aqua, ":"",m("Earth, Lightning, Air, and Cryo Particles by "),F(r.value),m("."),a("br",null,null),a("br",null,null),G(jl)])),treeNode:c}}),Te=Ge("e",()=>{const e="e",t="Earth",l="#733000",n=K(0,"Earth Particles"),s=ct(n),r=K(0),u=ct(r),o=b(()=>{let Y=i.pow(2,r.value);return i.gte(ie.best.value,5)&&(Y=Y.div(ie.multiBuyableEffects[5].value)),Y}),c=b(()=>i.pow(2,r.value)),d=b(()=>i.div(.2,i.mul(r.value,-1).sub(1)).plus(.4)),h=b(()=>{const Y={},ce={};for(let Xe=1;Xe<=D.rows;Xe++)for(let st=1;st<=D.cols;st++)D.cells[Xe*100+st].state&&(Y[Xe]=i.add(Y[Xe]||1,c.value),ce[st]=i.add(ce[st]||1,c.value));const O=Object.values(Y),Vt=Object.values(ce),Lt=O.length==0?1:O.reduce((Xe,st)=>i.mul(Xe,st)),Jt=Vt.length==0?1:Vt.reduce((Xe,st)=>i.mul(Xe,st));let Je=i.mul(Lt,Jt).pow(d.value);return Je.gte(10)&&(Je=i.pow(10,Je.log10().sqrt())),Je.gte(100)&&(Je=i.pow(100,Je.log(100).cbrt())),Je}),w=b(()=>i.lt(r.value,1)?0:h.value.div(10).plus(.9).log10().times(10)),p=b(()=>i.lt(r.value,2)?0:i.sub(.8,i.div(.8,i.div(w.value,100).plus(1)))),y=b(()=>i.lt(r.value,4)?1:i.add(w.value,1).log10().div(2).plus(1).pow(2)),v=b(()=>i.lt(r.value,16)?1:h.value.pow(1.1).div(Math.pow(100,1.1)).plus(.99)),M=$t(()=>({scaling:It(15e4,1/2),baseResource:Me.flame,gainResource:n,roundUpCost:!0,gainModifier:Ot(Ie(ie.mainEff,"Particle Combinator Effect",S.milestones[15].earned))})),C=B(()=>a(Nn,{skipConfirm:i.lt(r.value,u.value),class:"feature clickable can",disabled:i.lt(r.value,1),customDisplay:"WARNING: This will reset your Earth Grid!",forceOnClick:()=>{r.value=i.sub(r.value,1);for(let Y=1;Y<=D.rows;Y++)for(let ce=1;ce<=D.cols;ce++)D.setState(Y*100+ce,!0)}},{default:()=>[a("b",null,[m("Level Down")])]})),P=ut(()=>({canClick:()=>Object.values(D.cells).every(Y=>Y.state),onClick:()=>{if(i.gte(r.value,i.sub(u.value,1)))for(let Y=1;Y<=D.rows;Y++)for(let ce=1;ce<=D.cols;ce++)D.setState(Y*100+ce,!1);r.value=i.add(r.value,1)},display:()=>({title:"Level Up",description:"Levels up the Earth Grid, but resets it. Requires all grid cells filled."})})),I=ut(()=>({visibility:()=>he(S.milestones[25].earned.value),canClick:()=>i.gte(n.value,i.mul(o.value,50))&&!Object.values(D.cells).every(Y=>Y.state),onClick:()=>{n.value=i.sub(n.value,i.mul(o.value,50));for(let Y=1;Y<=D.rows;Y++)for(let ce=1;ce<=D.cols;ce++)D.setState(Y*100+ce,!0)},display:()=>({title:"Fill Grid",description:"Cost: "+Z(i.mul(o.value,50))+" Earth Particles"})})),D=bo(()=>({rows:5,cols:5,getStartState:()=>!1,getDisplay:()=>" ",getStyle:(Y,ce)=>({width:"40px",minHeight:"40px",height:"40px",margin:"0 auto",backgroundColor:ce?"green":"black"}),getCanClick:(Y,ce)=>!ce&&i.gte(n.value,o.value),onClick:Y=>{n.value=i.sub(n.value,o.value),D.setState(Y,!0)}})),A=Ye(()=>({thingsToReset:()=>[Te]})),ue=Ke(()=>({visibility:()=>S.milestones[11].earned.value?$.Visible:$.Hidden,layerID:e,display:B(()=>a("img",{src:"./nodes/earth.png"},null)),color:l,reset:A}));Ae(ue,{display:dt(n),pinnable:!0,style:()=>ue.visibility.value===$.Visible?"":"display: none"});const Q=mt(()=>({conversion:M,tree:ae.tree,treeNode:ue}));Ae(Q,{display:B(()=>Rt("Modifiers","",M.gainModifier,M.scaling.currentGain(M))),pinnable:!0,direction:X.Down,style:"width: 400px; text-align: left"});const _e=K(0);return me.on("update",Y=>{S.milestones[24].earned.value&&(n.value=i.mul(M.currentGain.value,Y).plus(n.value)),S.milestones[37].earned.value&&(_e.value+=Y,_e.value>=1&&(_e.value=0,i.gte(n.value,i.mul(o.value,100))&&(P.onClick(),I.onClick())))}),{id:e,name:t,color:l,earth:n,best:s,fillGrid:I,gridLevel:r,bestGridLevel:u,display:B(()=>a(V,null,[a(ft,{resource:n,color:l},null),G(Q),a("br",null,null),a("br",null,null),i.gte(s.value,1)?a("div",null,[m("Grid Level: "),we(r.value),a("br",null,null),m("Grid Cost: "),we(o.value),m(" Earth Particles"),a("br",null,null),a("br",null,null),m("Flame Particle Multiplier: "),Z(h.value),m("x"),a("br",null,null),Ne(a("span",null,[m("Base Particle Gain Added: +"),Z(w.value),m("/s"),a("br",null,null)]),[[Pe,i.gte(r.value,1)]]),Ne(a("span",null,[m("Torrent Effect Added: +"),Z(i.mul(p.value,100)),m("%"),a("br",null,null)]),[[Pe,i.gte(r.value,2)]]),Ne(a("span",null,[m("Life Buyable 6 Effect Mult: "),Z(y.value,2),m("x"),a("br",null,null)]),[[Pe,i.gte(r.value,4)]]),Ne(a("span",null,[m("Particle Gain Mult: "),Z(v.value,2),m("x"),a("br",null,null)]),[[Pe,i.gte(r.value,16)]]),a("br",null,null),G(I),a("br",null,null),G(D),a("br",null,null),a("table",null,[a("tr",null,[a("td",null,[G(C)])]),a("tr",null,[a("td",null,[G(P)])])])]):a("div",null,null)])),treeNode:ue,grid:D,flameMult:h,baseGainAdded:w,torrentEffAdded:p,lb6Mult:y,particleGainMult:v,autoTime:_e}}),S=Ge("adv",()=>{const e="adv",t="Advancements",l="#ffffff",n=[125,700,2e3,5e3,25e3,36e3,6e4,885e3,225e4,435e4,325e5,405e5,55555555,1e9,235e7,325e7,1e10,2e10,125e9,25e12,6e13,1e14,5e14,1e17,12e17,4e18,15e18,1e20,5e21,45e21,135e21,1e24,14e24,1e27,12e27,6e28,5e30,25e31,225e34,5e37,2e39,72e40,133e43,35e45,5e46,i.dInf],s=K(0,"Advancements"),r=$t(()=>({scaling:{currentGain:v=>i.gte(v.baseResource.value,n[new i(v.gainResource.value).toNumber()]||i.dInf)?1:0,currentAt:v=>n[new i(v.gainResource.value).toNumber()]||i.dInf,nextAt:v=>n[new i(v.gainResource.value).toNumber()]||i.dInf},baseResource:ae.particleGain,gainResource:s,roundUpCost:!0,buyMax:!1})),u=Ye(()=>({thingsToReset:()=>[S]})),o=Ke(()=>({layerID:e,display:"A",color:l,reset:u,glowColor:()=>i.gt(r.actualGain.value,0)?"red":""}));Ae(o,{display:dt(s),pinnable:!0,direction:X.Right});const c=mt(()=>({conversion:r,baseResourceName:"particles/s",tree:ae.tree,treeNode:o})),d=b(()=>{let v=120;return y[8].earned.value&&(v=i.sub(s.value,7).times(30).plus(v)),y[30].earned.value&&(v=1/0),v}),h=b(()=>i.pow(2,i.root(Te.gridLevel.value,1.5))),w=b(()=>i.pow(1.2,i.sub(s.value,35)));function p(v,M){const C=j(M);return ao(()=>({visibility:()=>i.gte(s.value,v)?$.Visible:$.None,shouldEarn(){return i.gte(s.value,v)},display:{requirement:B(()=>a(V,null,[a("h3",null,[we(v),m(" Advancement")]),a("br",null,null),a(C,null,null)]))},style:{width:"30em"}}))}const y=[p(1,"Unlock Lightning"),p(2,"Unlock a new row of Flame Upgrades"),p(3,"Unlock Cryo"),p(4,"Gain 100% of Flame, Life, and Aqua Particles every second."),p(5,B(()=>a(V,null,[m("Flame, Life, and Aqua Particle gain is tripled for the first")," ",we(d.value),m(" seconds of a run.")]))),p(6,"Unlock a new row of Life Buyables"),p(7,"Unlock Air"),p(8,"Unlock a new Aqua Bar"),p(9,"The milestone at 5 Advancements lasts 30 seconds longer per Advancement after 7"),p(10,"Purchasing Life Buyables does not spend Life Particles"),p(11,"The Air requirement uses a more efficient formula, you can buy max Air, and you can buy all Life Buyables at once."),p(12,"Unlock Earth, and all Aqua Bars are twice as fast."),p(13,"Layers only reset along their branches, rather than by row (this does NOT affect Cryo Challenges)."),p(14,"After 1 second of a reset, all Flame Upgrades are automatically purchased if you can afford them."),p(15,B(()=>a(V,null,[m("Wind/Zephyr/Tornado Speeds work sublinearly (square root) rather than logarithmically, and Aqua Bars are faster based on your Earth Grid Level ("),F(h.value),m("x)")]))),p(16,"Unlock Particle Combinators, gain 100% of Lightning Particle gain every second, and starting a Cryo Challenge only resets the Aqua layer."),p(17,"All Life Buyables are automatically purchased every second."),p(18,"The Spark Molecule effect is cubed."),p(19,"You can activate two Lightning Modes at once."),p(20,"Unlock a new Aqua Bar."),p(21,"Increase the Molecule limit by 20%."),p(22,"Gain 100% of Air Particle gain every second."),p(23,"Gain 100% of Cryo Particle gain every second."),p(24,"Unlock Intrabonds."),p(25,"Gain 100% of Earth Particle gain every second."),p(26,"You can fill the Earth Grid with a single button."),p(27,"Keep Cryo Challenge completions on all resets, and increase the completion limits of the first two Cryo Challenges by 10."),p(28,"The Wave requirement scales 50% slower."),p(29,"Multiply Zephyr Speed and Tornado Speed by 10."),p(30,'Square the effect of the "Liquid Fire", "Magma Spirit" and "Speed = Heat" upgrades.'),p(31,"The effect of the milestone at 5 Advancements is permanently active, and all Aqua bar requirements scale 10% slower."),p(32,"The main Combinator effect also affects the first row of Particles."),p(33,"Unlock Light & Sound, square the Particle Combinator effect, and Lightning Modes are never de-selected by resets."),p(34,"All Light Energy colors are generated twice as fast, and you can buy max Life Buyables."),p(35,"Increase the Molecule limit by 20%, and the Wood Molecule effect uses a better formula."),p(36,"Covalent/Ionic Bond costs scale 67% slower, and all Light Energy colors are generated 3x as fast."),p(37,B(()=>a(V,null,[m("Unlock Metallic Bonds, and all Light Energy colors are generated 20% faster for every Advancement after 35 ("),F(w.value),m("x)")]))),p(38,"Automatically level up and fill the Earth Grid if both are possible every second, and double Ultrasound gain."),p(39,"Color Energy Boosts only use up half of your Light Particles when used, and they last 50% longer."),p(40,"The amount of Magma Molecules are effectively squared."),p(41,"You can max all Molecules at once."),p(42,"All Light Energy colors are generated 4x as fast."),p(43,"Color Energy boosts only use up 33% of your Light Particles when used, and they last 50% longer."),p(44,"Gain 10% of Light Particle gain every second, and you can activate all Color Energy boosts at once if you have unlocked all seven Color Energy types."),p(45,"Unlock Void.")];return{id:e,name:t,color:l,advancements:s,adv5time:d,adv15eff:h,adv37eff:w,display:B(()=>a(V,null,[a(ft,{resource:s,color:l},null),G(c),a("br",null,null),a("br",null,null),a("table",null,[a("tbody",null,[y.map(v=>a("tr",null,[a("td",null,[G(v)])]))])])])),treeNode:o,milestones:y}}),Le=Ge("l",()=>{const e="l",t="Life",l="#32a85e",n=K(0,"Life Particles"),s=ct(n),r=K(0),u=K(0),o=b(()=>{let A=10;return ve.challenges[1].active.value&&(A=i.dInf),A}),c=$t(()=>({scaling:It(o,1/3),baseResource:ae.particles,gainResource:n,roundUpCost:!0,gainModifier:Ot(Ie(p[3],"Life Buyable 4",S.milestones[5].earned),Ie(Se.clickableEffects[2],"Lightning Mode C",()=>Se.lightningSel[2].value),Ie(3,"Advancement 5",()=>S.milestones[4].earned.value&&i.lte(r.value,S.adv5time.value)),Ie(Ue.windEff,"Wind Effect",S.milestones[6].earned),Ie(ie.mainEff,"Particle Combinator Effect",S.milestones[31].earned))}));me.on("update",A=>{S.milestones[3].earned.value&&(n.value=i.mul(c.currentGain.value,A).plus(n.value)),r.value+=A,u.value+=A,S.milestones[16].earned.value&&u.value>=1&&(u.value=0,M.onClick(void 0))});const d=b(()=>{let A=1;return i.gte(ie.best.value,2)&&(A=ie.multiBuyableEffects[2].value),$e.upgrades[2].bought.value&&(A=i.add(A,$e.upgradeEffects[2].value)),A}),h=b(()=>Ue.zephyrEff.value),w=[b(()=>{let A=p[5].value;return Me.upgradesR2[0].bought.value&&(A=A.plus(Me.upgradeEffects[3].value)),A.plus(h.value)}),b(()=>i.add(p[5].value,h.value)),b(()=>i.add(p[5].value,h.value)),b(()=>i.add(p[5].value,h.value)),b(()=>i.add(p[5].value,h.value)),b(()=>h.value)],p={0:b(()=>i.add(C[0].amount.value,w[0].value).times(d.value)),1:b(()=>i.pow(2,i.add(C[1].amount.value,w[1].value).times(d.value))),2:b(()=>i.mul(2,i.add(C[2].amount.value,w[2].value).times(d.value))),3:b(()=>i.pow(1.15,i.add(C[3].amount.value,w[3].value).times(d.value))),4:b(()=>i.pow(2.25,i.add(C[4].amount.value,w[4].value).times(d.value))),5:b(()=>i.add(ae.particleGain.value,1).log10().times(i.add(C[5].amount.value,w[5].value).times(d.value)).plus(1).log10().div(5).times(Te.lb6Mult.value))},y=b(()=>{let A=i.dOne;return A=A.times(ve.challenge2Data.reward.value),A}),v=b(()=>{let A=i.dOne;return ve.challenges[0].active.value&&(A=A.times(ve.challenge1Data.lifeBuyableCosts.value)),ve.challenges[2].active.value&&(A=A.times(ve.challenge3Data.exp.value)),A}),M=ut(()=>({visibility:()=>S.milestones[10].earned.value?$.Visible:$.None,canClick:()=>S.milestones[10].earned.value,display:()=>S.milestones[33].earned.value?"Max All":"Buy All",small:!0,onClick:A=>{for(let ue=0;ue<C.length;ue++)if(f(C[ue].canClick))if(S.milestones[33].earned.value){const Q=C[ue].target();C[ue].amount.value=i.max(C[ue].amount.value,Q)}else C[ue].onClick()}})),C=[We(()=>({visibility:()=>i.gt(s.value,0)?$.Visible:$.None,cost(){const A=C[0].amount.value;return i.pow(3,A).div(y.value).pow(v.value)},target(){return i.root(n.value,v.value).times(y.value).max(1).log(3).plus(1).floor()},resource:n,display:()=>({title:"Regeneration",description:"Generate 1 Particle/second.",effectDisplay:"+"+re(p[0].value)}),keepRes:()=>S.milestones[9].earned.value})),We(()=>({visibility:()=>i.gt(C[0].amount.value,0)?$.Visible:$.None,cost(){const A=C[1].amount.value;return i.pow(4,i.pow(A,1.2)).times(10).div(y.value).pow(v.value)},target(){return i.root(n.value,v.value).times(y.value).div(10).max(1).log(4).root(1.2).plus(1).floor()},resource:n,display:()=>({title:"The Source",description:"Double Particle gain.",effectDisplay:Z(p[1].value)+"x"}),keepRes:()=>S.milestones[9].earned.value})),We(()=>({visibility:()=>i.gt(C[1].amount.value,0)?$.Visible:$.None,cost(){const A=C[2].amount.value;return i.pow(2.5,i.pow(A,1.4)).times(50).div(y.value).pow(v.value)},target(){return i.root(n.value,v.value).times(y.value).div(50).max(1).log(2.5).root(1.4).plus(1).floor()},resource:n,display:()=>({title:"Solar Warmth",description:"Flame Upgrade 1's effect increases by 2.",effectDisplay:"+"+re(p[2].value)}),keepRes:()=>S.milestones[9].earned.value})),We(()=>({visibility:()=>S.milestones[5].earned.value?$.Visible:$.None,cost(){const A=C[3].amount.value;return i.pow(2,i.pow(A,1.6)).times(200).div(y.value).pow(v.value)},target(){return i.root(n.value,v.value).times(y.value).div(200).max(1).log2().root(1.6).plus(1).floor()},resource:n,display:()=>({title:"Existence Formula",description:"Increase Life Particle gain by 15%.",effectDisplay:Z(p[3].value,2)+"x"}),keepRes:()=>S.milestones[9].earned.value})),We(()=>({visibility:()=>i.gt(C[3].amount.value,0)?$.Visible:$.None,cost(){const A=C[4].amount.value;return i.pow(1.5,i.pow(A,1.8)).times(1e4).div(y.value).pow(v.value)},target(){return i.root(n.value,v.value).times(y.value).div(1e4).max(1).log(1.5).root(1.8).plus(1).floor()},resource:n,display:()=>({title:"Water Lily",description:"Make the Bubble bar 125% faster.",effectDisplay:Z(p[4].value,2)+"x"}),keepRes:()=>S.milestones[9].earned.value})),We(()=>({visibility:()=>i.gt(C[4].amount.value,0)?$.Visible:$.None,cost(){const A=C[5].amount.value;return i.pow(2,i.pow(2,A)).times(12e3).div(y.value).pow(v.value)},target(){return i.root(n.value,v.value).times(y.value).div(12e3).max(1).log2().sqrt().plus(1).floor()},resource:n,display:()=>({title:"Purest Form",description:"Add levels to all previous Life Buyables based on Particle gain.",effectDisplay:"+"+Z(p[5].value,2)}),keepRes:()=>S.milestones[9].earned.value}))],P=Ye(()=>({thingsToReset:()=>[Le]})),I=Ke(()=>({layerID:e,display:B(()=>a("img",{src:"./nodes/life.png"},null)),color:l,reset:P,glowColor:()=>C.some(A=>A.canPurchase.value)?"red":""}));Ae(I,{display:dt(n),pinnable:!0});const D=mt(()=>({conversion:c,tree:ae.tree,treeNode:I}));return Ae(D,{display:B(()=>Rt("Modifiers","",c.gainModifier,c.scaling.currentGain(c))),pinnable:!0,direction:X.Down,style:"width: 400px; text-align: left"}),{id:e,name:t,color:l,life:n,best:s,time:r,autoTime:u,buyableEffects:p,display:B(()=>a(V,null,[a(ft,{resource:n,color:l},null),G(D),a("br",null,null),a("br",null,null),Ne(a("div",null,[a("b",null,[m("Buyable Power: "),Z(i.mul(d.value,100)),m("%")])]),[[Pe,i.gt(d.value,1)]]),G(M),a("table",null,[a("tbody",null,[a("tr",null,[a("td",null,[G(C[0])]),a("td",null,[G(C[1])]),a("td",null,[G(C[2])])]),a("tr",null,[a("td",null,[G(C[3])]),a("td",null,[G(C[4])]),a("td",null,[G(C[5])])])])])])),treeNode:I,buyables:C,buyablePower:d}}),Me=Ge("f",()=>{const e="f",t="Flame",l="#fc3b00",n=K(0,"Flame Particles"),s=ct(n),r=K(0),u=K(!1),o=b(()=>ve.challenges[0].active.value?i.dInf:10),c=$t(()=>({scaling:It(o,1/3),baseResource:ae.particles,gainResource:n,roundUpCost:!0,gainModifier:Ot(Ie(d[4],"Flame Upgrade 5",p[1].bought),Ie(Se.clickableEffects[2],"Lightning Mode C",()=>Se.lightningSel[2].value),Ie(3,"Advancement 5",()=>S.milestones[4].earned.value&&i.lte(r.value,S.adv5time.value)),Ie(Te.flameMult,"Earth Grid Boost 1",S.milestones[11].earned),Ie(ie.mainEff,"Particle Combinator Effect",S.milestones[31].earned),Ie($e.upgradeEffects[4],"Sound Upgrade 5",$e.upgrades[4].bought))}));me.on("update",C=>{if(S.milestones[3].earned.value&&(n.value=i.mul(c.currentGain.value,C).plus(n.value)),r.value+=C,!u.value&&S.milestones[13].earned.value&&r.value>=1&&i.gte(n.value,i.pow(2e4,h.value))){u.value=!0;for(let P=0;P<3;P++)w[P].purchase(),p[P].purchase()}});const d={0:b(()=>{let C=new i(1);return C=C.plus(Le.buyableEffects[2].value),C.pow(ve.challenge3Data.reward.value)}),1:b(()=>{let C=i.add(n.value,1).log(20).plus(1);return i.gte(ie.best.value,4)&&(C=C.pow(ie.multiBuyableEffects[4].value)),C}),2:b(()=>i.add(n.value,1).log(5).plus(1).pow(S.milestones[29].earned.value?2:1)),3:b(()=>i.add(n.value,1).log10().pow(S.milestones[29].earned.value?1:.5)),4:b(()=>i.add(ae.particles.value,1).log10().plus(1).log10().plus(1).pow(S.milestones[29].earned.value?2:1)),5:b(()=>i.add(n.value,1).log10().sqrt().times(3))},h=b(()=>{let C=i.dOne;return ve.challenges[2].active.value&&(C=C.times(ve.challenge3Data.exp.value)),C}),w=[Re(()=>({visibility:()=>i.gt(s.value,0)?$.Visible:$.None,cost:1,resource:n,display:B(()=>a("div",null,[a("h3",null,[m("A Hot Start")]),a("br",null,null),m("Generate")," ",Z(d[0].value,i.gt(ve.challenge3Data.reward.value,1)?2:0)," ",m("Particles/second."),a("br",null,null),a("br",null,null),m("Cost: "),ot(n,f(w[0].cost)),m(" "),n.displayName]))})),Re(()=>({visibility:()=>w[0].bought.value?$.Visible:$.None,cost:()=>i.pow(5,h.value),resource:n,display:B(()=>a("div",null,[a("h3",null,[m("Heat = Speed")]),a("br",null,null),m("Flame Particles multiply Particle gain at a reduced rate."),a("br",null,null),m("Currently: "),Z(d[1].value,2),m("x"),a("br",null,null),a("br",null,null),m("Cost: "),ot(n,f(w[1].cost)),m(" "),n.displayName]))})),Re(()=>({visibility:()=>w[1].bought.value?$.Visible:$.None,cost:()=>i.pow(30,h.value),resource:n,display:B(()=>a("div",null,[a("h3",null,[m("Liquid Fire")]),a("br",null,null),m("Flame Particles make the Bubble bar faster."),a("br",null,null),m("Currently: "),Z(d[2].value,2),m("x"),a("br",null,null),a("br",null,null),m("Cost: "),ot(n,f(w[2].cost)),m(" "),n.displayName]))}))],p=[Re(()=>({visibility:()=>S.milestones[1].earned.value?$.Visible:$.None,cost:()=>i.pow(100,h.value),resource:n,display:B(()=>a("div",null,[a("h3",null,[m("Magma Spirit")]),a("br",null,null),m("Flame Particles add levels to the first Life Buyable."),a("br",null,null),m("Currently: +"),we(d[3].value),a("br",null,null),a("br",null,null),m("Cost: "),ot(n,f(p[0].cost)),m(" "),n.displayName]))})),Re(()=>({visibility:()=>p[0].bought.value?$.Visible:$.None,cost:()=>i.pow(1e3,h.value),resource:n,display:B(()=>a("div",null,[a("h3",null,[m("Speed = Heat?")]),a("br",null,null),m("Particles multiply Flame Particle gain at a reduced rate."),a("br",null,null),m("Currently: "),Z(d[4].value,2),m("x"),a("br",null,null),a("br",null,null),m("Cost: "),ot(n,f(p[1].cost)),m(" "),n.displayName]))})),Re(()=>({visibility:()=>p[1].bought.value?$.Visible:$.None,cost:()=>i.pow(1e4,h.value),resource:n,display:B(()=>a("div",null,[a("h3",null,[m("Hot Feet")]),a("br",null,null),m("Flame Particles increase base Particle gain at a reduced rate."),a("br",null,null),m("Currently: +"),Z(d[5].value,2),a("br",null,null),a("br",null,null),m("Cost: "),ot(n,f(p[2].cost)),m(" "),n.displayName]))}))],y=Ye(()=>({thingsToReset:()=>[Me]})),v=Ke(()=>({layerID:e,display:B(()=>a("img",{src:"./nodes/flame.png"},null)),color:l,reset:y,glowColor:()=>w.some(C=>C.canPurchase.value)||p.some(C=>C.canPurchase.value)?"red":""}));Ae(v,{display:dt(n),pinnable:!0});const M=mt(()=>({conversion:c,tree:ae.tree,treeNode:v}));return Ae(M,{display:B(()=>Rt("Modifiers","",c.gainModifier,c.scaling.currentGain(c))),pinnable:!0,direction:X.Down,style:"width: 400px; text-align: left"}),{id:e,name:t,color:l,flame:n,best:s,time:r,autoDone:u,upgradeEffects:d,display:B(()=>a(V,null,[a(ft,{resource:n,color:l},null),G(M),a("br",null,null),a("br",null,null),a("table",null,[a("tbody",null,[a("tr",null,[w.map(C=>a("td",null,[G(C)]))]),a("tr",null,[p.map(C=>a("td",null,[G(C)]))])])])])),treeNode:v,upgradesR1:w,upgradesR2:p}});const Ho=H({props:{visibility:{type:E(Number),required:!0},display:{type:E(Object,String,Function),required:!0},title:{type:E(Object,String,Function),required:!0},color:E(String),collapsed:{type:Object,required:!0},style:E(Object,String,Array),titleStyle:E(Object,String,Array),bodyStyle:E(Object,String,Array),classes:E(Object),id:{type:String,required:!0}},components:{Node:Tt,CollapseTransition:Vn},setup(e){const{title:t,display:l}=be(e),n=zt(t),s=zt(l),r=b(()=>Zt[de.theme].mergeAdjacent);return{titleComponent:n,bodyComponent:s,stacked:r,unref:f,Visibility:$}}}),Wo=e=>(bt("data-v-338c9154"),e=e(),wt(),e),zo=Wo(()=>g("span",{class:"toggle"},"\u25BC",-1));function Yo(e,t,l,n,s,r){var c;const u=De("CollapseTransition"),o=De("Node");return e.unref(e.visibility)!==e.Visibility.None?(_(),q("div",{key:0,class:ye(["infobox",{collapsed:e.unref(e.collapsed),stacked:e.stacked,...e.unref(e.classes)}]),style:oe([{borderColor:e.unref(e.color),visibility:e.unref(e.visibility)===e.Visibility.Hidden?"hidden":void 0},(c=e.unref(e.style))!=null?c:{}])},[g("button",{class:"title",style:oe([{backgroundColor:e.unref(e.color)},e.unref(e.titleStyle)||[]]),onClick:t[0]||(t[0]=d=>e.collapsed.value=!e.unref(e.collapsed))},[zo,(_(),x(fe(e.titleComponent)))],4),a(u,null,{default:z(()=>[e.unref(e.collapsed)?L("",!0):(_(),q("div",{key:0,class:"body",style:oe({backgroundColor:e.unref(e.color)})},[(_(),x(fe(e.bodyComponent),{style:oe(e.unref(e.bodyStyle))},null,8,["style"]))],4))]),_:1}),a(o,{id:e.id},null,8,["id"])],6)):L("",!0)}var Zo=te(Ho,[["render",Yo],["__scopeId","data-v-338c9154"]]);const Ko=Symbol("Infobox");function pt(e){const t=je(!0);return Oe(()=>{const l=e();return l.id=He("infobox-"),l.type=Ko,l[Ee]=Zo,l.collapsed=t,k(l,"visibility"),ee(l,"visibility",$.Visible),k(l,"color"),k(l,"style"),k(l,"titleStyle"),k(l,"bodyStyle"),k(l,"classes"),k(l,"title"),k(l,"display"),l[qe]=function(){const{visibility:n,display:s,title:r,color:u,collapsed:o,style:c,titleStyle:d,bodyStyle:h,classes:w,id:p}=this;return{visibility:n,display:s,title:r,color:u,collapsed:o,style:f(c),titleStyle:d,bodyStyle:h,classes:w,id:p}},l})}const In=Ge("lore",()=>{const e="lore",t="Lore",l="#f4d4ff",n=[pt(()=>({visibility:$.Visible,color:"#000000",title:"The Beginning",display:B(()=>a(V,null,[m("So... you're telling me that I can make my own universe? Sweet!"),a("br",null,null),a("br",null,null),m("No, I'm not going to back down just because I'm younger than you, let me have this."),a("br",null,null),a("br",null,null),m("Great! So, I can just take these tools and get started then?"),a("br",null,null),a("br",null,null),m("Alright, here goes!"),a("br",null,null)])),titleStyle:{color:"white"}})),pt(()=>({visibility:et(()=>he(S.milestones[0].earned.value)),color:"#ffd500",title:"A New Particle",display:B(()=>a(V,null,[m("Ooh I have news for you! I found a new primordial particle!"),a("br",null,null),a("br",null,null),m("Oh... you've already heard of this one? I thought I made some kind of discovery..."),a("br",null,null),a("br",null,null),m("Yes, I did expect a universe to be normally made of only three particle types, thank you."),a("br",null,null),a("br",null,null),m("Ugh I guess I'll just keep building this thing then, maybe you could tell me things like this a little sooner next time?"),a("br",null,null)])),style:{color:"black"}})),pt(()=>({visibility:et(()=>he(S.milestones[2].earned.value)),color:"#03f4fc",title:"Frozen Solid",display:B(()=>a(V,null,[m("Oh let me guess, this one was already discovered too, right?"),a("br",null,null),a("br",null,null),m("See, I knew it. Damn discovering new things is harder than I thought."),a("br",null,null),a("br",null,null),m("I guess particles that make things cold aren't really all that interesting, and are probably completely useless, but hey why not put them in too, right?"),a("br",null,null),a("br",null,null),m("Time to keep making this boring universe..."),a("br",null,null)])),style:{color:"black"}})),pt(()=>({visibility:et(()=>he(S.milestones[3].earned.value)),color:"#ffffff",title:"Self Sustaining",display:B(()=>a(V,null,[m("Ah, my universe has finally reached the point where it can generate its own particles! This has gotta be revolutionary, right?"),a("br",null,null),a("br",null,null),m("No? You're saying that self-sustaining universes already exist? Ughhhh what does it take to make something new?"),a("br",null,null),a("br",null,null),m("Nah, I'll be able to make something unique, you may think it's all been done before but I'm sure I'll stumble upon something unique soon."),a("br",null,null),a("br",null,null),m("You don't have to believe in me, just let me prove you wrong."),a("br",null,null)])),style:{color:"black"}})),pt(()=>({visibility:et(()=>he(S.milestones[6].earned.value)),color:"#ffd1fb",title:"Sustenance of the Universe",display:B(()=>a(V,null,[m("Oh, so now I discover Air Particles? I would've thought that was needed sooner, no? How can Flame Particles exist without some air to keep them alive?"),a("br",null,null),a("br",null,null),m("You're saying that there aren't rules here yet? I mean I guess I never actually made those, but who cares? There should be some default rules to keep things making sense, right?"),a("br",null,null),a("br",null,null),m("No? I mean that could result in some wacky worlds, couldn't it? Don't we want some kind of order in the multiverse?"),a("br",null,null),a("br",null,null),m("Okay okay, jeez you don't have to yell, I know I shouldn't be asking these things, I was just saying-"),a("br",null,null),a("br",null,null),m("Ugh fine, I guess I'll just keep building the world like you asked, but could I get some answers later?"),a("br",null,null),a("br",null,null),m("Sweet! Thanks for the free motivation!"),a("br",null,null)])),style:{color:"black"}})),pt(()=>({visibility:et(()=>he(S.milestones[11].earned.value)),color:"#733000",title:"A Dense Mind",display:B(()=>a(V,null,[m("Yet another fundamental base for any universe, huh. I was really hoping to find something interesting, something I haven't heard of being in a universe before..."),a("br",null,null),a("br",null,null),m("You may think that, but there are certainly more combinations of particles in a universe than universes in the cosmos, or at least I assume as much."),a("br",null,null),a("br",null,null),m("Oh, so you're telling me you know everything then? No. If I don't know anything than neither do you, so don't claim otherwise."),a("br",null,null),a("br",null,null),m("Ugh whatever, I'm tired of talking at you. Can't you just have me talk with one of your assistants or something? I'm sure you have a few to spare."),a("br",null,null),a("br",null,null),m("Nobody cares about that tired old protocol, dammit, I'm bored and I could use someone else to talk to. Eh regardless, I guess I'll just keep going for now, but please just get me someone, thanks."),a("br",null,null)])),style:{color:"black"}})),pt(()=>({visibility:et(()=>he(S.milestones[15].earned.value)),color:"#03fca9",title:"Brought Together",display:B(()=>a(V,null,[m("Wait you're still here? Fine I guess I'll suffer through you for the time being if you're really going to be like that."),a("br",null,null),a("br",null,null),m("Whatever. So it seems I can combine particles into molecules now? That's pretty sick, but I'd say it's something that exists in other universes too, right?"),a("br",null,null),a("br",null,null),m("Yep, thought so. I'm glad I didn't get my hopes up for this one. That being said, this is pretty great, there are countless combinations to make now!"),a("br",null,null),a("br",null,null),m(`Oh? So you're telling me that I don't have enough combinators to make "countless combinations"? Damn you're always making things less interesting...`),a("br",null,null),a("br",null,null),m("Whatever. Enjoy your quiet time while I do all the work. I know you're technically my boss but cmon, you could help a little. Anyways, time to make some molecules, I guess."),a("br",null,null)])),style:{color:"black"}})),pt(()=>({visibility:et(()=>he(S.milestones[23].earned.value)),color:"#ff9100",title:"Heartfelt Emotion",display:B(()=>a(V,null,[m("Ooh, so I can use these to strengthen molecules?"),a("br",null,null),a("br",null,null),m("Look, I'm tired of your sass, okay? Just let me have a fun time with this, or literally just leave, I couldn't care less."),a("br",null,null),a("br",null,null),m("Wait really? You'll actually leave? Damn okay, I guess I'll be alone in this universe then, just me and the hundred quadrillion particles I create every second..."),a("br",null,null),a("br",null,null),m("Alright, enjoy your vacation or whatever, I'll keep building this universe I guess."),a("br",null,null),a("br",null,null),m("Wait, you'll actually send one of your assistants to keep me company? Wow I'm excited, I'll have someone fun to talk to!"),a("br",null,null),a("br",null,null),m("Good! If you don't like them, I probably will, so please, send them over as soon as possible. Goodbye forever!"),a("br",null,null)])),style:{color:"black"}})),pt(()=>({visibility:et(()=>he(S.milestones[32].earned.value)),color:"#ffffff",title:"Correction Major",display:B(()=>a(V,null,[m("Hello! Yes I'm the one making the universe here! Maybe I'm just a novice, but that's what you're here for, right?"),a("br",null,null),a("br",null,null),m("Wait what? You're saying that I'm underqualified for this? How dare you, just because I skipped half of my classes doesn't mean-"),a("br",null,null),a("br",null,null),m("Oh, you meant that I need experience before I can make a universe here? But to get experience I'd need to make a universe, right?"),a("br",null,null),a("br",null,null),m("So I need experience to make a universe, but need to make a universe to have experience. Jeez, I'm no million-year-old genius but that sounds like a paradox to me."),a("br",null,null),a("br",null,null),m("No, you cannot take control of this operation, it's mine! You have no authority here, so leave or I'll throw over a septillion particles at you! That oughta leave a dent!"),a("br",null,null),a("br",null,null),m("Yeah you're right, that's barely anything, but still! You have no right! I'll mind my business, and you mind yours! Or you could actually do your job and help me out here!"),a("br",null,null),a("br",null,null),m("Well, I guess it's time to add something to help people sense the world around them, huh... What shall I do..."),a("br",null,null)])),style:{color:"black"}})),pt(()=>({visibility:et(()=>he(S.milestones[44].earned.value)),color:"#240040",title:"All is Lost",display:B(()=>a(V,null,[m("Huh? What is that thing? Dark matter? I thought that was just something scientists made up to confuse teenagers!"),a("br",null,null),a("br",null,null),m("I guess it's a real thing then, does that mean that this weird particle just... made its way into my universe?"),a("br",null,null),a("br",null,null),m("Yes it's my universe, we've been over this. Point is, we have a problem on our hands. I thought the Light Particles would be enough to deal with this, but I guess not."),a("br",null,null),a("br",null,null),m("I have no clue what this particle is going to do, but it seems... angry. I know that makes no sense, since particles can't be angry, but-"),a("br",null,null),a("br",null,null),m("Oh, so now you think I'm crazy? Alright then, maybe I am, one particle can't do anything too bad, can it? There's clearly nothing to worry about."),a("br",null,null),a("br",null,null),m("Oh wait it just moved, oh no there's a lot to worry about. Time to delete this thing from my universe!"),a("br",null,null),a("br",null,null),m("Why... won't... it... just... die! I'll need to find another way...")])),style:{color:"white"},titleStyle:{color:"white"}}))],s=Ke(()=>({layerID:e,display:"L",color:l}));return{id:e,name:t,color:l,loreData:n,treeNode:s,display:B(()=>a(V,null,[a("table",null,[a("tbody",null,[n.map(r=>a(V,null,[gt(r),a("div",{style:"margin-top: 0.5em;"},null)]))])])]))}}),xl=Ge("v",()=>{const e="v",t="Void",l="#240040",n=K(0),s=et(()=>{const h=ae.best.value;return i.div(h,5e46).root(10).floor().sub(n.value)}),r=et(()=>i.add(s.value,1).plus(n.value).pow(10).times(5e46)),u=Ye(()=>({thingsToReset:()=>[xl]})),o=Ke(()=>({layerID:e,display:B(()=>a("img",{src:"./nodes/void.png"},null)),visibility:()=>he(S.milestones[44].earned.value),color:l,reset:u})),c={flame:Re(()=>({display:{title:"Flame Decay",description:B(()=>{var h;return a("div",null,[m("Cost: "),re((h=f(c.flame.cost))!=null?h:"Infinity"),m(" Dark Matter")])})},cost:()=>i.pow(3,d.value-(c.flame.bought.value?1:0)),canAfford:()=>{var h;return i.gte(s.value,(h=f(c.flame.cost))!=null?h:"Infinity")},onPurchase:()=>{var h;n.value=i.add(n.value,(h=f(c.flame.cost))!=null?h:0)},style:{color:"white"}})),life:Re(()=>({display:{title:"Life Decay",description:B(()=>{var h;return a("div",null,[m("Cost: "),re((h=f(c.life.cost))!=null?h:"Infinity"),m(" Dark Matter")])})},cost:()=>i.pow(3,d.value-(c.life.bought.value?1:0)),canAfford:()=>{var h;return i.gte(s.value,(h=f(c.life.cost))!=null?h:"Infinity")},onPurchase:()=>{var h;n.value=i.add(n.value,(h=f(c.life.cost))!=null?h:0)},style:{color:"white"}})),aqua:Re(()=>({display:{title:"Aqua Decay",description:B(()=>{var h;return a("div",null,[m("Cost: "),re((h=f(c.aqua.cost))!=null?h:"Infinity"),m(" Dark Matter")])})},cost:()=>i.pow(3,d.value-(c.aqua.bought.value?1:0)),canAfford:()=>{var h;return i.gte(s.value,(h=f(c.aqua.cost))!=null?h:"Infinity")},onPurchase:()=>{var h;n.value=i.add(n.value,(h=f(c.aqua.cost))!=null?h:0)},style:{color:"white"}}))},d=et(()=>Object.values(c).filter(h=>h.bought.value).length);return{id:e,name:t,color:l,darkMatter:s,nextDarkMatter:r,voidDecays:c,treeNode:o,display:B(()=>a(V,null,[m("There are "),a("span",{style:"color: "+l+"; font-size: 40px; font-weight: bold;"},[re(d.value)]),m(" Void-Decayed Particle types."),a("br",null,null),a("br",null,null),m("There is "),a("span",{style:"color: "+l+"; font-size: 40px; font-weight: bold;"},[re(s.value)]),m(" Dark Matter (next at "),F(r.value),m(" Particles)"),a("br",null,null),a("br",null,null),m("Void-Decaying a type of Particle will reset that layer entirely and drastically nerf that layer, however its particle type will gain a Void Boost."),a("br",null,null),a("br",null,null),m("Not implemented yet ;)")]))}}),Jo=function(e,t){S.milestones[12].earned.value?No(e,t):Or(e,t)},ae=Ge("main",()=>{const e=K(10,"particles",2),t=ct(e),l=pr(e),n=b(()=>{let c=new i(0);return Me.upgradesR1[0].bought.value&&(c=c.plus(Me.upgradeEffects[0].value)),Me.upgradesR2[2].bought.value&&(c=c.plus(Me.upgradeEffects[5].value)),c=c.plus(Le.buyableEffects[0].value),c=c.plus(i.floor(Fe.bubbles.value)),Se.lightningSel[0].value&&(c=c.plus(Se.clickableEffects[0].value)),c=c.plus(Te.baseGainAdded.value),c=c.plus(ie.multiBuyableEffects[0].value),S.milestones[32].earned.value&&(c=c.plus(Ve.lightBuyableEffects[1][1].value)),c}),s=b(()=>{let c=i.dOne;return c=c.times(Ue.tornadoEff.value),S.milestones[19].earned.value&&(c=c.plus(i.mul(.05,i.floor(Fe.floods.value)))),c}),r=b(()=>{const c=n.value;let d=i.pow(c,s.value);return Me.upgradesR1[1].bought.value&&(d=d.times(Me.upgradeEffects[1].value)),d=d.times(Le.buyableEffects[1].value),Se.lightningSel[1].value&&(d=d.times(Se.clickableEffects[1].value)),Se.lightningSel[3].value&&(d=d.times(Se.clickableEffects[3].value)),S.milestones[7].earned.value&&(d=d.times(i.pow(Fe.torrentEff.value.plus(1),i.floor(Fe.torrents.value)))),i.gte(ie.multiBuyables[1].value,1)&&S.milestones[15].earned.value&&(d=d.times(ie.multiBuyableEffects[1].value)),i.gte(Te.gridLevel.value,16)&&(d=d.times(Te.particleGainMult.value)),S.milestones[32].earned.value&&(d=d.times(Ve.lightBuyableEffects[0][1].value)),d});me.on("update",c=>{e.value=i.add(e.value,i.times(r.value,c))});const u=hr(e,r),o=Fr(()=>({nodes:()=>[[Me.treeNode,Le.treeNode,Fe.treeNode],[Te.treeNode,Se.treeNode,Ue.treeNode,ve.treeNode],[Ve.treeNode,Co,$e.treeNode],[ie.treeNode]],leftSideNodes:[S.treeNode,In.treeNode],rightSideNodes:[xl.treeNode],branches:()=>{const c=[];return ve.treeNode.visibility.value==$.Visible&&c.push({startNode:ve.treeNode,endNode:Fe.treeNode}),Ue.treeNode.visibility.value==$.Visible&&c.push({startNode:Ue.treeNode,endNode:Le.treeNode}),Te.treeNode.visibility.value==$.Visible&&c.push({startNode:Te.treeNode,endNode:Me.treeNode}),ie.treeNode.visibility.value==$.Visible&&(c.push({startNode:ie.treeNode,endNode:Te.treeNode}),c.push({startNode:ie.treeNode,endNode:Se.treeNode}),c.push({startNode:ie.treeNode,endNode:Ue.treeNode}),c.push({startNode:ie.treeNode,endNode:ve.treeNode})),Ve.treeNode.visibility.value==$.Visible&&c.push({startNode:Ve.treeNode,endNode:Se.treeNode,stroke:"#999999"}),$e.treeNode.visibility.value==$.Visible&&c.push({startNode:$e.treeNode,endNode:Ue.treeNode,stroke:"#999999"}),c},onReset(){e.value=[Me.treeNode,Le.treeNode,Fe.treeNode].some(c=>Yl(this.resettingNode.value)===Yl(c))?0:10,t.value=e.value,l.value=e.value},resetPropagation:Jo}));return{name:"Tree",links:o.links,display:B(()=>a(V,null,[Ne(a("div",null,[m("Game Paused")]),[[Pe,R.devSpeed===0]]),Ne(a("div",null,[m("Dev Speed: "),F(R.devSpeed||0,2),m("x")]),[[Pe,R.devSpeed&&R.devSpeed!==1]]),Ne(a("div",null,[m("Offline Time: "),Nl(R.offlineTime||0)]),[[Pe,R.offlineTime!=null]]),a("div",null,[Ne(a("span",null,[m("You have ")]),[[Pe,i.lt(e.value,"1e1000")]]),a("h2",null,[re(e.value)]),Ne(a("span",null,[m(" particles")]),[[Pe,i.lt(e.value,"1e1e6")]])]),Ne(a("div",null,[m("[Base Gain: "),F(n.value,2),m("/s"),Ne(a("span",null,[m("\xA0\u2192 "),F(i.pow(n.value,s.value),2),m("/s")]),[[Pe,i.gt(s.value,1)]]),m("]")]),[[Pe,i.gt(n.value,0)&&i.neq(n.value,r.value)]]),Ne(a("div",null,[m("("),u.value,m(")")]),[[Pe,i.gt(r.value,0)]]),a(fr,null,null),G(o)])),particles:e,particleGain:r,baseGain:n,baseGainExp:s,best:t,total:l,oomps:u,tree:o}}),Xo=e=>[ae,Me,Le,Fe,S,In,Se,ve,Ue,Te,ie,Ve,$e,xl],$n=b(()=>i.gte(ae.particleGain.value,i.dInf));function Qo(e,t){var n,s,r,u,o,c;const l=t.layers;_o("1.1",e)&&(((n=l==null?void 0:l.li)==null?void 0:n.lightningSel)!==void 0&&typeof l.li.lightningSel==typeof Number&&(l.li.lightningSel={0:l.li.lightningSel==0,1:l.li.lightningSel==1,2:l.li.lightningSel==2,3:l.li.lightningSel==3}),((s=l==null?void 0:l.f)==null?void 0:s.upgradesR1)!==void 0&&(l.f.upgradesR1=Qt(l.f.upgradesR1)),((r=l==null?void 0:l.f)==null?void 0:r.upgradesR2)!==void 0&&(l.f.upgradesR2=Qt(l.f.upgradesR2)),((u=l==null?void 0:l.l)==null?void 0:u.buyables)!==void 0&&(l.l.buyables=Qt(l.l.buyables)),((o=l==null?void 0:l.e)==null?void 0:o.grid)!==void 0&&(l.e.grid=Qt(l.e.grid)),((c=l==null?void 0:l.adv)==null?void 0:c.milestones)!==void 0&&(l.adv.milestones=Qt(l.adv.milestones))),t.layers=l}function eu(e,t){t.modVersion=se.versionNumber}var Tn=Object.freeze(Object.defineProperty({__proto__:null,main:ae,getInitialLayers:Xo,hasWon:$n,fixOldSaveEarly:Qo,fixOldSave:eu},Symbol.toStringTag,{value:"Module"}));const ul=e=>(bt("data-v-4a50ce42"),e=e(),wt(),e),tu={class:"game-over-modal-header"},lu=["src","alt"],nu={class:"game-over-modal-title"},iu=ul(()=>g("h2",null,"Congratulations!",-1)),su={key:0},au=ul(()=>g("br",null,null,-1)),ru=ul(()=>g("div",null," Please check the Discord to discuss the game or to check for new content updates! ",-1)),ou=ul(()=>g("br",null,null,-1)),uu=["href"],cu=ul(()=>g("span",{class:"material-icons game-over-modal-discord"},"discord",-1)),du=H({setup(e){const{title:t,logo:l,discordName:n,discordLink:s,versionNumber:r,versionTitle:u}=se,o=b(()=>Nl(R.timePlayed)),c=b(()=>$n.value&&!R.keepGoing),d=Pt(R,"autosave");function h(){R.keepGoing=!0}function w(){qt(Ht())}return(p,y)=>(_(),x(At,{"model-value":f(c)},{header:z(()=>[g("div",tu,[f(l)?(_(),q("img",{key:0,class:"game-over-modal-logo",src:f(l),alt:f(t)},null,8,lu)):L("",!0),g("div",nu,[iu,g("h4",null,"You've beaten "+ne(f(t))+" v"+ne(f(r))+": "+ne(f(u)),1)])])]),body:z(({shown:v})=>[v?(_(),q("div",su,[g("div",null,"It took you "+ne(f(o))+" to beat the game.",1),au,ru,ou,g("div",null,[g("a",{href:f(s),class:"game-over-modal-discord-link"},[cu,m(" "+ne(f(n)),1)],8,uu)]),a(vt,{title:"Autosave",modelValue:f(d),"onUpdate:modelValue":y[0]||(y[0]=M=>Be(d)?d.value=M:null)},null,8,["modelValue"])])):L("",!0)]),footer:z(()=>[g("div",{class:"game-over-footer"},[g("button",{onClick:h,class:"button"},"Keep Going"),g("button",{onClick:w,class:"button danger"},"Play Again")])]),_:1},8,["model-value"]))}});var fu=te(du,[["__scopeId","data-v-4a50ce42"]]);const Cl=e=>(bt("data-v-3de07c06"),e=e(),wt(),e),mu=Cl(()=>g("div",{class:"nan-modal-header"},[g("h2",null,"NaN value detected!")],-1)),pu={key:0},vu=Cl(()=>g("br",null,null,-1)),gu=["href"],hu=Cl(()=>g("span",{class:"material-icons nan-modal-discord"},"discord",-1)),yu=Cl(()=>g("br",null,null,-1)),bu={class:"nan-footer"},wu=H({setup(e){const{discordName:t,discordLink:l}=se,n=Pt(R,"autosave"),s=Pt(pe,"hasNaN"),r=U(null),u=b(()=>{var y;return(y=pe.NaNPath)==null?void 0:y.join(".")}),o=b(()=>{var y;return(y=pe.NaNPath)==null?void 0:y.slice(-1)[0]}),c=b(()=>pe.NaNReceiver&&o.value?pe.NaNReceiver[o.value]:null),d=b({get(){return R.devSpeed===0},set(y){R.devSpeed=y?null:0}});function h(){pe.NaNReceiver&&o.value&&(pe.NaNReceiver[o.value]=new i(0),pe.hasNaN=!1)}function w(){pe.NaNReceiver&&o.value&&(pe.NaNReceiver[o.value]=new i(1),pe.hasNaN=!1)}function p(){pe.NaNReceiver&&o.value&&(pe.NaNReceiver[o.value]=new i(NaN),pe.hasNaN=!1)}return(y,v)=>(_(),q(V,null,[a(At,yt({modelValue:f(s),"onUpdate:modelValue":v[4]||(v[4]=M=>Be(s)?s.value=M:null)},y.$attrs),{header:z(()=>[mu]),body:z(()=>[g("div",null,[m(' Attempted to assign "'+ne(f(u))+'" to NaN',1),f(c)?(_(),q("span",pu,ne(" ")+"(previously "+ne(f(F)(f(c)))+")",1)):L("",!0),m(". Auto-saving has been "+ne(f(n)?"enabled":"disabled")+". Check the console for more details, and consider sharing it with the developers on discord. ",1)]),vu,g("div",null,[g("a",{href:f(l),class:"nan-modal-discord-link"},[hu,m(" "+ne(f(t)),1)],8,gu)]),yu,a(vt,{title:"Autosave",modelValue:f(n),"onUpdate:modelValue":v[0]||(v[0]=M=>Be(n)?n.value=M:null)},null,8,["modelValue"]),f(se).enablePausing?(_(),x(vt,{key:0,title:"Pause game",modelValue:f(d),"onUpdate:modelValue":v[1]||(v[1]=M=>Be(d)?d.value=M:null)},null,8,["modelValue"])):L("",!0)]),footer:z(()=>[g("div",bu,[g("button",{onClick:v[2]||(v[2]=M=>{var C;return(C=r.value)==null?void 0:C.open()}),class:"button"},"Open Saves Manager"),g("button",{onClick:h,class:"button"},"Set to 0"),g("button",{onClick:w,class:"button"},"Set to 1"),f(c)&&f(i).neq(f(c),0)&&f(i).neq(f(c),1)?(_(),q("button",{key:0,onClick:v[3]||(v[3]=M=>s.value=!1),class:"button"}," Set to previous ")):L("",!0),g("button",{onClick:p,class:"button danger"},"Ignore")])]),_:1},16,["modelValue"]),a(_n,{ref_key:"savesManager",ref:r},null,512)],64))}});var Nu=te(wu,[["__scopeId","data-v-3de07c06"]]);const _u={key:0,class:"tpsDisplay"},ku={key:0,class:"low"},Cu=H({setup(e){const t=b(()=>i.div(pe.lastTenTicks.length,pe.lastTenTicks.reduce((r,u)=>r+u,0))),l=U([]);lt(()=>{l.value.push(Math.round(t.value.toNumber())),l.value.length>10&&(l.value=l.value.slice(1))});const n=b(()=>l.value.reduce((r,u)=>i.max(r,u),0)),s=b(()=>i.sub(t.value,n.value).gt(1));return(r,u)=>f(t).isNan()?L("",!0):(_(),q("div",_u,[m(" TPS: "+ne(f(re)(f(t)))+" ",1),a(Dl,{name:"fade"},{default:z(()=>[f(s)?(_(),q("span",ku,ne(f(re)(f(n))),1)):L("",!0)]),_:1})]))}});var Su=te(Cu,[["__scopeId","data-v-46a3ed5b"]]);var Mu=H({setup(e){const t=se.useHeader,l=b(()=>Zt[de.theme].variables),n=Pt(de,"showTPS"),s=b(()=>j(B(()=>a(V,null,[Hi.map(G)]))));return(r,u)=>(_(),q(V,null,[g("div",{id:"modal-root",style:oe(f(l))},null,4),g("div",{class:ye(["app",{useHeader:f(t)}]),style:oe(f(l))},[f(t)?(_(),x(kn,{key:0})):L("",!0),a(dr),f(f(n))?(_(),x(Su,{key:1})):L("",!0),a(fu),a(Nu),(_(),x(fe(f(s))))],6)],64))}});var Pu=te(Mu,[["__scopeId","data-v-9417972e"]]);function Iu(e={}){const{immediate:t=!1,onNeedRefresh:l,onOfflineReady:n,onRegistered:s,onRegisterError:r}=e;let u,o;const c=async(d=!0)=>{d&&(u==null||u.addEventListener("controlling",h=>{h.isUpdate&&window.location.reload()})),o&&o.waiting&&await Hn(o.waiting,{type:"SKIP_WAITING"})};if("serviceWorker"in navigator){u=new jn("./sw.js",{scope:"./",type:"classic"}),u.addEventListener("activated",d=>{d.isUpdate||n==null||n()});{const d=()=>{l==null||l()};u.addEventListener("waiting",d),u.addEventListener("externalwaiting",d)}u.register({immediate:t}).then(d=>{o=d,s==null||s(d)}).catch(d=>{r==null||r(d)})}return c}function $u(e={}){const{immediate:t=!0,onNeedRefresh:l,onOfflineReady:n,onRegistered:s,onRegisterError:r}=e,u=U(!1),o=U(!1);return{updateServiceWorker:Iu({immediate:t,onNeedRefresh(){u.value=!0,l==null||l()},onOfflineReady(){o.value=!0,n==null||n()},onRegistered:s,onRegisterError:r}),offlineReady:o,needRefresh:u}}document.title=se.title;window.projInfo=se;if(se.id==="")throw"Project ID is empty! Please select a unique ID for this project in /src/data/projInfo.json";requestAnimationFrame(async()=>{console.log(`%cMade in Profectus%c
Learn more at www.moddingtree.com`,"font-weight: bold; font-size: 24px; color: #A3BE8C; background: #2E3440; padding: 4px 8px; border-radius: 8px;","padding: 4px;"),await Gi();const{globalBus:e,startGameLoop:t}=await vl(()=>Promise.resolve().then(function(){return Li}),void 0),l=window.vue=On(Pu);e.emit("setupVue",l),l.mount("#app"),ht(()=>{const n=ln(),{updateServiceWorker:s}=$u({onNeedRefresh(){n.info("New content available, click or reload to update.",{timeout:!1,closeOnClick:!1,draggable:!1,icon:{iconClass:"material-icons",iconChildren:"refresh",iconTag:"i"},rtl:!1,onClick(){s()}})},onOfflineReady(){n.info("App ready to work offline")},onRegisterError:console.warn,onRegistered(r){r&&setInterval(r.update,60*60*1e3)}})}),t()});
