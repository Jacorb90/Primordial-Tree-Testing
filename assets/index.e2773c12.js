import"./vue.03290593.js";import{a2 as h,y as El,u as ol,H as f,b3 as it,ae as z,x,aG as tn,A as lt,b4 as nt,ac as a,U as R,aC as Nl,av as wt,o as C,a4 as q,r as Tt,a5 as g,aJ as dl,F as _e,c as j,w as K,b9 as Ce,bs as Ee,au as Nt,bu as nl,T as Bl,Y as Bn,ab as v,l as qn,n as Oe,bv as Yl,aN as Fe,a3 as L,O as ie,K as Ne,aP as fe,M as ce,aK as _t,aI as kt,D as Dt,bn as An,br as Fn,aM as il,ap as pl,L as On,bw as We,C as Zl,be as Vn}from"./@vue.f16def16.js";import{i as Rn}from"./is-plain-object.906d88e8.js";import{c as ln}from"./nanoevents.1080beb7.js";import{L as It}from"./lz-string.731cedc5.js";import{_ as ne,C as Ln}from"./@ivanv.89b9fb6e.js";import{Y as Gn}from"./vue-next-select.b0c1cf10.js";import{D as Un}from"./vuedraggable.5a5850e9.js";import{p as xn}from"./vue-textarea-autosize.35804eaf.js";import{s as jn,u as nn}from"./vue-toastification.ce13befc.js";import{v as Hn,n as Wn}from"./workbox-window.8d14e8b7.js";import"./sortablejs.979fc46a.js";const zn=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function l(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerpolicy&&(r.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?r.credentials="include":s.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(s){if(s.ep)return;s.ep=!0;const r=l(s);fetch(s.href,r)}};zn();const Yn="modulepreload",Kl={},Zn="./",gl=function(t,l){return!l||l.length===0?t():Promise.all(l.map(n=>{if(n=`${Zn}${n}`,n in Kl)return;Kl[n]=!0;const s=n.endsWith(".css"),r=s?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${n}"]${r}`))return;const o=document.createElement("link");if(o.rel=s?"stylesheet":Yn,s||(o.as="script",o.crossOrigin=""),o.href=n,document.head.appendChild(o),s)return new Promise((u,c)=>{o.addEventListener("load",u),o.addEventListener("error",()=>c(new Error(`Unable to preload CSS for ${n}`)))})})).then(()=>t())},Kn="Primordia",Jn="primordius",Xn="Jacorb90",Qn="Jacorb's Games",ei="https://discord.gg/wwQfgPa",ti="1.4",li="Void Decay",ni=!0,ii=!1,si=2,ai=!0,ri=null,oi="",ui=["main"],ci=3600,di=1,fi=!0,mi="base64";var ae={title:Kn,id:Jn,author:Xn,discordName:Qn,discordLink:ei,versionNumber:ti,versionTitle:li,allowGoBack:ni,defaultShowSmall:ii,defaultDecimalsShown:si,useHeader:ai,banner:ri,logo:oi,initialTabs:ui,maxTickLength:ci,offlineLimit:di,enablePausing:fi,exportEncoding:mi};const Ml=17,vi=9e15,pi=Math.log10(9e15),gi=1/9e15,hi=308,yi=-324,Jl=5,bi=function(){const e=[];for(let l=yi+1;l<=hi;l++)e.push(Number("1e"+l));const t=323;return function(l){return e[l+t]}}(),Ft=[2,Math.E,3,4,5,6,7,8,9,10],wi=[[1,1.0891168053867777,1.1789745164521264,1.2701428397304229,1.3632066654400328,1.4587804913784246,1.557523817412741,1.660158301473385,1.767487542936873,1.8804205225512542,2],[1,1.1121114330934,1.23103892493161,1.35838369631113,1.49605193039935,1.64635423375119,1.81213853570186,1.99697132461829,2.20538955455724,2.44325744833852,Math.E],[1,1.1187738849693603,1.2464963939368214,1.38527004705667,1.5376664685821402,1.7068895236551784,1.897001227148399,2.1132403089001035,2.362480153784171,2.6539010333870774,3],[1,1.1367350847096405,1.2889510672956703,1.4606478703324786,1.6570295196661111,1.8850062585672889,2.1539465047453485,2.476829779693097,2.872061932789197,3.3664204535587183,4],[1,1.1494592900767588,1.319708228183931,1.5166291280087583,1.748171114438024,2.0253263297298045,2.3636668498288547,2.7858359149579424,3.3257226212448145,4.035730287722532,5],[1,1.159225940787673,1.343712473580932,1.5611293155111927,1.8221199554561318,2.14183924486326,2.542468319282638,3.0574682501653316,3.7390572020926873,4.6719550537360774,6],[1,1.1670905356972596,1.3632807444991446,1.5979222279405536,1.8842640123816674,2.2416069644878687,2.69893426559423,3.3012632110403577,4.121250340630164,5.281493033448316,7],[1,1.1736630594087796,1.379783782386201,1.6292821855668218,1.9378971836180754,2.3289975651071977,2.8384347394720835,3.5232708454565906,4.478242031114584,5.868592169644505,8],[1,1.1793017514670474,1.394054150657457,1.65664127441059,1.985170999970283,2.4069682290577457,2.9647310119960752,3.7278665320924946,4.814462547283592,6.436522247411611,9],[1,1.18422737399915,1.4066113788546144,1.680911177655277,2.027492094355525,2.4775152854601967,3.080455730250329,3.918234505962507,5.1332705696484595,6.9878696918072905,10]],Ni=[[-1,-.9194161097107025,-.8335625019330468,-.7425599821143978,-.6466611521029437,-.5462617907227869,-.4419033816638769,-.3342645487554494,-.224140440909962,-.11241087890006762,0],[-1,-.90603157029014,-.80786507256596,-.7064666939634,-.60294836853664,-.49849837513117,-.39430303318768,-.29147201034755,-.19097820800866,-.09361896280296,0],[-1,-.9021579584316141,-.8005762598234203,-.6964780623319391,-.5911906810998454,-.486050182576545,-.3823089430815083,-.28106046722897615,-.1831906535795894,-.08935809204418144,0],[-1,-.8917227442365535,-.781258746326964,-.6705130326902455,-.5612813129406509,-.4551067709033134,-.35319256652135966,-.2563741554088552,-.1651412821106526,-.0796919581982668,0],[-1,-.8843387974366064,-.7678744063886243,-.6529563724510552,-.5415870994657841,-.4352842206588936,-.33504449124791424,-.24138853420685147,-.15445285440944467,-.07409659641336663,0],[-1,-.8786709358426346,-.7577735191184886,-.6399546189952064,-.527284921869926,-.4211627631006314,-.3223479611761232,-.23107655627789858,-.1472057700818259,-.07035171210706326,0],[-1,-.8740862815291583,-.7497032990976209,-.6297119746181752,-.5161838335958787,-.41036238255751956,-.31277212146489963,-.2233976621705518,-.1418697367979619,-.06762117662323441,0],[-1,-.8702632331800649,-.7430366914122081,-.6213373075161548,-.5072025698095242,-.40171437727184167,-.30517930701410456,-.21736343968190863,-.137710238299109,-.06550774483471955,0],[-1,-.8670016295947213,-.7373984232432306,-.6143173985094293,-.49973884395492807,-.394584953527678,-.2989649949848695,-.21245647317021688,-.13434688362382652,-.0638072667348083,0],[-1,-.8641642839543857,-.732534623168535,-.6083127477059322,-.4934049257184696,-.3885773075899922,-.29376029055315767,-.2083678561173622,-.13155653399373268,-.062401588652553186,0]],_=function(t){return i.fromValue_noAlloc(t)},Z=function(e,t,l){return i.fromComponents(e,t,l)},ee=function(t,l,n){return i.fromComponents_noNormalize(t,l,n)},Pt=function(t,l){const n=l+1,s=Math.ceil(Math.log10(Math.abs(t))),r=Math.round(t*Math.pow(10,n-s))*Math.pow(10,s-n);return parseFloat(r.toFixed(Math.max(n-s,0)))},Pl=function(e){return Math.sign(e)*Math.log10(Math.abs(e))},_i=function(e){if(!isFinite(e))return e;if(e<-50)return e===Math.trunc(e)?Number.NEGATIVE_INFINITY:0;let t=1;for(;e<10;)t=t*e,++e;e-=1;let l=.9189385332046727;l=l+(e+.5)*Math.log(e),l=l-e;const n=e*e;let s=e;return l=l+1/(12*s),s=s*n,l=l+1/(360*s),s=s*n,l=l+1/(1260*s),s=s*n,l=l+1/(1680*s),s=s*n,l=l+1/(1188*s),s=s*n,l=l+691/(360360*s),s=s*n,l=l+7/(1092*s),s=s*n,l=l+3617/(122400*s),Math.exp(l)/t},sn=.5671432904097838,Xl=function(e,t=1e-10){let l,n;if(!Number.isFinite(e)||e===0)return e;if(e===1)return sn;e<10?l=0:l=Math.log(e)-Math.log(Math.log(e));for(let s=0;s<100;++s){if(n=(e*Math.exp(-l)+l*l)/(l+1),Math.abs(n-l)<t*Math.abs(n))return n;l=n}throw Error(`Iteration failed to converge: ${e.toString()}`)};function Ql(e,t=1e-10){let l,n,s,r;if(!Number.isFinite(e.mag)||e===i.dZero)return e;if(e===i.dOne)return _(sn);i.abs(e),l=i.ln(e);for(let o=0;o<100;++o){if(n=i.exp(-l),s=l.sub(e.mul(n)),r=l.sub(s.div(l.add(1).sub(l.add(2).mul(s).div(i.mul(2,l).add(2))))),i.abs(r.sub(l)).lt(i.abs(r).mul(t)))return r;l=r}throw Error(`Iteration failed to converge: ${e.toString()}`)}const T=class{constructor(e){this.sign=Number.NaN,this.mag=Number.NaN,this.layer=Number.NaN,e instanceof T||e!=null&&typeof e=="object"&&"sign"in e&&"mag"in e&&"layer"in e?this.fromDecimal(e):typeof e=="number"?this.fromNumber(e):typeof e=="string"?this.fromString(e):(this.sign=0,this.layer=0,this.mag=0)}get m(){if(this.sign===0)return 0;if(this.layer===0){const e=Math.floor(Math.log10(this.mag));let t;return this.mag===5e-324?t=5:t=this.mag/bi(e),this.sign*t}else if(this.layer===1){const e=this.mag-Math.floor(this.mag);return this.sign*Math.pow(10,e)}else return this.sign}set m(e){this.layer<=2?this.fromMantissaExponent(e,this.e):(this.sign=Math.sign(e),this.sign===0&&(this.layer,this.exponent))}get e(){return this.sign===0?0:this.layer===0?Math.floor(Math.log10(this.mag)):this.layer===1?Math.floor(this.mag):this.layer===2?Math.floor(Math.sign(this.mag)*Math.pow(10,Math.abs(this.mag))):this.mag*Number.POSITIVE_INFINITY}set e(e){this.fromMantissaExponent(this.m,e)}get s(){return this.sign}set s(e){e===0?(this.sign=0,this.layer=0,this.mag=0):this.sign=e}get mantissa(){return this.m}set mantissa(e){this.m=e}get exponent(){return this.e}set exponent(e){this.e=e}static fromComponents(e,t,l){return new T().fromComponents(e,t,l)}static fromComponents_noNormalize(e,t,l){return new T().fromComponents_noNormalize(e,t,l)}static fromMantissaExponent(e,t){return new T().fromMantissaExponent(e,t)}static fromMantissaExponent_noNormalize(e,t){return new T().fromMantissaExponent_noNormalize(e,t)}static fromDecimal(e){return new T().fromDecimal(e)}static fromNumber(e){return new T().fromNumber(e)}static fromString(e){return new T().fromString(e)}static fromValue(e){return new T().fromValue(e)}static fromValue_noAlloc(e){return e instanceof T?e:new T(e)}static abs(e){return _(e).abs()}static neg(e){return _(e).neg()}static negate(e){return _(e).neg()}static negated(e){return _(e).neg()}static sign(e){return _(e).sign}static sgn(e){return _(e).sign}static round(e){return _(e).round()}static floor(e){return _(e).floor()}static ceil(e){return _(e).ceil()}static trunc(e){return _(e).trunc()}static add(e,t){return _(e).add(t)}static plus(e,t){return _(e).add(t)}static sub(e,t){return _(e).sub(t)}static subtract(e,t){return _(e).sub(t)}static minus(e,t){return _(e).sub(t)}static mul(e,t){return _(e).mul(t)}static multiply(e,t){return _(e).mul(t)}static times(e,t){return _(e).mul(t)}static div(e,t){return _(e).div(t)}static divide(e,t){return _(e).div(t)}static recip(e){return _(e).recip()}static reciprocal(e){return _(e).recip()}static reciprocate(e){return _(e).reciprocate()}static cmp(e,t){return _(e).cmp(t)}static cmpabs(e,t){return _(e).cmpabs(t)}static compare(e,t){return _(e).cmp(t)}static isNaN(e){return e=_(e),isNaN(e.sign)||isNaN(e.layer)||isNaN(e.mag)}static isFinite(e){return e=_(e),isFinite(e.sign)&&isFinite(e.layer)&&isFinite(e.mag)}static eq(e,t){return _(e).eq(t)}static equals(e,t){return _(e).eq(t)}static neq(e,t){return _(e).neq(t)}static notEquals(e,t){return _(e).notEquals(t)}static lt(e,t){return _(e).lt(t)}static lte(e,t){return _(e).lte(t)}static gt(e,t){return _(e).gt(t)}static gte(e,t){return _(e).gte(t)}static max(e,t){return _(e).max(t)}static min(e,t){return _(e).min(t)}static minabs(e,t){return _(e).minabs(t)}static maxabs(e,t){return _(e).maxabs(t)}static clamp(e,t,l){return _(e).clamp(t,l)}static clampMin(e,t){return _(e).clampMin(t)}static clampMax(e,t){return _(e).clampMax(t)}static cmp_tolerance(e,t,l){return _(e).cmp_tolerance(t,l)}static compare_tolerance(e,t,l){return _(e).cmp_tolerance(t,l)}static eq_tolerance(e,t,l){return _(e).eq_tolerance(t,l)}static equals_tolerance(e,t,l){return _(e).eq_tolerance(t,l)}static neq_tolerance(e,t,l){return _(e).neq_tolerance(t,l)}static notEquals_tolerance(e,t,l){return _(e).notEquals_tolerance(t,l)}static lt_tolerance(e,t,l){return _(e).lt_tolerance(t,l)}static lte_tolerance(e,t,l){return _(e).lte_tolerance(t,l)}static gt_tolerance(e,t,l){return _(e).gt_tolerance(t,l)}static gte_tolerance(e,t,l){return _(e).gte_tolerance(t,l)}static pLog10(e){return _(e).pLog10()}static absLog10(e){return _(e).absLog10()}static log10(e){return _(e).log10()}static log(e,t){return _(e).log(t)}static log2(e){return _(e).log2()}static ln(e){return _(e).ln()}static logarithm(e,t){return _(e).logarithm(t)}static pow(e,t){return _(e).pow(t)}static pow10(e){return _(e).pow10()}static root(e,t){return _(e).root(t)}static factorial(e,t){return _(e).factorial()}static gamma(e,t){return _(e).gamma()}static lngamma(e,t){return _(e).lngamma()}static exp(e){return _(e).exp()}static sqr(e){return _(e).sqr()}static sqrt(e){return _(e).sqrt()}static cube(e){return _(e).cube()}static cbrt(e){return _(e).cbrt()}static tetrate(e,t=2,l=ee(1,0,1)){return _(e).tetrate(t,l)}static iteratedexp(e,t=2,l=ee(1,0,1)){return _(e).iteratedexp(t,l)}static iteratedlog(e,t=10,l=1){return _(e).iteratedlog(t,l)}static layeradd10(e,t){return _(e).layeradd10(t)}static layeradd(e,t,l=10){return _(e).layeradd(t,l)}static slog(e,t=10){return _(e).slog(t)}static lambertw(e){return _(e).lambertw()}static ssqrt(e){return _(e).ssqrt()}static pentate(e,t=2,l=ee(1,0,1)){return _(e).pentate(t,l)}static affordGeometricSeries(e,t,l,n){return this.affordGeometricSeries_core(_(e),_(t),_(l),n)}static sumGeometricSeries(e,t,l,n){return this.sumGeometricSeries_core(e,_(t),_(l),n)}static affordArithmeticSeries(e,t,l,n){return this.affordArithmeticSeries_core(_(e),_(t),_(l),_(n))}static sumArithmeticSeries(e,t,l,n){return this.sumArithmeticSeries_core(_(e),_(t),_(l),_(n))}static efficiencyOfPurchase(e,t,l){return this.efficiencyOfPurchase_core(_(e),_(t),_(l))}static randomDecimalForTesting(e){if(Math.random()*20<1)return ee(0,0,0);const t=Math.random()>.5?1:-1;if(Math.random()*20<1)return ee(t,0,1);const l=Math.floor(Math.random()*(e+1));let n=l===0?Math.random()*616-308:Math.random()*16;Math.random()>.9&&(n=Math.trunc(n));let s=Math.pow(10,n);return Math.random()>.9&&(s=Math.trunc(s)),Z(t,l,s)}static affordGeometricSeries_core(e,t,l,n){const s=t.mul(l.pow(n));return T.floor(e.div(s).mul(l.sub(1)).add(1).log10().div(l.log10()))}static sumGeometricSeries_core(e,t,l,n){return t.mul(l.pow(n)).mul(T.sub(1,l.pow(e))).div(T.sub(1,l))}static affordArithmeticSeries_core(e,t,l,n){const r=t.add(n.mul(l)).sub(l.div(2)),o=r.pow(2);return r.neg().add(o.add(l.mul(e).mul(2)).sqrt()).div(l).floor()}static sumArithmeticSeries_core(e,t,l,n){const s=t.add(n.mul(l));return e.div(2).mul(s.mul(2).plus(e.sub(1).mul(l)))}static efficiencyOfPurchase_core(e,t,l){return e.div(t).add(e.div(l))}normalize(){if(this.sign===0||this.mag===0&&this.layer===0)return this.sign=0,this.mag=0,this.layer=0,this;if(this.layer===0&&this.mag<0&&(this.mag=-this.mag,this.sign=-this.sign),this.layer===0&&this.mag<gi)return this.layer+=1,this.mag=Math.log10(this.mag),this;let e=Math.abs(this.mag),t=Math.sign(this.mag);if(e>=vi)return this.layer+=1,this.mag=t*Math.log10(e),this;for(;e<pi&&this.layer>0;)this.layer-=1,this.layer===0?this.mag=Math.pow(10,this.mag):(this.mag=t*Math.pow(10,e),e=Math.abs(this.mag),t=Math.sign(this.mag));return this.layer===0&&(this.mag<0?(this.mag=-this.mag,this.sign=-this.sign):this.mag===0&&(this.sign=0)),this}fromComponents(e,t,l){return this.sign=e,this.layer=t,this.mag=l,this.normalize(),this}fromComponents_noNormalize(e,t,l){return this.sign=e,this.layer=t,this.mag=l,this}fromMantissaExponent(e,t){return this.layer=1,this.sign=Math.sign(e),e=Math.abs(e),this.mag=t+Math.log10(e),this.normalize(),this}fromMantissaExponent_noNormalize(e,t){return this.fromMantissaExponent(e,t),this}fromDecimal(e){return this.sign=e.sign,this.layer=e.layer,this.mag=e.mag,this}fromNumber(e){return this.mag=Math.abs(e),this.sign=Math.sign(e),this.layer=0,this.normalize(),this}fromString(e){e=e.replace(",","");const t=e.split("^^^");if(t.length===2){const p=parseFloat(t[0]),b=parseFloat(t[1]),m=t[1].split(";");let N=1;if(m.length===2&&(N=parseFloat(m[1]),isFinite(N)||(N=1)),isFinite(p)&&isFinite(b)){const D=T.pentate(p,b,N);return this.sign=D.sign,this.layer=D.layer,this.mag=D.mag,this}}const l=e.split("^^");if(l.length===2){const p=parseFloat(l[0]),b=parseFloat(l[1]),m=l[1].split(";");let N=1;if(m.length===2&&(N=parseFloat(m[1]),isFinite(N)||(N=1)),isFinite(p)&&isFinite(b)){const D=T.tetrate(p,b,N);return this.sign=D.sign,this.layer=D.layer,this.mag=D.mag,this}}const n=e.split("^");if(n.length===2){const p=parseFloat(n[0]),b=parseFloat(n[1]);if(isFinite(p)&&isFinite(b)){const m=T.pow(p,b);return this.sign=m.sign,this.layer=m.layer,this.mag=m.mag,this}}e=e.trim().toLowerCase();let s,r,o=e.split("pt");if(o.length===2){s=10,r=parseFloat(o[0]),o[1]=o[1].replace("(",""),o[1]=o[1].replace(")","");let p=parseFloat(o[1]);if(isFinite(p)||(p=1),isFinite(s)&&isFinite(r)){const b=T.tetrate(s,r,p);return this.sign=b.sign,this.layer=b.layer,this.mag=b.mag,this}}if(o=e.split("p"),o.length===2){s=10,r=parseFloat(o[0]),o[1]=o[1].replace("(",""),o[1]=o[1].replace(")","");let p=parseFloat(o[1]);if(isFinite(p)||(p=1),isFinite(s)&&isFinite(r)){const b=T.tetrate(s,r,p);return this.sign=b.sign,this.layer=b.layer,this.mag=b.mag,this}}const u=e.split("e"),c=u.length-1;if(c===0){const p=parseFloat(e);if(isFinite(p))return this.fromNumber(p)}else if(c===1){const p=parseFloat(e);if(isFinite(p)&&p!==0)return this.fromNumber(p)}const d=e.split("e^");if(d.length===2){this.sign=1,d[0].charAt(0)=="-"&&(this.sign=-1);let p="";for(let b=0;b<d[1].length;++b){const m=d[1].charCodeAt(b);if(m>=43&&m<=57||m===101)p+=d[1].charAt(b);else return this.layer=parseFloat(p),this.mag=parseFloat(d[1].substr(b+1)),this.normalize(),this}}if(c<1)return this.sign=0,this.layer=0,this.mag=0,this;const y=parseFloat(u[0]);if(y===0)return this.sign=0,this.layer=0,this.mag=0,this;let w=parseFloat(u[u.length-1]);if(c>=2){const p=parseFloat(u[u.length-2]);isFinite(p)&&(w*=Math.sign(p),w+=Pl(p))}if(!isFinite(y))this.sign=u[0]==="-"?-1:1,this.layer=c,this.mag=w;else if(c===1)this.sign=Math.sign(y),this.layer=1,this.mag=w+Math.log10(Math.abs(y));else if(this.sign=Math.sign(y),this.layer=c,c===2){const p=T.mul(Z(1,2,w),_(y));return this.sign=p.sign,this.layer=p.layer,this.mag=p.mag,this}else this.mag=w;return this.normalize(),this}fromValue(e){return e instanceof T||e!=null&&typeof e=="object"&&"sign"in e&&"mag"in e&&"layer"in e?this.fromDecimal(e):typeof e=="number"?this.fromNumber(e):typeof e=="string"?this.fromString(e):(this.sign=0,this.layer=0,this.mag=0,this)}toNumber(){return Number.isFinite(this.layer)?this.layer===0?this.sign*this.mag:this.layer===1?this.sign*Math.pow(10,this.mag):this.mag>0?this.sign>0?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:0:Number.NaN}mantissaWithDecimalPlaces(e){return isNaN(this.m)?Number.NaN:this.m===0?0:Pt(this.m,e)}magnitudeWithDecimalPlaces(e){return isNaN(this.mag)?Number.NaN:this.mag===0?0:Pt(this.mag,e)}toString(){return isNaN(this.layer)||isNaN(this.sign)||isNaN(this.mag)?"NaN":this.mag===Number.POSITIVE_INFINITY||this.layer===Number.POSITIVE_INFINITY?this.sign===1?"Infinity":"-Infinity":this.layer===0?this.mag<1e21&&this.mag>1e-7||this.mag===0?(this.sign*this.mag).toString():this.m+"e"+this.e:this.layer===1?this.m+"e"+this.e:this.layer<=Jl?(this.sign===-1?"-":"")+"e".repeat(this.layer)+this.mag:(this.sign===-1?"-":"")+"(e^"+this.layer+")"+this.mag}toExponential(e){return this.layer===0?(this.sign*this.mag).toExponential(e):this.toStringWithDecimalPlaces(e)}toFixed(e){return this.layer===0?(this.sign*this.mag).toFixed(e):this.toStringWithDecimalPlaces(e)}toPrecision(e){return this.e<=-7?this.toExponential(e-1):e>this.e?this.toFixed(e-this.exponent-1):this.toExponential(e-1)}valueOf(){return this.toString()}toJSON(){return this.toString()}toStringWithDecimalPlaces(e){return this.layer===0?this.mag<1e21&&this.mag>1e-7||this.mag===0?(this.sign*this.mag).toFixed(e):Pt(this.m,e)+"e"+Pt(this.e,e):this.layer===1?Pt(this.m,e)+"e"+Pt(this.e,e):this.layer<=Jl?(this.sign===-1?"-":"")+"e".repeat(this.layer)+Pt(this.mag,e):(this.sign===-1?"-":"")+"(e^"+this.layer+")"+Pt(this.mag,e)}abs(){return ee(this.sign===0?0:1,this.layer,this.mag)}neg(){return ee(-this.sign,this.layer,this.mag)}negate(){return this.neg()}negated(){return this.neg()}sgn(){return this.sign}round(){return this.mag<0?T.dZero:this.layer===0?Z(this.sign,0,Math.round(this.mag)):this}floor(){return this.mag<0?T.dZero:this.layer===0?Z(this.sign,0,Math.floor(this.mag)):this}ceil(){return this.mag<0?T.dZero:this.layer===0?Z(this.sign,0,Math.ceil(this.mag)):this}trunc(){return this.mag<0?T.dZero:this.layer===0?Z(this.sign,0,Math.trunc(this.mag)):this}add(e){const t=_(e);if(!Number.isFinite(this.layer))return this;if(!Number.isFinite(t.layer)||this.sign===0)return t;if(t.sign===0)return this;if(this.sign===-t.sign&&this.layer===t.layer&&this.mag===t.mag)return ee(0,0,0);let l,n;if(this.layer>=2||t.layer>=2)return this.maxabs(t);if(T.cmpabs(this,t)>0?(l=this,n=t):(l=t,n=this),l.layer===0&&n.layer===0)return _(l.sign*l.mag+n.sign*n.mag);const s=l.layer*Math.sign(l.mag),r=n.layer*Math.sign(n.mag);if(s-r>=2)return l;if(s===0&&r===-1){if(Math.abs(n.mag-Math.log10(l.mag))>Ml)return l;{const o=Math.pow(10,Math.log10(l.mag)-n.mag),u=n.sign+l.sign*o;return Z(Math.sign(u),1,n.mag+Math.log10(Math.abs(u)))}}if(s===1&&r===0){if(Math.abs(l.mag-Math.log10(n.mag))>Ml)return l;{const o=Math.pow(10,l.mag-Math.log10(n.mag)),u=n.sign+l.sign*o;return Z(Math.sign(u),1,Math.log10(n.mag)+Math.log10(Math.abs(u)))}}if(Math.abs(l.mag-n.mag)>Ml)return l;{const o=Math.pow(10,l.mag-n.mag),u=n.sign+l.sign*o;return Z(Math.sign(u),1,n.mag+Math.log10(Math.abs(u)))}}plus(e){return this.add(e)}sub(e){return this.add(_(e).neg())}subtract(e){return this.sub(e)}minus(e){return this.sub(e)}mul(e){const t=_(e);if(!Number.isFinite(this.layer))return this;if(!Number.isFinite(t.layer))return t;if(this.sign===0||t.sign===0)return ee(0,0,0);if(this.layer===t.layer&&this.mag===-t.mag)return ee(this.sign*t.sign,0,1);let l,n;if(this.layer>t.layer||this.layer==t.layer&&Math.abs(this.mag)>Math.abs(t.mag)?(l=this,n=t):(l=t,n=this),l.layer===0&&n.layer===0)return _(l.sign*n.sign*l.mag*n.mag);if(l.layer>=3||l.layer-n.layer>=2)return Z(l.sign*n.sign,l.layer,l.mag);if(l.layer===1&&n.layer===0)return Z(l.sign*n.sign,1,l.mag+Math.log10(n.mag));if(l.layer===1&&n.layer===1)return Z(l.sign*n.sign,1,l.mag+n.mag);if(l.layer===2&&n.layer===1){const s=Z(Math.sign(l.mag),l.layer-1,Math.abs(l.mag)).add(Z(Math.sign(n.mag),n.layer-1,Math.abs(n.mag)));return Z(l.sign*n.sign,s.layer+1,s.sign*s.mag)}if(l.layer===2&&n.layer===2){const s=Z(Math.sign(l.mag),l.layer-1,Math.abs(l.mag)).add(Z(Math.sign(n.mag),n.layer-1,Math.abs(n.mag)));return Z(l.sign*n.sign,s.layer+1,s.sign*s.mag)}throw Error("Bad arguments to mul: "+this+", "+e)}multiply(e){return this.mul(e)}times(e){return this.mul(e)}div(e){const t=_(e);return this.mul(t.recip())}divide(e){return this.div(e)}divideBy(e){return this.div(e)}dividedBy(e){return this.div(e)}recip(){return this.mag===0?T.dNaN:this.layer===0?Z(this.sign,0,1/this.mag):Z(this.sign,this.layer,-this.mag)}reciprocal(){return this.recip()}reciprocate(){return this.recip()}cmp(e){const t=_(e);return this.sign>t.sign?1:this.sign<t.sign?-1:this.sign*this.cmpabs(e)}cmpabs(e){const t=_(e),l=this.mag>0?this.layer:-this.layer,n=t.mag>0?t.layer:-t.layer;return l>n?1:l<n?-1:this.mag>t.mag?1:this.mag<t.mag?-1:0}compare(e){return this.cmp(e)}isNan(){return isNaN(this.sign)||isNaN(this.layer)||isNaN(this.mag)}isFinite(){return isFinite(this.sign)&&isFinite(this.layer)&&isFinite(this.mag)}eq(e){const t=_(e);return this.sign===t.sign&&this.layer===t.layer&&this.mag===t.mag}equals(e){return this.eq(e)}neq(e){return!this.eq(e)}notEquals(e){return this.neq(e)}lt(e){return this.cmp(e)===-1}lte(e){return!this.gt(e)}gt(e){return this.cmp(e)===1}gte(e){return!this.lt(e)}max(e){const t=_(e);return this.lt(t)?t:this}min(e){const t=_(e);return this.gt(t)?t:this}maxabs(e){const t=_(e);return this.cmpabs(t)<0?t:this}minabs(e){const t=_(e);return this.cmpabs(t)>0?t:this}clamp(e,t){return this.max(e).min(t)}clampMin(e){return this.max(e)}clampMax(e){return this.min(e)}cmp_tolerance(e,t){const l=_(e);return this.eq_tolerance(l,t)?0:this.cmp(l)}compare_tolerance(e,t){return this.cmp_tolerance(e,t)}eq_tolerance(e,t){const l=_(e);if(t==null&&(t=1e-7),this.sign!==l.sign||Math.abs(this.layer-l.layer)>1)return!1;let n=this.mag,s=l.mag;return this.layer>l.layer&&(s=Pl(s)),this.layer<l.layer&&(n=Pl(n)),Math.abs(n-s)<=t*Math.max(Math.abs(n),Math.abs(s))}equals_tolerance(e,t){return this.eq_tolerance(e,t)}neq_tolerance(e,t){return!this.eq_tolerance(e,t)}notEquals_tolerance(e,t){return this.neq_tolerance(e,t)}lt_tolerance(e,t){const l=_(e);return!this.eq_tolerance(l,t)&&this.lt(l)}lte_tolerance(e,t){const l=_(e);return this.eq_tolerance(l,t)||this.lt(l)}gt_tolerance(e,t){const l=_(e);return!this.eq_tolerance(l,t)&&this.gt(l)}gte_tolerance(e,t){const l=_(e);return this.eq_tolerance(l,t)||this.gt(l)}pLog10(){return this.lt(T.dZero)?T.dZero:this.log10()}absLog10(){return this.sign===0?T.dNaN:this.layer>0?Z(Math.sign(this.mag),this.layer-1,Math.abs(this.mag)):Z(1,0,Math.log10(this.mag))}log10(){return this.sign<=0?T.dNaN:this.layer>0?Z(Math.sign(this.mag),this.layer-1,Math.abs(this.mag)):Z(this.sign,0,Math.log10(this.mag))}log(e){return e=_(e),this.sign<=0||e.sign<=0||e.sign===1&&e.layer===0&&e.mag===1?T.dNaN:this.layer===0&&e.layer===0?Z(this.sign,0,Math.log(this.mag)/Math.log(e.mag)):T.div(this.log10(),e.log10())}log2(){return this.sign<=0?T.dNaN:this.layer===0?Z(this.sign,0,Math.log2(this.mag)):this.layer===1?Z(Math.sign(this.mag),0,Math.abs(this.mag)*3.321928094887362):this.layer===2?Z(Math.sign(this.mag),1,Math.abs(this.mag)+.5213902276543247):Z(Math.sign(this.mag),this.layer-1,Math.abs(this.mag))}ln(){return this.sign<=0?T.dNaN:this.layer===0?Z(this.sign,0,Math.log(this.mag)):this.layer===1?Z(Math.sign(this.mag),0,Math.abs(this.mag)*2.302585092994046):this.layer===2?Z(Math.sign(this.mag),1,Math.abs(this.mag)+.36221568869946325):Z(Math.sign(this.mag),this.layer-1,Math.abs(this.mag))}logarithm(e){return this.log(e)}pow(e){const t=_(e),l=this,n=t;if(l.sign===0)return n.eq(0)?ee(1,0,1):l;if(l.sign===1&&l.layer===0&&l.mag===1)return l;if(n.sign===0)return ee(1,0,1);if(n.sign===1&&n.layer===0&&n.mag===1)return l;const s=l.absLog10().mul(n).pow10();return this.sign===-1?Math.abs(n.toNumber()%2)%2===1?s.neg():Math.abs(n.toNumber()%2)%2===0?s:T.dNaN:s}pow10(){if(!Number.isFinite(this.layer)||!Number.isFinite(this.mag))return T.dNaN;let e=this;if(e.layer===0){const t=Math.pow(10,e.sign*e.mag);if(Number.isFinite(t)&&Math.abs(t)>=.1)return Z(1,0,t);if(e.sign===0)return T.dOne;e=ee(e.sign,e.layer+1,Math.log10(e.mag))}return e.sign>0&&e.mag>=0?Z(e.sign,e.layer+1,e.mag):e.sign<0&&e.mag>=0?Z(-e.sign,e.layer+1,-e.mag):T.dOne}pow_base(e){return _(e).pow(this)}root(e){const t=_(e);return this.pow(t.recip())}factorial(){return this.mag<0?this.add(1).gamma():this.layer===0?this.add(1).gamma():this.layer===1?T.exp(T.mul(this,T.ln(this).sub(1))):T.exp(this)}gamma(){if(this.mag<0)return this.recip();if(this.layer===0){if(this.lt(ee(1,0,24)))return _(_i(this.sign*this.mag));const e=this.mag-1;let t=.9189385332046727;t=t+(e+.5)*Math.log(e),t=t-e;const l=e*e;let n=e,s=12*n,r=1/s,o=t+r;if(o===t||(t=o,n=n*l,s=360*n,r=1/s,o=t-r,o===t))return T.exp(t);t=o,n=n*l,s=1260*n;let u=1/s;return t=t+u,n=n*l,s=1680*n,u=1/s,t=t-u,T.exp(t)}else return this.layer===1?T.exp(T.mul(this,T.ln(this).sub(1))):T.exp(this)}lngamma(){return this.gamma().ln()}exp(){return this.mag<0?T.dOne:this.layer===0&&this.mag<=709.7?_(Math.exp(this.sign*this.mag)):this.layer===0?Z(1,1,this.sign*Math.log10(Math.E)*this.mag):this.layer===1?Z(1,2,this.sign*(Math.log10(.4342944819032518)+this.mag)):Z(1,this.layer+1,this.sign*this.mag)}sqr(){return this.pow(2)}sqrt(){if(this.layer===0)return _(Math.sqrt(this.sign*this.mag));if(this.layer===1)return Z(1,2,Math.log10(this.mag)-.3010299956639812);{const e=T.div(ee(this.sign,this.layer-1,this.mag),ee(1,0,2));return e.layer+=1,e.normalize(),e}}cube(){return this.pow(3)}cbrt(){return this.pow(1/3)}tetrate(e=2,t=ee(1,0,1)){if(e===1)return T.pow(this,t);if(e===0)return new T(t);if(this.eq(T.dOne))return T.dOne;if(this.eq(-1))return T.pow(this,t);if(e===Number.POSITIVE_INFINITY){const s=this.toNumber();if(s<=1.444667861009766&&s>=.06598803584531254){if(s>1.444667861009099)return new T(Math.E);const r=T.ln(this).neg();return r.lambertw().div(r)}else return s>1.444667861009766?new T(Number.POSITIVE_INFINITY):T.dNaN}if(this.eq(T.dZero)){let s=Math.abs((e+1)%2);return s>1&&(s=2-s),new T(s)}if(e<0)return T.iteratedlog(t,this,-e);t=_(t);const l=e;e=Math.trunc(e);const n=l-e;if(this.gt(T.dZero)&&this.lte(1.444667861009766)){e=Math.min(1e4,e);for(let s=0;s<e;++s){const r=t;if(t=this.pow(t),r.eq(t))return t}if(n!=0){const s=this.pow(t);return t.mul(1-n).add(s.mul(n))}return t}n!==0&&(t.eq(T.dOne)?this.gt(10)?t=this.pow(n):(t=_(T.tetrate_critical(this.toNumber(),n)),this.lt(2)&&(t=t.sub(1).mul(this.minus(1)).plus(1))):this.eq(10)?t=t.layeradd10(n):t=t.layeradd(n,this));for(let s=0;s<e;++s){if(t=this.pow(t),!isFinite(t.layer)||!isFinite(t.mag))return t.normalize();if(t.layer-this.layer>3)return ee(t.sign,t.layer+(e-s-1),t.mag);if(s>1e4)return t}return t}iteratedexp(e=2,t=ee(1,0,1)){return this.tetrate(e,t)}iteratedlog(e=10,t=1){if(t<0)return T.tetrate(e,-t,this);e=_(e);let l=_(this);const n=t;t=Math.trunc(t);const s=n-t;if(l.layer-e.layer>3){const r=Math.min(t,l.layer-e.layer-3);t-=r,l.layer-=r}for(let r=0;r<t;++r){if(l=l.log(e),!isFinite(l.layer)||!isFinite(l.mag))return l.normalize();if(r>1e4)return l}return s>0&&s<1&&(e.eq(10)?l=l.layeradd10(-s):l=l.layeradd(-s,e)),l}slog(e=10){if(e=_(e),e.lte(T.dZero)||e.eq(T.dOne))return T.dNaN;if(e.lt(T.dOne))return this.eq(T.dOne)?T.dZero:this.eq(T.dZero)?T.dNegOne:T.dNaN;if(this.mag<0||this.eq(T.dZero))return T.dNegOne;let t=0,l=_(this);if(l.layer-e.layer>3){const n=l.layer-e.layer-3;t+=n,l.layer-=n}for(let n=0;n<100;++n)if(l.lt(T.dZero))l=T.pow(e,l),t-=1;else{if(l.lte(T.dOne))return _(t+T.slog_critical(e.toNumber(),l.toNumber()));t+=1,l=T.log(l,e)}return _(t)}static slog_critical(e,t){return e>10?t-1:T.critical_section(e,t,Ni)}static tetrate_critical(e,t){return T.critical_section(e,t,wi)}static critical_section(e,t,l){t*=10,t<0&&(t=0),t>10&&(t=10),e<2&&(e=2),e>10&&(e=10);let n=0,s=0;for(let u=0;u<Ft.length;++u)if(Ft[u]==e){n=l[u][Math.floor(t)],s=l[u][Math.ceil(t)];break}else if(Ft[u]<e&&Ft[u+1]>e){const c=(e-Ft[u])/(Ft[u+1]-Ft[u]);n=l[u][Math.floor(t)]*(1-c)+l[u+1][Math.floor(t)]*c,s=l[u][Math.ceil(t)]*(1-c)+l[u+1][Math.ceil(t)]*c;break}const r=t-Math.floor(t);return n*(1-r)+s*r}layeradd10(e){e=T.fromValue_noAlloc(e).toNumber();const t=_(this);if(e>=1){t.mag<0&&t.layer>0?(t.sign=0,t.mag=0,t.layer=0):t.sign===-1&&t.layer==0&&(t.sign=1,t.mag=-t.mag);const l=Math.trunc(e);e-=l,t.layer+=l}if(e<=-1){const l=Math.trunc(e);if(e-=l,t.layer+=l,t.layer<0)for(let n=0;n<100;++n){if(t.layer++,t.mag=Math.log10(t.mag),!isFinite(t.mag))return t.sign===0&&(t.sign=1),t.layer<0&&(t.layer=0),t.normalize();if(t.layer>=0)break}}for(;t.layer<0;)t.layer++,t.mag=Math.log10(t.mag);return t.sign===0&&(t.sign=1,t.mag===0&&t.layer>=1&&(t.layer-=1,t.mag=1)),t.normalize(),e!==0?t.layeradd(e,10):t}layeradd(e,t){const n=this.slog(t).toNumber()+e;return n>=0?T.tetrate(t,n):Number.isFinite(n)?n>=-1?T.log(T.tetrate(t,n+1),t):T.log(T.log(T.tetrate(t,n+2),t),t):T.dNaN}lambertw(){if(this.lt(-.3678794411710499))throw Error("lambertw is unimplemented for results less than -1, sorry!");if(this.mag<0)return _(Xl(this.toNumber()));if(this.layer===0)return _(Xl(this.sign*this.mag));if(this.layer===1)return Ql(this);if(this.layer===2)return Ql(this);if(this.layer>=3)return ee(this.sign,this.layer-1,this.mag);throw"Unhandled behavior in lambertw()"}ssqrt(){if(this.sign==1&&this.layer>=3)return ee(this.sign,this.layer-1,this.mag);const e=this.ln();return e.div(e.lambertw())}pentate(e=2,t=ee(1,0,1)){t=_(t);const l=e;e=Math.trunc(e);const n=l-e;n!==0&&(t.eq(T.dOne)?(++e,t=new T(n)):this.eq(10)?t=t.layeradd10(n):t=t.layeradd(n,this));for(let s=0;s<e;++s){if(t=this.tetrate(t.toNumber()),!isFinite(t.layer)||!isFinite(t.mag))return t.normalize();if(s>10)return t}return t}sin(){return this.mag<0?this:this.layer===0?_(Math.sin(this.sign*this.mag)):ee(0,0,0)}cos(){return this.mag<0?T.dOne:this.layer===0?_(Math.cos(this.sign*this.mag)):ee(0,0,0)}tan(){return this.mag<0?this:this.layer===0?_(Math.tan(this.sign*this.mag)):ee(0,0,0)}asin(){return this.mag<0?this:this.layer===0?_(Math.asin(this.sign*this.mag)):ee(Number.NaN,Number.NaN,Number.NaN)}acos(){return this.mag<0?_(Math.acos(this.toNumber())):this.layer===0?_(Math.acos(this.sign*this.mag)):ee(Number.NaN,Number.NaN,Number.NaN)}atan(){return this.mag<0?this:this.layer===0?_(Math.atan(this.sign*this.mag)):_(Math.atan(this.sign*(1/0)))}sinh(){return this.exp().sub(this.negate().exp()).div(2)}cosh(){return this.exp().add(this.negate().exp()).div(2)}tanh(){return this.sinh().div(this.cosh())}asinh(){return T.ln(this.add(this.sqr().add(1).sqrt()))}acosh(){return T.ln(this.add(this.sqr().sub(1).sqrt()))}atanh(){return this.abs().gte(1)?ee(Number.NaN,Number.NaN,Number.NaN):T.ln(this.add(1).div(_(1).sub(this))).div(2)}ascensionPenalty(e){return e===0?this:this.root(T.pow(10,e))}egg(){return this.add(9)}lessThanOrEqualTo(e){return this.cmp(e)<1}lessThan(e){return this.cmp(e)<0}greaterThanOrEqualTo(e){return this.cmp(e)>-1}greaterThan(e){return this.cmp(e)>0}};let i=T;i.dZero=ee(0,0,0);i.dOne=ee(1,0,1);i.dNegOne=ee(-1,0,1);i.dTwo=ee(1,0,2);i.dTen=ee(1,0,10);i.dNaN=ee(Number.NaN,Number.NaN,Number.NaN);i.dInf=ee(1,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY);i.dNegInf=ee(-1,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY);i.dNumberMax=Z(1,0,Number.MAX_VALUE);i.dNumberMin=Z(1,0,Number.MIN_VALUE);const ki=new i(1);function tl(e,t,l=!0){let n=i.log10(e).floor(),s=i.div(e,i.pow(10,n));s.toStringWithDecimalPlaces(t)==="10"&&(s=ki,n=n.add(1));const r=n.gte(1e9)?W(n,Math.max(Math.max(t,3),ae.defaultDecimalsShown)):n.gte(1e4)?hl(n,0):n.toStringWithDecimalPlaces(0);return l?s.toStringWithDecimalPlaces(t)+"e"+r:"e"+r}function hl(e,t){if(e==null)return"NaN";if(e=new i(e),e.mag<.001)return 0 .toFixed(t);const n=e.toStringWithDecimalPlaces(t).split(".");return n[0]=n[0].replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,"),n.length==1?n[0]:n[0]+"."+n[1]}function an(e,t){return e==null?"NaN":(e=new i(e),e.mag<1e-4?0 .toFixed(t):(e.mag<.1&&t!==0&&(t=Math.max(Math.max(t,e.log10().negate().ceil().toNumber()),ae.defaultDecimalsShown)),e.toStringWithDecimalPlaces(t)))}const Ci=new i("eeee1000"),Si=new i("e100000"),en=new i("e1000"),rn=new i(1e9),Mi=new i(1e6),Pi=new i(1e3);new i(.98);const Ii=new i(.001),$i=new i(0);function W(e,t,l){if(t==null&&(t=ae.defaultDecimalsShown),l=l!=null?l:ae.defaultShowSmall,e=new i(e),isNaN(e.sign)||isNaN(e.layer)||isNaN(e.mag))return"NaN";if(e.sign<0)return"-"+W(e.neg(),t);if(e.mag===Number.POSITIVE_INFINITY)return"Infinity";if(e.gte(Ci)){const n=e.slog();return n.gte(Mi)?"F"+W(n.floor()):i.pow(10,n.sub(n.floor())).toStringWithDecimalPlaces(3)+"F"+hl(n.floor(),0)}else{if(e.gte(Si))return tl(e,0,!1);if(e.gte(en))return tl(e,0);if(e.gte(rn))return tl(e,t);if(e.gte(Pi))return hl(e,0);if(e.gte(Ii)||!l)return an(e,t);if(e.eq($i))return 0 .toFixed(t)}return e=on(e),e.lt(en)?tl(e,t).replace(/([^(?:e|F)]*)$/,"-$1"):W(e,t)+"\u207B\xB9"}function ke(e){return e=new i(e),e.sign<0?"-"+ke(e.neg()):e.gte(rn)?W(e):W(e,0)}function yl(e){return i.lt(e,0)?"-"+yl(i.neg(e)):i.gt(e,2**51)?W(i.div(e,31536e3))+"y":(e=new i(e).toNumber(),e<60?W(e)+"s":e<3600?ke(Math.floor(e/60))+"m "+W(e%60)+"s":e<86400?ke(Math.floor(e/3600))+"h "+ke(Math.floor(e/60)%60)+"m "+ke(e%60)+"s":e<31536e3?ke(Math.floor(e/84600)%365)+"d "+ke(Math.floor(e/3600)%24)+"h "+ke(Math.floor(e/60)%60)+"m":ke(Math.floor(e/31536e3))+"y "+ke(Math.floor(e/84600)%365)+"d "+ke(Math.floor(e/3600)%24)+"h")}function Ti(e,t,l){e=new i(e);let n=e.toStringWithDecimalPlaces(t);return new i(n).gte(l)&&(n=i.sub(l,Math.pow(.1,t)).toStringWithDecimalPlaces(t)),n}function Di(e,t){return W(e,t,!0)}function on(e){let t=i.log10(e).ceil();const l=i.div(e,i.pow(10,t));return t=t.neg(),e=new i(10).pow(t).times(l),e}var Ei=Object.freeze(Object.defineProperty({__proto__:null,default:i,exponentialFormat:tl,commaFormat:hl,regularFormat:an,format:W,formatWhole:ke,formatTime:yl,toPlaces:Ti,formatSmall:Di,invertOOM:on},Symbol.toStringTag,{value:"Module"}));const{exponentialFormat:Bi,commaFormat:qi,regularFormat:Ai,format:A,formatWhole:ue,formatTime:_l,toPlaces:Fi,formatSmall:Oi,invertOOM:Vi}=Ei;window.Decimal=i;window.exponentialFormat=Bi;window.commaFormat=qi;window.regularFormat=Ai;window.format=A;window.formatWhole=ue;window.formatTime=_l;window.toPlaces=Fi;window.formatSmall=Oi;window.invertOOM=Vi;function un(e){let t=e.replace(/([A-Z])/g," $1");return t=t.charAt(0).toUpperCase()+t.slice(1),t}function Vt(e){return typeof e=="function"}var X=(e=>(e.Up="Up",e.Down="Down",e.Left="Left",e.Right="Right",e.Default="Up",e))(X||{});const sl=Symbol("DoNotCache");function P(e,t){const l=e[t];Vt(l)&&l.length===0&&!l[sl]?e[t]=h(l.bind(e)):Vt(l)&&(e[t]=l.bind(e),e[t][sl]=!0)}function bt(e){return Vt(e)&&!e[sl]&&(e=h(e)),e}const Ae=Symbol("Component"),Ve=Symbol("GatherProps");let Ri=0;function He(e="feature-"){return e+Ri++}var I=(e=>(e[e.Visible=0]="Visible",e[e.Hidden=1]="Hidden",e[e.None=2]="None",e))(I||{});function B(e){return e[sl]=!0,e}function pe(e,t=2){return e?0:t}function le(e,t,l){e[t]===void 0&&l!=null&&(e[t]=l)}const Ot={variables:{"--foreground":"#dfdfdf","--background":"#0f0f0f","--feature-foreground":"#0f0f0f","--tooltip-background":"rgba(0, 0, 0, 0.75)","--raised-background":"#0f0f0f","--points":"#ffffff","--locked":"#bf8f8f","--highlighted":"#333","--bought":"#77bf5f","--danger":"rgb(220, 53, 69)","--link":"#02f2f2","--outline":"#dfdfdf","--accent1":"#627a82","--accent2":"#658262","--accent3":"#7c6282","--border-radius":"15px","--modal-border":"solid 2px var(--color)","--feature-margin":"0px"},floatingTabs:!0,mergeAdjacent:!0,showPin:!0};var ql=(e=>(e.Classic="classic",e.Paper="paper",e.Nordic="nordic",e.Aqua="aqua",e))(ql||{}),Kt={classic:Ot,paper:{...Ot,variables:{...Ot.variables,"--background":"#2a323d","--feature-foreground":"#000","--raised-background":"#333c4a","--locked":"#3a3e45","--bought":"#5C8A58","--outline":"#333c4a","--border-radius":"4px","--modal-border":"","--feature-margin":"5px"},floatingTabs:!1},nordic:{...Ot,variables:{...Ot.variables,"--foreground":"#D8DEE9","--background":"#2E3440","--feature-foreground":"#000","--raised-background":"#3B4252","--points":"#E5E9F0","--locked":"#4c566a","--highlighted":"#434c5e","--bought":"#8FBCBB","--danger":"#D08770","--link":"#88C0D0","--outline":"#3B4252","--accent1":"#B48EAD","--accent2":"#A3BE8C","--accent3":"#EBCB8B","--border-radius":"4px","--modal-border":"solid 2px #3B4252","--feature-margin":"5px"},floatingTabs:!1},aqua:{...Ot,variables:{...Ot.variables,"--foreground":"#bfdfff","--background":"#001f3f","--tooltip-background":"rgba(0, 15, 31, 0.75)","--raised-background":"#001f3f","--points":"#dfefff","--locked":"#c4a7b3","--outline":"#bfdfff"}}};const $e=Symbol("ProxyState"),jt=Symbol("ProxyPath");function Le(e,t={}){const l=t;let n=!1;function s(){return n||(Object.assign(l,e(l)),n=!0),l}return new Proxy(l,{get(r,o){return o===$e?s():s()[o]},set(r,o,u){return s()[o]=u,!0},has(r,o){return o===$e?!0:Reflect.has(s(),o)},ownKeys(){return Reflect.ownKeys(s())},getOwnPropertyDescriptor(r,o){return n||(Object.assign(l,e(l)),n=!0),Object.getOwnPropertyDescriptor(r,o)}})}var ve=window.state=El({lastTenTicks:[],hasNaN:!1,NaNPath:[]});const cn=ol({id:"",devSpeed:null,name:"",tabs:[],time:-1,autosave:!0,offlineProd:!0,offlineTime:null,timePlayed:0,keepGoing:!1,modID:"",modVersion:"",layers:{}});function dn(e){return JSON.stringify(e,(t,l)=>f(l))}const fn={get(e,t){var n;if(t===$e||t===jt)return e[t];const l=e[$e][t];if(t!=="value"&&(Rn(l)||Array.isArray(l))){if(l!==((n=e[t])==null?void 0:n[$e])){const s=[...e[jt],t];e[t]=new Proxy({[$e]:l,[jt]:s},fn)}return e[t]}return l},set(e,t,l,n){if(!ve.hasNaN&&(typeof l=="number"&&isNaN(l)||l instanceof i&&(isNaN(l.sign)||isNaN(l.layer)||isNaN(l.mag)))){const s=e[$e][t];if(!(typeof s=="number"&&isNaN(s)||s instanceof i&&(isNaN(s.sign)||isNaN(s.layer)||isNaN(s.mag))))throw cn.autosave=!1,ve.hasNaN=!0,ve.NaNPath=[...e[jt],t],ve.NaNReceiver=n,console.error("Attempted to set NaN value",[...e[jt],t],e[$e]),"Attempted to set NaN value. See above for details"}return e[$e][t]=l,!0},ownKeys(e){return Reflect.ownKeys(e[$e])},has(e,t){return Reflect.has(e[$e],t)},getOwnPropertyDescriptor(e,t){return Object.getOwnPropertyDescriptor(e[$e],t)}};var O=window.player=new Proxy({[$e]:cn,[jt]:["player"]},fn);const me=ln();let Ht=null,ll=null;function bl(){const e=Date.now();let t=(e-O.time)/1e3;O.time=e;const l=t;if(ve.lastTenTicks.push(l),ve.lastTenTicks.length>10&&(ve.lastTenTicks=ve.lastTenTicks.slice(1)),!((ll==null?void 0:ll.value)&&!O.keepGoing)&&!ve.hasNaN&&(t=Math.max(t,0),O.devSpeed!==0)){if(O.offlineTime!=null){if(i.gt(O.offlineTime,ae.offlineLimit*3600)&&(O.offlineTime=ae.offlineLimit*3600),i.gt(O.offlineTime,0)&&O.devSpeed!==0){const n=Math.max(O.offlineTime/10,t);O.offlineTime=O.offlineTime-n,t+=n}else O.devSpeed===0&&(O.offlineTime+=t);(!O.offlineProd||i.lt(O.offlineTime,0))&&(O.offlineTime=null)}t=Math.min(t,ae.maxTickLength),O.devSpeed!=null&&(t*=O.devSpeed),Number.isFinite(t)||(t=1e308),!i.eq(t,0)&&(O.timePlayed+=t,Number.isFinite(O.timePlayed)||(O.timePlayed=1e308),me.emit("update",t,l),de.unthrottled?(requestAnimationFrame(bl),Ht!=null&&(clearInterval(Ht),Ht=null)):Ht==null&&(Ht=setInterval(bl,50)))}}async function Li(){ll=(await gl(()=>Promise.resolve().then(function(){return Dn}),void 0)).hasWon,it(ll,e=>{e&&me.emit("gameWon")}),de.unthrottled?requestAnimationFrame(bl):Ht=setInterval(bl,50)}var Gi=Object.freeze(Object.defineProperty({__proto__:null,globalBus:me,startGameLoop:Li},Symbol.toStringTag,{value:"Module"}));function mn(e={}){return Object.assign({id:`${ae.id}-0`,name:"Default Save",tabs:ae.initialTabs.slice(),time:Date.now(),autosave:!0,offlineProd:!0,offlineTime:0,timePlayed:0,keepGoing:!1,modID:ae.id,modVersion:ae.versionNumber,layers:{}},e)}function ot(e){const t=It.compressToUTF16(dn(e!=null?e:O[$e]));return localStorage.setItem((e!=null?e:O[$e]).id,t),t}async function Ui(){ji();try{let e=localStorage.getItem(de.active);if(e==null){await Rt(Wt());return}if(e[0]!=="{")if(e[0]==="e")e=decodeURIComponent(escape(atob(e)));else if(e[0]==="\u1BE1")e=It.decompressFromUTF16(e);else throw"Unable to determine save encoding";const t=JSON.parse(e);if(t.modID!==ae.id){await Rt(Wt());return}t.id=de.active,await Rt(t)}catch(e){console.error(`Failed to load save. Falling back to new save.
`,e),await Rt(Wt())}}function Wt(){const e=vl(),t=mn({id:e});return ot(t),de.saves.push(e),t}function vl(){let e,t=0;do e=`${ae.id}-${t++}`;while(localStorage.getItem(e));return e}async function Rt(e){console.info("Loading save",e);const{layers:t,removeLayer:l,addLayer:n}=await gl(()=>Promise.resolve().then(function(){return os}),void 0),{fixOldSave:s,fixOldSaveEarly:r,getInitialLayers:o}=await gl(()=>Promise.resolve().then(function(){return Dn}),void 0);e.modVersion!==ae.versionNumber&&r(e.modVersion,e);for(const u in t){const c=t[u];c&&l(c)}o(e).forEach(u=>n(u,e)),e=mn(e),e.offlineProd&&e.time&&(e.offlineTime==null&&(e.offlineTime=0),e.offlineTime+=(Date.now()-e.time)/1e3),e.time=Date.now(),e.modVersion!==ae.versionNumber&&s(e.modVersion,e),Object.assign(O,e),de.active=O.id}setInterval(()=>{O.autosave&&ot()},1e3);window.onbeforeunload=()=>{O.autosave&&ot()};window.save=ot;const xi=window.hardReset=async()=>{await Rt(Wt())},al=ol({active:"",saves:[],showTPS:!0,theme:ql.Nordic,unthrottled:!1});it(al,e=>{const t=It.compressToUTF16(JSON.stringify(e));localStorage.setItem(ae.id,t)},{deep:!0});var de=window.settings=al;window.hardResetSettings=()=>{const e={active:"",saves:[],showTPS:!0,theme:ql.Nordic};me.emit("loadSettings",e),Object.assign(al,e),xi()};function ji(){try{let e=localStorage.getItem(ae.id);if(e!=null&&e!==""){if(e[0]!=="{")if(e[0]==="e")e=decodeURIComponent(escape(atob(e)));else if(e[0]==="\u1BE1")e=It.decompressFromUTF16(e);else{console.warn("Unable to determine settings encoding",e);return}const t=JSON.parse(e);typeof t=="object"&&Object.assign(al,t)}me.emit("loadSettings",al)}catch{}}const vn=ol([]);function pn(e){vn.push(e)}const Hi=ol([]),Wi=ol([]);function H(e,t="span"){return typeof e=="function"?z({render:e}):typeof e=="string"?e.length>0?(e=e.trim(),e.charAt(0)!=="<"&&(e=`<${t}>${e}</${t}>`),z({template:e})):z({render:()=>({})}):e}function U(e){if(Ye(e))return typeof e=="function"?e():H(e);const t=e[Ae];return a(t,e[Ve](),null)}function gt(e){if(Ye(e))return typeof e=="function"?e():typeof e=="string"?a(R,null,[e]):a(e,null,null);const t=e[Ae];return a(t,e[Ve](),null)}function Ye(e){return typeof e=="string"?!0:typeof e=="object"?e==null?!1:"render"in e||"component"in e:typeof e=="function"&&e[sl]===!0}function Al(e,t){const l=x(null),n=x(void 0);function s(u){l.value||(l.value=setInterval(o,250)),n.value=u}function r(){l.value&&(clearInterval(l.value),l.value=null)}function o(){t&&t.value?t.value():e&&e.value&&e.value(n.value)}return tn(r),{start:s,stop:r,handleHolding:o}}function Yt(e,t="div"){const l=lt();return nt(()=>{l.value=H(ye(e),t)}),l}function Jt(e,t="div"){const l=lt(null);return nt(()=>{const n=ye(e);l.value=n==null?null:H(n,t)}),l}function zi(e){return h(()=>ye(e))}function ye(e){return f(f(e))}function E(...e){return e.includes(Object)||e.push(Object),e}const Yi=z({emits:["updateNodes"],setup(e,{emit:t}){var y;const l=x({}),n=new ResizeObserver(u),s=x(null);Nl(()=>{const w=s.value;w!=null&&n.observe(w)});let r=!0,o=x((y=s.value)==null?void 0:y.getBoundingClientRect());function u(){s.value!=null&&r&&(r=!1,wt(()=>{var w;o.value=(w=s.value)==null?void 0:w.getBoundingClientRect(),Object.values(l.value).filter(p=>p).forEach(p=>p.rect=p.element.getBoundingClientRect()),t("updateNodes",l.value),r=!0}))}document.fonts.ready.then(u);const c={attributes:!1,childList:!0,subtree:!1};dl(Fl,(w,p)=>{const b=new MutationObserver(()=>d(w));b.observe(p,c),l.value[w]={element:p,observer:b,rect:p.getBoundingClientRect()},t("updateNodes",l.value),wt(()=>d(w))}),dl(Ol,w=>{var p;(p=l.value[w])==null||p.observer.disconnect(),l.value[w]=void 0,t("updateNodes",l.value)}),dl(Vl,l),dl(Rl,o);function d(w){const p=l.value[w];p!=null&&(p.rect=p.element.getBoundingClientRect(),t("updateNodes",l.value))}return(w,p)=>(C(),q(R,null,[Tt(w.$slots,"default",{},void 0,!0),g("div",{ref_key:"resizeListener",ref:s,class:"resize-listener"},null,512)],64))}});var gn=ne(Yi,[["__scopeId","data-v-6a08ac80"]]);const Zi=["onPointerdown"],Ki={class:"modal-wrapper"},Ji={class:"modal-container"},Xi={class:"modal-header"},Qi=v(" default header "),es={class:"modal-body"},ts=v(" default body "),ls={class:"modal-footer"},ns=g("div",{class:"modal-default-flex-grow"},null,-1),Lt=z({props:{modelValue:{type:Boolean}},emits:["update:modelValue"],setup(e,{expose:t,emit:l}){const s=_e(e),r=h(()=>s.modelValue||u.value);function o(){l("update:modelValue",!1)}const u=x(!1),c=x(null),d=h(()=>{var y,w;return(w=(y=c.value)==null?void 0:y.nodes)!=null?w:null});return t({isOpen:r,nodes:d}),(y,w)=>(C(),j(Bn,{to:"#modal-root"},[a(Bl,{name:"modal",onBeforeEnter:w[0]||(w[0]=p=>u.value=!0),onAfterLeave:w[1]||(w[1]=p=>u.value=!1)},{default:K(()=>[Ce(g("div",Nt({class:"modal-mask",onPointerdown:nl(o,["self"])},y.$attrs),[g("div",Ki,[g("div",Ji,[g("div",Xi,[Tt(y.$slots,"header",{shown:f(r)},()=>[Qi])]),g("div",es,[a(gn,{ref_key:"contextRef",ref:c},{default:K(()=>[Tt(y.$slots,"body",{shown:f(r)},()=>[ts])]),_:3},512)]),g("div",ls,[Tt(y.$slots,"footer",{shown:f(r)},()=>[g("div",{class:"modal-default-footer"},[ns,g("button",{class:"button modal-default-button",onClick:o}," Close ")])])])])])],16,Zi),[[Ee,e.modelValue]])]),_:3})]))}}),Zt=Symbol("PersistentState"),rl=Symbol("DefaultValue"),wl=Symbol("StackTrace"),hn=Symbol("Deleted");function is(){var e;return((e=new Error().stack)==null?void 0:e.split(`
`).slice(3,5).map(t=>t.trim()).join(`
`))||""}function je(e){const t=Oe(e)?e:x(e);return t[Zt]=t,t[rl]=Oe(e)?e.value:e,t[wl]=is(),t[hn]=!1,ut.length===0?console.warn("Creating a persistent ref outside of a layer. This is not officially supported",t,`
Created at:
`+t[wl]):zt[ut[ut.length-1]].add(t),t}me.on("addLayer",(e,t)=>{const l=[],n=(s,r=[])=>{let o=!1;return Object.keys(s).forEach(u=>{const c=s[u];if(c&&typeof c=="object")if(Zt in c){if(o=!0,c[hn]){console.warn("Deleted persistent ref present in returned object. Ignoring...",c,`
Created at:
`+c[wl]);return}zt[e.id].delete($e in c?c[$e]:c);const d=r.reduce((w,p)=>(p in w||(w[p]={}),w[p]),t),y=d[u];d[u]=c[Zt],qn(d)?y!=null?d[u]=y:d[u]=c[rl]:y!=null?d[u].value=y:d[u].value=c[rl]}else!(c instanceof i)&&!Oe(c)&&!l.includes(c)&&(typeof c.type=="symbol"&&l.push(c),n(c,[...r,u])&&(Yl(c)&&!Yl(s)?console.warn("Found array that contains persistent values when adding layer. Keep in mind changing the order of elements in the array will mess with existing player saves.",$e in s?s[$e]:s,u):o=!0))}),o};n(e),zt[e.id].forEach(s=>{console.error(`Created persistent ref in ${e.id} without registering it to the layer! Make sure to include everything persistent in the returned object`,s,`
Created at:
`+s[wl])}),zt[e.id].clear()});const Fl=Symbol("RegisterNode"),Ol=Symbol("UnregisterNode"),Vl=Symbol("Nodes"),Rl=Symbol("Bounds"),xe=El({});window.layers=xe;const zt={},ut=[];function Ge(e,t){return Le(()=>{const l={},n=l.emitter=ln();if(l.on=n.on.bind(n),l.emit=n.emit.bind(n),l.nodes=x({}),l.id=e,ut.push(e),zt[e]=new Set,l.minimized=je(!1),Object.assign(l,t.call(l)),ut[ut.length-1]==null||ut[ut.length-1]!==e)throw`Adding layers stack in invalid state. This should not happen
Stack: ${ut}
Trying to pop ${l.id}`;return ut.pop(),P(l,"color"),P(l,"display"),P(l,"name"),le(l,"name",l.id),P(l,"minWidth"),le(l,"minWidth",600),P(l,"minimizable"),le(l,"minimizable",!0),l})}function yn(e,t){if(console.info("Adding layer",e.id),xe[e.id]){console.error("Attempted to add layer with same ID as existing layer",e.id,xe[e.id]);return}le(t,"layers",{}),t.layers[e.id]==null&&(t.layers[e.id]={}),xe[e.id]=e,me.emit("addLayer",e,t.layers[e.id])}function ss(e){return xe[e]}function bn(e){console.info("Removing layer",e.id),me.emit("removeLayer",e),xe[e.id]=void 0}function as(e){bn(e),yn(e,O)}function rs(e){const t=x(!1);return{openModal:()=>t.value=!0,modal:B(()=>a(Lt,{modelValue:t.value,"onUpdate:modelValue":l=>t.value=l},{header:()=>a("h2",null,[f(e.name)]),body:f(e.display)}))}}me.on("update",function(t){Object.values(xe).forEach(l=>{l==null||l.emit("preUpdate",t)}),Object.values(xe).forEach(l=>{l==null||l.emit("update",t)}),Object.values(xe).forEach(l=>{l==null||l.emit("postUpdate",t)})});var os=Object.freeze(Object.defineProperty({__proto__:null,RegisterNodeInjectionKey:Fl,UnregisterNodeInjectionKey:Ol,NodesInjectionKey:Vl,BoundsInjectionKey:Rl,layers:xe,persistentRefs:zt,addingLayers:ut,createLayer:Ge,addLayer:yn,getLayer:ss,removeLayer:bn,reloadLayer:as,setupLayerModal:rs},Symbol.toStringTag,{value:"Module"}));const us=z({components:{Context:gn},props:{index:{type:Number,required:!0},tab:{type:Function,required:!0},display:{type:E(Object,String,Function),required:!0},minimized:{type:Object,required:!0},minWidth:{type:E(Number,String),required:!0},name:{type:E(String),required:!0},color:E(String),minimizable:E(Boolean),nodes:{type:Object,required:!0}},setup(e){const{display:t,index:l,minimized:n,minWidth:s,tab:r}=_e(e),o=Yt(t),u=h(()=>ae.allowGoBack&&l.value>0&&!n.value);function c(){O.tabs.splice(f(e.index),1/0)}wt(()=>y(n.value,f(s.value))),it([n,zi(s)],([w,p])=>y(w,p));function d(w){e.nodes.value=w}function y(w,p){const b=typeof p=="number"||Number.isNaN(parseInt(p))?p+"px":p,m=r.value();m!=null&&(w?(m.style.flexGrow="0",m.style.flexShrink="0",m.style.width="60px",m.style.minWidth=m.style.flexBasis="",m.style.margin="0"):(m.style.flexGrow="",m.style.flexShrink="",m.style.width="",m.style.minWidth=m.style.flexBasis=b,m.style.margin=""))}return{component:o,showGoBack:u,updateNodes:d,unref:f,goBack:c}}});function cs(e,t,l,n,s,r){const o=Fe("Context");return C(),q("div",{class:"layer-container",style:ce({"--layer-color":e.unref(e.color)})},[e.showGoBack?(C(),q("button",{key:0,class:"goBack",onClick:t[0]||(t[0]=(...u)=>e.goBack&&e.goBack(...u))},"\u2190")):L("",!0),e.minimized.value?(C(),q("button",{key:1,class:"layer-tab minimized",onClick:t[1]||(t[1]=u=>e.minimized.value=!1)},[g("div",null,ie(e.unref(e.name)),1)])):(C(),q("div",{key:2,class:Ne(["layer-tab",{showGoBack:e.showGoBack}])},[a(o,{onUpdateNodes:e.updateNodes},{default:K(()=>[(C(),j(fe(e.component)))]),_:1},8,["onUpdateNodes"])],2)),e.unref(e.minimizable)?(C(),q("button",{key:3,class:"minimize",onClick:t[2]||(t[2]=u=>e.minimized.value=!0)}," \u25BC ")):L("",!0)],4)}var ds=ne(us,[["render",cs],["__scopeId","data-v-34c9d881"]]);const st=e=>(_t("data-v-56692f46"),e=e(),kt(),e),fs=st(()=>g("h2",null,"Changelog",-1)),ms=st(()=>g("details",{open:""},[g("summary",null,[v("v1.4 Void Decay - "),g("time",null,"2022-08-24")]),g("ul",null,[g("li",{class:"balancing"},"Balanced up to 4e50 Particles/s"),g("li",{class:"feature"},"Implemented Advancements 45-46"),g("li",{class:"feature"},"Implemented Void."),g("li",{class:"fix"},"Updated to Profectus 0.5.1")])],-1)),vs=st(()=>g("details",{open:""},[g("summary",null,[v("v1.3 For the Senses - "),g("time",null,"2022-05-17")]),g("ul",null,[g("li",{class:"balancing"},"Balanced up to 5e46 Particles/s"),g("li",{class:"feature"},"Implemented Advancements 33-44"),g("li",{class:"feature"},"Implemented Light and Sound."),g("li",{class:"fix"},"A few minor bugfixes, and updated to Profectus 0.4.1")])],-1)),ps=st(()=>g("details",null,[g("summary",null,[v("v1.2 Bond Glue - "),g("time",null,"2022-05-09")]),g("ul",null,[g("li",{class:"balancing"},"Balanced up to 1.4e25 Particles/s"),g("li",{class:"feature"},"Implemented Advancements 24-32"),g("li",{class:"feature"},"Implemented Intrabonds"),g("li",{class:"fix"}," Fixed a bug with the Cryo Challenge rewards not being dependent on the right challenge completions (this might slightly slow down your particles/s, but not substantially enough to be a problem) ")])],-1)),gs=st(()=>g("details",null,[g("summary",null,[v("v1.1.1 Big Loar - "),g("time",null,"2022-05-05")]),g("ul",null,[g("li",{class:"balancing"},"Balanced up to 1e17 Particles/s"),g("li",{class:"feature"},"Implemented Advancements 22-23"),g("li",{class:"feature"},"Added a Lore node because why not :)")])],-1)),hs=st(()=>g("details",null,[g("summary",null,[v("v1.1 Particle Combinators - "),g("time",null,"2022-05-03")]),g("ul",null,[g("li",{class:"balancing"},"Balanced up to 1e14 Particles/s"),g("li",{class:"feature"},"Implemented Advancements 16-21"),g("li",{class:"feature"},"Implemented Particle Combinators"),g("li",{class:"breaking"}," Updated to Profectus v0.4, which caused saves to glitch out a bit. Here is a list of everything that may have reset for you: Flame Upgrades, Life Buyables, and the Earth Grid (but not its level) ")])],-1)),ys=st(()=>g("details",null,[g("summary",null,[v("v1.0.2 Tooltip Heaven - "),g("time",null,"2022-04-24")]),g("ul",null,[g("li",{class:"fix"},"Updated to Profectus v0.3.3"),g("li",{class:"fix"},"Added tooltips to layer nodes (thanks to thepaperpilot)"),g("li",{class:"fix"}," Added modifier tooltips to reset buttons (note that it's not in the Aqua layer, it doesn't let you click the reset button when it is, so I had to remove it for the time being while I try to figure that out) "),g("li",{class:"fix"}," Fixed the way that the branched reset propagation works (I really borked that one up lol) ")])],-1)),bs=st(()=>g("details",null,[g("summary",null,[v("v1.0.1 Refined Edges - "),g("time",null,"2022-04-24")]),g("ul",null,[g("li",{class:"fix"},"Updated to Profectus v0.3.2"),g("li",{class:"fix"}," Added glow color to certain layers (thanks to thepaperpilot) ")])],-1)),ws=st(()=>g("details",null,[g("summary",null,[v("v1.0 Our Planet - "),g("time",null,"2022-04-23")]),g("ul",null,[g("li",{class:"balancing"},"Balanced up to 3e9 Particles/s"),g("li",{class:"feature"},"Implemented Advancements 11-15"),g("li",{class:"feature"},"Implemented Earth layer")])],-1)),Ns=st(()=>g("details",null,[g("summary",null,[v("v0.3 Windseeker - "),g("time",null,"2022-04-14")]),g("ul",null,[g("li",{class:"balancing"},"Balanced up to 40,500,000 Particles/s"),g("li",{class:"feature"},"Implemented Advancements 7-11"),g("li",{class:"feature"},"Implemented Air layer")])],-1)),_s=st(()=>g("details",null,[g("summary",null,[v("v0.2 Several Advancements - "),g("time",null,"2022-04-11")]),g("ul",null,[g("li",{class:"balancing"},"Balanced up to 43,000 Particles/s"),g("li",{class:"feature"},"Implemented Advancements 2-6"),g("li",{class:"feature"},"Implemented Cryo layer")])],-1)),ks=st(()=>g("details",null,[g("summary",null,[v("v0.1 Basic Mechanics - "),g("time",null,"2022-04-08")]),g("ul",null,[g("li",{class:"feature"},"Implemented Flame, Life, & Water layers"),g("li",{class:"feature"},"Implemented Advancement 1"),g("li",{class:"feature"},"Implemented Lightning layer")])],-1)),Cs=z({setup(e,{expose:t}){const l=x(!1);return t({open(){l.value=!0}}),(n,s)=>(C(),j(Lt,{modelValue:l.value,"onUpdate:modelValue":s[0]||(s[0]=r=>l.value=r)},{header:K(()=>[fs]),body:K(()=>[ms,vs,ps,gs,hs,ys,bs,ws,Ns,_s,ks]),_:1},8,["modelValue"]))}});var Ss=ne(Cs,[["__scopeId","data-v-56692f46"]]),Ms=z({props:{element:Object,display:{type:E(Object,String,Function),required:!0},style:E(Object,String,Array),classes:E(Object),direction:E(String),xoffset:E(String),yoffset:E(String),pinned:Object},setup(e){const{element:t,display:l,pinned:n}=_e(e),s=x(!1),r=h(()=>(ye(n)||s.value)&&o.value),o=Jt(l),u=lt(H(B(()=>{const y=ye(t);return y==null?"":gt(y)})));function c(y){const w=n;y.shiftKey&&w&&(w.value=!w.value,y.stopPropagation(),y.preventDefault())}const d=h(()=>ye(n)&&Kt[de.theme].showPin);return{Direction:X,isHovered:s,isShown:r,comp:o,elementComp:u,unref:f,togglePinned:c,showPin:d}}});const Ps={key:0,class:"material-icons pinned"};function Is(e,t,l,n,s,r){return C(),q("div",{class:Ne(["tooltip-container",{shown:e.isShown}]),onMouseenter:t[0]||(t[0]=o=>e.isHovered=!0),onMouseleave:t[1]||(t[1]=o=>e.isHovered=!1),onClickCapture:t[2]||(t[2]=(...o)=>e.togglePinned&&e.togglePinned(...o))},[Tt(e.$slots,"default",{},void 0,!0),e.elementComp?(C(),j(fe(e.elementComp),{key:0})):L("",!0),a(Bl,{name:"fade"},{default:K(()=>{var o;return[e.isShown?(C(),q("div",{key:0,class:Ne(["tooltip",{top:e.unref(e.direction)===e.Direction.Up,left:e.unref(e.direction)===e.Direction.Left,right:e.unref(e.direction)===e.Direction.Right,bottom:e.unref(e.direction)===e.Direction.Down,...e.unref(e.classes)}]),style:ce([{"--xoffset":e.unref(e.xoffset)||"0px","--yoffset":e.unref(e.yoffset)||"0px"},(o=e.unref(e.style))!=null?o:{}])},[e.showPin?(C(),q("span",Ps,"push_pin")):L("",!0),e.comp?(C(),j(fe(e.comp),{key:1})):L("",!0)],6)):L("",!0)]}),_:1})],34)}var Te=ne(Ms,[["render",Is],["__scopeId","data-v-6102fa3a"]]);const Gt=e=>(_t("data-v-7dec2dec"),e=e(),kt(),e),$s={class:"info-modal-header"},Ts=["src","alt"],Ds={class:"info-modal-title"},Es={key:0},Bs={key:0},qs={key:0},As=Gt(()=>g("div",null," Made in Profectus, by thepaperpilot with inspiration from Acameada and Jacorb ",-1)),Fs=Gt(()=>g("br",null,null,-1)),Os=Gt(()=>g("br",null,null,-1)),Vs=["href"],Rs=Gt(()=>g("span",{class:"material-icons info-modal-discord"},"discord",-1)),Ls=Gt(()=>g("div",null,[g("a",{href:"https://discord.gg/WzejVAx",class:"info-modal-discord-link"},[g("span",{class:"material-icons info-modal-discord"},"discord"),v(" The Paper Pilot Community ")])],-1)),Gs=Gt(()=>g("div",null,[g("a",{href:"https://discord.gg/F3xveHV",class:"info-modal-discord-link"},[g("span",{class:"material-icons info-modal-discord"},"discord"),v(" The Modding Tree ")])],-1)),Us=Gt(()=>g("br",null,null,-1));var xs=z({props:{changelog:null},setup(e,{expose:t}){const l=e,{title:n,logo:s,author:r,discordName:o,discordLink:u,versionNumber:c,versionTitle:d}=ae,y=_e(l),w=x(!1),p=h(()=>_l(O.timePlayed)),b=h(()=>H(B(()=>a(R,null,[Hi.map(U)]))));t({open(){w.value=!0}});function m(){var N;(N=f(y.changelog))==null||N.open()}return(N,D)=>(C(),j(Lt,{modelValue:w.value,"onUpdate:modelValue":D[0]||(D[0]=M=>w.value=M)},{header:K(()=>[g("div",$s,[f(s)?(C(),q("img",{key:0,class:"info-modal-logo",src:f(s),alt:f(n)},null,8,Ts)):L("",!0),g("div",Ds,[g("h2",null,ie(f(n)),1),g("h4",null,[v(" v"+ie(f(c)),1),f(d)?(C(),q("span",Es,": "+ie(f(d)),1)):L("",!0)])])])]),body:K(({shown:M})=>[M?(C(),q("div",Bs,[f(r)?(C(),q("div",qs,"By "+ie(f(r)),1)):L("",!0),As,Fs,g("div",{class:"link",onClick:m},"Changelog"),Os,g("div",null,[f(u)?(C(),q("a",{key:0,href:f(u),class:"info-modal-discord-link"},[Rs,v(" "+ie(f(o)),1)],8,Vs)):L("",!0)]),Ls,Gs,Us,g("div",null,"Time Played: "+ie(f(p)),1),(C(),j(fe(f(b))))])):L("",!0)]),_:1},8,["modelValue"]))}});var js=ne(xs,[["__scopeId","data-v-7dec2dec"]]);const Hs={class:"field"},Ws={key:0,class:"field-title"},Ll=z({props:{title:null,modelValue:null,options:null,placeholder:null,closeOnSelect:{type:Boolean}},emits:["update:modelValue"],setup(e,{emit:t}){var o;const l=e,n=Jt(Dt(l,"title"),"span"),s=x((o=l.options.find(u=>u.value===l.modelValue))!=null?o:null);it(Dt(l,"modelValue"),u=>{var c;ye(s)!==u&&(s.value=(c=l.options.find(d=>d.value===u))!=null?c:null)});function r(u){t("update:modelValue",u.value)}return(u,c)=>(C(),q("div",Hs,[f(n)?(C(),q("span",Ws,[(C(),j(fe(f(n))))])):L("",!0),a(f(Gn),{options:e.options,modelValue:s.value,"onUpdate:modelValue":[c[0]||(c[0]=d=>s.value=d),r],min:1,"label-by":"label",placeholder:e.placeholder,"close-on-select":e.closeOnSelect},null,8,["options","modelValue","placeholder","close-on-select"])]))}});const zs={class:"field"},Ys=z({props:{title:null,modelValue:{type:Boolean}},emits:["update:modelValue"],setup(e,{emit:t}){const l=e,n=h(()=>H(f(l.title)||"<span></span>","span")),s=h({get(){return!!l.modelValue},set(r){t("update:modelValue",r)}});return(r,o)=>(C(),q("label",zs,[Ce(g("input",{type:"checkbox",class:"toggle","onUpdate:modelValue":o[0]||(o[0]=u=>Oe(s)?s.value=u:null)},null,512),[[An,f(s)]]),(C(),j(fe(f(n))))]))}});var yt=ne(Ys,[["__scopeId","data-v-2b109500"]]);const wn=e=>(_t("data-v-bc13791c"),e=e(),kt(),e),Zs=wn(()=>g("div",{class:"header"},[g("h2",null,"Options")],-1)),Ks=wn(()=>g("hr",null,null,-1));var Js=z({setup(e,{expose:t}){const l=x(!1);t({open(){l.value=!0}});const n=Object.keys(Kt).map(m=>({label:un(m),value:m})),s=h(()=>H(B(()=>a(R,null,[vn.map(U)])))),{showTPS:r,theme:o,unthrottled:u}=_e(de),{autosave:c,offlineProd:d}=_e(O),y=h({get(){return O.devSpeed===0},set(m){O.devSpeed=m?0:null}}),w=B(()=>a("span",null,[v("Offline Production"),a(Te,{display:"Save-specific"},{default:()=>[v("*")]})])),p=B(()=>a("span",null,[v("Autosave"),a(Te,{display:"Save-specific"},{default:()=>[v("*")]})])),b=B(()=>a("span",null,[v("Pause game"),a(Te,{display:"Save-specific"},{default:()=>[v("*")]})]));return(m,N)=>(C(),j(Lt,{modelValue:l.value,"onUpdate:modelValue":N[6]||(N[6]=D=>l.value=D)},{header:K(()=>[Zs]),body:K(()=>[a(Ll,{title:"Theme",options:f(n),modelValue:f(o),"onUpdate:modelValue":N[0]||(N[0]=D=>Oe(o)?o.value=D:null)},null,8,["options","modelValue"]),(C(),j(fe(f(s)))),a(yt,{title:"Show TPS",modelValue:f(r),"onUpdate:modelValue":N[1]||(N[1]=D=>Oe(r)?r.value=D:null)},null,8,["modelValue"]),Ks,a(yt,{title:"Unthrottled",modelValue:f(u),"onUpdate:modelValue":N[2]||(N[2]=D=>Oe(u)?u.value=D:null)},null,8,["modelValue"]),a(yt,{title:f(w),modelValue:f(d),"onUpdate:modelValue":N[3]||(N[3]=D=>Oe(d)?d.value=D:null)},null,8,["title","modelValue"]),a(yt,{title:f(p),modelValue:f(c),"onUpdate:modelValue":N[4]||(N[4]=D=>Oe(c)?c.value=D:null)},null,8,["title","modelValue"]),f(ae).enablePausing?(C(),j(yt,{key:0,title:f(b),modelValue:f(y),"onUpdate:modelValue":N[5]||(N[5]=D=>Oe(y)?y.value=D:null)},null,8,["title","modelValue"])):L("",!0)]),_:1},8,["modelValue"]))}});var Xs=ne(Js,[["__scopeId","data-v-bc13791c"]]);const Qs=["onSubmit"],ea={class:"field"},ta={key:0,class:"field-title"},la=["placeholder"],na=z({props:{title:null,modelValue:null,textArea:{type:Boolean},placeholder:null,maxHeight:null},emits:["update:modelValue","submit"],setup(e,{emit:t}){const n=_e(e),s=h(()=>{var c;return((c=n.title)==null?void 0:c.value)&&H(f(n.title.value),"span")}),r=x(null);Nl(()=>{var c;(c=r.value)==null||c.focus()});const o=h({get(){return f(n.modelValue)||""},set(c){t("update:modelValue",c)}});function u(){t("submit")}return(c,d)=>(C(),q("form",{onSubmit:nl(u,["prevent"])},[g("div",ea,[f(s)?(C(),q("span",ta,[(C(),j(fe(f(s))))])):L("",!0),e.textArea?(C(),j(f(xn),{key:1,modelValue:f(o),"onUpdate:modelValue":d[0]||(d[0]=y=>Oe(o)?o.value=y:null),placeholder:e.placeholder,maxHeight:e.maxHeight,onBlur:u,ref_key:"field",ref:r},null,8,["modelValue","placeholder","maxHeight"])):Ce((C(),q("input",{key:2,type:"text","onUpdate:modelValue":d[1]||(d[1]=y=>Oe(o)?o.value=y:null),placeholder:e.placeholder,class:Ne({fullWidth:!e.title}),onBlur:u,ref_key:"field",ref:r},null,42,la)),[[Fn,f(o)]])])],40,Qs))}});var Nn=ne(na,[["__scopeId","data-v-d74adb0a"]]);const ia={key:0},sa=["onClick","disabled"],aa={key:0},ra=["onClick"],oa=z({props:{disabled:{type:Boolean},skipConfirm:{type:Boolean},forceOnClick:null,customDisplay:null},emits:["click","confirmingChanged"],setup(e,{emit:t}){const n=_e(e),s=x(!1);it(s,u=>{t("confirmingChanged",u)});function r(){var u,c,d,y;if(f(n.skipConfirm)){t("click"),(c=(u=n==null?void 0:n.forceOnClick)==null?void 0:u.value)==null||c.call(u);return}s.value&&(t("click"),(y=(d=n==null?void 0:n.forceOnClick)==null?void 0:d.value)==null||y.call(d)),s.value=!s.value}function o(){s.value=!1}return(u,c)=>(C(),q("span",{class:Ne(["container",{confirming:s.value}])},[s.value?(C(),q("span",ia,ie(e.customDisplay?e.customDisplay:"Are you sure?"),1)):L("",!0),g("button",{onClick:nl(r,["stop"]),class:"button danger",disabled:e.disabled},[s.value?(C(),q("span",aa,"Yes")):Tt(u.$slots,"default",{key:1},void 0,!0)],8,sa),s.value?(C(),q("button",{key:1,class:"button",onClick:nl(o,["stop"])},"No",8,ra)):L("",!0)],2))}});var _n=ne(oa,[["__scopeId","data-v-1f8c0899"]]);const ua=["onClick"],ca=z({props:{left:{type:Boolean}},emits:["click"],setup(e,{emit:t}){const l=x(!1),n=x(null);function s(){t("click"),n.value&&clearTimeout(n.value),l.value=!1,wt(()=>{l.value=!0,n.value=setTimeout(()=>l.value=!1,500)})}return(r,o)=>(C(),q("button",{onClick:nl(s,["stop"]),class:Ne(["feedback",{activated:l.value,left:e.left}])},[Tt(r.$slots,"default",{},void 0,!0)],10,ua))}});var da=ne(ca,[["__scopeId","data-v-01a1b95c"]]);const Ct=e=>(_t("data-v-0136bef4"),e=e(),kt(),e),fa=Ct(()=>g("div",{class:"handle material-icons"},"drag_handle",-1)),ma={key:0,class:"actions"},va=Ct(()=>g("span",{class:"material-icons"},"content_paste",-1)),pa=Ct(()=>g("span",{class:"material-icons"},"content_copy",-1)),ga=Ct(()=>g("span",{class:"material-icons"},"edit",-1)),ha=Ct(()=>g("span",{class:"material-icons",style:{margin:"-2px"}},"delete",-1)),ya={key:1,class:"actions"},ba=Ct(()=>g("span",{class:"material-icons"},"check",-1)),wa=Ct(()=>g("span",{class:"material-icons"},"close",-1)),Na={key:2,class:"details"},_a={class:"save-version"},ka=Ct(()=>g("br",null,null,-1)),Ca={key:0},Sa={key:3,class:"details"},Ma={key:4,class:"details error"},Pa=Ct(()=>g("br",null,null,-1)),Ia=z({props:{save:null},emits:["export","open","duplicate","delete","editName"],setup(e,{emit:t}){const l=e,{save:n}=_e(l),s=new Intl.DateTimeFormat("en-US",{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}),r=x(!1),o=x(!1),u=x("");it(r,()=>u.value=n.value.name||"");const c=h(()=>n.value&&n.value.id===O.id),d=h(()=>c.value?O.time:n.value&&n.value.time||0);function y(){t("editName",u.value),r.value=!1}return(w,p)=>(C(),q("div",{class:Ne(["save",{active:f(c)}])},[fa,r.value?(C(),q("div",ya,[g("button",{onClick:y,class:"button"},[a(Te,{display:"Save",direction:f(X).Left,class:"info"},{default:K(()=>[ba]),_:1},8,["direction"])]),g("button",{onClick:p[5]||(p[5]=b=>r.value=!r.value),class:"button"},[a(Te,{display:"Cancel",direction:f(X).Left,class:"info"},{default:K(()=>[wa]),_:1},8,["direction"])])])):(C(),q("div",ma,[f(n).error==null&&!o.value?(C(),j(da,{key:0,onClick:p[0]||(p[0]=b=>t("export")),class:"button",left:""},{default:K(()=>[a(Te,{display:"Export",direction:f(X).Left,class:"info"},{default:K(()=>[va]),_:1},8,["direction"])]),_:1})):L("",!0),f(n).error==null&&!o.value?(C(),q("button",{key:1,onClick:p[1]||(p[1]=b=>t("duplicate")),class:"button"},[a(Te,{display:"Duplicate",direction:f(X).Left,class:"info"},{default:K(()=>[pa]),_:1},8,["direction"])])):L("",!0),f(n).error==null&&!o.value?(C(),q("button",{key:2,onClick:p[2]||(p[2]=b=>r.value=!r.value),class:"button"},[a(Te,{display:"Edit Name",direction:f(X).Left,class:"info"},{default:K(()=>[ga]),_:1},8,["direction"])])):L("",!0),a(_n,{disabled:f(c),onClick:p[3]||(p[3]=b=>t("delete")),onConfirmingChanged:p[4]||(p[4]=b=>o.value=b)},{default:K(()=>[a(Te,{display:"Delete",direction:f(X).Left,class:"info"},{default:K(()=>[ha]),_:1},8,["direction"])]),_:1},8,["disabled"])])),f(n).error==null&&!r.value?(C(),q("div",Na,[g("button",{class:"button open",onClick:p[6]||(p[6]=b=>t("open"))},[g("h3",null,ie(f(n).name),1)]),g("span",_a,"v"+ie(f(n).modVersion),1),ka,f(d)?(C(),q("div",Ca,"Last played "+ie(f(s).format(f(d))),1)):L("",!0)])):f(n).error==null&&r.value?(C(),q("div",Sa,[a(Nn,{modelValue:u.value,"onUpdate:modelValue":p[7]||(p[7]=b=>u.value=b),class:"editname",onSubmit:y},null,8,["modelValue"])])):(C(),q("div",Ma,[v(" Error: Failed to load save with id "+ie(f(n).id),1),Pa,v(ie(f(n).error),1)]))],2))}});var $a=ne(Ia,[["__scopeId","data-v-0136bef4"]]);const Gl=e=>(_t("data-v-3b9991aa"),e=e(),kt(),e),Ta=Gl(()=>g("h2",null,"Saves Manager",-1)),Da={class:"modal-footer"},Ea={class:"field"},Ba=Gl(()=>g("span",{class:"field-title"},"Create Save",-1)),qa={class:"field-buttons"},Aa={class:"footer"},Fa=Gl(()=>g("div",{style:{"flex-grow":"1"}},null,-1)),Oa=z({setup(e,{expose:t}){const l=x(!1),n=x(null);t({open(){l.value=!0}});const s=x(!1),r=x(""),o=x(null);it(r,$=>{$?wt(()=>{try{if($[0]!=="{")if($[0]==="e")$=decodeURIComponent(escape(atob($)));else if($[0]==="\u1BE1")$=It.decompressFromUTF16($);else{console.warn("Unable to determine preset encoding",$),s.value=!0;return}const S=JSON.parse($);if(typeof S!="object"){s.value=!0;return}const G=vl();S.id=G,ot(S),r.value="",s.value=!1,de.saves.push(G)}catch{s.value=!0}}):s.value=!1});let u={},c=x(Object.keys(u).reduce(($,S)=>($.push({label:S.split("/").slice(-1)[0].slice(0,-4),value:u[S]}),$),[]));const d=El({});function y($){if(d[$]==null){let S=localStorage.getItem($);if(S==null)d[$]={error:"Save doesn't exist in localStorage",id:$};else if(S==="dW5kZWZpbmVk")d[$]={error:"Save is undefined",id:$};else try{if(S[0]!=="{")if(S[0]==="e")S=decodeURIComponent(escape(atob(S)));else if(S[0]==="\u1BE1")S=It.decompressFromUTF16(S);else return console.warn("Unable to determine preset encoding",S),s.value=!0,d[$]={error:"Unable to determine preset encoding",id:$},d[$];d[$]={...JSON.parse(S),id:$}}catch(G){d[$]={error:G,id:$},console.warn(`SavesManager: Failed to load info about save with id ${$}:
${G}
${S}`)}}return d[$]}it(l,$=>{$&&Object.keys(d).forEach(S=>delete d[S])});const w=h(()=>de.saves.reduce(($,S)=>($[S]=y(S),$),{}));function p($){let S;switch(O.id===$?S=dn(O[$e]):S=JSON.stringify(w.value[$]),ae.exportEncoding){default:console.warn(`Unknown save encoding: ${ae.exportEncoding}. Defaulting to lz`);case"lz":S=It.compressToUTF16(S);break;case"base64":S=btoa(unescape(encodeURIComponent(S)));break;case"plain":break}const G=document.createElement("textarea");G.value=S,document.body.appendChild(G),G.select(),G.setSelectionRange(0,99999),document.execCommand("copy"),document.body.removeChild(G)}function b($){O.id===$&&ot();const S={...w.value[$],id:vl()};ot(S),de.saves.push(S.id)}function m($){de.saves=de.saves.filter(S=>S!==$),localStorage.removeItem($),d[$]=void 0}function N($){w.value[O.id].time=O.time,ot(),d[O.id]=void 0,Rt(w.value[$]),d[$]=void 0}function D($){if(o.value=$,wt(()=>{o.value=null}),$[0]!=="{")if($[0]==="e")$=decodeURIComponent(escape(atob($)));else if($[0]==="\u1BE1")$=It.decompressFromUTF16($);else{console.warn("Unable to determine preset encoding",$);return}const S=JSON.parse($);S.id=vl(),ot(S),de.saves.push(S.id),N(S.id)}function M($,S){const G=w.value[$];G&&(G.name=S,O.id===$?(O.name=S,ot()):(ot(G),d[$]=void 0))}return($,S)=>(C(),j(Lt,{modelValue:l.value,"onUpdate:modelValue":S[4]||(S[4]=G=>l.value=G),ref_key:"modal",ref:n},{header:K(()=>[Ta]),body:K(({shown:G})=>[G?(C(),j(f(Un),{key:0,list:f(de).saves,handle:".handle",itemKey:V=>V},{item:K(({element:V})=>[a($a,{save:f(w)[V],onOpen:Y=>N(V),onExport:Y=>p(V),onEditName:Y=>M(V,Y),onDuplicate:Y=>b(V),onDelete:Y=>m(V)},null,8,["save","onOpen","onExport","onEditName","onDuplicate","onDelete"])]),_:1},8,["list","itemKey"])):L("",!0)]),footer:K(()=>[g("div",Da,[a(Nn,{modelValue:r.value,"onUpdate:modelValue":S[0]||(S[0]=G=>r.value=G),title:"Import Save",placeholder:"Paste your save here!",class:Ne({importingFailed:s.value})},null,8,["modelValue","class"]),g("div",Ea,[Ba,g("div",qa,[g("button",{class:"button",onClick:S[1]||(S[1]=G=>N(f(Wt)().id))},"New Game"),Object.keys(f(c)).length>0?(C(),j(Ll,{key:0,options:f(c),modelValue:o.value,"onUpdate:modelValue":S[2]||(S[2]=G=>D(G)),closeOnSelect:"",placeholder:"Select preset",class:"presets"},null,8,["options","modelValue"])):L("",!0)])]),g("div",Aa,[Fa,g("button",{class:"button modal-default-button",onClick:S[3]||(S[3]=G=>l.value=!1)}," Close ")])])]),_:1},8,["modelValue"]))}});var kn=ne(Oa,[["__scopeId","data-v-3b9991aa"]]);const Ke=e=>(_t("data-v-4a3f8425"),e=e(),kt(),e),Va=["src","alt"],Ra={key:1,class:"title"},La=Ke(()=>g("div",{style:{"flex-grow":"1",cursor:"unset"}},null,-1)),Ga={class:"discord"},Ua={class:"discord-links"},xa={key:0},ja=["href"],Ha=Ke(()=>g("li",null,[g("a",{href:"https://discord.gg/WzejVAx",target:"_blank"},"The Paper Pilot Community")],-1)),Wa=Ke(()=>g("li",null,[g("a",{href:"https://discord.gg/F3xveHV",target:"_blank"},"The Modding Tree")],-1)),za={href:"https://forums.moddingtree.com/",target:"_blank"},Ya=Ke(()=>g("span",{class:"material-icons"},"forum",-1)),Za=Ke(()=>g("span",{class:"material-icons"},"info",-1)),Ka=Ke(()=>g("span",{class:"material-icons"},"library_books",-1)),Ja=Ke(()=>g("span",{class:"material-icons"},"settings",-1)),Xa=Ke(()=>g("span",{class:"material-icons"},"library_books",-1)),Qa=Ke(()=>g("span",{class:"material-icons"},"settings",-1)),er=Ke(()=>g("span",{class:"material-icons"},"info",-1)),tr={href:"https://forums.moddingtree.com/",target:"_blank"},lr=Ke(()=>g("span",{class:"material-icons"},"forum",-1)),nr={class:"discord"},ir={class:"discord-links"},sr={key:0},ar=["href"],rr=Ke(()=>g("li",null,[g("a",{href:"https://discord.gg/WzejVAx",target:"_blank"},"The Paper Pilot Community")],-1)),or=Ke(()=>g("li",null,[g("a",{href:"https://discord.gg/F3xveHV",target:"_blank"},"The Modding Tree")],-1)),ur=z({setup(e){const t=x(null),l=x(null),n=x(null),s=x(null),{useHeader:r,banner:o,title:u,discordName:c,discordLink:d,versionNumber:y}=ae;function w(){window.open(d,"mywindow")}return(p,b)=>(C(),q(R,null,[f(r)?(C(),q("div",Nt({key:0,class:"nav"},p.$attrs),[f(o)?(C(),q("img",{key:0,src:f(o),class:"banner",alt:f(u)},null,8,Va)):(C(),q("div",Ra,ie(f(u)),1)),g("div",{onClick:b[0]||(b[0]=m=>{var N;return(N=s.value)==null?void 0:N.open()}),class:"version-container"},[a(Te,{display:"Changelog",direction:f(X).Down,class:"version"},{default:K(()=>[g("span",null,"v"+ie(f(y)),1)]),_:1},8,["direction"])]),La,g("div",Ga,[g("span",{onClick:w,class:"material-icons"},"discord"),g("ul",Ua,[f(d)?(C(),q("li",xa,[g("a",{href:f(d),target:"_blank"},ie(f(c)),9,ja)])):L("",!0),Ha,Wa])]),g("div",null,[g("a",za,[a(Te,{display:"Forums",direction:f(X).Down,yoffset:"5px"},{default:K(()=>[Ya]),_:1},8,["direction"])])]),g("div",{onClick:b[1]||(b[1]=m=>{var N;return(N=t.value)==null?void 0:N.open()})},[a(Te,{display:"Info",direction:f(X).Down,class:"info"},{default:K(()=>[Za]),_:1},8,["direction"])]),g("div",{onClick:b[2]||(b[2]=m=>{var N;return(N=l.value)==null?void 0:N.open()})},[a(Te,{display:"Saves",direction:f(X).Down,xoffset:"-20px"},{default:K(()=>[Ka]),_:1},8,["direction"])]),g("div",{onClick:b[3]||(b[3]=m=>{var N;return(N=n.value)==null?void 0:N.open()})},[a(Te,{display:"Options",direction:f(X).Down,xoffset:"-66px"},{default:K(()=>[Ja]),_:1},8,["direction"])])],16)):(C(),q("div",Nt({key:1,class:"overlay-nav"},p.$attrs),[g("div",{onClick:b[4]||(b[4]=m=>{var N;return(N=s.value)==null?void 0:N.open()}),class:"version-container"},[a(Te,{display:"Changelog",direction:f(X).Right,xoffset:"25%",class:"version"},{default:K(()=>[g("span",null,"v"+ie(f(y)),1)]),_:1},8,["direction"])]),g("div",{onClick:b[5]||(b[5]=m=>{var N;return(N=l.value)==null?void 0:N.open()})},[a(Te,{display:"Saves",direction:f(X).Right},{default:K(()=>[Xa]),_:1},8,["direction"])]),g("div",{onClick:b[6]||(b[6]=m=>{var N;return(N=n.value)==null?void 0:N.open()})},[a(Te,{display:"Options",direction:f(X).Right},{default:K(()=>[Qa]),_:1},8,["direction"])]),g("div",{onClick:b[7]||(b[7]=m=>{var N;return(N=t.value)==null?void 0:N.open()})},[a(Te,{display:"Info",direction:f(X).Right},{default:K(()=>[er]),_:1},8,["direction"])]),g("div",null,[g("a",tr,[a(Te,{display:"Forums",direction:f(X).Right,xoffset:"7px"},{default:K(()=>[lr]),_:1},8,["direction"])])]),g("div",nr,[g("span",{onClick:w,class:"material-icons"},"discord"),g("ul",ir,[f(d)?(C(),q("li",sr,[g("a",{href:f(d),target:"_blank"},ie(f(c)),9,ar)])):L("",!0),rr,or])])],16)),a(js,{ref_key:"info",ref:t,changelog:s.value},null,8,["changelog"]),a(kn,{ref_key:"savesManager",ref:l},null,512),a(Xs,{ref_key:"options",ref:n},null,512),a(Ss,{ref_key:"changelog",ref:s},null,512)],64))}});var Cn=ne(ur,[["__scopeId","data-v-4a3f8425"]]);const cr={class:"inner-tab"},dr=z({setup(e){const t=Dt(O,"tabs"),l=h(()=>Object.keys(xe)),n=ae.useHeader;function s(r){const{display:o,minimized:u,minWidth:c,name:d,color:y,minimizable:w,nodes:p}=r;return{display:o,minimized:u,minWidth:c,name:d,color:y,minimizable:w,nodes:p}}return(r,o)=>(C(),q("div",{class:Ne(["tabs-container",{useHeader:f(n)}])},[(C(!0),q(R,null,il(f(t),(u,c)=>{var d,y;return C(),q("div",{key:c,class:Ne(["tab",f((d=f(xe)[u])==null?void 0:d.classes)]),ref_for:!0,ref:`tab-${c}`,style:ce(f((y=f(xe)[u])==null?void 0:y.style))},[c===0&&!f(n)?(C(),j(Cn,{key:0})):L("",!0),g("div",cr,[f(l).includes(u)?(C(),j(ds,Nt({key:0},s(f(xe)[u]),{index:c,tab:()=>{var w;return(w=r.$refs[`tab-${c}`])==null?void 0:w[0]}}),null,16,["index","tab"])):(C(),j(fe(u),{key:1,index:c},null,8,["index"]))])],6)}),128))],2))}});var fr=ne(dr,[["__scopeId","data-v-4cb9ce0f"]]);const mr=z({props:{width:{default:"8px"},height:{default:"17px"}},setup(e){return(t,l)=>(C(),q("div",{style:ce({width:e.width,height:e.height})},null,4))}});function kl(e){return Le(()=>{const t=e();return t.currentGain==null&&(t.currentGain=h(()=>{let l=t.gainModifier?t.gainModifier.apply(t.scaling.currentGain(t)):t.scaling.currentGain(t);return l=i.floor(l).max(0),f(t.buyMax)||(l=l.min(1)),l})),t.actualGain==null&&(t.actualGain=t.currentGain),t.currentAt==null&&(t.currentAt=h(()=>{let l=t.scaling.currentAt(t);return t.roundUpCost&&(l=i.ceil(l)),l})),t.nextAt==null&&(t.nextAt=h(()=>{let l=t.scaling.nextAt(t);return t.roundUpCost&&(l=i.ceil(l)),l})),t.convert==null&&(t.convert=function(){const l=f(t.currentGain);t.gainResource.value=i.add(t.gainResource.value,l),Cl(t.baseResource)&&(t.baseResource.value=0)}),P(t,"currentGain"),P(t,"actualGain"),P(t,"currentAt"),P(t,"nextAt"),P(t,"buyMax"),le(t,"buyMax",!0),P(t,"roundUpCost"),le(t,"roundUpCost",!0),t})}function Cl(e){return e.precision!==void 0}function Bt(e,t){const l=bt(e),n=bt(t);return{currentGain(s){let r=f(s.baseResource.value);if(s.costModifier&&(r=s.costModifier.apply(r)),i.lt(r,f(l)))return 0;const o=i.div(r,f(l)).pow(f(n));return o.isNan()?new i(0):o},currentAt(s){var o,u,c;let r=f(s.currentGain);return s.gainModifier&&(r=s.gainModifier.revert(r)),r=i.max(0,r).root(f(n)).times(f(l)),s.costModifier&&(r=(c=(u=(o=s.costModifier)==null?void 0:o.revert)==null?void 0:u.call(o,r))!=null?c:r),r},nextAt(s){var o,u,c;let r=i.add(f(s.currentGain),1).floor();return s.gainModifier&&(r=s.gainModifier.revert(r)),r=i.max(0,r).root(f(n)).times(f(l)).max(f(l)),s.costModifier&&(r=(c=(u=(o=s.costModifier)==null?void 0:o.revert)==null?void 0:u.call(o,r))!=null?c:r),r}}}function qt(e){return kl(e)}function vr(e){return kl(()=>{const t=e();return le(t,"buyMax",!1),t.currentGain==null&&(t.currentGain=h(()=>{let l=t.gainModifier?t.gainModifier.apply(t.scaling.currentGain(t)):t.scaling.currentGain(t);return l=i.floor(l).max(t.gainResource.value),f(t.buyMax)||(l=l.min(i.add(t.gainResource.value,1))),l})),t.actualGain==null&&(t.actualGain=h(()=>{let l=i.sub(i.floor(t.scaling.currentGain(t)),t.gainResource.value).max(0);return f(t.buyMax)||(l=l.min(1)),l})),le(t,"convert",function(){f(t.actualGain),t.gainResource.value=t.gainModifier?t.gainModifier.apply(f(t.currentGain)):f(t.currentGain),Cl(t.baseResource)&&(t.baseResource.value=0)}),t})}function Q(e,t="points",l=0,n=void 0){const s=Oe(e)?e:je(e);return s.displayName=t,s.precision=l,s.small=n,s}function dt(e){const t=je(e.value);return it(e,l=>{i.gt(l,t.value)&&(t.value=l)}),t}function pr(e){const t=je(e.value);return it(e,(l,n)=>{i.gt(l,n)&&(t.value=i.add(t.value,i.sub(l,n)))}),t}const gr=new i("10^^8"),hr=new i("1e100");function yr(e,t){const l=x(0),n=x(0),s=x(0);return me.on("update",o=>{if(n.value=0,i.lte(e.value,hr)){s.value=e.value;return}let u=e.value,c=s.value;if(s.value=u,i.gt(u,c))if(i.gte(u,gr))u=i.slog(u,1e10),c=i.slog(c,1e10),l.value=u.sub(c).div(o),n.value=-1;else for(;i.div(u,c).log(10).div(o).gte("100")&&n.value<=5&&i.gt(c,0);)u=i.log10(u),c=i.log10(c),l.value=u.sub(c).div(o),n.value++}),h(()=>n.value===0?t?A(t.value,e.precision,e.small)+" "+e.displayName+"/s":"":A(l.value)+" OOM"+(n.value<0?"^OOM":"^"+n.value)+"s/sec")}function ct(e,t){const l=t!=null?t:e.value;return i.eq(e.precision,0)?ue(l):A(l,e.precision,e.small)}function br(e,t){if(Cl(e))return ct(e,t);{const l=t!=null?t:e.value;return A(l)}}const wr=["x1","y1","x2","y2"],Nr=z({props:{link:null,startNode:null,endNode:null,boundingRect:null},setup(e){const l=_e(e),n=h(()=>{const r=l.startNode.value.rect,o=l.boundingRect.value,u=o?{x:r.x+r.width/2-o.x,y:r.y+r.height/2-o.y}:{x:0,y:0};return l.link.value.offsetStart&&(u.x+=l.link.value.offsetStart.x,u.y+=l.link.value.offsetStart.y),u}),s=h(()=>{const r=l.endNode.value.rect,o=l.boundingRect.value,u=o?{x:r.x+r.width/2-o.x,y:r.y+r.height/2-o.y}:{x:0,y:0};return l.link.value.offsetEnd&&(u.x+=l.link.value.offsetEnd.x,u.y+=l.link.value.offsetEnd.y),u});return(r,o)=>(C(),q("line",Nt({"stroke-width":"15px",stroke:"white"},e.link,{x1:f(n).x,y1:f(n).y,x2:f(s).x,y2:f(s).y}),null,16,wr))}});const _r=z({props:{links:null},setup(e){var c;const l=Dt(e,"links"),n=x(null),s=pl(Vl,x({})),r=pl(Rl,x(void 0)),o=x((c=n.value)==null?void 0:c.getBoundingClientRect());it(r,()=>{var d;return o.value=(d=n.value)==null?void 0:d.getBoundingClientRect()}),Nl(()=>{var d;return o.value=(d=n.value)==null?void 0:d.getBoundingClientRect()});const u=h(()=>{var y,w;const d=s.value;return(w=(y=l.value)==null?void 0:y.filter(p=>{var b,m;return((b=d[p.startNode.id])==null?void 0:b.rect)&&((m=d[p.startNode.id])==null?void 0:m.rect)}))!=null?w:[]});return(d,y)=>(C(),q(R,null,[f(u)?(C(),q("svg",On(Nt({key:0},d.$attrs)),[(C(!0),q(R,null,il(f(u),(w,p)=>(C(),j(Nr,{key:p,link:w,boundingRect:o.value,startNode:f(s)[w.startNode.id],endNode:f(s)[w.endNode.id]},null,8,["link","boundingRect","startNode","endNode"]))),128))],16)):L("",!0),g("div",{ref_key:"resizeListener",ref:n,class:"resize-listener"},null,512)],64))}});var kr=ne(_r,[["__scopeId","data-v-063f6d6b"]]),Cr=z({props:{nodes:{type:E(Array),required:!0},leftSideNodes:E(Array),rightSideNodes:E(Array),branches:E(Array)},components:{Links:kr},setup(e){const{nodes:t,leftSideNodes:l,rightSideNodes:n}=_e(e),s=lt();nt(()=>{const u=ye(t);s.value=H(B(()=>a(R,null,[u.map(c=>a("span",{class:"row tree-row",style:"margin: 50px auto;"},[c.map(gt)]))])))});const r=lt();nt(()=>{const u=ye(l);r.value=u?H(B(()=>a("span",{class:"left-side-nodes small"},[u.map(gt)]))):""});const o=lt();return nt(()=>{const u=ye(n);o.value=u?H(B(()=>a("span",{class:"side-nodes small"},[u.map(gt)]))):""}),{unref:f,nodesComp:s,leftNodesComp:r,rightNodesComp:o}}});function Sr(e,t,l,n,s,r){const o=Fe("Links");return C(),q(R,null,[(C(),j(fe(e.nodesComp))),e.leftNodesComp?(C(),j(fe(e.leftNodesComp),{key:0})):L("",!0),e.rightNodesComp?(C(),j(fe(e.rightNodesComp),{key:1})):L("",!0),e.branches?(C(),j(o,{key:2,links:e.unref(e.branches)},null,8,["links"])):L("",!0)],64)}var Mr=ne(Cr,[["render",Sr],["__scopeId","data-v-39ca96d0"]]);const Pr={key:0},Ir={key:0,class:"mark star"},$r=["src"],Tr=z({props:{mark:{type:[Boolean,String]}},setup(e){return(t,l)=>e.mark?(C(),q("div",Pr,[e.mark===!0?(C(),q("div",Ir)):(C(),q("img",{key:1,class:"mark",src:e.mark},null,8,$r))])):L("",!0)}});var ul=ne(Tr,[["__scopeId","data-v-2207999f"]]);const Dr=z({props:{id:null},setup(e){const l=_e(e),n=pl(Fl,()=>{}),s=pl(Ol,()=>{}),r=x(null),o=h(()=>r.value&&r.value.parentElement);return it([o,l.id],([u,c],[d,y])=>{d&&s(f(y)),u&&n(c,u)}),tn(()=>s(f(l.id))),(u,c)=>(C(),q("div",{class:"node",ref_key:"node",ref:r},null,512))}});var At=ne(Dr,[["__scopeId","data-v-2cb1bb79"]]);const Er=z({props:{display:E(Object,String,Function),visibility:{type:E(Number),required:!0},style:E(String,Object,Array),classes:E(Object),onClick:Function,onHold:Function,color:E(String),glowColor:E(String),canClick:{type:E(Boolean),required:!0},mark:E(Boolean,String),id:{type:String,required:!0}},components:{MarkNode:ul,Node:At},setup(e){const{onClick:t,onHold:l,display:n}=_e(e),s=Jt(n),{start:r,stop:o}=Al(t,l);return{start:r,stop:o,comp:s,unref:f,Visibility:I,isCoercableComponent:Ye}}});function Br(e,t,l,n,s,r){var c;const o=Fe("MarkNode"),u=Fe("Node");return e.unref(e.visibility)!==e.Visibility.None?(C(),q("div",{key:0,style:ce({visibility:e.unref(e.visibility)===e.Visibility.Hidden?"hidden":void 0}),class:Ne({treeNode:!0,can:e.unref(e.canClick),...e.unref(e.classes)}),onClick:t[0]||(t[0]=(...d)=>e.onClick&&e.onClick(...d)),onMousedown:t[1]||(t[1]=(...d)=>e.start&&e.start(...d)),onMouseleave:t[2]||(t[2]=(...d)=>e.stop&&e.stop(...d)),onMouseup:t[3]||(t[3]=(...d)=>e.stop&&e.stop(...d)),onTouchstartPassive:t[4]||(t[4]=(...d)=>e.start&&e.start(...d)),onTouchendPassive:t[5]||(t[5]=(...d)=>e.stop&&e.stop(...d)),onTouchcancelPassive:t[6]||(t[6]=(...d)=>e.stop&&e.stop(...d))},[g("div",{style:ce([{backgroundColor:e.unref(e.color),boxShadow:`-4px -4px 4px rgba(0, 0, 0, 0.25) inset, 0 0 20px ${e.unref(e.glowColor)}`},(c=e.unref(e.style))!=null?c:[]])},[(C(),j(fe(e.unref(e.comp))))],4),a(o,{mark:e.unref(e.mark)},null,8,["mark"]),a(u,{id:e.id},null,8,["id"])],38)):L("",!0)}var qr=ne(Er,[["render",Br],["__scopeId","data-v-1c0c107d"]]);const Ar=Symbol("TreeNode"),Fr=Symbol("Tree");function Sn(e){return Le(()=>{var l;const t=(l=e==null?void 0:e())!=null?l:{};if(t.id=He("treeNode-"),t.type=Ar,t[Ae]=qr,P(t,"visibility"),le(t,"visibility",I.Visible),P(t,"canClick"),le(t,"canClick",!0),P(t,"color"),P(t,"display"),P(t,"glowColor"),P(t,"classes"),P(t,"style"),P(t,"mark"),t.onClick){const n=t.onClick.bind(t);t.onClick=function(){f(t.canClick)&&n()}}if(t.onHold){const n=t.onHold.bind(t);t.onHold=function(){f(t.canClick)&&n()}}return t[Ve]=function(){const{display:n,visibility:s,style:r,classes:o,onClick:u,onHold:c,color:d,glowColor:y,canClick:w,mark:p,id:b}=this;return{display:n,visibility:s,style:r,classes:o,onClick:u,onHold:c,color:d,glowColor:y,canClick:w,mark:p,id:b}},t})}function Or(e){return Le(()=>{const t=e();return t.id=He("tree-"),t.type=Fr,t[Ae]=Mr,t.isResetting=x(!1),t.resettingNode=lt(null),t.reset=function(l){var s,r;const n=t;n.isResetting.value=!0,n.resettingNode.value=l,(s=n.resetPropagation)==null||s.call(n,n,l),(r=n.onReset)==null||r.call(n,l),n.isResetting.value=!1,n.resettingNode.value=null},t.links=h(()=>{var n;return(n=f(t.branches))!=null?n:[]}),P(t,"visibility"),le(t,"visibility",I.Visible),P(t,"nodes"),P(t,"leftSideNodes"),P(t,"rightSideNodes"),P(t,"branches"),t[Ve]=function(){const{nodes:l,leftSideNodes:n,rightSideNodes:s,branches:r}=this;return{nodes:l,leftSideNodes:n,rightSideNodes:s,branches:r}},t})}const Vr=function(e,t){const l=f(e.nodes),n=l.findIndex(s=>s.includes(t))-1;for(let s=n;s>=0;s--)l[s].forEach(r=>{var o;return(o=r.reset)==null?void 0:o.reset()})};function ft(e,t=null,l=0){const n=bt(l);return h(()=>t==null||i.gte(e.value,f(n))?ct(e)+" "+e.displayName:`Reach ${i.eq(t.precision,0)?ue(f(n)):A(f(n),t.precision)} ${t.displayName} to unlock (You have ${i.eq(t.precision,0)?ue(t.value):A(t.value,t.precision)})`)}const Rr=Symbol("Reset");function Ze(e){return Le(()=>{const t=e();return t.id=He("reset-"),t.type=Rr,t.reset=function(){var n;const l=s=>{s&&typeof s=="object"&&(Zt in s?s[Zt].value=s[rl]:!(s instanceof i)&&!Oe(s)&&Object.values(s).forEach(r=>l(r)))};f(t.thingsToReset).forEach(l),me.emit("reset",t),(n=t.onReset)==null||n.call(t)},P(t,"thingsToReset"),t})}const fl={};me.on("removeLayer",e=>{var t;(t=fl[e.id])==null||t.call(fl),fl[e.id]=void 0});const Lr=z({setup(e){const t=x("0"),l=new ResizeObserver(s),n=x(null);function s(){let r=n.value;if(r==null)return;let o=0;for(;r.previousSibling;){const u=r.previousSibling;u.dataset&&"vSticky"in u.dataset&&(o+=u.offsetHeight),r=u}t.value=o+"px"}return wt(s),document.fonts.ready.then(s),Nl(()=>{var o;const r=(o=n.value)==null?void 0:o.parentElement;r&&l.observe(r)}),(r,o)=>(C(),q("div",{class:"sticky",style:ce({top:t.value}),ref_key:"element",ref:n,"data-v-sticky":""},[Tt(r.$slots,"default",{},void 0,!0)],4))}});var Mn=ne(Lr,[["__scopeId","data-v-21495571"]]);const Gr=z({props:{resource:null,color:null},setup(e){const t=e,l=h(()=>ct(t.resource));return(n,s)=>(C(),q("h2",{style:ce({color:e.color,"text-shadow":"0px 0px 10px "+e.color})},ie(f(l)),5))}});const Ur={class:"main-display"},xr={key:0},jr={key:1},Hr=v(", "),mt=z({props:{resource:null,color:null,classes:null,style:null,effectDisplay:null},setup(e){const l=_e(e),n=x(null),s=Jt(l.effectDisplay),r=h(()=>i.lt(l.resource.value,"1e1000"));return(o,u)=>(C(),j(Mn,null,{default:K(()=>{var c,d;return[g("div",{class:"main-display-container",style:ce({height:`${((d=(c=n.value)==null?void 0:c.$el.clientHeight)!=null?d:0)+50}px`})},[g("div",Ur,[f(r)?(C(),q("span",xr,"You have ")):L("",!0),a(Gr,{resource:e.resource,color:e.color||"white"},null,8,["resource","color"]),v(" "+ie(e.resource.displayName),1),f(s)?(C(),q("span",jr,[Hr,(C(),j(fe(f(s)),{ref_key:"effectRef",ref:n},null,512))])):L("",!0)])],4)]}),_:1}))}});var Wr=z({props:{display:{type:E(Object,String,Function),required:!0},visibility:{type:E(Number),required:!0},style:E(Object,String,Array),classes:E(Object),onClick:Function,onHold:Function,canClick:{type:E(Boolean),required:!0},small:Boolean,mark:E(Boolean,String),id:{type:String,required:!0}},components:{Node:At,MarkNode:ul},setup(e){const{display:t,onClick:l,onHold:n}=_e(e),s=lt("");nt(()=>{const u=ye(t);if(u==null){s.value="";return}if(Ye(u)){s.value=H(u);return}const c=H(u.title||"","h3"),d=H(u.description,"div");s.value=H(B(()=>a("span",null,[u.title?a("div",null,[a(c,null,null)]):null,a(d,null,null)])))});const{start:r,stop:o}=Al(l,n);return{start:r,stop:o,comp:s,Visibility:I,unref:f}}});function zr(e,t,l,n,s,r){var c;const o=Fe("MarkNode"),u=Fe("Node");return e.unref(e.visibility)!==e.Visibility.None?(C(),q("button",{key:0,style:ce([{visibility:e.unref(e.visibility)===e.Visibility.Hidden?"hidden":void 0},(c=e.unref(e.style))!=null?c:[]]),onClick:t[0]||(t[0]=(...d)=>e.onClick&&e.onClick(...d)),onMousedown:t[1]||(t[1]=(...d)=>e.start&&e.start(...d)),onMouseleave:t[2]||(t[2]=(...d)=>e.stop&&e.stop(...d)),onMouseup:t[3]||(t[3]=(...d)=>e.stop&&e.stop(...d)),onTouchstartPassive:t[4]||(t[4]=(...d)=>e.start&&e.start(...d)),onTouchendPassive:t[5]||(t[5]=(...d)=>e.stop&&e.stop(...d)),onTouchcancelPassive:t[6]||(t[6]=(...d)=>e.stop&&e.stop(...d)),class:Ne({feature:!0,clickable:!0,can:e.unref(e.canClick),locked:!e.unref(e.canClick),small:e.small,...e.unref(e.classes)})},[e.unref(e.comp)?(C(),j(fe(e.unref(e.comp)),{key:0})):L("",!0),a(o,{mark:e.unref(e.mark)},null,8,["mark"]),a(u,{id:e.id},null,8,["id"])],38)):L("",!0)}var Ul=ne(Wr,[["render",zr],["__scopeId","data-v-5e7c90cf"]]);const Yr=Symbol("Clickable");function tt(e){return Le(()=>{var l;const t=(l=e==null?void 0:e())!=null?l:{};if(t.id=He("clickable-"),t.type=Yr,t[Ae]=Ul,P(t,"visibility"),le(t,"visibility",I.Visible),P(t,"canClick"),le(t,"canClick",!0),P(t,"classes"),P(t,"style"),P(t,"mark"),P(t,"display"),t.onClick){const n=t.onClick.bind(t);t.onClick=function(s){f(t.canClick)&&n(s)}}if(t.onHold){const n=t.onHold.bind(t);t.onHold=function(){f(t.canClick)&&n()}}return t[Ve]=function(){const{display:n,visibility:s,style:r,classes:o,onClick:u,onHold:c,canClick:d,small:y,mark:w,id:p}=this;return{display:n,visibility:s,style:f(r),classes:o,onClick:u,onHold:c,canClick:d,small:y,mark:w,id:p}},t})}function vt(e){return tt(()=>{const t=e();P(t,"showNextAt"),le(t,"showNextAt",!0),le(t,"minimumGain",1),t.resetDescription==null?t.resetDescription=h(()=>i.lt(t.conversion.gainResource.value,1e3)?"Reset for ":""):P(t,"resetDescription"),t.display==null&&(t.display=B(()=>a("span",null,[f(t.resetDescription),a("b",null,[ct(t.conversion.gainResource,i.max(f(t.conversion.actualGain),f(t.minimumGain)))])," ",t.conversion.gainResource.displayName,Ce(a("div",null,[a("br",null,null),f(t.conversion.buyMax)?"Next:":"Req:"," ",br(t.conversion.baseResource,f(t.conversion.buyMax)||i.floor(f(t.conversion.actualGain)).neq(1)?f(t.conversion.nextAt):f(t.conversion.currentAt))," ",Cl(t.conversion.baseResource)?t.conversion.baseResource.displayName:t.baseResourceName||""]),[[Ee,f(t.showNextAt)]])]))),t.canClick==null&&(t.canClick=h(()=>i.gte(f(t.conversion.actualGain),f(t.minimumGain))));const l=t.onClick;return t.onClick=function(){!f(t.canClick)||(t.conversion.convert(),t.tree.reset(t.treeNode),t.resetTime&&(t.resetTime.value=t.resetTime[rl]),l==null||l())},t})}function Je(e){return Sn(()=>{const t=e();return P(t,"display"),le(t,"display",t.layerID),P(t,"append"),{...t,display:t.display,onClick:f(t.append)?function(){if(O.tabs.includes(t.layerID)){const l=O.tabs.lastIndexOf(t.layerID);O.tabs.splice(l,1)}else O.tabs.push(t.layerID)}:function(){O.tabs.splice(1,1,t.layerID)}}})}var Zr=z({props:{display:{type:E(String,Object,Function),required:!0},visibility:{type:E(Number),required:!0},style:E(String,Object,Array),classes:E(Object),resource:Object,cost:E(String,Object,Number),canPurchase:{type:E(Boolean),required:!0},bought:{type:E(Boolean),required:!0},mark:E(Boolean,String),id:{type:String,required:!0},purchase:{type:Function,required:!0}},components:{Node:At,MarkNode:ul},setup(e){const{display:t,cost:l}=_e(e),n=lt("");return nt(()=>{const s=ye(t);if(s==null){n.value="";return}if(Ye(s)){n.value=H(s);return}const r=ye(l),o=H(s.title||"","h3"),u=H(s.description,"div"),c=H(s.effectDisplay||"");n.value=H(B(()=>{var d;return a("span",null,[s.title?a("div",null,[a(o,null,null)]):null,a(u,null,null),s.effectDisplay?a("div",null,[v("Currently: "),a(c,null,null)]):null,e.resource!=null?a(R,null,[a("br",null,null),v("Cost: "),e.resource&&ct(e.resource,r)," ",(d=e.resource)==null?void 0:d.displayName]):null])}))}),{component:n,unref:f,Visibility:I}}});const Kr=["disabled"];function Jr(e,t,l,n,s,r){var c;const o=Fe("MarkNode"),u=Fe("Node");return e.unref(e.visibility)!==e.Visibility.None?(C(),q("button",{key:0,style:ce([{visibility:e.unref(e.visibility)===e.Visibility.Hidden?"hidden":void 0},(c=e.unref(e.style))!=null?c:{}]),onClick:t[0]||(t[0]=(...d)=>e.purchase&&e.purchase(...d)),class:Ne({feature:!0,upgrade:!0,can:e.unref(e.canPurchase),locked:!e.unref(e.canPurchase),bought:e.unref(e.bought),...e.unref(e.classes)}),disabled:!e.unref(e.canPurchase)},[e.unref(e.component)?(C(),j(fe(e.unref(e.component)),{key:0})):L("",!0),a(o,{mark:e.unref(e.mark)},null,8,["mark"]),a(u,{id:e.id},null,8,["id"])],14,Kr)):L("",!0)}var Xr=ne(Zr,[["render",Jr],["__scopeId","data-v-7742f590"]]);const Qr=Symbol("Upgrade");function Me(e){const t=je(!1);return Le(()=>{const l=e();return l.id=He("upgrade-"),l.type=Qr,l[Ae]=Xr,l.canAfford==null&&(l.resource==null||l.cost==null)&&console.warn("Error: can't create upgrade without a canAfford property or a resource and cost property",l),l.bought=t,l.canAfford==null?l.canAfford=h(()=>{const n=l;return n.resource!=null&&n.cost!=null&&i.gte(n.resource.value,f(n.cost))}):P(l,"canAfford"),l.canPurchase=h(()=>f(l.visibility)===I.Visible&&f(l.canAfford)&&!f(l.bought)),l.purchase=function(){var s;const n=l;!f(n.canPurchase)||(n.resource!=null&&n.cost!=null&&(n.resource.value=i.sub(n.resource.value,f(n.cost))),t.value=!0,(s=n.onPurchase)==null||s.call(n))},P(l,"visibility"),le(l,"visibility",I.Visible),P(l,"classes"),P(l,"style"),P(l,"display"),P(l,"mark"),P(l,"cost"),P(l,"resource"),l[Ve]=function(){const{display:n,visibility:s,style:r,classes:o,resource:u,cost:c,canPurchase:d,bought:y,mark:w,id:p,purchase:b}=this;return{display:n,visibility:s,style:f(r),classes:o,resource:u,cost:c,canPurchase:d,bought:y,mark:w,id:p,purchase:b}},l})}const eo=Symbol("Buyable");function ze(e){const t=je(0);return Le(()=>{var o,u;const l=e();if(l.canPurchase==null&&(l.resource==null||l.cost==null))throw console.warn("Cannot create buyable without a canPurchase property or a resource and cost property",l),"Cannot create buyable without a canPurchase property or a resource and cost property";l.id=He("buyable-"),l.type=eo,l[Ae]=Ul,l.amount=t,l.canAfford=h(()=>{const c=l,d=f(c.cost);return c.resource!=null&&d!=null&&i.gte(c.resource.value,d)}),l.canPurchase==null&&(l.canPurchase=h(()=>f(l.visibility)===I.Visible&&f(l.canAfford)&&i.lt(l.amount.value,f(l.purchaseLimit)))),l.maxed=h(()=>i.gte(l.amount.value,f(l.purchaseLimit))),P(l,"classes");const n=l.classes;l.classes=h(()=>{const c=f(n)||{};return l.maxed.value&&(c.bought=!0),c}),P(l,"canPurchase"),P(l,"keepRes"),l.keepRes===void 0&&(l.keepRes=!1);const s=l.keepRes;l.canClick=l.canPurchase,l.onClick=l.purchase=(u=(o=l.onClick)!=null?o:l.purchase)!=null?u:function(){var y;const c=l;if(!f(c.canPurchase))return;const d=f(c.cost);c.cost!=null&&c.resource!=null&&(f(s)||(c.resource.value=i.sub(c.resource.value,d)),c.amount.value=i.add(c.amount.value,1)),(y=this.onPurchase)==null||y.call(this,d)},P(l,"display");const r=l.display;return l.display=B(()=>{const c=f(r);if(Ye(c)){const d=H(c);return a(d,null,null)}if(c!=null&&l.cost!=null&&l.resource!=null){const d=l,y=H(c.title||"","h3"),w=H(c.description||""),p=H(c.effectDisplay||"");return a("span",null,[c.title?a("div",null,[a(y,null,null)]):null,c.description?a(w,null,null):null,c.showAmount===!1?null:a("div",null,[a("br",null,null),f(d.purchaseLimit)===i.dInf?a(R,null,[v("Amount: "),ue(d.amount.value)]):a(R,null,[v("Amount: "),ue(d.amount.value),v(" /")," ",ue(f(d.purchaseLimit))])]),c.effectDisplay?a("div",null,[a("br",null,null),v("Currently: "),a(p,null,null)]):null,d.cost&&!d.maxed.value?a("div",null,[a("br",null,null),v("Cost: "),A(f(d.cost)||0)," ",l.resource.displayName]):null])}return""}),P(l,"visibility"),le(l,"visibility",I.Visible),P(l,"cost"),P(l,"resource"),P(l,"purchaseLimit"),le(l,"purchaseLimit",i.dInf),P(l,"style"),P(l,"mark"),P(l,"small"),l[Ve]=function(){const{display:c,visibility:d,style:y,classes:w,onClick:p,canClick:b,small:m,mark:N,id:D}=this;return{display:c,visibility:d,style:f(y),classes:w,onClick:p,canClick:b,small:m,mark:N,id:D}},l})}var to=z({props:{visibility:{type:E(Number),required:!0},display:{type:E(String,Object,Function),required:!0},style:E(String,Object,Array),classes:E(Object),earned:{type:E(Boolean),required:!0},id:{type:String,required:!0}},components:{Node:At},setup(e){const{display:t}=_e(e),l=lt("");return nt(()=>{const n=ye(t);if(n==null){l.value="";return}if(Ye(n)){l.value=H(n);return}const s=H(n.requirement,"h3"),r=H(n.effectDisplay||"","b"),o=H(n.optionsDisplay||"","span");l.value=H(B(()=>a("span",null,[a(s,null,null),n.effectDisplay?a("div",null,[a(r,null,null)]):null,n.optionsDisplay?a("div",{class:"equal-spaced"},[a(o,null,null)]):null])))}),{comp:l,unref:f,Visibility:I}}});function lo(e,t,l,n,s,r){var u;const o=Fe("Node");return e.unref(e.visibility)!==e.Visibility.None?(C(),q("div",{key:0,style:ce([{visibility:e.unref(e.visibility)===e.Visibility.Hidden?"hidden":void 0},(u=e.unref(e.style))!=null?u:{}]),class:Ne({feature:!0,milestone:!0,done:e.unref(e.earned),...e.unref(e.classes)})},[(C(),j(fe(e.unref(e.comp)))),a(o,{id:e.id},null,8,["id"])],6)):L("",!0)}var no=ne(to,[["render",lo],["__scopeId","data-v-f4e8794e"]]);me.on("setupVue",e=>e.use(jn));function xl(e="white",t="8px"){return{transform:"scale(1.05, 1.05)",borderColor:"rgba(0, 0, 0, 0.125)",boxShadow:`-4px -4px 4px rgba(0, 0, 0, 0.25) inset, 0 0 ${t} ${e}`,zIndex:1}}function io(){return xl("red","20px")}const so=nn(),ao=Symbol("Milestone");let $t;(function(e){e.All="all",e.Configurable="configurable",e.Incomplete="incomplete",e.None="none"})($t||($t={}));function ro(e){const t=je(!1);return Le(()=>{var s;const l=(s=e==null?void 0:e())!=null?s:{};l.id=He("milestone-"),l.type=ao,l[Ae]=no,l.earned=t,l.complete=function(){t.value=!0},P(l,"visibility"),le(l,"visibility",I.Visible);const n=l.visibility;if(l.visibility=h(()=>{const r=f(l.display);switch(de.msDisplay){default:case $t.All:return f(n);case $t.Configurable:return f(l.earned)&&!(r!=null&&typeof r=="object"&&"optionsDisplay"in r)?I.None:f(n);case $t.Incomplete:return f(l.earned)?I.None:f(n);case $t.None:return I.None}}),P(l,"style"),P(l,"classes"),P(l,"display"),l[Ve]=function(){const{visibility:r,display:o,style:u,classes:c,earned:d,id:y}=this;return{visibility:r,display:o,style:f(u),classes:c,earned:d,id:y}},l.shouldEarn){const r=l;nt(()=>{var o,u;if(de.active===O.id&&!r.earned.value&&f(r.visibility)===I.Visible&&((o=r.shouldEarn)==null?void 0:o.call(r))&&(r.earned.value=!0,(u=r.onComplete)==null||u.call(r),r.display)){const c=f(r.display),d=H(Ye(c)?c:c.requirement);so(a(R,null,[a("h3",null,[v("Milestone earned!")]),a("div",null,[a(d,null,null)])]))}})}return l})}me.on("loadSettings",e=>{le(e,"msDisplay",$t.All)});const oo=Object.values($t).map(e=>({label:un(e),value:e}));pn(B(()=>a(Ll,{title:"Show Milestones",options:oo,"onUpdate:modelValue":e=>de.msDisplay=e,modelValue:de.msDisplay},null)));function Ie(e,t){return P(t,"display"),P(t,"classes"),P(t,"style"),P(t,"direction"),le(t,"direction",X.Up),P(t,"xoffset"),P(t,"yoffset"),t.pinnable&&("pinned"in e?(console.error("Cannot add pinnable tooltip to element that already has a property called 'pinned'"),t.pinnable=!1):e.pinned=t.pinned=je(!1)),wt(()=>{const l=e[Ae];e[Ae]=Te;const n=e[Ve].bind(e);e[Ve]=function(){const{display:r,classes:o,style:u,direction:c,xoffset:d,yoffset:y,pinned:w}=this;return{element:{[Ae]:l,[Ve]:n},display:r,classes:o,style:f(u),direction:c,xoffset:d,yoffset:y,pinned:w}}.bind(t)}),t}const uo=z({props:{visibility:{type:E(Number),required:!0},onClick:Function,onHold:Function,display:{type:E(Object,String,Function),required:!0},title:E(Object,String,Function),style:E(String,Object,Array),canClick:{type:E(Boolean),required:!0},id:{type:String,required:!0}},components:{Node:At},setup(e){const{onClick:t,onHold:l,title:n,display:s}=_e(e),{start:r,stop:o}=Al(t,l),u=Jt(n),c=Yt(s);return{start:r,stop:o,titleComponent:u,component:c,Visibility:I,unref:f}}}),co={key:0};function fo(e,t,l,n,s,r){var u;const o=Fe("Node");return e.unref(e.visibility)!==e.Visibility.None?(C(),q("button",{key:0,class:Ne({feature:!0,tile:!0,can:e.unref(e.canClick),locked:!e.unref(e.canClick)}),style:ce([{visibility:e.unref(e.visibility)===e.Visibility.Hidden?"hidden":void 0},(u=e.unref(e.style))!=null?u:{}]),onClick:t[0]||(t[0]=(...c)=>e.onClick&&e.onClick(...c)),onMousedown:t[1]||(t[1]=(...c)=>e.start&&e.start(...c)),onMouseleave:t[2]||(t[2]=(...c)=>e.stop&&e.stop(...c)),onMouseup:t[3]||(t[3]=(...c)=>e.stop&&e.stop(...c)),onTouchstartPassive:t[4]||(t[4]=(...c)=>e.start&&e.start(...c)),onTouchendPassive:t[5]||(t[5]=(...c)=>e.stop&&e.stop(...c)),onTouchcancelPassive:t[6]||(t[6]=(...c)=>e.stop&&e.stop(...c))},[e.title?(C(),q("div",co,[(C(),j(fe(e.titleComponent)))])):L("",!0),(C(),j(fe(e.component),{style:{"white-space":"pre-line"}})),a(o,{id:e.id},null,8,["id"])],38)):L("",!0)}var mo=ne(uo,[["render",fo],["__scopeId","data-v-26ac0e82"]]);const vo=z({props:{visibility:{type:E(Number),required:!0},rows:{type:E(Number),required:!0},cols:{type:E(Number),required:!0},cells:{type:E(Object),required:!0}},components:{GridCell:mo},setup(){const e=h(()=>Kt[de.theme].mergeAdjacent);function t(l){const{visibility:n,onClick:s,onHold:r,display:o,title:u,style:c,canClick:d,id:y}=l;return{visibility:n,onClick:s,onHold:r,display:o,title:u,style:c,canClick:d,id:y}}return{unref:f,gatherCellProps:t,Visibility:I,mergeAdjacent:e}}});function po(e,t,l,n,s,r){const o=Fe("GridCell");return e.unref(e.visibility)!==e.Visibility.None?(C(),q("div",{key:0,style:ce({visibility:e.unref(e.visibility)===e.Visibility.Hidden?"hidden":void 0}),class:"table"},[(C(!0),q(R,null,il(e.unref(e.rows),u=>(C(),q("div",{class:Ne(["row",{mergeAdjacent:e.mergeAdjacent}]),key:u},[(C(!0),q(R,null,il(e.unref(e.cols),c=>(C(),j(o,Nt({key:c},e.gatherCellProps(e.unref(e.cells)[u*100+c])),null,16))),128))],2))),128))],4)):L("",!0)}var go=ne(vo,[["render",po]]);function ho(e){return new Proxy({},yo(e))}function yo(e){const t=h(()=>{const l=[];for(let n=1;n<=f(e.rows);n++)for(let s=1;s<=f(e.cols);s++)l.push((n*100+s).toString());return l});return{get(l,n){if(n==="isProxy")return!0;if(typeof n=="symbol")return e[n];if(!!t.value.includes(n.toString()))return l[n]==null&&(l[n]=new Proxy(e,bo(n.toString()))),l[n]},set(l,n,s){return console.warn("Cannot set grid cells",l,n,s),!1},ownKeys(){return t.value},has(l,n){return t.value.includes(n.toString())},getOwnPropertyDescriptor(l,n){if(t.value.includes(n.toString()))return{configurable:!0,enumerable:!0,writable:!1}}}}function bo(e){const t=["id","visibility","canClick","startState","state","style","classes","title","display","onClick","onHold"],l={};return{get(n,s,r){if(s==="isProxy")return!0;let o=n[s];return Vt(o)?()=>o.call(r,e,n.getState(e)):o!=null||typeof s=="symbol"?o:(s=s.slice(0,1).toUpperCase()+s.slice(1),s==="startState"?o.call(r,e):(o=n[`get${s}`],Vt(o)?(s in l||(l[s]=h(()=>o.call(r,e,n.getState(e)))),l[s].value):o!=null?f(o):(o=n[`on${s}`],Vt(o)?()=>o.call(r,e,n.getState(e)):o!=null?o:n[s])))},set(n,s,r,o){return s=`set${s.slice(0,1).toUpperCase()+s.slice(1)}`,s in n&&Vt(n[s])&&n[s].length<3?(n[s].call(o,e,r),!0):(console.warn(`No setter for "${s}".`,n),!1)},ownKeys(){return t},has(n,s){return t.includes(s.toString())},getOwnPropertyDescriptor(n,s){if(t.includes(s.toString()))return{configurable:!0,enumerable:!0,writable:!1}}}}function wo(e){const t=je({});return Le(()=>{const l=e();if(l.id=He("grid-"),l[Ae]=go,l.cellState=t,l.getID=function(n){return l.id+"-"+n},l.getState=function(n){return this.cellState.value[n]!=null?t.value[n]:this.cells[n].startState},l.setState=function(n,s){t.value[n]=s},l.cells=ho(l),P(l,"visibility"),le(l,"visibility",I.Visible),P(l,"rows"),P(l,"cols"),P(l,"getVisibility"),le(l,"getVisibility",I.Visible),P(l,"getCanClick"),le(l,"getCanClick",!0),P(l,"getStartState"),P(l,"getStyle"),P(l,"getClasses"),P(l,"getTitle"),P(l,"getDisplay"),l.onClick){const n=l.onClick.bind(l);l.onClick=function(s,r){f(l.cells[s].canClick)&&n(s,r)}}if(l.onHold){const n=l.onHold.bind(l);l.onHold=function(s,r){f(l.cells[s].canClick)&&n(s,r)}}return l[Ve]=function(){const{visibility:n,rows:s,cols:r,cells:o,id:u}=this;return{visibility:n,rows:s,cols:r,cells:o,id:u}},l})}function ge(e,t,l){const n=bt(e),s=bt(t),r=l==null?void 0:bt(l);return{apply:o=>i.times(o,f(n)),revert:o=>i.div(o,f(n)),enabled:r,description:t==null?void 0:B(()=>a("div",{class:"modifier-container"},[a("span",{class:"modifier-amount"},[v("x"),A(f(n))]),f(s)?a("span",{class:"modifier-description"},[gt(f(s))]):null]))}}function jl(e,t,l){const n=bt(e),s=bt(t),r=l==null?void 0:bt(l);return{apply:o=>i.pow(o,f(n)),revert:o=>i.root(o,f(n)),enabled:r,description:t==null?void 0:B(()=>a("div",{class:"modifier-container"},[a("span",{class:"modifier-amount"},[v("^"),A(f(n))]),f(s)?a("span",{class:"modifier-description"},[gt(f(s))]):null]))}}function St(...e){return{apply:t=>e.filter(l=>f(l.enabled)!==!1).reduce((l,n)=>n.apply(l),t),revert:e.every(t=>t.revert!=null)?t=>e.filter(l=>f(l.enabled)!==!1).reduceRight((l,n)=>n.revert(l),t):void 0,enabled:h(()=>e.filter(t=>f(t.enabled)!==!1).length>0),description:B(()=>a(R,null,[e.filter(t=>f(t.enabled)!==!1).map(t=>f(t.description)).filter(t=>t).map(gt)]))}}function Mt(e,t,l,n=1,s="",r="Base"){return a("div",null,[a("h3",null,[e,t?a("span",{class:"subtitle"},[v(" ("),t,v(")")]):null]),a("br",null,null),a("div",{class:"modifier-container"},[a("span",{class:"modifier-amount"},[A(n),s]),a("span",{class:"modifier-description"},[gt(r)])]),gt(f(l.description)),a("hr",null,null),v("Total: "),A(l.apply(n)),s])}function No(e,t,l){return{currentGain(n){const s=i.div(n.baseResource.value,f(e)).log(f(t)).root(f(l));return s.isNan()?new i(0):s},currentAt(n){let s=f(n.currentGain);return n.gainModifier&&(s=n.gainModifier.revert(s)),s=i.max(0,s),i.pow(f(t),i.pow(s,f(l))).times(f(e))},nextAt(n){let s=i.add(f(n.currentGain),1);return n.gainModifier&&(s=n.gainModifier.revert(s)),s=i.max(0,s),i.pow(f(t),i.pow(s,f(l))).times(f(e)).max(f(t))}}}const _o=function(e,t){const l=[t];let n=[t];if(e.branches!=null){const s=f(e.branches);for(;n.length>0;){const r=[];n.forEach(o=>{s.filter(u=>u.startNode===o).map(u=>u.endNode).filter(u=>!l.includes(u)).forEach(u=>{var c;r.includes(u)||(r.push(u),(c=u.reset)==null||c.reset())})}),n=r,l.push(...n)}}};function ko(e,t){var s,r,o,u,c,d;if(t===void 0)return!1;if(e===void 0)return!0;const l=e.split("."),n=t.split(".");return parseInt((s=l[0])!=null?s:"0")>parseInt((r=n[0])!=null?r:"0")||parseInt((o=l[1])!=null?o:"0")>parseInt((u=n[1])!=null?u:"0")||parseInt((c=l[2])!=null?c:"0")>parseInt((d=n[2])!=null?d:"0")}function el(e){return Co(e)}function Co(e){const t={};return Object.keys(e).forEach(l=>{t[l]={bought:e[l]}}),t}const So=Sn(()=>({visibility:I.Hidden})),Ue=Ge("ai",()=>{const e="ai",t="Air",l="#ffd1fb",n=Q(0,"Air Particles"),s=Q(0,"Wind Force"),r=h(()=>{let S=i.gte(n.value,1)?n.value:0;return Pe.upgrades[1].bought.value&&(S=i.mul(S,Pe.upgradeEffects[0].value)),S}),o=h(()=>{let S=i.add(s.value,1);return S.gte(10)&&(S=i.pow(10,S.log10().sqrt())),S}),u=Q(0,"Zephyr Force"),c=h(()=>{let S=i.gte(n.value,3)?i.div(s.value,k.milestones[28].earned.value?1:10):0;return Pe.upgrades[1].bought.value&&(S=i.mul(S,Pe.upgradeEffects[0].value)),S}),d=h(()=>i.add(u.value,1).log2()),y=Q(0,"Tornado Force"),w=h(()=>{let S=i.gte(n.value,5)?i.div(u.value,k.milestones[28].earned.value?1:10):0;return Pe.upgrades[1].bought.value&&(S=i.mul(S,Pe.upgradeEffects[0].value)),S}),p=h(()=>i.add(y.value,1).log10().plus(1).log(3).plus(1).sqrt());me.on("update",S=>{k.milestones[14].earned.value?(s.value=i.mul(i.pow(10,i.sqrt(r.value)),S).plus(i.pow(10,s.value)).log10(),u.value=i.mul(i.pow(10,i.sqrt(c.value)),S).plus(i.pow(10,u.value)).log10(),y.value=i.mul(i.pow(10,i.sqrt(w.value)),S).plus(i.pow(10,y.value)).log10()):(s.value=i.mul(r.value,S).plus(i.pow(10,s.value)).log10(),u.value=i.mul(c.value,S).plus(i.pow(10,u.value)).log10(),y.value=i.mul(w.value,S).plus(i.pow(10,y.value)).log10()),k.milestones[21].earned.value&&(n.value=i.mul(N.currentGain.value,S).plus(n.value))});const b=h(()=>Se.voidDecayed.value?1:1e4),m=h(()=>Se.voidDecayed.value?4/7:4),N=qt(()=>({scaling:{currentGain:S=>i.lt(S.baseResource.value,b.value)?0:k.milestones[10].earned.value?i.div(S.baseResource.value,b.value).root(m.value).times(3).sub(2).floor():i.div(S.baseResource.value,b.value/2).log(Se.voidDecayed.value?1.5:2).root(1.4).floor().sub(S.gainResource.value),currentAt:S=>{if(k.milestones[10].earned.value){let G=f(S.currentGain);return N.gainModifier&&(G=N.gainModifier.revert(G)),i.div(G,3).plus(2/3).pow(m.value).times(b.value)}else return i.pow(Se.voidDecayed.value?1.5:2,i.add(S.gainResource.value,1).pow(1.4)).times(b.value/2)},nextAt:S=>{if(k.milestones[10].earned.value){let G=i.add(f(S.currentGain),1);return N.gainModifier&&(G=N.gainModifier.revert(G)),i.div(G,3).plus(2/3).pow(m.value).times(b.value)}else return i.pow(Se.voidDecayed.value?1.5:2,i.add(S.gainResource.value,1).pow(1.4)).times(b.value/2)}},baseResource:Se.life,gainResource:n,buyMax:()=>k.milestones[10].earned.value,roundUpCost:!0,gainModifier:St(ge(se.mainEff,"Particle Combinator Effect",k.milestones[15].earned),ge(100,"Void-Decayed Life",Se.voidDecayed))})),D=Ze(()=>({thingsToReset:()=>[Ue]})),M=Je(()=>({visibility:()=>k.milestones[6].earned.value?I.Visible:I.Hidden,layerID:e,display:B(()=>a("img",{src:"./nodes/air.png"},null)),color:l,reset:D}));Ie(M,{display:ft(n),pinnable:!0,style:()=>M.visibility.value===I.Visible?"":"display: none"});const $=vt(()=>({conversion:N,tree:re.tree,treeNode:M}));return Ie($,{display:B(()=>Mt("Modifiers","",N.gainModifier,N.scaling.currentGain(N))),pinnable:!0,direction:X.Down,style:"width: 400px; text-align: left"}),{id:e,name:t,color:l,air:n,wind:s,windEff:o,zephyr:u,zephyrEff:d,tornado:y,tornadoEff:p,display:B(()=>{const S=i.gt(r.value,0)?a("span",null,[v("Wind: "),A(s.value,2),v(", Wind Speed: "),A(r.value,2),v("x"),a("br",null,null),v("Multiplies Life Particle gain by "),A(o.value,2),v("."),a("br",null,null),a("br",null,null)]):"",G=i.gt(c.value,0)?a("span",null,[v("Zephyr: "),A(u.value,2),v(", Zephyr Speed: "),A(c.value,2),v("x"),a("br",null,null),v("Adds "),A(d.value,2),v(" levels to all Life Buyables."),a("br",null,null),a("br",null,null)]):"",V=i.gt(w.value,0)?a("span",null,[v("Tornado: "),A(y.value,2),v(", Tornado Speed:")," ",A(w.value,2),v("x"),a("br",null,null),v("Raise Base Particle gain ^"),A(p.value,2),a("br",null,null),a("br",null,null)]):"";return a(R,null,[a(mt,{resource:n,color:l},null),U($),a("br",null,null),a("br",null,null),S,a("br",null,null),G,a("br",null,null),V,a("br",null,null)])}),treeNode:M}}),Pe=Ge("sound",()=>{const e="sound",t="Sound",l="#ddcfff",n=Q(0,"Sound Particles"),s=dt(n),r=kl(()=>({scaling:Bt(()=>1e7,1/3),baseResource:Ue.air,gainResource:n,gainModifier:St(ge(k.adv48eff,"Advancement 48",k.milestones[47].earned))})),o=Ze(()=>({thingsToReset:()=>[Pe]})),u=Je(()=>({visibility:()=>k.milestones[32].earned.value?I.Visible:I.Hidden,layerID:e,display:B(()=>a("img",{src:"./nodes/sound.png"},null)),color:l,reset:o}));Ie(u,{display:ft(n),pinnable:!0,style:()=>u.visibility.value===I.Visible?"":"display: none"});const c=vt(()=>({conversion:r,tree:re.tree,treeNode:u}));Ie(c,{display:B(()=>Mt("Modifiers","",r.gainModifier,r.scaling.currentGain(r))),pinnable:!0,direction:X.Down,style:"width: 400px; text-align: left"});const d=Q(0,"Ultrasound"),y=h(()=>{let N=i.dOne;i.gte(Re.lights[3].buyables[1].amount.value,1)&&(N=N.times(Re.lightBuyableEffects[3][1].value)),b[3].bought.value&&(N=N.times(w[3].value)),k.milestones[37].earned.value&&(N=N.times(2));for(let D=0;D<6;D++)m[D].bought.value&&(N=N.times(D==2?w[D].value.plus(1):w[D].value));return N}),w=[h(()=>i.add(d.value,1).log10().plus(1).log10().plus(1).times(m[0].bought.value?p[0].value:1)),h(()=>i.add(d.value,1).log10().plus(1).sqrt().times(m[1].bought.value?p[1].value:1)),h(()=>{let N=i.add(d.value,1).times(m[2].bought.value?p[2].value:1).log10().div(20);return N.gte(.5)&&(N=N.plus(.5).log10().plus(.5)),N}),h(()=>i.add(d.value,1).log10().plus(1).sqrt().times(m[3].bought.value?p[3].value:1)),h(()=>i.add(d.value,1).log10().plus(1).times(m[4].bought.value?p[4].value:1)),h(()=>i.div(d.value,100).plus(1).times(m[5].bought.value?p[5].value:1))],p=[h(()=>i.add(n.value,1).log10().plus(1).log10().plus(1).root(1.5)),h(()=>i.add(n.value,1).log10().plus(1).cbrt()),h(()=>i.add(n.value,1).sqrt()),h(()=>i.add(n.value,1).log10().plus(1).cbrt()),h(()=>i.add(n.value,1).log10().plus(1).root(1.5)),h(()=>i.div(n.value,100).plus(1).log10().plus(1))],b=[Me(()=>({display:()=>({title:"Pitch",description:"Ultrasound boosts the gain speed of all Light Energy colors at a very reduced rate.",effectDisplay:W(w[0].value)+"x"}),cost:100,resource:d})),Me(()=>({display:()=>({title:"Duration",description:"Ultrasound boosts Wind/Zephyr/Tornado speeds at a reduced rate.",effectDisplay:W(w[1].value)+"x"}),cost:1e3,resource:d})),Me(()=>({display:()=>({title:"Volume",description:"Ultrasound boosts Life Buyable Power at a reduced rate.",effectDisplay:"+"+W(i.mul(w[2].value,100))+"%"}),cost:2500,resource:d})),Me(()=>({display:()=>({title:"Timbre",description:"Ultrasound boosts its own gain at a reduced rate.",effectDisplay:W(w[3].value)+"x"}),cost:1e4,resource:d})),Me(()=>({display:()=>({title:"Texture",description:"Ultrasound boosts Flame Particle gain at a reduced rate.",effectDisplay:W(w[4].value)+"x"}),cost:1e5,resource:d})),Me(()=>({display:()=>({title:"Location",description:"Ultrasound boosts Aqua bar speed.",effectDisplay:W(w[5].value)+"x"}),cost:4e5,resource:d}))],m=[Me(()=>({display:()=>({title:"Pitch II",description:"Sound Particles boost the above upgrade's effect, which now also boosts Ultrasound gain.",effectDisplay:W(p[0].value)+"x"}),cost:1e6,resource:d})),Me(()=>({display:()=>({title:"Duration II",description:"Sound Particles boost the above upgrade's effect, which now also boosts Ultrasound gain.",effectDisplay:W(p[1].value)+"x"}),cost:5e6,resource:d})),Me(()=>({display:()=>({title:"Volume II",description:"Sound Particles boost effective Ultrasound in the above upgrade, which now also boosts Ultrasound gain.",effectDisplay:W(p[2].value)+"x"}),cost:4e7,resource:d})),Me(()=>({display:()=>({title:"Timbre II",description:"Sound Particles boost the above upgrade's effect, which now also boosts Ultrasound gain.",effectDisplay:W(p[3].value)+"x"}),cost:6e8,resource:d})),Me(()=>({display:()=>({title:"Texture II",description:"Sound Particles boost the above upgrade's effect, which now also boosts Ultrasound gain.",effectDisplay:W(p[4].value)+"x"}),cost:1e10,resource:d})),Me(()=>({display:()=>({title:"Location II",description:"Sound Particles boost the above upgrade's effect, which now also boosts Ultrasound gain.",effectDisplay:W(p[5].value)+"x"}),cost:1e12,resource:d}))];return me.on("update",N=>{d.value=i.add(d.value,i.mul(n.value,N).times(y.value))}),{id:e,name:t,color:l,sound:n,best:s,ultrasound:d,upgrades:b,upgradeEffects:w,row2upgrades:m,row2upgradeEffects:p,display:B(()=>a(R,null,[a(mt,{resource:n,color:l},null),U(c),a("br",null,null),v("There is "),W(d.value),v(" Ultrasound (generated by Sound Particles)"),a("br",null,null),a("br",null,null),b.map(U),a("br",null,null),k.milestones[49].earned.value?m.map(U):[]])),treeNode:u}}),Mo=z({props:{display:null},setup(e){const t=e,{display:l}=_e(t),n=Yt(l);return(s,r)=>(C(),j(fe(f(n))))}}),Po=Symbol("Tab");function Dl(e){return Le(()=>{const t=e();return t.id=He("tab-"),t.type=Po,t[Ae]=Mo,t[Ve]=function(){const{display:l}=this;return{display:l}},t})}const Io=z({props:{visibility:{type:E(Number),required:!0},display:{type:E(Object,String,Function),required:!0},style:E(String,Object,Array),classes:E(Object),glowColor:E(String),active:Boolean,floating:Boolean},emits:["selectTab"],setup(e,{emit:t}){const{display:l,glowColor:n,floating:s}=_e(e),r=Yt(l),o=h(()=>{const c=ye(n);return c?f(s)?xl(c):{boxShadow:`0px 9px 5px -6px ${c}`}:{}});function u(){t("selectTab")}return{selectTab:u,component:r,glowColorStyle:o,unref:f,Visibility:I}}});function $o(e,t,l,n,s,r){var o;return e.unref(e.visibility)!==e.Visibility.None?(C(),q("button",{key:0,onClick:t[0]||(t[0]=(...u)=>e.selectTab&&e.selectTab(...u)),class:Ne(["tabButton",{active:e.active,...e.unref(e.classes)}]),style:ce([{visibility:e.unref(e.visibility)===e.Visibility.Hidden?"hidden":void 0},e.glowColorStyle,(o=e.unref(e.style))!=null?o:{}])},[(C(),j(fe(e.component)))],6)):L("",!0)}var Pn=ne(Io,[["render",$o],["__scopeId","data-v-610a2549"]]);const To=z({props:{visibility:{type:E(Number),required:!0},activeTab:{type:E(Object),required:!0},selected:{type:Object,required:!0},tabs:{type:E(Object),required:!0},style:E(String,Object,Array),classes:E(Object),buttonContainerStyle:E(String,Object,Array),buttonContainerClasses:E(Object)},components:{Sticky:Mn,TabButton:Pn},setup(e){const{activeTab:t}=_e(e),l=h(()=>Kt[de.theme].floatingTabs),n=lt("");nt(()=>{const u=ye(t);if(u==null){n.value="";return}if(Ye(u)){n.value=H(u);return}n.value=H(f(u.display))});const s=h(()=>{const u=ye(t);return Ye(u)||!u?void 0:f(u.classes)}),r=h(()=>{const u=ye(t);return Ye(u)||!u?void 0:f(u.style)});function o(u){const{display:c,style:d,classes:y,glowColor:w,visibility:p}=u;return{display:c,style:f(d),classes:y,glowColor:w,visibility:p}}return{floating:l,tabClasses:s,tabStyle:r,Visibility:I,component:n,gatherButtonProps:o,unref:f}}});function Do(e,t,l,n,s,r){var c,d;const o=Fe("TabButton"),u=Fe("Sticky");return e.unref(e.visibility)!==e.Visibility.None?(C(),q("div",{key:0,class:Ne(["tab-family-container",{...e.unref(e.classes),...e.tabClasses}]),style:ce([{visibility:e.unref(e.visibility)===e.Visibility.Hidden?"hidden":void 0},(c=e.unref(e.style))!=null?c:[],(d=e.tabStyle)!=null?d:[]])},[a(u,{class:Ne(["tab-buttons-container",e.unref(e.buttonContainerClasses)]),style:ce(e.unref(e.buttonContainerStyle))},{default:K(()=>[g("div",{class:Ne(["tab-buttons",{floating:e.floating}])},[(C(!0),q(R,null,il(e.unref(e.tabs),(y,w)=>(C(),j(o,Nt({onSelectTab:p=>e.selected.value=w,floating:e.floating,key:w,active:e.unref(y.tab)===e.unref(e.activeTab)},e.gatherButtonProps(y)),null,16,["onSelectTab","floating","active"]))),128))],2)]),_:1},8,["class","style"]),e.unref(e.activeTab)?(C(),j(fe(e.unref(e.component)),{key:0})):L("",!0)],6)):L("",!0)}var Eo=ne(To,[["render",Do],["__scopeId","data-v-11575f45"]]);const Bo=Symbol("TabButton"),qo=Symbol("TabFamily");function In(e,t){if(Object.keys(e).length===0)throw console.warn("Cannot create tab family with 0 tabs"),"Cannot create tab family with 0 tabs";const l=je(Object.keys(e)[0]);return Le(()=>{var r;const n=(r=t==null?void 0:t())!=null?r:{};n.id=He("tabFamily-"),n.type=qo,n[Ae]=Eo,n.tabs=Object.keys(e).reduce((o,u)=>{const c=e[u]();return c.type=Bo,c[Ae]=Pn,P(c,"visibility"),le(c,"visibility",I.Visible),P(c,"tab"),P(c,"display"),P(c,"classes"),P(c,"style"),P(c,"glowColor"),o[u]=c,o},{}),n.selected=l,n.activeTab=h(()=>{const o=f(s.tabs);if(l.value in o&&f(o[l.value].visibility)===I.Visible)return f(o[l.value].tab);const u=Object.values(o).find(c=>f(c.visibility)===I.Visible);return u?f(u.tab):null}),P(n,"visibility"),le(n,"visibility",I.Visible),P(n,"classes"),P(n,"style"),P(n,"buttonContainerClasses"),P(n,"buttonContainerStyle"),n[Ve]=function(){const{visibility:o,activeTab:u,selected:c,tabs:d,style:y,classes:w,buttonContainerClasses:p,buttonContainerStyle:b}=this;return{visibility:o,activeTab:u,selected:c,tabs:d,style:f(y),classes:w,buttonContainerClasses:p,buttonContainerStyle:b}};const s=n;return s})}var Ao=z({props:{active:{type:E(Boolean),required:!0},maxed:{type:E(Boolean),required:!0},canComplete:{type:E(Boolean),required:!0},display:E(String,Object,Function),visibility:{type:E(Number),required:!0},style:E(String,Object,Array),classes:E(Object),completed:{type:E(Boolean),required:!0},canStart:{type:E(Boolean),required:!0},mark:E(Boolean,String),id:{type:String,required:!0},toggle:{type:Function,required:!0}},components:{MarkNode:ul,Node:At},setup(e){const{active:t,maxed:l,canComplete:n,display:s}=_e(e),r=h(()=>t.value?n.value?"Finish":"Exit Early":l.value?"Completed":"Start"),o=lt(""),u=h(()=>{const c=ye(t),d=ye(n);return c?d?io():xl():{}});return nt(()=>{const c=ye(s);if(c==null){o.value="";return}if(Ye(c)){o.value=H(c);return}const d=H(c.title||"","h3"),y=H(c.description,"div"),w=H(c.goal||""),p=H(c.reward||""),b=H(c.effectDisplay||"");o.value=H(B(()=>a("span",null,[c.title?a("div",null,[a(d,null,null)]):null,a(y,null,null),c.goal?a("div",null,[a("br",null,null),v("Goal: "),a(w,null,null)]):null,c.reward?a("div",null,[a("br",null,null),v("Reward: "),a(p,null,null)]):null,c.effectDisplay?a("div",null,[v("Currently: "),a(b,null,null)]):null])))}),{buttonText:r,notifyStyle:u,comp:o,Visibility:I,unref:f}}});const Fo=["disabled"];function Oo(e,t,l,n,s,r){var c;const o=Fe("MarkNode"),u=Fe("Node");return e.unref(e.visibility)!==e.Visibility.None?(C(),q("div",{key:0,style:ce([{visibility:e.unref(e.visibility)===e.Visibility.Hidden?"hidden":void 0},e.notifyStyle,(c=e.unref(e.style))!=null?c:{}]),class:Ne({feature:!0,challenge:!0,done:e.unref(e.completed),canStart:e.unref(e.canStart)&&!e.unref(e.maxed),maxed:e.unref(e.maxed),...e.unref(e.classes)})},[g("button",{class:"toggleChallenge",onClick:t[0]||(t[0]=(...d)=>e.toggle&&e.toggle(...d)),disabled:!e.unref(e.canStart)||e.unref(e.maxed)},ie(e.buttonText),9,Fo),e.unref(e.comp)?(C(),j(fe(e.unref(e.comp)),{key:0})):L("",!0),a(o,{mark:e.unref(e.mark)},null,8,["mark"]),a(u,{id:e.id},null,8,["id"])],6)):L("",!0)}var Vo=ne(Ao,[["render",Oo],["__scopeId","data-v-4d2947df"]]);const Ro=Symbol("ChallengeType");function Il(e){const t=je(0),l=je(!1);return Le(()=>{const n=e();if(n.canComplete==null&&(n.resource==null||n.goal==null))throw console.warn("Cannot create challenge without a canComplete property or a resource and goal property",n),"Cannot create challenge without a canComplete property or a resource and goal property";n.id=He("challenge-"),n.type=Ro,n[Ae]=Vo,n.completions=t,n.active=l,n.completed=h(()=>i.gt(n.completions.value,0)),n.maxed=h(()=>i.gte(n.completions.value,f(n.completionLimit))),n.toggle=function(){var o,u,c,d,y;const r=n;if(r.active.value){if(f(r.canComplete)&&!r.maxed.value){let w=f(r.canComplete);typeof w=="boolean"&&(w=1),r.completions.value=i.min(i.add(r.completions.value,w),f(r.completionLimit)),(o=r.onComplete)==null||o.call(r)}r.active.value=!1,(u=r.onExit)==null||u.call(r),(c=r.reset)==null||c.reset()}else f(r.canStart)&&f(r.visibility)===I.Visible&&!r.maxed.value&&((d=r.reset)==null||d.reset(),r.active.value=!0,(y=r.onEnter)==null||y.call(r))},n.complete=function(r){var c,d,y;const o=n;let u=f(o.canComplete);o.active.value&&u!==!1&&(u===!0||i.neq(0,u))&&!o.maxed.value&&(typeof u=="boolean"&&(u=1),o.completions.value=i.min(i.add(o.completions.value,u),f(o.completionLimit)),(c=o.onComplete)==null||c.call(o),r!==!0&&(o.active.value=!1,(d=o.onExit)==null||d.call(o),(y=o.reset)==null||y.reset()))},P(n,"visibility"),le(n,"visibility",I.Visible);const s=n.visibility;return n.visibility=h(()=>de.hideChallenges===!0&&f(n.maxed)?I.None:f(s)),n.canComplete==null&&(n.canComplete=h(()=>{const r=n;return!r.active.value||r.resource==null||r.goal==null?!1:i.gte(r.resource.value,f(r.goal))})),n.mark==null&&(n.mark=h(()=>i.gt(f(n.completionLimit),1)&&!!f(n.maxed))),P(n,"canStart"),le(n,"canStart",!0),P(n,"canComplete"),P(n,"completionLimit"),le(n,"completionLimit",1),P(n,"mark"),P(n,"goal"),P(n,"classes"),P(n,"style"),P(n,"display"),n.reset!=null&&me.on("reset",r=>{r===n.reset&&n.active.value&&n.toggle()}),n[Ve]=function(){const{active:r,maxed:o,canComplete:u,display:c,visibility:d,style:y,classes:w,completed:p,canStart:b,mark:m,id:N,toggle:D}=this;return{active:r,maxed:o,canComplete:u,display:c,visibility:d,style:f(y),classes:w,completed:p,canStart:b,mark:m,id:N,toggle:D}},n})}me.on("loadSettings",e=>{le(e,"hideChallenges",!1)});pn(B(()=>a(yt,{title:"Hide Maxed Challenges","onUpdate:modelValue":e=>de.hideChallenges=e,modelValue:de.hideChallenges},null)));const Lo=z({props:{progress:{type:E(String,Object,Number),required:!0},width:{type:E(Number),required:!0},height:{type:E(Number),required:!0},direction:{type:E(String),required:!0},display:E(Object,String,Function),visibility:{type:E(Number),required:!0},style:E(Object,String,Array),classes:E(Object),borderStyle:E(Object,String,Array),textStyle:E(Object,String,Array),baseStyle:E(Object,String,Array),fillStyle:E(Object,String,Array),mark:E(Boolean,String),id:{type:String,required:!0}},components:{MarkNode:ul,Node:At},setup(e){const{progress:t,width:l,height:n,direction:s,display:r}=_e(e),o=h(()=>{let d=t.value instanceof i?t.value.toNumber():Number(t.value);return(1-Math.min(Math.max(d,0),1))*100}),u=h(()=>{const d={width:ye(l)+.5+"px",height:ye(n)+.5+"px"};switch(f(s)){case X.Up:d.clipPath=`inset(${o.value}% 0% 0% 0%)`,d.width=ye(l)+1+"px";break;case X.Down:d.clipPath=`inset(0% 0% ${o.value}% 0%)`,d.width=ye(l)+1+"px";break;case X.Right:d.clipPath=`inset(0% ${o.value}% 0% 0%)`;break;case X.Left:d.clipPath=`inset(0% 0% 0% ${o.value} + '%)`;break;case X.Default:d.clipPath="inset(0% 50% 0% 0%)";break}return d}),c=Jt(r);return{normalizedProgress:o,barStyle:u,component:c,unref:f,Visibility:I}}});function Go(e,t,l,n,s,r){var c,d,y,w,p,b,m;const o=Fe("MarkNode"),u=Fe("Node");return e.unref(e.visibility)!==e.Visibility.None?(C(),q("div",{key:0,style:ce([{width:e.unref(e.width)+"px",height:e.unref(e.height)+"px",visibility:e.unref(e.visibility)===e.Visibility.Hidden?"hidden":void 0},(c=e.unref(e.style))!=null?c:{}]),class:Ne({bar:!0,...e.unref(e.classes)})},[g("div",{class:"overlayTextContainer border",style:ce([{width:e.unref(e.width)+"px",height:e.unref(e.height)+"px"},(d=e.unref(e.borderStyle))!=null?d:{}])},[e.component?(C(),q("span",{key:0,class:"overlayText",style:ce(e.unref(e.textStyle))},[(C(),j(fe(e.component)))],4)):L("",!0)],4),g("div",{class:"border",style:ce([{width:e.unref(e.width)+"px",height:e.unref(e.height)+"px"},(y=e.unref(e.style))!=null?y:{},(w=e.unref(e.baseStyle))!=null?w:{},(p=e.unref(e.borderStyle))!=null?p:{}])},[g("div",{class:"fill",style:ce([e.barStyle,(b=e.unref(e.style))!=null?b:{},(m=e.unref(e.fillStyle))!=null?m:{}])},null,4)],4),a(o,{mark:e.unref(e.mark)},null,8,["mark"]),a(u,{id:e.id},null,8,["id"])],6)):L("",!0)}var Uo=ne(Lo,[["render",Go],["__scopeId","data-v-02d0d7b2"]]);const xo=Symbol("Bar");function ml(e){return Le(()=>{const t=e();return t.id=He("bar-"),t.type=xo,t[Ae]=Uo,P(t,"visibility"),le(t,"visibility",I.Visible),P(t,"width"),P(t,"height"),P(t,"direction"),P(t,"style"),P(t,"classes"),P(t,"borderStyle"),P(t,"baseStyle"),P(t,"textStyle"),P(t,"fillStyle"),P(t,"progress"),P(t,"display"),P(t,"mark"),t[Ve]=function(){const{progress:l,width:n,height:s,direction:r,display:o,visibility:u,style:c,classes:d,borderStyle:y,textStyle:w,baseStyle:p,fillStyle:b,mark:m,id:N}=this;return{progress:l,width:n,height:s,direction:r,display:o,visibility:u,style:f(c),classes:d,borderStyle:y,textStyle:w,baseStyle:p,fillStyle:b,mark:m,id:N}},t})}const Et=Ge("v",()=>{const e="v",t="Void",l="#240040",n=Q(0),s=We(()=>{const p=re.best.value;return i.div(p,1e45).root(10).sub(n.value).floor().max(0)}),r=We(()=>i.add(s.value,1).plus(n.value).pow(10).times(1e45)),o=Ze(()=>({thingsToReset:()=>[Et]})),u=Je(()=>({layerID:e,display:B(()=>a("img",{src:"./nodes/void.png"},null)),visibility:()=>pe(k.milestones[44].earned.value),color:l,reset:o}));Ie(u,{display:We(()=>`${ue(s.value)} Dark Matter`),pinnable:!0,direction:X.Left,style:()=>u.visibility.value===I.Visible?"":"display: none"});const c=[["flame","life","aqua"]],d=tt(()=>({canClick:()=>w.value>0,display:B(()=>a("div",{style:"font-size: 1.33em; font-weight: bold;"},[v("Reset Void Decays")])),small:!0,onClick:p=>{Object.values(y).forEach(b=>{b.bought.value=!1}),n.value=0},style:{color:"white"}})),y={flame:Me(()=>({display:{title:"Flame Decay",description:B(()=>{var p;return a("div",null,[v("Cost: "),ue((p=f(y.flame.cost))!=null?p:"Infinity"),v(" Dark Matter")])})},cost:()=>i.pow(5,w.value-(y.flame.bought.value?1:0)),canAfford:()=>{var p;return i.gte(s.value,(p=f(y.flame.cost))!=null?p:"Infinity")},onPurchase:()=>{var p;n.value=i.add(n.value,(p=f(y.flame.cost))!=null?p:0),we.treeNode.reset.reset()},style:{color:"white"}})),life:Me(()=>({display:{title:"Life Decay",description:B(()=>{var p;return a("div",null,[v("Cost: "),ue((p=f(y.life.cost))!=null?p:"Infinity"),v(" Dark Matter")])})},cost:()=>i.pow(5,w.value-(y.life.bought.value?1:0)),canAfford:()=>{var p;return i.gte(s.value,(p=f(y.life.cost))!=null?p:"Infinity")},onPurchase:()=>{var p;n.value=i.add(n.value,(p=f(y.life.cost))!=null?p:0),Se.treeNode.reset.reset()},style:{color:"white"}})),aqua:Me(()=>({display:{title:"Aqua Decay",description:B(()=>{var p;return a("div",null,[v("Cost: "),ue((p=f(y.aqua.cost))!=null?p:"Infinity"),v(" Dark Matter")])})},cost:()=>i.pow(5,w.value-(y.aqua.bought.value?1:0)),canAfford:()=>{var p;return i.gte(s.value,(p=f(y.aqua.cost))!=null?p:"Infinity")},onPurchase:()=>{var p;n.value=i.add(n.value,(p=f(y.aqua.cost))!=null?p:0),Be.treeNode.reset.reset()},style:{color:"white"}}))},w=We(()=>Object.values(y).filter(p=>p.bought.value).length);return{id:e,name:t,color:l,darkMatter:s,nextDarkMatter:r,voidDecayCount:w,voidDecays:y,treeNode:u,display:B(()=>a(R,null,[v("There are "),a("span",{style:"color: "+l+"; font-size: 40px; font-weight: bold;"},[ue(w.value)]),v(" Void-Decayed Particle types."),a("br",null,null),a("br",null,null),v("There is "),a("span",{style:"color: "+l+"; font-size: 40px; font-weight: bold;"},[ue(s.value)]),v(" Dark Matter (next at "),A(r.value),v(" Particles)"),a("br",null,null),a("br",null,null),v("Void-Decaying a type of Particle will reset that layer entirely, and drastically nerf that layer, however all boosts it gives are much stronger, and any layers that are dependent on its particle scale much slower."),a("br",null,null),a("br",null,null),U(d),a("table",null,[c.map(p=>a("tr",null,[p.map(b=>a("td",null,[U(y[b])]))]))])]))}}),Be=Ge("a",()=>{const e="a",t="Aqua",l="#2197eb",n=h(()=>Et.voidDecays.aqua.bought.value),s=Q(0,"Aqua Particles"),r=dt(s),o=Q(0),u=Q(0),c=h(()=>{let F=i.log10(i.add(u.value,1));return k.milestones[30].earned.value&&(F=F.times(1.1)),F}),d=h(()=>{let F=new i(1);return we.upgradesR1[2].bought.value&&(F=F.times(we.upgradeEffects[2].value)),F=F.times(Se.buyableEffects[4].value),F}),y=Q(0),w=h(()=>{let F=i.log10(i.add(y.value,1));return k.milestones[27].earned.value&&(F=F.times(2)),k.milestones[30].earned.value&&(F=F.times(1.1)),i.gte(F,50)&&(F=i.mul(F,50).sqrt()),F}),p=Q(0),b=h(()=>{let F=i.log10(i.add(p.value,1));return k.milestones[30].earned.value&&(F=F.times(1.1)),i.gte(F,40)&&(F=i.mul(F,40).sqrt()),F}),m=h(()=>{let F=new i(.2);return F=F.plus(qe.torrentEffAdded.value),F}),N=Q(0),D=h(()=>{let F=i.log10(i.add(N.value,1));return k.milestones[30].earned.value&&(F=F.times(1.1)),i.gte(F,30)&&(F=i.mul(F,30).sqrt()),F});me.on("update",F=>{u.value=i.add(u.value,i.mul(s.value,F).times(d.value).times(S.value)),y.value=i.add(y.value,i.mul(i.floor(c.value),F/10).times(S.value)),k.milestones[7].earned.value&&(p.value=i.add(p.value,i.mul(i.floor(y.value),F/2e6).times(S.value))),k.milestones[19].earned.value&&(N.value=i.add(N.value,i.mul(i.floor(p.value),F/1e10).times(S.value))),k.milestones[3].earned.value&&(s.value=i.mul($.currentGain.value,F).plus(s.value)),o.value+=F});const M=h(()=>{if(he.challenges[2].active.value)return i.dInf;let F=new i(n.value?"1e40":10);return F=F.div(i.pow(2,i.floor(w.value))),he.challenges[0].active.value&&(F=F.max(1).pow(he.challenge1Data.aquaParticleCost.value)),F}),$=qt(()=>({scaling:Bt(M,1/3),baseResource:re.particles,gainResource:s,roundUpCost:!0,gainModifier:St(ge(De.clickableEffects[2],"Lightning Mode C",()=>De.lightningSel[2].value),ge(3,"Advancement 5",()=>k.milestones[4].earned.value&&i.lte(o.value,k.adv5time.value)),ge(se.multiBuyableEffects[1].value,"Mud Molecule",()=>i.gte(se.multiBuyables[1].value,1)&&k.milestones[15].earned.value),ge(se.mainEff,"Particle Combinator Effect",k.milestones[31].earned),jl(1/7,"Void Decay",n))})),S=h(()=>{let F=i.dOne;return F=F.times(he.challenge1Data.reward.value),he.challenges[1].active.value&&(F=F.div(he.challenge2Data.aquaBarDiv.value)),k.milestones[11].earned.value&&(F=F.times(2)),k.milestones[14].earned.value&&(F=F.times(k.adv15eff.value)),i.gte(Re.lights[4].buyables[1].amount.value,1)&&(F=F.times(Re.lightBuyableEffects[4][1].value)),Pe.upgrades[5].bought.value&&(F=F.times(Pe.upgradeEffects[5].value)),n.value&&(F=F.times(i.add(s.value,1).sqrt())),F}),G=ml(()=>({width:300,height:25,direction:X.Right,progress:()=>i.sub(c.value,i.floor(c.value))})),V=ml(()=>({width:300,height:25,direction:X.Right,progress:()=>i.sub(w.value,i.floor(w.value))})),Y=ml(()=>({width:300,height:25,direction:X.Right,progress:()=>i.sub(b.value,i.floor(b.value))})),be=ml(()=>({width:300,height:25,direction:X.Right,progress:()=>i.sub(D.value,i.floor(D.value))})),J=Ze(()=>({thingsToReset:()=>[Be]})),oe=Je(()=>({layerID:e,display:B(()=>a("img",{src:"./nodes/"+(n.value?"void_":"")+"aqua.png"},null)),color:l,reset:J}));Ie(oe,{display:ft(s),pinnable:!0});const at=vt(()=>({conversion:$,tree:re.tree,treeNode:oe}));return Ie(at,{display:B(()=>Mt("Modifiers","",$.gainModifier,$.scaling.currentGain($))),pinnable:!0,direction:X.Down,style:"width: 400px; text-align: left"}),{id:e,name:t,color:l,aqua:s,best:r,time:o,bubbleTime:u,bubbles:c,waveTime:y,waves:w,torrentTime:p,torrents:b,torrentEff:m,floodTime:N,floods:D,voidDecayed:n,display:B(()=>a(R,null,[a(mt,{resource:s,color:l},null),U(at),a("br",null,null),a("br",null,null),a("div",null,[Ce(a("div",null,[ke(i.floor(c.value)),v(" Bubbles, each generating 1 Particle/second"),a("br",null,null),U(G)]),[[Ee,i.gt(r.value,0)]]),a("br",null,null),Ce(a("div",null,[ke(i.floor(w.value)),v(" Waves, each halving the Aqua Particle cost"),a("br",null,null),U(V)]),[[Ee,i.gte(c.value,1)]]),a("br",null,null),Ce(a("div",null,[ke(i.floor(b.value)),v(" Torrents, each increasing Particle gain by "),ke(i.mul(m.value,100)),v("%"),a("br",null,null),U(Y)]),[[Ee,k.milestones[7].earned.value]]),a("br",null,null),Ce(a("div",null,[ke(i.floor(D.value)),v(" Floods, each increasing the Base Particle gain exponent by 0.05"),a("br",null,null),U(be)]),[[Ee,k.milestones[19].earned.value]])])])),treeNode:oe}}),he=Ge("c",()=>{const e="c",t="Cryo",l="#03f4fc",n=Q(0,"Cryo Particles"),s=dt(n),r=qt(()=>({scaling:Bt(h(()=>Be.voidDecayed.value?.1:1e3),h(()=>Be.voidDecayed.value?15/4:3/4)),baseResource:Be.aqua,gainResource:n,roundUpCost:!0,gainModifier:St(ge(se.mainEff,"Particle Combinator Effect",k.milestones[15].earned),ge(1e10,"Void-Decayed Aqua",Be.voidDecayed))}));me.on("update",m=>{k.milestones[22].earned.value&&(n.value=i.mul(r.currentGain.value,m).plus(n.value))});const o={lifeBuyableCosts:h(()=>i.div(d[0].completions.value,4).plus(1.25)),aquaParticleCost:h(()=>i.div(d[0].completions.value,5).plus(1.2)),reward:h(()=>{let m=d[0].completions.value;i.gte(m,11)&&(m=i.pow(m,2).div(11).plus(5));let N=i.add(n.value,1).sqrt().times(m).times(i.pow(1.1,m)).plus(1);const D=i.add(20,m);return N.gte(D)&&(N=N.log(D.sqrt()).pow(2).times(D).div(4)),i.gte(se.best.value,6)&&(N=N.pow(se.multiBuyableEffects[6].value)),N})},u={aquaBarDiv:h(()=>i.pow(1.5,d[1].completions.value).times(10)),reward:h(()=>{let m=d[1].completions.value;i.gte(m,11)&&(m=i.pow(m,2).div(11).plus(5));let N=i.mul(n.value,m).plus(1).log10().times(i.gte(m,11)?i.sub(m,9).log10().plus(1).cbrt():1).plus(1);return i.gte(se.best.value,3)&&(N=N.pow(se.multiBuyableEffects[3].value)),N})},c={exp:h(()=>i.div(d[2].completions.value,2).plus(2)),reward:h(()=>{let m=d[2].completions.value;return i.gte(m,11)&&(m=i.pow(m,2).div(11).plus(5)),i.sqrt(m).div(10).plus(1)})},d=[Il(()=>({visibility:()=>i.gte(s.value,1)||k.milestones[26].earned.value?I.Visible:I.None,reset:y,completionLimit:h(()=>(k.milestones[26].earned.value?20:10)+(k.milestones[48].earned.value?10:0)),resource:Be.aqua,goal:()=>{let m=d[0].completions.value;return i.gte(m,20)&&(m=i.pow(m,2).div(20).plus(5)),i.gte(m,10)&&(m=i.pow(m,2).div(10).plus(5)),i.pow(2,m).times(100)},display:()=>({title:"Temperature Decrease ("+ue(d[0].completions.value)+"/"+ue(d[0].completionLimit.value)+")",description:"Disable the Flame layer, Life buyable costs are raised ^"+A(o.lifeBuyableCosts.value,2)+", and Aqua Particle base cost is raised ^"+A(o.aquaParticleCost.value,2)+" and cannot get below 1",goal:ue(f(d[0].goal))+" Aqua Particles",reward:"All Aqua bars are faster based on Cryo Particles.",effectDisplay:A(o.reward.value,2)+"x"})})),Il(()=>({visibility:()=>i.gte(d[0].completions.value,1)?I.Visible:I.None,reset:y,completionLimit:h(()=>k.milestones[26].earned.value?20:10),resource:Be.aqua,goal:()=>{let m=d[1].completions.value;return i.gte(m,10)&&(m=i.pow(m,2).div(10).plus(5)),i.pow(2.5,m).times(150)},display:()=>({title:"Full Freeze ("+ue(d[1].completions.value)+"/"+ue(d[1].completionLimit.value)+")",description:"Disable the Life layer, and Aqua bars are "+A(u.aquaBarDiv.value,2)+"x slower",goal:ue(f(d[1].goal))+" Aqua Particles",reward:"All Life Buyables are cheaper based on Cryo Particles.",effectDisplay:"/"+A(u.reward.value,2)})})),Il(()=>({visibility:()=>i.gte(d[1].completions.value,1)?I.Visible:I.None,reset:y,completionLimit:h(()=>10),resource:re.particles,goal:()=>{let m=d[2].completions.value;return i.gte(m,10)&&(m=i.pow(m,2).div(10).plus(5)),i.pow(10,i.pow(m,1.5)).times(1e4)},display:()=>({title:"Absolute Zero ("+ue(d[2].completions.value)+"/"+ue(d[2].completionLimit.value)+")",description:"Disable the Aqua layer, and Fire Upgrade and Life Buyable costs are raised ^"+A(c.exp.value,2),goal:ue(f(d[2].goal))+" Particles",reward:"Empower the first Flame upgrade.",effectDisplay:"^"+A(c.reward.value,2)})}))],y=Ze(()=>({thingsToReset:()=>k.milestones[15].earned.value?[Be]:[we,Se,Be],onReset(){re.particles.value=10,re.best.value=re.particles.value,re.total.value=re.particles.value}})),w=Ze(()=>({thingsToReset:()=>{const m={cryo:n,best:s,treeNode:p};return k.milestones[26].earned.value?[{...m,challenge1Data:o,challenge2Data:u,challenge3Data:c}]:[{...m,challenges:d,challenge1Data:o,challenge2Data:u,challenge3Data:c}]}})),p=Je(()=>({visibility:()=>k.milestones[2].earned.value?I.Visible:I.Hidden,layerID:e,display:B(()=>a("img",{src:"./nodes/cryo.png"},null)),color:l,reset:w,glowColor:()=>d.some(m=>m.canComplete.value)?"red":""}));Ie(p,{display:ft(n),pinnable:!0,style:()=>p.visibility.value===I.Visible?"":"display: none"});const b=vt(()=>({conversion:r,tree:re.tree,treeNode:p}));return Ie(b,{display:B(()=>Mt("Modifiers","",r.gainModifier,r.scaling.currentGain(r))),pinnable:!0,direction:X.Down,style:"width: 400px; text-align: left"}),{id:e,name:t,color:l,cryo:n,best:s,display:B(()=>a(R,null,[a(mt,{resource:n,color:l},null),U(b),a("br",null,null),a("br",null,null),a("table",null,[a("tbody",null,[d.map(m=>a("tr",null,[a("td",null,[U(m)])]))])])])),treeNode:p,challenges:d,challenge1Data:o,challenge2Data:u,challenge3Data:c}}),xt=["Red","Orange","Yellow","Green","Blue","Indigo","Violet"],$l=["#FF4444","#FFBF44","#FFFF44","#44FF44","#4444FF","#8F44B6","#D844F7"],Tl=["#FF0000","#FF7F00","#FFFF00","#00FF00","#0000FF","#4B0082","#9400D3"],jo=["#770000","#773700","#777700","#007700","#000077","#250041","#420061"],Re=Ge("light",()=>{const e="light",t="Light",l="#fff5c9",n=Q(0,"Light Particles"),s=dt(n),r=kl(()=>({scaling:Bt(()=>1e9,1/3),baseResource:De.lightning,gainResource:n,gainModifier:St(ge(k.adv48eff,"Advancement 48",k.milestones[47].earned))})),o=Ze(()=>({thingsToReset:()=>[Re]})),u=Je(()=>({visibility:()=>k.milestones[32].earned.value?I.Visible:I.Hidden,layerID:e,display:B(()=>a("img",{src:"./nodes/light.png"},null)),color:l,reset:o}));Ie(u,{display:ft(n),pinnable:!0,style:()=>u.visibility.value===I.Visible?"":"display: none"});const c=vt(()=>({conversion:r,tree:re.tree,treeNode:u}));Ie(c,{display:B(()=>Mt("Modifiers","",r.gainModifier,r.scaling.currentGain(r))),pinnable:!0,direction:X.Down,style:"width: 400px; text-align: left"});const d=[[h(()=>m[0].buyables[0].amount.value),h(()=>i.add(m[0].energy.value,1).log10().div(10).plus(1).pow(i.add(m[0].buyables[1].amount.value,1).log2())),h(()=>i.add(m[0].energy.value,1).log10().sqrt().times(m[0].buyables[2].amount.value).div(8).plus(1))],[h(()=>i.pow(10,i.add(m[0].energy.value,1).log10().sqrt()).sub(1).cbrt().times(m[1].buyables[0].amount.value).div(10)),h(()=>i.add(m[1].energy.value,1).log10().times(i.add(m[1].buyables[1].amount.value,1).log2()).times(5)),h(()=>i.add(m[1].energy.value,1).log10().sqrt().times(m[1].buyables[2].amount.value).plus(1))],[h(()=>i.pow(10,i.add(n.value,1).log10().cbrt()).sub(1).root(4).times(m[2].buyables[0].amount.value).div(7.5)),h(()=>i.add(m[2].energy.value,1).log10().times(i.add(m[2].buyables[1].amount.value,1).log2()).div(2).plus(1).sqrt()),h(()=>i.add(m[2].energy.value,1).log10().sqrt().times(m[2].buyables[2].amount.value).div(2).plus(1))],[h(()=>i.pow(10,i.sqrt(se.combinators.value)).sub(1).root(5).times(m[3].buyables[0].amount.value).div(40)),h(()=>i.add(m[3].energy.value,1).log10().times(i.add(m[3].buyables[1].amount.value,1).log2()).div(1.5).plus(1).root(2.5)),h(()=>i.add(m[3].energy.value,1).log10().sqrt().times(m[3].buyables[2].amount.value).div(3).plus(1))],[h(()=>i.pow(10,i.cbrt(he.challenges.reduce((D,M)=>i.add(D,M.completions.value),0))).sub(1).root(6).times(m[4].buyables[0].amount.value).div(225)),h(()=>i.add(m[4].energy.value,1).log10().times(i.add(m[4].buyables[1].amount.value,1).log2()).plus(1).pow(1.25)),h(()=>i.add(m[4].energy.value,1).log10().sqrt().times(m[4].buyables[2].amount.value).div(4).plus(1))],[h(()=>i.pow(10,i.add(Pe.ultrasound.value,1).log10().root(4)).sub(1).root(7).times(m[5].buyables[0].amount.value).div(400)),h(()=>i.add(m[5].energy.value,1).log10().times(i.add(m[5].buyables[1].amount.value,1).log2()).plus(1).cbrt()),h(()=>i.add(m[5].energy.value,1).log10().sqrt().times(m[5].buyables[2].amount.value).div(5).plus(1))],[h(()=>i.pow(10,i.add(se.attractionPower.value,1).log10().root(6)).sub(1).root(8).times(m[6].buyables[0].amount.value).div(750)),h(()=>i.add(m[6].energy.value,1).log10().times(i.add(m[6].buyables[1].amount.value,1).log2()).plus(1).log10().div(2).plus(1)),h(()=>i.add(m[6].energy.value,1).log10().sqrt().times(m[6].buyables[2].amount.value).div(6).plus(1))]],y=[[()=>({title:"Passion Bright",description:"Generate 1 Red Energy every second.",effectDisplay:A(d[0][0].value)+"/s"}),()=>({title:"Blinding Light",description:"Red Energy boosts Particle gain.",effectDisplay:A(d[0][1].value)+"x"}),()=>({unlocked:k.milestones[46].earned.value,title:"Circle of Light",description:"Red Energy boosts the gain of all Color Energy types at a very reduced rate.",effectDisplay:A(d[0][2].value)+"x"})],[()=>({title:"Peace and Quiet",description:"Generate Orange Energy over time based on Red Energy.",effectDisplay:A(d[1][0].value)+"/s"}),()=>({title:"Sunset Sight",description:"Orange Energy adds to Base Particle gain.",effectDisplay:"+"+A(d[1][1].value)}),()=>({title:"Furious Height",description:"Orange Energy boosts Red Energy gain at a reduced rate.",effectDisplay:A(d[1][2].value)+"x"})],[()=>({title:"Shattered Dreams",description:"Generate Yellow Energy over time based on Light Particles.",effectDisplay:A(d[2][0].value)+"/s"}),()=>({title:"Thunderous Streams",description:"Yellow Energy boosts Lightning Particle gain.",effectDisplay:A(d[2][1].value)+"x"}),()=>({title:"Frightened Screams",description:"Yellow Energy boosts Orange Energy gain at a reduced rate.",effectDisplay:A(d[2][2].value)+"x"})],[()=>({title:"Beautiful Fragrance",description:"Generate Green Energy over time based on Combinators.",effectDisplay:A(d[3][0].value)+"/s"}),()=>({title:"Quantum Condensed",description:"Green Energy boosts Ultrasound gain.",effectDisplay:A(d[3][1].value)+"x"}),()=>({title:"Calm Sense",description:"Green Energy boosts Yellow Energy gain at a reduced rate.",effectDisplay:A(d[3][2].value)+"x"})],[()=>({title:"The Night Sky",description:"Generate Blue Energy over time based on Total Cryo Challenge Completions.",effectDisplay:A(d[4][0].value)+"/s"}),()=>({title:"Ocean Nigh",description:"Blue Energy boosts the speed of all Aqua bars.",effectDisplay:A(d[4][1].value)+"x"}),()=>({title:"Frozen Light",description:"Blue Energy boosts Green Energy gain at a reduced rate.",effectDisplay:A(d[4][2].value)+"x"})],[()=>({title:"Morning Sights",description:"Generate Indigo Energy over time based on Ultrasound.",effectDisplay:A(d[5][0].value)+"/s"}),()=>({title:"Beach Plight",description:"Indigo Energy boosts Attraction Power gain.",effectDisplay:A(d[5][1].value)+"x"}),()=>({title:"Refracted Lights",description:"Indigo Energy boosts Blue Energy gain at a reduced rate.",effectDisplay:A(d[5][2].value)+"x"})],[()=>({title:"Cosmic Wonders",description:"Generate Violet Energy over time based on Attraction Power.",effectDisplay:A(d[6][0].value)+"/s"}),()=>({title:"Deathly Plunders",description:"Violet Energy extends the length of all Color Energy boosts.",effectDisplay:"+"+A(i.sub(d[6][1].value,1).times(100))+"%"}),()=>({title:"Torn Asunder",description:"Violet Energy boosts Indigo Energy gain at a reduced rate.",effectDisplay:A(d[6][2].value)+"x"})]],w=tt(()=>({visibility:()=>pe(k.milestones[43].earned.value&&i.gte(m[5].buyables[2].amount.value,1)),canClick:()=>b.every(D=>i.eq(D.time.value,0))&&i.gte(n.value,1),display:()=>({title:"All Energy Boosts",description:"Triples all Color Energy gain for "+yl(p.value)+", but sacrifices all Light Particles."}),onClick:()=>{b.forEach(D=>{var M,$;($=(M=D.spell).onClick)==null||$.call(M)})}})),p=h(()=>{let D=i.sub(60,i.div(60,i.add(n.value,1).log10().div(2).plus(1).sqrt()));return k.milestones[38].earned.value&&(D=i.mul(D,1.5)),k.milestones[42].earned.value&&(D=i.mul(D,1.5)),D=i.mul(D,d[6][1].value),D}),b=[...new Array(7)].map((D,M)=>{const $=Q(0),S=tt(()=>({canClick:()=>i.eq($.value,0)&&i.gte(n.value,1),display:()=>({title:xt[M]+" Energy Boost"+(i.gt($.value,0)?" (ACTIVE)":""),description:"Triples "+xt[M]+" Energy gain for "+yl(i.eq($.value,0)?p.value:$.value)+", but sacrifices "+(k.milestones[42].earned.value?"33% of":k.milestones[38].earned.value?"50% of":"all")+" Light Particles."}),onClick:()=>{$.value=p.value,n.value=k.milestones[42].earned.value?i.div(n.value,1.5):k.milestones[38].earned.value?i.div(n.value,2):0},style:()=>({backgroundColor:i.gt($.value,0)?$l[M]:i.gte(n.value,1)?Tl[M]:"grey",color:i.eq($.value,0)&&i.gte(n.value,1)&&(M==4||M==5)?$l[M]:"black"})}));return{time:$,spell:S}}),m=[...new Array(7)].map((D,M)=>{const $=Q(0,xt[M]+" Energy"),S=h(()=>{let Y=i.dOne;return Pe.upgrades[0].bought.value&&(Y=Y.times(Pe.upgradeEffects[0].value)),k.milestones[33].earned.value&&(Y=Y.times(2)),k.milestones[35].earned.value&&(Y=Y.times(3)),k.milestones[36].earned.value&&(Y=Y.times(k.adv37eff.value)),k.milestones[41].earned.value&&(Y=Y.times(4)),M<6&&(Y=Y.times(d[M+1][2].value)),k.milestones[46].earned.value&&(Y=Y.times(d[0][2].value)),i.gt(b[M].time.value,0)&&(Y=Y.times(3)),Y}),G=[...new Array(y[M].length)].map((Y,be)=>{P(y[M],be);const J=y[M][be],oe=M==1&&be==0?2:1;return ze(()=>({visibility:()=>{var at;return be==0?I.Visible:pe(i.gte(G[be-oe].amount.value,1)&&((at=f(J).unlocked)!=null?at:!0))},cost:()=>i.pow(M/4+be/2+2,i.pow(G[be].amount.value,1+(Math.sqrt(M)+be)/10).plus((Math.sqrt(M)/4+Math.sqrt(be))*3)),resource:be==0?n:$,display:J}))}),V=Dl(()=>({display:B(()=>a(R,null,[a("h3",null,[v("There is "),A($.value),v(" "),xt[M],v(" Energy")]),a("br",null,null),G.map(U),a("br",null,null),a("br",null,null),U(b[M].spell),a("br",null,null)])),style:{backgroundColor:jo[M],color:M==4||M==5?$l[M]:Tl[M]}}));return{energy:$,gainMult:S,buyables:G,tab:V}}),N=In([...new Array(7)].map((D,M)=>[xt[M],()=>({visibility:()=>M==0?I.Visible:pe(m[M].buyables.length>0&&(M==1?i.gte(m[0].buyables[0].amount.value,1)&&i.gte(m[0].buyables[1].amount.value,1):m[M-1].buyables.every($=>i.gte($.amount.value,1)))),tab:m[M].tab,display:xt[M],style:()=>({borderColor:Tl[M]})})]).reduce((D,[M,$])=>({...D,[M]:$}),{}));return me.on("update",D=>{for(let M=0;M<7;M++)m[M].energy.value=i.add(m[M].energy.value,i.mul(d[M][0].value,D).times(m[M].gainMult.value)),b[M].time.value=i.max(i.sub(b[M].time.value,D),0);k.milestones[43].earned.value&&(n.value=i.add(n.value,i.mul(r.currentGain.value,D).div(10)))}),{id:e,name:t,color:l,light:n,best:s,lights:m,lightBuyableEffects:d,tabFamily:N,lightSpells:b,allLightSpells:w,display:B(()=>a(R,null,[a(mt,{resource:n,color:l},null),U(c),a("br",null,null),a("br",null,null),U(N),a("br",null,null),a("br",null,null),U(w)])),treeNode:u}}),De=Ge("li",()=>{const e="li",t="Lightning",l="#ffd500",n=Q(0,"Lightning Particles"),s=dt(n),r={0:Q(!1),1:Q(!1),2:Q(!1),3:Q(!1)},o=qt(()=>({scaling:Bt(2500,1/4),baseResource:re.particles,gainResource:n,roundUpCost:!0,gainModifier:St(ge(se.mainEff,"Particle Combinator Effect",k.milestones[15].earned),ge(Re.lightBuyableEffects[2][1],"Yellow Energy Buyable 2",()=>i.gte(Re.lights[2].buyables[1].amount.value,1)))}));me.on("update",b=>{k.milestones[15].earned.value&&(n.value=i.mul(o.currentGain.value,b).plus(n.value))});const u={0:h(()=>i.add(n.value,1).log2().times(2)),1:h(()=>{let b=i.add(n.value,1).sqrt();return b.gte(100)&&(b=b.log(100).times(100)),b}),2:h(()=>i.add(n.value,1).log(3).plus(1).sqrt()),3:h(()=>i.add(n.value,1).log10().times(i.add(re.particles.value,1).sqrt()).plus(1).log10().plus(1))},c=h(()=>k.milestones[45].earned.value?3:k.milestones[18].earned.value?2:1),d=[tt(()=>({visibility:()=>i.gte(s.value,1)?I.Visible:I.None,canClick:()=>!r[0].value,onClick:b=>{r[0].value=!0,Object.values(r).filter(m=>m.value).length>c.value&&(r[1].value=!1,r[2].value=!1,r[3].value=!1)},display:B(()=>a(R,null,[a("h3",null,[v("Lightning Mode A "),r[0].value?"(Active)":""]),a("br",null,null),v("Increase Particle gain based on Lightning Particles (Currently: +"),W(u[0].value,1),v(")")]))})),tt(()=>({visibility:()=>i.gte(s.value,1)?I.Visible:I.None,canClick:()=>!r[1].value,onClick:b=>{r[1].value=!0,Object.values(r).filter(m=>m.value).length>c.value&&(r[0].value=!1,r[2].value=!1,r[3].value=!1)},display:B(()=>a(R,null,[a("h3",null,[v("Lightning Mode B "),r[1].value?"(Active)":""]),a("br",null,null),v("Multiply Particle gain based on Lightning Particles (Currently: x"),W(u[1].value,2),v(")")]))})),tt(()=>({visibility:()=>i.gte(s.value,2)?I.Visible:I.None,canClick:()=>!r[2].value,onClick:b=>{r[2].value=!0,Object.values(r).filter(m=>m.value).length>c.value&&(r[0].value=!1,r[1].value=!1,r[3].value=!1)},display:B(()=>a(R,null,[a("h3",null,[v("Lightning Mode C "),r[2].value?"(Active)":""]),a("br",null,null),v("Multiply Flame, Life, and Aqua Particle gain based on Lightning Particles (Currently: x"),W(u[2].value,2),v(")")]))})),tt(()=>({visibility:()=>i.gte(s.value,5)?I.Visible:I.None,canClick:()=>!r[3].value,onClick:b=>{r[3].value=!0,Object.values(r).filter(m=>m.value).length>c.value&&(r[0].value=!1,r[1].value=!1,r[2].value=!1)},display:B(()=>a(R,null,[a("h3",null,[v("Lightning Mode D "),r[3].value?"(Active)":""]),a("br",null,null),v("Multiply Particle gain based on Particles and Lightning Particles (Currently: x"),W(u[3].value,2),v(")")]))}))],y=Ze(()=>({thingsToReset:()=>{const b={id:e,name:t,color:l,lightning:n,best:s,treeNode:w,clickables:d,clickableEffects:u};return k.milestones[32].earned.value?[b]:[{...b,lightningSel:r}]}})),w=Je(()=>({visibility:()=>k.milestones[0].earned.value?I.Visible:I.Hidden,layerID:e,display:B(()=>a("img",{src:"./nodes/lightning.png"},null)),color:l,reset:y}));Ie(w,{display:ft(n),pinnable:!0,style:()=>w.visibility.value===I.Visible?"":"display: none"});const p=vt(()=>({conversion:o,tree:re.tree,treeNode:w}));return Ie(p,{display:B(()=>Mt("Modifiers","",o.gainModifier,o.scaling.currentGain(o))),pinnable:!0,direction:X.Down,style:"width: 400px; text-align: left"}),{id:e,name:t,color:l,lightning:n,best:s,lightningSel:r,display:B(()=>a(R,null,[a(mt,{resource:n,color:l},null),U(p),a("br",null,null),a("br",null,null),a("table",null,[a("tbody",null,[a("tr",null,[d.map(b=>a("td",null,[U(b)]))])])])])),treeNode:w,clickables:d,clickableEffects:u}}),Ho=Symbol("MultiBuyable");function ht(e){return Le(t=>{const l=Object.assign(t,e());if(l.canPurchase==null&&l.costSets.length==0)throw console.warn("Cannot create buyable without a canPurchase property or some element of costSets existing",l),"Cannot create buyable without a canPurchase property or some element of costSets existing";l.id=He("multibuyable-"),l.type=Ho,l[Ae]=Ul,l.amount=l[Zt],l.canAfford=h(()=>{const o=l;for(let u=0;u<o.costSets.length;u++){const c=o.costSets[u],d=f(c.cost);if(i.lt(c.resource.value,d))return!1}return!0}),l.canPurchase==null&&(l.canPurchase=h(()=>f(l.visibility)===I.Visible&&f(l.canAfford)&&i.lt(l.amount.value,f(l.purchaseLimit)))),l.maxed=h(()=>i.gte(l.amount.value,f(l.purchaseLimit))),P(l,"classes");const n=l.classes;l.classes=h(()=>{const o=f(n)||{};return l.maxed.value&&(o.bought=!0),o}),P(l,"canPurchase"),P(l,"keepRes"),l.keepRes===void 0&&(l.keepRes=!1);const s=l.keepRes;l.canClick=l.canPurchase,l.onClick=l.purchase=function(){const o=l;if(!(!f(o.canPurchase)||o.costSets.length==0)){for(let u=0;u<o.costSets.length;u++){const c=o.costSets[u],d=f(c.cost);f(s)||(c.resource.value=i.sub(c.resource.value,d))}o.amount.value=i.add(o.amount.value,1)}},P(l,"display");const r=l.display;l.display=B(()=>{const o=f(r);if(Ye(o)){const u=H(o);return a(u,null,null)}if(o!=null&&l.costSets.length>0){const u=l,c=H(o.title||"","h3"),d=H(o.description),y=H(o.effectDisplay||""),w=f(u.purchaseLimit)===i.dInf?a(R,null,[v("Amount: "),ue(u.amount.value)]):a(R,null,[v("Amount: "),ue(u.amount.value),v(" /")," ",ue(f(u.purchaseLimit))]),p=u.costSets.map(b=>a("div",null,[A(f(b.cost)||0),v(" "),b.resource.displayName,a("br",null,null)]));return a("span",null,[o.title?a("div",null,[a(c,null,null)]):null,a(d,null,null),a("div",null,[a("br",null,null),w]),o.effectDisplay?a("div",null,[a("br",null,null),v("Currently: "),a(y,null,null)]):null,u.maxed.value?null:a("div",null,[a("br",null,null),v("Cost: "),p])])}return""}),P(l,"visibility"),le(l,"visibility",I.Visible);for(let o=0;o<l.costSets.length;o++)P(l.costSets[o],"cost"),P(l.costSets[o],"resource");return P(l,"purchaseLimit"),le(l,"purchaseLimit",i.dInf),P(l,"style"),P(l,"mark"),P(l,"small"),l[Ve]=function(){const{display:o,visibility:u,style:c,classes:d,onClick:y,canClick:w,small:p,mark:b,id:m}=this;return{display:o,visibility:u,style:f(c),classes:d,onClick:y,canClick:w,small:p,mark:b,id:m}},l},je(0))}const se=Ge("comb",()=>{const e="comb",t="Combinators",l="#03fca9",n=Q(0,"Particle Combinators"),s=dt(n),r=h(()=>{let te=i.sqrt(n.value).plus(1);return k.milestones[32].earned.value&&(te=te.pow(2)),te}),o=vr(()=>({scaling:No(1e11,4,2),baseResource:re.particles,gainResource:n,roundUpCost:!0})),u=Ze(()=>({thingsToReset:()=>[se]})),c=Je(()=>({visibility:()=>k.milestones[15].earned.value?I.Visible:I.Hidden,layerID:e,display:B(()=>a("img",{src:"./nodes/combinators.png"},null)),color:l,reset:u,style:{transform:"scale(1.5)"},glowColor:()=>b.some(te=>te.canPurchase.value&&i.lt(te.amount.value,1))||i.gt(o.currentGain.value,n.value)?"red":""}));Ie(c,{display:ft(n),pinnable:!0,style:()=>c.visibility.value===I.Visible?"":"display: none"});const d=vt(()=>({conversion:o,tree:re.tree,treeNode:c})),y=h(()=>{let te=n.value;i.gte(te,10)&&(te=i.mul(te,10).sqrt());let et=i.mul(50,te);return k.milestones[20].earned.value&&(et=et.times(1.2)),k.milestones[34].earned.value&&(et=et.times(1.2)),et.ceil()}),w={0:h(()=>{let te=i.add(we.flame.value,1).log10().times(b[0].amount.value).times(N.value).plus(1).log10();return k.milestones[17].earned.value&&(te=te.pow(3)),te}),1:h(()=>i.add(qe.earth.value,1).log10().times(i.mul(b[1].amount.value,N.value).pow(1.5)).plus(1).cbrt()),2:h(()=>i.add(i.mul(n.value,i.mul(b[2].amount.value,N.value).plus(1).log10()),1).log10().plus(1).sqrt()),3:h(()=>i.add(Ue.air.value,1).log10().times(b[3].amount.value).times(N.value).plus(1).log10().div(2).plus(1)),4:h(()=>i.add(re.baseGain.value,1).log10().times(i.mul(b[4].amount.value,N.value).pow(k.milestones[39].earned.value?2:1)).plus(1).log10().div(5).plus(1)),5:h(()=>i.add(i.mul(n.value,k.milestones[34].earned.value?i.mul(b[5].amount.value,N.value).div(100):i.mul(b[5].amount.value,N.value).plus(1).log10()),1).log10().plus(1)),6:h(()=>i.add(i.mul(n.value,i.mul(i.pow(b[6].amount.value,2),N.value).div(25)),1).log10().plus(1).sqrt()),7:h(()=>i.add(i.mul(i.sub(Se.buyablePower.value,1).max(0),i.mul(b[7].amount.value,N.value).div(40)),1)),8:h(()=>i.add(m.value,1).log10().times(b[8].amount.value).times(N.value).plus(1).log10().div(2).plus(1))},p=tt(()=>({visibility:()=>pe(k.milestones[40].earned.value),canClick:()=>b.some(te=>te.canPurchase.value),display:()=>({title:"Max All",description:" "}),onClick:()=>{for(let te=0;te<b.length;te++){const et=b[te],Wl=et.costSets.reduce((Qt,zl)=>i.min(Qt,i.div(zl.resource.value,f(zl.cost))),i.dInf).min(i.sub(f(et.purchaseLimit),et.amount.value)).floor();et.costSets.forEach(Qt=>{Qt.resource.value=i.sub(Qt.resource.value,Wl.times(f(Qt.cost)))}),et.amount.value=i.add(et.amount.value,Wl)}},small:!0})),b=[ht(()=>({visibility:()=>pe(i.gte(s.value,1)),costSets:[{cost:1e6,resource:we.flame},{cost:1e4,resource:De.lightning}],display:()=>({title:"Spark Molecule",description:"Increase Base Particle gain based on Flame Particles.",effectDisplay:"+"+A(w[0].value)}),purchaseLimit:y})),ht(()=>({visibility:()=>pe(i.gte(s.value,1)),costSets:[{cost:25e5,resource:Be.aqua},{cost:100,resource:qe.earth}],display:()=>({title:"Mud Molecule",description:"Multiply Particle & Aqua Particle gain based on Earth Particles.",effectDisplay:A(w[1].value)+"x"}),purchaseLimit:y})),ht(()=>({visibility:()=>pe(i.gte(s.value,2)),costSets:[{cost:1e8,resource:Se.life},{cost:1e5,resource:De.lightning},{cost:500,resource:qe.earth}],display:()=>({title:"Protein Molecule",description:"Increase Life Buyable Power based on Combinators.",effectDisplay:"+"+A(i.sub(w[2].value,1).times(100))+"%"}),purchaseLimit:y})),ht(()=>({visibility:()=>pe(i.gte(s.value,3)),costSets:[{cost:5e9,resource:Be.aqua},{cost:1e8,resource:he.cryo},{cost:1e5,resource:Ue.air}],display:()=>({title:"Snow Molecule",description:'Boost the effect of the "Full Freeze" challenge based on Air Particles.',effectDisplay:"^"+A(w[3].value)}),purchaseLimit:y})),ht(()=>({visibility:()=>pe(i.gte(s.value,4)),costSets:[{cost:1e12,resource:we.flame},{cost:1e6,resource:qe.earth}],display:()=>({title:"Magma Molecule",description:'Boost the effect of the "Heat = Speed" upgrade based on Base Particle gain.',effectDisplay:"^"+A(w[4].value)}),purchaseLimit:y})),ht(()=>({visibility:()=>pe(i.gte(s.value,5)),costSets:[{cost:5e14,resource:Se.life},{cost:2e7,resource:qe.earth}],display:()=>({title:"Wood Molecule",description:"Divide the Earth Grid Cost based on Combinators.",effectDisplay:"/"+A(w[5].value)}),purchaseLimit:y})),ht(()=>({visibility:()=>pe(i.gte(s.value,6)),costSets:[{cost:1e10,resource:De.lightning},{cost:1e15,resource:he.cryo},{cost:5e9,resource:qe.earth}],display:()=>({title:"Steel Molecule",description:'Boost the effect of the "Temperature Decrease" challenge based on Combinators.',effectDisplay:"^"+A(w[6].value)}),purchaseLimit:y})),ht(()=>({visibility:()=>pe(i.gte(s.value,7)),costSets:[{cost:5e22,resource:Se.life},{cost:1e9,resource:Ue.air}],display:()=>({title:"Methane Molecule",description:"Boost Attraction Power gain based on Life Buyable Power.",effectDisplay:A(w[7].value)+"x"}),purchaseLimit:y})),ht(()=>({visibility:()=>pe(i.gte(s.value,8)),costSets:[{cost:1e4,resource:Re.light},{cost:100,resource:Pe.sound}],display:()=>({title:"Plastic Molecule",description:"Boost Ionic "+(k.milestones[49].earned.value?"& Metallic":"")+" Bond strength based on Attraction Power.",effectDisplay:"+"+A(i.sub(w[8].value,1).times(100))+"%"}),purchaseLimit:y}))];me.on("update",te=>{k.milestones[36].earned.value&&(Y.value=i.add(Y.value,i.mul(i.add(F.value,Xt.value),te))),M.value=i.add(M.value,i.mul(i.add(Y.value,J.value),te)),m.value=i.add(m.value,i.mul(i.add(M.value,S.value),te).times(D.value))});const m=Q(1,"Attraction Power"),N=h(()=>i.max(m.value,1).log10().div(3).plus(1)),D=h(()=>{let te=1;return i.gte(n.value,7)&&(te=w[7].value),i.gte(Re.lights[5].buyables[1].amount.value,1)&&(te=i.mul(te,Re.lightBuyableEffects[5][1].value)),k.milestones[48].earned.value&&(te=i.mul(te,3)),te}),M=Q(0),$=ze(()=>({cost:()=>i.pow(8,i.pow(i.div($.amount.value,k.milestones[35].earned.value?3:1),2)),resource:m,display:()=>({title:"Covalent Bonds",description:"Creates "+A(S.value)+" additional Covalence Power."})})),S=h(()=>i.pow(2,i.mul($.amount.value,V.value)).sub(1)),G=ze(()=>({cost:()=>i.pow(5,i.pow(G.amount.value,3)).times(1e5),resource:m,display:()=>({title:"Covalence Boosts",description:"Makes Covalent Bonds "+A(i.sub(V.value,1).times(100))+"% stronger."})})),V=h(()=>i.div(G.amount.value,2).plus(1)),Y=Q(0),be=ze(()=>({cost:()=>i.pow(400,i.pow(i.div(be.amount.value,k.milestones[35].earned.value?3:1),2)).times(100),resource:m,display:()=>({title:"Ionic Bonds",description:"Creates "+A(J.value)+" additional Ionic Power."})})),J=h(()=>i.pow(2,i.mul(be.amount.value,at.value)).sub(1).div(10)),oe=ze(()=>({cost:()=>i.pow(15,i.pow(oe.amount.value,3)).times(3e5),resource:m,display:()=>({title:"Ionic Boosts",description:"Makes Ionic Bonds "+A(i.sub(at.value,1).times(100))+"% stronger."})})),at=h(()=>i.div(oe.amount.value,2).plus(i.gte(n.value,8)?w[8].value:1)),F=Q(0),Ut=ze(()=>({cost:()=>i.pow(7e3,i.pow(i.div(Ut.amount.value,3),2)).times(1e8).div(k.milestones[48].earned.value?1e7:1),resource:m,display:()=>({title:"Metallic Bonds",description:"Creates "+A(Xt.value)+" additional Metallic Power."})})),Xt=h(()=>i.pow(2,i.mul(Ut.amount.value,Qe.value)).sub(1).div(15)),Xe=ze(()=>({cost:()=>i.pow(65,i.pow(Xe.amount.value,3)).times(1e9).div(k.milestones[48].earned.value?1e7:1),resource:m,display:()=>({title:"Metallic Boosts",description:"Makes Metallic Bonds "+A(i.sub(Qe.value,1).times(100))+"% stronger."})})),Qe=h(()=>i.div(Xe.amount.value,2).plus(k.milestones[49].earned.value&&i.gte(n.value,8)?w[8].value:1)),rt=Dl(()=>({display:B(()=>a(R,null,[U(p),a("br",null,null),a("br",null,null),b.map(U),a("br",null,null)]))})),En=Dl(()=>({display:B(()=>a(R,null,[a("br",null,null),v("There is "),a("b",{style:"font-size: 20px;"},[A(m.value)]),v(" Attraction Power, which multiplies effective Molecules by")," ",a("b",{style:"font-size: 20px;"},[A(N.value)]),v("."),a("br",null,null),a("br",null,null),v("There is "),a("b",null,[A(i.add(M.value,S.value))])," ",v("Covalence Power. "),U($),v(" "),U(G),a("br",null,null),a("br",null,null),v("There is "),a("b",null,[A(i.add(Y.value,J.value))]),v(" Ionic Power. "),U(be),v(" "),U(oe),a("br",null,null),a("br",null,null),Ce(a("div",null,[v("There is")," ",a("b",null,[A(i.add(F.value,Xt.value))])," ",v("Metallic Power. "),U(Ut),v(" "),U(Xe),a("br",null,null),a("br",null,null)]),[[Ee,k.milestones[36].earned.value]])]))})),Hl=In({Molecules:()=>({visibility:I.Visible,tab:rt,display:"Molecules",style:{borderColor:l},glowColor:()=>b.some(te=>te.canPurchase.value&&i.lt(te.amount.value,1))||i.gt(o.currentGain.value,n.value)?"red":""}),Intrabonds:()=>({visibility:()=>pe(k.milestones[23].earned.value),tab:En,display:"Intrabonds",style:()=>({borderColor:k.milestones[23].earned.value?"#ff9100":"transparent"})})});return{id:e,name:t,color:l,combinators:n,best:s,multiBuyables:b,multiBuyableEffects:w,mainEff:r,attractionPower:m,covalencePower:M,covalentBonds:$,covalenceBoost:G,ionicPower:Y,ionicBonds:be,ionicBoost:oe,metallicPower:F,metallicBonds:Ut,metallicBoost:Xe,tabFamily:Hl,maxAll:p,display:B(()=>a(R,null,[a(mt,{resource:n,color:l},null),U(d),v(" "),a("br",null,null),a("br",null,null),v("Multiplies "),k.milestones[31].earned.value?"Flame, Life, Aqua, ":"",v("Earth, Lightning, Air, and Cryo Particles by "),A(r.value),v("."),a("br",null,null),a("br",null,null),U(Hl)])),treeNode:c}}),qe=Ge("e",()=>{const e="e",t="Earth",l="#733000",n=Q(0,"Earth Particles"),s=dt(n),r=Q(0),o=dt(r),u=h(()=>{let J=i.pow(2,r.value);return i.gte(se.best.value,5)&&(J=J.div(se.multiBuyableEffects[5].value)),J}),c=h(()=>i.pow(2,r.value)),d=h(()=>i.div(.2,i.mul(r.value,-1).sub(1)).plus(.4)),y=h(()=>{const J={},oe={};for(let Qe=1;Qe<=S.rows;Qe++)for(let rt=1;rt<=S.cols;rt++)S.cells[Qe*100+rt].state&&(J[Qe]=i.add(J[Qe]||1,c.value),oe[rt]=i.add(oe[rt]||1,c.value));const at=Object.values(J),F=Object.values(oe),Ut=at.length==0?1:at.reduce((Qe,rt)=>i.mul(Qe,rt)),Xt=F.length==0?1:F.reduce((Qe,rt)=>i.mul(Qe,rt));let Xe=i.mul(Ut,Xt).pow(d.value);return Xe.gte(10)&&(Xe=i.pow(10,Xe.log10().sqrt())),Xe.gte(100)&&(Xe=i.pow(100,Xe.log(100).cbrt())),Xe}),w=h(()=>i.lt(r.value,1)?0:y.value.div(10).plus(.9).log10().times(10)),p=h(()=>i.lt(r.value,2)?0:i.sub(.8,i.div(.8,i.div(w.value,100).plus(1)))),b=h(()=>i.lt(r.value,4)?1:i.add(w.value,1).log10().div(2).plus(1).pow(2)),m=h(()=>i.lt(r.value,16)?1:y.value.pow(1.1).div(Math.pow(100,1.1)).plus(.99)),N=qt(()=>({scaling:Bt(h(()=>we.voidDecayed.value?15:15e4),h(()=>we.voidDecayed.value?7/2:1/2)),baseResource:we.flame,gainResource:n,roundUpCost:!0,gainModifier:St(ge(se.mainEff,"Particle Combinator Effect",k.milestones[15].earned),ge(1e7,"Void-Decayed Flame",we.voidDecayed))})),D=B(()=>a(_n,{skipConfirm:i.lt(r.value,o.value),class:"feature clickable can",disabled:i.lt(r.value,1),customDisplay:"WARNING: This will reset your Earth Grid!",forceOnClick:()=>{r.value=i.sub(r.value,1);for(let J=1;J<=S.rows;J++)for(let oe=1;oe<=S.cols;oe++)S.setState(J*100+oe,!0)}},{default:()=>[a("b",null,[v("Level Down")])]})),M=tt(()=>({canClick:()=>Object.values(S.cells).every(J=>J.state),onClick:()=>{if(i.gte(r.value,i.sub(o.value,1)))for(let J=1;J<=S.rows;J++)for(let oe=1;oe<=S.cols;oe++)S.setState(J*100+oe,!1);r.value=i.add(r.value,1)},display:()=>({title:"Level Up",description:"Levels up the Earth Grid, but resets it. Requires all grid cells filled."})})),$=tt(()=>({visibility:()=>pe(k.milestones[25].earned.value),canClick:()=>i.gte(n.value,i.mul(u.value,50))&&!Object.values(S.cells).every(J=>J.state),onClick:()=>{n.value=i.sub(n.value,i.mul(u.value,50));for(let J=1;J<=S.rows;J++)for(let oe=1;oe<=S.cols;oe++)S.setState(J*100+oe,!0)},display:()=>({title:"Fill Grid",description:"Cost: "+W(i.mul(u.value,50))+" Earth Particles"})})),S=wo(()=>({rows:5,cols:5,getStartState:()=>!1,getDisplay:()=>" ",getStyle:(J,oe)=>({width:"40px",minHeight:"40px",height:"40px",margin:"0 auto",backgroundColor:oe?"green":"black"}),getCanClick:(J,oe)=>!oe&&i.gte(n.value,u.value),onClick:J=>{n.value=i.sub(n.value,u.value),S.setState(J,!0)}})),G=Ze(()=>({thingsToReset:()=>[qe]})),V=Je(()=>({visibility:()=>k.milestones[11].earned.value?I.Visible:I.Hidden,layerID:e,display:B(()=>a("img",{src:"./nodes/earth.png"},null)),color:l,reset:G}));Ie(V,{display:ft(n),pinnable:!0,style:()=>V.visibility.value===I.Visible?"":"display: none"});const Y=vt(()=>({conversion:N,tree:re.tree,treeNode:V}));Ie(Y,{display:B(()=>Mt("Modifiers","",N.gainModifier,N.scaling.currentGain(N))),pinnable:!0,direction:X.Down,style:"width: 400px; text-align: left"});const be=Q(0);return me.on("update",J=>{k.milestones[24].earned.value&&(n.value=i.mul(N.currentGain.value,J).plus(n.value)),k.milestones[37].earned.value&&(be.value+=J,be.value>=1&&(be.value=0,i.gte(n.value,i.mul(u.value,100))&&(M.onClick(),$.onClick())))}),{id:e,name:t,color:l,earth:n,best:s,fillGrid:$,gridLevel:r,bestGridLevel:o,display:B(()=>a(R,null,[a(mt,{resource:n,color:l},null),U(Y),a("br",null,null),a("br",null,null),i.gte(s.value,1)?a("div",null,[v("Grid Level: "),ke(r.value),a("br",null,null),v("Grid Cost: "),ke(u.value),v(" Earth Particles"),a("br",null,null),a("br",null,null),v("Flame Particle Multiplier: "),W(y.value),v("x"),a("br",null,null),Ce(a("span",null,[v("Base Particle Gain Added: +"),W(w.value),v("/s"),a("br",null,null)]),[[Ee,i.gte(r.value,1)]]),Ce(a("span",null,[v("Torrent Effect Added: +"),W(i.mul(p.value,100)),v("%"),a("br",null,null)]),[[Ee,i.gte(r.value,2)]]),Ce(a("span",null,[v("Life Buyable 6 Effect Mult: "),W(b.value,2),v("x"),a("br",null,null)]),[[Ee,i.gte(r.value,4)]]),Ce(a("span",null,[v("Particle Gain Mult: "),W(m.value,2),v("x"),a("br",null,null)]),[[Ee,i.gte(r.value,16)]]),a("br",null,null),U($),a("br",null,null),U(S),a("br",null,null),a("table",null,[a("tr",null,[a("td",null,[U(D)])]),a("tr",null,[a("td",null,[U(M)])])])]):a("div",null,null)])),treeNode:V,grid:S,flameMult:y,baseGainAdded:w,torrentEffAdded:p,lb6Mult:b,particleGainMult:m,autoTime:be}}),k=Ge("adv",()=>{const e="adv",t="Advancements",l="#ffffff",n=[125,700,2e3,5e3,25e3,36e3,6e4,885e3,225e4,435e4,325e5,405e5,55555555,1e9,235e7,325e7,1e10,2e10,125e9,25e12,6e13,1e14,5e14,1e17,12e17,4e18,15e18,1e20,5e21,45e21,135e21,1e24,14e24,1e27,12e27,6e28,5e30,25e31,225e34,5e37,2e39,72e40,133e43,35e45,5e46,1e49,4e50,675e49,2e53,25e52,15e54,i.dInf],s=Q(0,"Advancements"),r=qt(()=>({scaling:{currentGain:D=>i.gte(D.baseResource.value,n[new i(D.gainResource.value).toNumber()]||i.dInf)?1:0,currentAt:D=>n[new i(D.gainResource.value).toNumber()]||i.dInf,nextAt:D=>n[new i(D.gainResource.value).toNumber()]||i.dInf},baseResource:re.particleGain,gainResource:s,roundUpCost:!0,buyMax:!1})),o=Ze(()=>({thingsToReset:()=>[k]})),u=Je(()=>({layerID:e,display:"A",color:l,reset:o,glowColor:()=>i.gt(r.actualGain.value,0)?"red":""}));Ie(u,{display:ft(s),pinnable:!0,direction:X.Right});const c=vt(()=>({conversion:r,baseResourceName:"particles/s",tree:re.tree,treeNode:u})),d=h(()=>{let D=120;return N[8].earned.value&&(D=i.sub(s.value,7).times(30).plus(D)),N[30].earned.value&&(D=1/0),D}),y=h(()=>i.pow(2,i.root(qe.gridLevel.value,1.5))),w=h(()=>i.pow(1.2,i.sub(s.value,35))),p=h(()=>i.add(Et.darkMatter.value,1).log10().plus(1)),b=h(()=>i.pow(1.5,Et.voidDecayCount.value));function m(D,M){const $=H(M);return ro(()=>({visibility:()=>i.gte(s.value,D)?I.Visible:I.None,shouldEarn(){return i.gte(s.value,D)},display:{requirement:B(()=>a(R,null,[a("h3",null,[ke(D),v(" Advancement")]),a("br",null,null),a($,null,null)]))},style:{width:"30em"}}))}const N=[m(1,"Unlock Lightning"),m(2,"Unlock a new row of Flame Upgrades"),m(3,"Unlock Cryo"),m(4,"Gain 100% of Flame, Life, and Aqua Particles every second."),m(5,B(()=>a(R,null,[v("Flame, Life, and Aqua Particle gain is tripled for the first")," ",ke(d.value),v(" seconds of a run.")]))),m(6,"Unlock a new row of Life Buyables"),m(7,"Unlock Air"),m(8,"Unlock a new Aqua Bar"),m(9,"The milestone at 5 Advancements lasts 30 seconds longer per Advancement after 7"),m(10,"Purchasing Life Buyables does not spend Life Particles"),m(11,"The Air requirement uses a more efficient formula, you can buy max Air, and you can buy all Life Buyables at once."),m(12,"Unlock Earth, and all Aqua Bars are twice as fast."),m(13,"Layers only reset along their branches, rather than by row (this does NOT affect Cryo Challenges)."),m(14,"After 1 second of a reset, all Flame Upgrades are automatically purchased if you can afford them."),m(15,B(()=>a(R,null,[v("Wind/Zephyr/Tornado Speeds work sublinearly (square root) rather than logarithmically, and Aqua Bars are faster based on your Earth Grid Level ("),A(y.value),v("x)")]))),m(16,"Unlock Particle Combinators, gain 100% of Lightning Particle gain every second, and starting a Cryo Challenge only resets the Aqua layer."),m(17,"All Life Buyables are automatically purchased every second."),m(18,"The Spark Molecule effect is cubed."),m(19,"You can activate two Lightning Modes at once."),m(20,"Unlock a new Aqua Bar."),m(21,"Increase the Molecule limit by 20%."),m(22,"Gain 100% of Air Particle gain every second."),m(23,"Gain 100% of Cryo Particle gain every second."),m(24,"Unlock Intrabonds."),m(25,"Gain 100% of Earth Particle gain every second."),m(26,"You can fill the Earth Grid with a single button."),m(27,"Keep Cryo Challenge completions on all resets, and increase the completion limits of the first two Cryo Challenges by 10."),m(28,"The Wave requirement scales 50% slower."),m(29,"Multiply Zephyr Speed and Tornado Speed by 10."),m(30,'Square the effect of the "Liquid Fire", "Magma Spirit" and "Speed = Heat" upgrades.'),m(31,"The effect of the milestone at 5 Advancements is permanently active, and all Aqua bar requirements scale 10% slower."),m(32,"The main Combinator effect also affects the first row of Particles."),m(33,"Unlock Light & Sound, square the Particle Combinator effect, and Lightning Modes are never de-selected by resets."),m(34,"All Light Energy colors are generated twice as fast, and you can buy max Life Buyables."),m(35,"Increase the Molecule limit by 20%, and the Wood Molecule effect uses a better formula."),m(36,"Covalent/Ionic Bond costs scale 67% slower, and all Light Energy colors are generated 3x as fast."),m(37,B(()=>a(R,null,[v("Unlock Metallic Bonds, and all Light Energy colors are generated 20% faster for every Advancement after 35 ("),A(w.value),v("x)")]))),m(38,"Automatically level up and fill the Earth Grid if both are possible every second, and double Ultrasound gain."),m(39,"Color Energy Boosts only use up half of your Light Particles when used, and they last 50% longer."),m(40,"The amount of Magma Molecules are effectively squared."),m(41,"You can max all Molecules at once."),m(42,"All Light Energy colors are generated 4x as fast."),m(43,"Color Energy boosts only use up 33% of your Light Particles when used, and they last 50% longer."),m(44,"Gain 10% of Light Particle gain every second, and you can activate all Color Energy boosts at once if you have unlocked all seven Color Energy types."),m(45,"Unlock Void."),m(46,"You can activate three Lightning modes at once."),m(47,"Unlock a third Red Energy Upgrade."),m(48,B(()=>a(R,null,[v("Unspent Dark Matter boosts Light and Sound Particle gain at a reduced rate ("),A(p.value),v("x)")]))),m(49,"Divide Metallic Bond & Boost costs by 10,000,000, triple Attraction Power gain, and increase the 'Temperature Decrease' completion limit by 10."),m(50,"The Plastic Molecule effect also affects Metallic Bond strength, and unlock a new row of Sound Upgrades."),m(51,B(()=>a(R,null,[v("Each active Void-Decayed Particle type increases Particle gain by 50% ("),A(b.value),v("x)")])))];return{id:e,name:t,color:l,advancements:s,adv5time:d,adv15eff:y,adv37eff:w,adv48eff:p,adv51eff:b,display:B(()=>a(R,null,[a(mt,{resource:s,color:l},null),U(c),a("br",null,null),a("br",null,null),a("table",null,[a("tbody",null,[N.map(D=>a("tr",null,[a("td",null,[U(D)])]))])])])),treeNode:u,milestones:N}}),Se=Ge("l",()=>{const e="l",t="Life",l="#32a85e",n=h(()=>Et.voidDecays.life.bought.value),s=Q(0,"Life Particles"),r=dt(s),o=Q(0),u=Q(0),c=h(()=>{let V=n.value?"1e40":10;return he.challenges[1].active.value&&(V=i.dInf),V}),d=qt(()=>({scaling:Bt(c,1/3),baseResource:re.particles,gainResource:s,roundUpCost:!0,gainModifier:St(ge(b[3],"Life Buyable 4",k.milestones[5].earned),ge(De.clickableEffects[2],"Lightning Mode C",()=>De.lightningSel[2].value),ge(3,"Advancement 5",()=>k.milestones[4].earned.value&&i.lte(o.value,k.adv5time.value)),ge(Ue.windEff,"Wind Effect",k.milestones[6].earned),ge(se.mainEff,"Particle Combinator Effect",k.milestones[31].earned),jl(1/7,"Void Decay",n))}));me.on("update",V=>{k.milestones[3].earned.value&&(s.value=i.mul(d.currentGain.value,V).plus(s.value)),o.value+=V,u.value+=V,k.milestones[16].earned.value&&u.value>=1&&(u.value=0,D.onClick(void 0))});const y=h(()=>{let V=1;return i.gte(se.best.value,2)&&(V=se.multiBuyableEffects[2].value),Pe.upgrades[2].bought.value&&(V=i.add(V,Pe.upgradeEffects[2].value)),V}),w=h(()=>Ue.zephyrEff.value),p=[h(()=>{let V=b[5].value;return we.upgradesR2[0].bought.value&&(V=V.plus(we.upgradeEffects[3].value)),V.plus(w.value)}),h(()=>i.add(b[5].value,w.value)),h(()=>i.add(b[5].value,w.value)),h(()=>i.add(b[5].value,w.value)),h(()=>i.add(b[5].value,w.value)),h(()=>w.value)],b={0:h(()=>i.add(M[0].amount.value,p[0].value).times(y.value)),1:h(()=>i.pow(n.value?3.5:2,i.add(M[1].amount.value,p[1].value).times(y.value))),2:h(()=>i.mul(n.value?3:2,i.add(M[2].amount.value,p[2].value).times(y.value))),3:h(()=>i.pow(n.value?1.3:1.15,i.add(M[3].amount.value,p[3].value).times(y.value))),4:h(()=>i.pow(n.value?3.5:2.25,i.add(M[4].amount.value,p[4].value).times(y.value))),5:h(()=>i.add(re.particleGain.value,1).log(n.value?5:10).times(i.add(M[5].amount.value,p[5].value).times(y.value)).plus(1).log10().div(5).times(qe.lb6Mult.value))},m=h(()=>{let V=i.dOne;return V=V.times(he.challenge2Data.reward.value),V}),N=h(()=>{let V=i.dOne;return he.challenges[0].active.value&&(V=V.times(he.challenge1Data.lifeBuyableCosts.value)),he.challenges[2].active.value&&(V=V.times(he.challenge3Data.exp.value)),V}),D=tt(()=>({visibility:()=>k.milestones[10].earned.value?I.Visible:I.None,canClick:()=>k.milestones[10].earned.value,display:()=>k.milestones[33].earned.value?"Max All":"Buy All",small:!0,onClick:V=>{for(let Y=0;Y<M.length;Y++)if(f(M[Y].canClick))if(k.milestones[33].earned.value){const be=M[Y].target();M[Y].amount.value=i.max(M[Y].amount.value,be)}else M[Y].onClick()}})),M=[ze(()=>({visibility:()=>i.gt(r.value,0)?I.Visible:I.None,cost(){const V=M[0].amount.value;return i.pow(3,V).div(m.value).pow(N.value)},target(){return i.root(s.value,N.value).times(m.value).max(1).log(3).plus(1).floor()},resource:s,display:()=>({title:"Regeneration",description:"Generate 1 Particle/second.",effectDisplay:"+"+ue(b[0].value)}),keepRes:()=>k.milestones[9].earned.value})),ze(()=>({visibility:()=>i.gt(M[0].amount.value,0)?I.Visible:I.None,cost(){const V=M[1].amount.value;return i.pow(4,i.pow(V,1.2)).times(10).div(m.value).pow(N.value)},target(){return i.root(s.value,N.value).times(m.value).div(10).max(1).log(4).root(1.2).plus(1).floor()},resource:s,display:()=>({title:"The Source",description:"Double Particle gain.",effectDisplay:W(b[1].value)+"x"}),keepRes:()=>k.milestones[9].earned.value})),ze(()=>({visibility:()=>i.gt(M[1].amount.value,0)?I.Visible:I.None,cost(){const V=M[2].amount.value;return i.pow(2.5,i.pow(V,1.4)).times(50).div(m.value).pow(N.value)},target(){return i.root(s.value,N.value).times(m.value).div(50).max(1).log(2.5).root(1.4).plus(1).floor()},resource:s,display:()=>({title:"Solar Warmth",description:"Flame Upgrade 1's effect increases by 2.",effectDisplay:"+"+ue(b[2].value)}),keepRes:()=>k.milestones[9].earned.value})),ze(()=>({visibility:()=>k.milestones[5].earned.value?I.Visible:I.None,cost(){const V=M[3].amount.value;return i.pow(2,i.pow(V,1.6)).times(200).div(m.value).pow(N.value)},target(){return i.root(s.value,N.value).times(m.value).div(200).max(1).log2().root(1.6).plus(1).floor()},resource:s,display:()=>({title:"Existence Formula",description:"Increase Life Particle gain by 15%.",effectDisplay:W(b[3].value,2)+"x"}),keepRes:()=>k.milestones[9].earned.value})),ze(()=>({visibility:()=>i.gt(M[3].amount.value,0)?I.Visible:I.None,cost(){const V=M[4].amount.value;return i.pow(1.5,i.pow(V,1.8)).times(1e4).div(m.value).pow(N.value)},target(){return i.root(s.value,N.value).times(m.value).div(1e4).max(1).log(1.5).root(1.8).plus(1).floor()},resource:s,display:()=>({title:"Water Lily",description:"Make the Bubble bar 125% faster.",effectDisplay:W(b[4].value,2)+"x"}),keepRes:()=>k.milestones[9].earned.value})),ze(()=>({visibility:()=>i.gt(M[4].amount.value,0)?I.Visible:I.None,cost(){const V=M[5].amount.value;return i.pow(2,i.pow(2,V)).times(12e3).div(m.value).pow(N.value)},target(){return i.root(s.value,N.value).times(m.value).div(12e3).max(1).log2().sqrt().plus(1).floor()},resource:s,display:()=>({title:"Purest Form",description:"Add levels to all previous Life Buyables based on Particle gain.",effectDisplay:"+"+W(b[5].value,2)}),keepRes:()=>k.milestones[9].earned.value}))],$=Ze(()=>({thingsToReset:()=>[Se]})),S=Je(()=>({layerID:e,display:B(()=>a("img",{src:"./nodes/"+(n.value?"void_":"")+"life.png"},null)),color:l,reset:$,glowColor:()=>M.some(V=>V.canPurchase.value)?"red":""}));Ie(S,{display:ft(s),pinnable:!0});const G=vt(()=>({conversion:d,tree:re.tree,treeNode:S}));return Ie(G,{display:B(()=>Mt("Modifiers","",d.gainModifier,d.scaling.currentGain(d))),pinnable:!0,direction:X.Down,style:"width: 400px; text-align: left"}),{id:e,name:t,color:l,life:s,best:r,time:o,autoTime:u,buyableEffects:b,voidDecayed:n,display:B(()=>a(R,null,[a(mt,{resource:s,color:l},null),U(G),a("br",null,null),a("br",null,null),Ce(a("div",null,[a("b",null,[v("Buyable Power: "),W(i.mul(y.value,100)),v("%")])]),[[Ee,i.gt(y.value,1)]]),U(D),a("table",null,[a("tbody",null,[a("tr",null,[a("td",null,[U(M[0])]),a("td",null,[U(M[1])]),a("td",null,[U(M[2])])]),a("tr",null,[a("td",null,[U(M[3])]),a("td",null,[U(M[4])]),a("td",null,[U(M[5])])])])])])),treeNode:S,buyables:M,buyablePower:y}}),we=Ge("f",()=>{const e="f",t="Flame",l="#fc3b00",n=h(()=>Et.voidDecays.flame.bought.value),s=Q(0,"Flame Particles"),r=dt(s),o=Q(0),u=Q(!1),c=h(()=>he.challenges[0].active.value?i.dInf:n.value?"1e40":10),d=qt(()=>({scaling:Bt(c,1/3),baseResource:re.particles,gainResource:s,roundUpCost:!0,gainModifier:St(ge(y[4],"Flame Upgrade 5",b[1].bought),ge(De.clickableEffects[2],"Lightning Mode C",()=>De.lightningSel[2].value),ge(3,"Advancement 5",()=>k.milestones[4].earned.value&&i.lte(o.value,k.adv5time.value)),ge(qe.flameMult,"Earth Grid Boost 1",k.milestones[11].earned),ge(se.mainEff,"Particle Combinator Effect",k.milestones[31].earned),ge(Pe.upgradeEffects[4],"Sound Upgrade 5",Pe.upgrades[4].bought),jl(1/7,"Void Decay",n))}));me.on("update",M=>{if(k.milestones[3].earned.value&&(s.value=i.mul(d.currentGain.value,M).plus(s.value)),o.value+=M,!u.value&&k.milestones[13].earned.value&&o.value>=1&&i.gte(s.value,i.pow(2e4,w.value))){u.value=!0;for(let $=0;$<3;$++)p[$].purchase(),b[$].purchase()}});const y={0:h(()=>{let M=new i(1);return M=M.plus(Se.buyableEffects[2].value),M.pow(he.challenge3Data.reward.value)}),1:h(()=>{let M=i.add(s.value,1).log(n.value?1.4:20).plus(1);return i.gte(se.best.value,4)&&(M=M.pow(se.multiBuyableEffects[4].value)),M}),2:h(()=>i.add(s.value,1).log(n.value?1.1:5).plus(1).pow(k.milestones[29].earned.value?2:1)),3:h(()=>i.add(s.value,1).log(n.value?1.2:10).pow(k.milestones[29].earned.value?1:.5)),4:h(()=>i.add(re.particles.value,1).log10().plus(1).log10().plus(1).pow(k.milestones[29].earned.value?2:1)),5:h(()=>i.add(s.value,1).log(n.value?1.2:10).sqrt().times(3))},w=h(()=>{let M=i.dOne;return he.challenges[2].active.value&&(M=M.times(he.challenge3Data.exp.value)),M}),p=[Me(()=>({visibility:()=>i.gt(r.value,0)?I.Visible:I.None,cost:()=>n.value?100:1,resource:s,display:B(()=>a("div",null,[a("h3",null,[v("A Hot Start")]),a("br",null,null),v("Generate")," ",W(y[0].value,i.gt(he.challenge3Data.reward.value,1)?2:0)," ",v("Particles/second."),a("br",null,null),a("br",null,null),v("Cost: "),ct(s,f(p[0].cost)),v(" "),s.displayName]))})),Me(()=>({visibility:()=>p[0].bought.value?I.Visible:I.None,cost:()=>i.pow(n.value?250:5,w.value),resource:s,display:B(()=>a("div",null,[a("h3",null,[v("Heat = Speed")]),a("br",null,null),v("Flame Particles multiply Particle gain at a reduced rate."),a("br",null,null),v("Currently: "),W(y[1].value,2),v("x"),a("br",null,null),a("br",null,null),v("Cost: "),ct(s,f(p[1].cost)),v(" "),s.displayName]))})),Me(()=>({visibility:()=>p[1].bought.value?I.Visible:I.None,cost:()=>i.pow(n.value?600:30,w.value),resource:s,display:B(()=>a("div",null,[a("h3",null,[v("Liquid Fire")]),a("br",null,null),v("Flame Particles make the Bubble bar faster."),a("br",null,null),v("Currently: "),W(y[2].value,2),v("x"),a("br",null,null),a("br",null,null),v("Cost: "),ct(s,f(p[2].cost)),v(" "),s.displayName]))}))],b=[Me(()=>({visibility:()=>k.milestones[1].earned.value?I.Visible:I.None,cost:()=>i.pow(n.value?1e3:100,w.value),resource:s,display:B(()=>a("div",null,[a("h3",null,[v("Magma Spirit")]),a("br",null,null),v("Flame Particles add levels to the first Life Buyable."),a("br",null,null),v("Currently: +"),ke(y[3].value),a("br",null,null),a("br",null,null),v("Cost: "),ct(s,f(b[0].cost)),v(" "),s.displayName]))})),Me(()=>({visibility:()=>b[0].bought.value?I.Visible:I.None,cost:()=>i.pow(n.value?1e5:1e3,w.value),resource:s,display:B(()=>a("div",null,[a("h3",null,[v("Speed = Heat?")]),a("br",null,null),v("Particles multiply Flame Particle gain at a reduced rate."),a("br",null,null),v("Currently: "),W(y[4].value,2),v("x"),a("br",null,null),a("br",null,null),v("Cost: "),ct(s,f(b[1].cost)),v(" "),s.displayName]))})),Me(()=>({visibility:()=>b[1].bought.value?I.Visible:I.None,cost:()=>i.pow(n.value?1e9:1e4,w.value),resource:s,display:B(()=>a("div",null,[a("h3",null,[v("Hot Feet")]),a("br",null,null),v("Flame Particles increase base Particle gain at a reduced rate."),a("br",null,null),v("Currently: +"),W(y[5].value,2),a("br",null,null),a("br",null,null),v("Cost: "),ct(s,f(b[2].cost)),v(" "),s.displayName]))}))],m=Ze(()=>({thingsToReset:()=>[we]})),N=Je(()=>({layerID:e,display:B(()=>a("img",{src:"./nodes/"+(n.value?"void_":"")+"flame.png"},null)),color:l,reset:m,glowColor:()=>p.some(M=>M.canPurchase.value)||b.some(M=>M.canPurchase.value)?"red":""}));Ie(N,{display:ft(s),pinnable:!0});const D=vt(()=>({conversion:d,tree:re.tree,treeNode:N}));return Ie(D,{display:B(()=>Mt("Modifiers","",d.gainModifier,d.scaling.currentGain(d))),pinnable:!0,direction:X.Down,style:"width: 400px; text-align: left"}),{id:e,name:t,color:l,flame:s,best:r,time:o,autoDone:u,upgradeEffects:y,voidDecayed:n,display:B(()=>a(R,null,[a(mt,{resource:s,color:l},null),U(D),a("br",null,null),a("br",null,null),a("table",null,[a("tbody",null,[a("tr",null,[p.map(M=>a("td",null,[U(M)]))]),a("tr",null,[b.map(M=>a("td",null,[U(M)]))])])])])),treeNode:N,upgradesR1:p,upgradesR2:b}});const Wo=z({props:{visibility:{type:E(Number),required:!0},display:{type:E(Object,String,Function),required:!0},title:{type:E(Object,String,Function),required:!0},color:E(String),collapsed:{type:Object,required:!0},style:E(Object,String,Array),titleStyle:E(Object,String,Array),bodyStyle:E(Object,String,Array),classes:E(Object),id:{type:String,required:!0}},components:{Node:At,CollapseTransition:Ln},setup(e){const{title:t,display:l}=_e(e),n=Yt(t),s=Yt(l),r=h(()=>Kt[de.theme].mergeAdjacent);return{titleComponent:n,bodyComponent:s,stacked:r,unref:f,Visibility:I}}}),zo=e=>(_t("data-v-338c9154"),e=e(),kt(),e),Yo=zo(()=>g("span",{class:"toggle"},"\u25BC",-1));function Zo(e,t,l,n,s,r){var c;const o=Fe("CollapseTransition"),u=Fe("Node");return e.unref(e.visibility)!==e.Visibility.None?(C(),q("div",{key:0,class:Ne(["infobox",{collapsed:e.unref(e.collapsed),stacked:e.stacked,...e.unref(e.classes)}]),style:ce([{borderColor:e.unref(e.color),visibility:e.unref(e.visibility)===e.Visibility.Hidden?"hidden":void 0},(c=e.unref(e.style))!=null?c:{}])},[g("button",{class:"title",style:ce([{backgroundColor:e.unref(e.color)},e.unref(e.titleStyle)||[]]),onClick:t[0]||(t[0]=d=>e.collapsed.value=!e.unref(e.collapsed))},[Yo,(C(),j(fe(e.titleComponent)))],4),a(o,null,{default:K(()=>[e.unref(e.collapsed)?L("",!0):(C(),q("div",{key:0,class:"body",style:ce({backgroundColor:e.unref(e.color)})},[(C(),j(fe(e.bodyComponent),{style:ce(e.unref(e.bodyStyle))},null,8,["style"]))],4))]),_:1}),a(u,{id:e.id},null,8,["id"])],6)):L("",!0)}var Ko=ne(Wo,[["render",Zo],["__scopeId","data-v-338c9154"]]);const Jo=Symbol("Infobox");function pt(e){const t=je(!0);return Le(()=>{const l=e();return l.id=He("infobox-"),l.type=Jo,l[Ae]=Ko,l.collapsed=t,P(l,"visibility"),le(l,"visibility",I.Visible),P(l,"color"),P(l,"style"),P(l,"titleStyle"),P(l,"bodyStyle"),P(l,"classes"),P(l,"title"),P(l,"display"),l[Ve]=function(){const{visibility:n,display:s,title:r,color:o,collapsed:u,style:c,titleStyle:d,bodyStyle:y,classes:w,id:p}=this;return{visibility:n,display:s,title:r,color:o,collapsed:u,style:f(c),titleStyle:d,bodyStyle:y,classes:w,id:p}},l})}const $n=Ge("lore",()=>{const e="lore",t="Lore",l="#f4d4ff",n=[pt(()=>({visibility:I.Visible,color:"#000000",title:"The Beginning",display:B(()=>a(R,null,[v("So... you're telling me that I can make my own universe? Sweet!"),a("br",null,null),a("br",null,null),v("No, I'm not going to back down just because I'm younger than you, let me have this."),a("br",null,null),a("br",null,null),v("Great! So, I can just take these tools and get started then?"),a("br",null,null),a("br",null,null),v("Alright, here goes!"),a("br",null,null)])),titleStyle:{color:"white"}})),pt(()=>({visibility:We(()=>pe(k.milestones[0].earned.value)),color:"#ffd500",title:"A New Particle",display:B(()=>a(R,null,[v("Ooh I have news for you! I found a new primordial particle!"),a("br",null,null),a("br",null,null),v("Oh... you've already heard of this one? I thought I made some kind of discovery..."),a("br",null,null),a("br",null,null),v("Yes, I did expect a universe to be normally made of only three particle types, thank you."),a("br",null,null),a("br",null,null),v("Ugh I guess I'll just keep building this thing then, maybe you could tell me things like this a little sooner next time?"),a("br",null,null)])),style:{color:"black"}})),pt(()=>({visibility:We(()=>pe(k.milestones[2].earned.value)),color:"#03f4fc",title:"Frozen Solid",display:B(()=>a(R,null,[v("Oh let me guess, this one was already discovered too, right?"),a("br",null,null),a("br",null,null),v("See, I knew it. Damn discovering new things is harder than I thought."),a("br",null,null),a("br",null,null),v("I guess particles that make things cold aren't really all that interesting, and are probably completely useless, but hey why not put them in too, right?"),a("br",null,null),a("br",null,null),v("Time to keep making this boring universe..."),a("br",null,null)])),style:{color:"black"}})),pt(()=>({visibility:We(()=>pe(k.milestones[3].earned.value)),color:"#ffffff",title:"Self Sustaining",display:B(()=>a(R,null,[v("Ah, my universe has finally reached the point where it can generate its own particles! This has gotta be revolutionary, right?"),a("br",null,null),a("br",null,null),v("No? You're saying that self-sustaining universes already exist? Ughhhh what does it take to make something new?"),a("br",null,null),a("br",null,null),v("Nah, I'll be able to make something unique, you may think it's all been done before but I'm sure I'll stumble upon something unique soon."),a("br",null,null),a("br",null,null),v("You don't have to believe in me, just let me prove you wrong."),a("br",null,null)])),style:{color:"black"}})),pt(()=>({visibility:We(()=>pe(k.milestones[6].earned.value)),color:"#ffd1fb",title:"Sustenance of the Universe",display:B(()=>a(R,null,[v("Oh, so now I discover Air Particles? I would've thought that was needed sooner, no? How can Flame Particles exist without some air to keep them alive?"),a("br",null,null),a("br",null,null),v("You're saying that there aren't rules here yet? I mean I guess I never actually made those, but who cares? There should be some default rules to keep things making sense, right?"),a("br",null,null),a("br",null,null),v("No? I mean that could result in some wacky worlds, couldn't it? Don't we want some kind of order in the multiverse?"),a("br",null,null),a("br",null,null),v("Okay okay, jeez you don't have to yell, I know I shouldn't be asking these things, I was just saying-"),a("br",null,null),a("br",null,null),v("Ugh fine, I guess I'll just keep building the world like you asked, but could I get some answers later?"),a("br",null,null),a("br",null,null),v("Sweet! Thanks for the free motivation!"),a("br",null,null)])),style:{color:"black"}})),pt(()=>({visibility:We(()=>pe(k.milestones[11].earned.value)),color:"#733000",title:"A Dense Mind",display:B(()=>a(R,null,[v("Yet another fundamental base for any universe, huh. I was really hoping to find something interesting, something I haven't heard of being in a universe before..."),a("br",null,null),a("br",null,null),v("You may think that, but there are certainly more combinations of particles in a universe than universes in the cosmos, or at least I assume as much."),a("br",null,null),a("br",null,null),v("Oh, so you're telling me you know everything then? No. If I don't know anything than neither do you, so don't claim otherwise."),a("br",null,null),a("br",null,null),v("Ugh whatever, I'm tired of talking at you. Can't you just have me talk with one of your assistants or something? I'm sure you have a few to spare."),a("br",null,null),a("br",null,null),v("Nobody cares about that tired old protocol, dammit, I'm bored and I could use someone else to talk to. Eh regardless, I guess I'll just keep going for now, but please just get me someone, thanks."),a("br",null,null)])),style:{color:"black"}})),pt(()=>({visibility:We(()=>pe(k.milestones[15].earned.value)),color:"#03fca9",title:"Brought Together",display:B(()=>a(R,null,[v("Wait you're still here? Fine I guess I'll suffer through you for the time being if you're really going to be like that."),a("br",null,null),a("br",null,null),v("Whatever. So it seems I can combine particles into molecules now? That's pretty sick, but I'd say it's something that exists in other universes too, right?"),a("br",null,null),a("br",null,null),v("Yep, thought so. I'm glad I didn't get my hopes up for this one. That being said, this is pretty great, there are countless combinations to make now!"),a("br",null,null),a("br",null,null),v(`Oh? So you're telling me that I don't have enough combinators to make "countless combinations"? Damn you're always making things less interesting...`),a("br",null,null),a("br",null,null),v("Whatever. Enjoy your quiet time while I do all the work. I know you're technically my boss but cmon, you could help a little. Anyways, time to make some molecules, I guess."),a("br",null,null)])),style:{color:"black"}})),pt(()=>({visibility:We(()=>pe(k.milestones[23].earned.value)),color:"#ff9100",title:"Heartfelt Emotion",display:B(()=>a(R,null,[v("Ooh, so I can use these to strengthen molecules?"),a("br",null,null),a("br",null,null),v("Look, I'm tired of your sass, okay? Just let me have a fun time with this, or literally just leave, I couldn't care less."),a("br",null,null),a("br",null,null),v("Wait really? You'll actually leave? Damn okay, I guess I'll be alone in this universe then, just me and the hundred quadrillion particles I create every second..."),a("br",null,null),a("br",null,null),v("Alright, enjoy your vacation or whatever, I'll keep building this universe I guess."),a("br",null,null),a("br",null,null),v("Wait, you'll actually send one of your assistants to keep me company? Wow I'm excited, I'll have someone fun to talk to!"),a("br",null,null),a("br",null,null),v("Good! If you don't like them, I probably will, so please, send them over as soon as possible. Goodbye forever!"),a("br",null,null)])),style:{color:"black"}})),pt(()=>({visibility:We(()=>pe(k.milestones[32].earned.value)),color:"#ffffff",title:"Correction Major",display:B(()=>a(R,null,[v("Hello! Yes I'm the one making the universe here! Maybe I'm just a novice, but that's what you're here for, right?"),a("br",null,null),a("br",null,null),v("Wait what? You're saying that I'm underqualified for this? How dare you, just because I skipped half of my classes doesn't mean-"),a("br",null,null),a("br",null,null),v("Oh, you meant that I need experience before I can make a universe here? But to get experience I'd need to make a universe, right?"),a("br",null,null),a("br",null,null),v("So I need experience to make a universe, but need to make a universe to have experience. Jeez, I'm no million-year-old genius but that sounds like a paradox to me."),a("br",null,null),a("br",null,null),v("No, you cannot take control of this operation, it's mine! You have no authority here, so leave or I'll throw over a septillion particles at you! That oughta leave a dent!"),a("br",null,null),a("br",null,null),v("Yeah you're right, that's barely anything, but still! You have no right! I'll mind my business, and you mind yours! Or you could actually do your job and help me out here!"),a("br",null,null),a("br",null,null),v("Well, I guess it's time to add something to help people sense the world around them, huh... What shall I do..."),a("br",null,null)])),style:{color:"black"}})),pt(()=>({visibility:We(()=>pe(k.milestones[44].earned.value)),color:"#240040",title:"All is Lost",display:B(()=>a(R,null,[v("Huh? What is that thing? Dark matter? I thought that was just something scientists made up to confuse teenagers!"),a("br",null,null),a("br",null,null),v("I guess it's a real thing then, does that mean that this weird particle just... made its way into my universe?"),a("br",null,null),a("br",null,null),v("Yes it's my universe, we've been over this. Point is, we have a problem on our hands. I thought the Light Particles would be enough to deal with this, but I guess not."),a("br",null,null),a("br",null,null),v("I have no clue what this particle is going to do, but it seems... angry. I know that makes no sense, since particles can't be angry, but-"),a("br",null,null),a("br",null,null),v("Oh, so now you think I'm crazy? Alright then, maybe I am, one particle can't do anything too bad, can it? There's clearly nothing to worry about."),a("br",null,null),a("br",null,null),v("Oh wait it just moved, oh no there's a lot to worry about. Time to delete this thing from my universe!"),a("br",null,null),a("br",null,null),v("Why... won't... it... just... die! I'll need to find another way...")])),style:{color:"white"},titleStyle:{color:"white"}}))],s=Je(()=>({layerID:e,display:"L",color:l}));return{id:e,name:t,color:l,loreData:n,treeNode:s,display:B(()=>a(R,null,[a("table",null,[a("tbody",null,[n.map(r=>a(R,null,[gt(r),a("div",{style:"margin-top: 0.5em;"},null)]))])])]))}}),Xo=function(e,t){k.milestones[12].earned.value?_o(e,t):Vr(e,t)},re=Ge("main",()=>{const e=Q(10,"particles",2),t=dt(e),l=pr(e),n=h(()=>{let c=new i(0);return we.upgradesR1[0].bought.value&&(c=c.plus(we.upgradeEffects[0].value)),we.upgradesR2[2].bought.value&&(c=c.plus(we.upgradeEffects[5].value)),c=c.plus(Se.buyableEffects[0].value),c=c.plus(i.floor(Be.bubbles.value)),De.lightningSel[0].value&&(c=c.plus(De.clickableEffects[0].value)),c=c.plus(qe.baseGainAdded.value),c=c.plus(se.multiBuyableEffects[0].value),k.milestones[32].earned.value&&(c=c.plus(Re.lightBuyableEffects[1][1].value)),c}),s=h(()=>{let c=i.dOne;return c=c.times(Ue.tornadoEff.value),k.milestones[19].earned.value&&(c=c.plus(i.mul(.05,i.floor(Be.floods.value)))),c}),r=h(()=>{const c=n.value;let d=i.pow(c,s.value);return we.upgradesR1[1].bought.value&&(d=d.times(we.upgradeEffects[1].value)),d=d.times(Se.buyableEffects[1].value),De.lightningSel[1].value&&(d=d.times(De.clickableEffects[1].value)),De.lightningSel[3].value&&(d=d.times(De.clickableEffects[3].value)),k.milestones[7].earned.value&&(d=d.times(i.pow(Be.torrentEff.value.plus(1),i.floor(Be.torrents.value)))),i.gte(se.multiBuyables[1].value,1)&&k.milestones[15].earned.value&&(d=d.times(se.multiBuyableEffects[1].value)),i.gte(qe.gridLevel.value,16)&&(d=d.times(qe.particleGainMult.value)),k.milestones[32].earned.value&&(d=d.times(Re.lightBuyableEffects[0][1].value)),k.milestones[50].earned.value&&(d=d.times(k.adv51eff.value)),d});me.on("update",c=>{e.value=i.add(e.value,i.times(r.value,c))});const o=yr(e,r),u=Or(()=>({nodes:()=>[[we.treeNode,Se.treeNode,Be.treeNode],[qe.treeNode,De.treeNode,Ue.treeNode,he.treeNode],[Re.treeNode,So,Pe.treeNode],[se.treeNode]],leftSideNodes:[k.treeNode,$n.treeNode],rightSideNodes:[Et.treeNode],branches:()=>{const c=[];return he.treeNode.visibility.value==I.Visible&&c.push({startNode:he.treeNode,endNode:Be.treeNode}),Ue.treeNode.visibility.value==I.Visible&&c.push({startNode:Ue.treeNode,endNode:Se.treeNode}),qe.treeNode.visibility.value==I.Visible&&c.push({startNode:qe.treeNode,endNode:we.treeNode}),se.treeNode.visibility.value==I.Visible&&(c.push({startNode:se.treeNode,endNode:qe.treeNode}),c.push({startNode:se.treeNode,endNode:De.treeNode}),c.push({startNode:se.treeNode,endNode:Ue.treeNode}),c.push({startNode:se.treeNode,endNode:he.treeNode})),Re.treeNode.visibility.value==I.Visible&&c.push({startNode:Re.treeNode,endNode:De.treeNode,stroke:"#999999"}),Pe.treeNode.visibility.value==I.Visible&&c.push({startNode:Pe.treeNode,endNode:Ue.treeNode,stroke:"#999999"}),c},onReset(){e.value=[we.treeNode,Se.treeNode,Be.treeNode].some(c=>Zl(this.resettingNode.value)===Zl(c))?0:10,t.value=e.value,l.value=e.value},resetPropagation:Xo}));return{name:"Tree",links:u.links,display:B(()=>a(R,null,[Ce(a("div",null,[v("Game Paused")]),[[Ee,O.devSpeed===0]]),Ce(a("div",null,[v("Dev Speed: "),A(O.devSpeed||0,2),v("x")]),[[Ee,O.devSpeed&&O.devSpeed!==1]]),Ce(a("div",null,[v("Offline Time: "),_l(O.offlineTime||0)]),[[Ee,O.offlineTime!=null]]),a("div",null,[Ce(a("span",null,[v("You have ")]),[[Ee,i.lt(e.value,"1e1000")]]),a("h2",null,[ue(e.value)]),Ce(a("span",null,[v(" particles")]),[[Ee,i.lt(e.value,"1e1e6")]])]),Ce(a("div",null,[v("[Base Gain: "),A(n.value,2),v("/s"),Ce(a("span",null,[v("\xA0\u2192 "),A(i.pow(n.value,s.value),2),v("/s")]),[[Ee,i.gt(s.value,1)]]),v("]")]),[[Ee,i.gt(n.value,0)&&i.neq(n.value,r.value)]]),Ce(a("div",null,[v("("),o.value,v(")")]),[[Ee,i.gt(r.value,0)]]),a(mr,null,null),U(u)])),particles:e,particleGain:r,baseGain:n,baseGainExp:s,best:t,total:l,oomps:o,tree:u}}),Qo=e=>[re,we,Se,Be,k,$n,De,he,Ue,qe,se,Re,Pe,Et],Tn=h(()=>i.gte(re.particleGain.value,i.dInf));function eu(e,t){var n,s,r,o,u,c;const l=t.layers;ko("1.1",e)&&(((n=l==null?void 0:l.li)==null?void 0:n.lightningSel)!==void 0&&typeof l.li.lightningSel==typeof Number&&(l.li.lightningSel={0:l.li.lightningSel==0,1:l.li.lightningSel==1,2:l.li.lightningSel==2,3:l.li.lightningSel==3}),((s=l==null?void 0:l.f)==null?void 0:s.upgradesR1)!==void 0&&(l.f.upgradesR1=el(l.f.upgradesR1)),((r=l==null?void 0:l.f)==null?void 0:r.upgradesR2)!==void 0&&(l.f.upgradesR2=el(l.f.upgradesR2)),((o=l==null?void 0:l.l)==null?void 0:o.buyables)!==void 0&&(l.l.buyables=el(l.l.buyables)),((u=l==null?void 0:l.e)==null?void 0:u.grid)!==void 0&&(l.e.grid=el(l.e.grid)),((c=l==null?void 0:l.adv)==null?void 0:c.milestones)!==void 0&&(l.adv.milestones=el(l.adv.milestones))),t.layers=l}function tu(e,t){t.modVersion=ae.versionNumber}var Dn=Object.freeze(Object.defineProperty({__proto__:null,main:re,getInitialLayers:Qo,hasWon:Tn,fixOldSaveEarly:eu,fixOldSave:tu},Symbol.toStringTag,{value:"Module"}));const cl=e=>(_t("data-v-4a50ce42"),e=e(),kt(),e),lu={class:"game-over-modal-header"},nu=["src","alt"],iu={class:"game-over-modal-title"},su=cl(()=>g("h2",null,"Congratulations!",-1)),au={key:0},ru=cl(()=>g("br",null,null,-1)),ou=cl(()=>g("div",null," Please check the Discord to discuss the game or to check for new content updates! ",-1)),uu=cl(()=>g("br",null,null,-1)),cu=["href"],du=cl(()=>g("span",{class:"material-icons game-over-modal-discord"},"discord",-1)),fu=z({setup(e){const{title:t,logo:l,discordName:n,discordLink:s,versionNumber:r,versionTitle:o}=ae,u=h(()=>_l(O.timePlayed)),c=h(()=>Tn.value&&!O.keepGoing),d=Dt(O,"autosave");function y(){O.keepGoing=!0}function w(){Rt(Wt())}return(p,b)=>(C(),j(Lt,{"model-value":f(c)},{header:K(()=>[g("div",lu,[f(l)?(C(),q("img",{key:0,class:"game-over-modal-logo",src:f(l),alt:f(t)},null,8,nu)):L("",!0),g("div",iu,[su,g("h4",null,"You've beaten "+ie(f(t))+" v"+ie(f(r))+": "+ie(f(o)),1)])])]),body:K(({shown:m})=>[m?(C(),q("div",au,[g("div",null,"It took you "+ie(f(u))+" to beat the game.",1),ru,ou,uu,g("div",null,[g("a",{href:f(s),class:"game-over-modal-discord-link"},[du,v(" "+ie(f(n)),1)],8,cu)]),a(yt,{title:"Autosave",modelValue:f(d),"onUpdate:modelValue":b[0]||(b[0]=N=>Oe(d)?d.value=N:null)},null,8,["modelValue"])])):L("",!0)]),footer:K(()=>[g("div",{class:"game-over-footer"},[g("button",{onClick:y,class:"button"},"Keep Going"),g("button",{onClick:w,class:"button danger"},"Play Again")])]),_:1},8,["model-value"]))}});var mu=ne(fu,[["__scopeId","data-v-4a50ce42"]]);const Sl=e=>(_t("data-v-3de07c06"),e=e(),kt(),e),vu=Sl(()=>g("div",{class:"nan-modal-header"},[g("h2",null,"NaN value detected!")],-1)),pu={key:0},gu=Sl(()=>g("br",null,null,-1)),hu=["href"],yu=Sl(()=>g("span",{class:"material-icons nan-modal-discord"},"discord",-1)),bu=Sl(()=>g("br",null,null,-1)),wu={class:"nan-footer"},Nu=z({setup(e){const{discordName:t,discordLink:l}=ae,n=Dt(O,"autosave"),s=Dt(ve,"hasNaN"),r=x(null),o=h(()=>{var b;return(b=ve.NaNPath)==null?void 0:b.join(".")}),u=h(()=>{var b;return(b=ve.NaNPath)==null?void 0:b.slice(-1)[0]}),c=h(()=>ve.NaNReceiver&&u.value?ve.NaNReceiver[u.value]:null),d=h({get(){return O.devSpeed===0},set(b){O.devSpeed=b?null:0}});function y(){ve.NaNReceiver&&u.value&&(ve.NaNReceiver[u.value]=new i(0),ve.hasNaN=!1)}function w(){ve.NaNReceiver&&u.value&&(ve.NaNReceiver[u.value]=new i(1),ve.hasNaN=!1)}function p(){ve.NaNReceiver&&u.value&&(ve.NaNReceiver[u.value]=new i(NaN),ve.hasNaN=!1)}return(b,m)=>(C(),q(R,null,[a(Lt,Nt({modelValue:f(s),"onUpdate:modelValue":m[4]||(m[4]=N=>Oe(s)?s.value=N:null)},b.$attrs),{header:K(()=>[vu]),body:K(()=>[g("div",null,[v(' Attempted to assign "'+ie(f(o))+'" to NaN',1),f(c)?(C(),q("span",pu,ie(" ")+"(previously "+ie(f(A)(f(c)))+")",1)):L("",!0),v(". Auto-saving has been "+ie(f(n)?"enabled":"disabled")+". Check the console for more details, and consider sharing it with the developers on discord. ",1)]),gu,g("div",null,[g("a",{href:f(l),class:"nan-modal-discord-link"},[yu,v(" "+ie(f(t)),1)],8,hu)]),bu,a(yt,{title:"Autosave",modelValue:f(n),"onUpdate:modelValue":m[0]||(m[0]=N=>Oe(n)?n.value=N:null)},null,8,["modelValue"]),f(ae).enablePausing?(C(),j(yt,{key:0,title:"Pause game",modelValue:f(d),"onUpdate:modelValue":m[1]||(m[1]=N=>Oe(d)?d.value=N:null)},null,8,["modelValue"])):L("",!0)]),footer:K(()=>[g("div",wu,[g("button",{onClick:m[2]||(m[2]=N=>{var D;return(D=r.value)==null?void 0:D.open()}),class:"button"},"Open Saves Manager"),g("button",{onClick:y,class:"button"},"Set to 0"),g("button",{onClick:w,class:"button"},"Set to 1"),f(c)&&f(i).neq(f(c),0)&&f(i).neq(f(c),1)?(C(),q("button",{key:0,onClick:m[3]||(m[3]=N=>s.value=!1),class:"button"}," Set to previous ")):L("",!0),g("button",{onClick:p,class:"button danger"},"Ignore")])]),_:1},16,["modelValue"]),a(kn,{ref_key:"savesManager",ref:r},null,512)],64))}});var _u=ne(Nu,[["__scopeId","data-v-3de07c06"]]);const ku={key:0,class:"tpsDisplay"},Cu={key:0,class:"low"},Su=z({setup(e){const t=h(()=>i.div(ve.lastTenTicks.length,ve.lastTenTicks.reduce((r,o)=>r+o,0))),l=x([]);nt(()=>{l.value.push(Math.round(t.value.toNumber())),l.value.length>10&&(l.value=l.value.slice(1))});const n=h(()=>l.value.reduce((r,o)=>i.max(r,o),0)),s=h(()=>i.sub(t.value,n.value).gt(1));return(r,o)=>f(t).isNan()?L("",!0):(C(),q("div",ku,[v(" TPS: "+ie(f(ue)(f(t)))+" ",1),a(Bl,{name:"fade"},{default:K(()=>[f(s)?(C(),q("span",Cu,ie(f(ue)(f(n))),1)):L("",!0)]),_:1})]))}});var Mu=ne(Su,[["__scopeId","data-v-46a3ed5b"]]);var Pu=z({setup(e){const t=ae.useHeader,l=h(()=>Kt[de.theme].variables),n=Dt(de,"showTPS"),s=h(()=>H(B(()=>a(R,null,[Wi.map(U)]))));return(r,o)=>(C(),q(R,null,[g("div",{id:"modal-root",style:ce(f(l))},null,4),g("div",{class:Ne(["app",{useHeader:f(t)}]),style:ce(f(l))},[f(t)?(C(),j(Cn,{key:0})):L("",!0),a(fr),f(f(n))?(C(),j(Mu,{key:1})):L("",!0),a(mu),a(_u),(C(),j(fe(f(s))))],6)],64))}});var Iu=ne(Pu,[["__scopeId","data-v-9417972e"]]);function $u(e={}){const{immediate:t=!1,onNeedRefresh:l,onOfflineReady:n,onRegistered:s,onRegisterError:r}=e;let o,u;const c=async(d=!0)=>{d&&(o==null||o.addEventListener("controlling",y=>{y.isUpdate&&window.location.reload()})),u&&u.waiting&&await Wn(u.waiting,{type:"SKIP_WAITING"})};if("serviceWorker"in navigator){o=new Hn("./sw.js",{scope:"./",type:"classic"}),o.addEventListener("activated",d=>{d.isUpdate||n==null||n()});{const d=()=>{l==null||l()};o.addEventListener("waiting",d),o.addEventListener("externalwaiting",d)}o.register({immediate:t}).then(d=>{u=d,s==null||s(d)}).catch(d=>{r==null||r(d)})}return c}function Tu(e={}){const{immediate:t=!0,onNeedRefresh:l,onOfflineReady:n,onRegistered:s,onRegisterError:r}=e,o=x(!1),u=x(!1);return{updateServiceWorker:$u({immediate:t,onNeedRefresh(){o.value=!0,l==null||l()},onOfflineReady(){u.value=!0,n==null||n()},onRegistered:s,onRegisterError:r}),offlineReady:u,needRefresh:o}}document.title=ae.title;window.projInfo=ae;if(ae.id==="")throw"Project ID is empty! Please select a unique ID for this project in /src/data/projInfo.json";requestAnimationFrame(async()=>{console.log(`%cMade in Profectus%c
Learn more at www.moddingtree.com`,"font-weight: bold; font-size: 24px; color: #A3BE8C; background: #2E3440; padding: 4px 8px; border-radius: 8px;","padding: 4px;"),await Ui();const{globalBus:e,startGameLoop:t}=await gl(()=>Promise.resolve().then(function(){return Gi}),void 0),l=window.vue=Vn(Iu);e.emit("setupVue",l),l.mount("#app"),wt(()=>{const n=nn(),{updateServiceWorker:s}=Tu({onNeedRefresh(){n.info("New content available, click or reload to update.",{timeout:!1,closeOnClick:!1,draggable:!1,icon:{iconClass:"material-icons",iconChildren:"refresh",iconTag:"i"},rtl:!1,onClick(){s()}})},onOfflineReady(){n.info("App ready to work offline")},onRegisterError:console.warn,onRegistered(r){r&&setInterval(r.update,60*60*1e3)}})}),t()});
